8
1
0
2

v
o
N
9

]

R
T
.
n
i
f
-
q
[

1
v
6
6
7
3
0
.
1
1
8
1
:
v
i
X
r
a

Endogeneous Dynamics of Intraday Liquidity

Miko(cid:32)laj Bi´nkowski1 and Charles-Albert Lehalle2,3

1Department of Mathematics, Imperial College London
2Capital Fund Management, Paris
3CFM-Imperial Institute of Quantitative Finance

November 12, 2018

Abstract

In this paper we investigate the endogenous information contained in four liquidity variables at a
ﬁve minutes time scale on equity markets around the world: the traded volume, the bid-ask spread,
the volatility and the volume at ﬁrst limits of the orderbook.
In the spirit of Granger causality,
we measure the level of information by the level of accuracy of linear autoregressive models. This
empirical study is carried out on a dataset of more than 300 stocks from four diﬀerent markets (US,
UK, Japan and Hong Kong) from a period of over ﬁve years. We discuss the obtained performances
of autoregressive (AR) models on stationarized versions of the variables, focusing on explaining the
observed diﬀerences between stocks.

Since empirical studies are often conducted at this time scale, we believe it is of paramount im-
portance to document endogenous dynamics in a simple framework with no addition of supplemental
information. Our study can hence be used as a benchmark to identify exogenous eﬀects. On an-
other hand, most optimal trading frameworks (like the celebrated Almgren and Chriss one), focus on
computing an optimal trading speed at a frequency close to the one we consider. Such frameworks
very often take i.i.d. assumptions on liquidity variables; this paper document the auto-correlations
emerging from real data, opening the door to new developments in optimal trading.

Thanks to our auto-regressive modeling of these liquidity variables at ﬁve minutes time scale,
we identify and comment stylized facts in the scope of intraday dynamics: a “tick size eﬀect” (the
smaller the bid-ask spread in ticks, the more diﬃcult to predict the bid-ask spread and the easier
to predict the volume at ﬁrst limits using AR models), a “liquidity eﬀect” (correlation between the
market capitalization of a stock and the amplitude of the ﬁrst coeﬃcient of an AR model for most
liquidity variables, independently of the geographical zone), and a “country-driven eﬀect” (out of
sample R2 of AR models on intraday volatility are larger in the US than in Asia, Europe being in
between; and a similar geographical ranking for the improvement of using VAR in place of AR models
to predict traded value each ﬁve minutes). Last but not last, we use Granger’s χ2 causality test to
identify that valuable information is contained in the past of all four variables to predict each of
them: VAR models are more eﬃcient than simple AR models, and the number of informative lags
spans from half an hour to more than two hours, depending on the characteristics of the considered
stock. We call this property a “memory eﬀect”.

1

Introduction

The raise of electronic trading not only increased the traded volumes and decreased the bid-ask spread,
but also increased the trading frequencies [24]: market makers are now High Frequency Market Makers
[35] (as an example: Barclays, Goldman Sachs and Bank of America have been replaced in 2016 by Global
Trading Systems, Virtu Financial, KCG Holdings and IMC as the only four designated market makers
of the New York stock exchange [34]), traders use smart order routers and trading algorithms to seek
liquidity and schedule large orders [32], while investors reassess more frequently their decisions. The mix
of these diﬀerent ﬂows shapes liquidity dynamics, and liquidity dynamics drives trading costs and the
capability to invest at a predictable price (see [4, 9, 41] for details about dynamics of the market impact
of large orders).

A better understanding of liquidity dynamics is hence of paramount importance for intermediaries,
investors and regulators [31]. Some academic studies focus on very high frequency dynamics, the most
celebrated family being the use of Hawkes processes (see [5], [28] or [21]) to explain high frequency price

1

 
 
 
 
 
 
moves (and hence intraday volatility) using the list of past events aﬀecting the orderbook (transactions,
cancellations, price moves, etc). Another high frequency approach is driven by looking at the transitions
from one state of the orderbook to another, typically using a Markov chain on queue sizes (see [26] or
[12]). Both approaches underline the role of the recent past of liquidity in explaining its future state.
These results show that the endogenous component of liquidity dynamics cannot be neglected1. Because
of the analysis of high frequency data is intensively CPU and memory consuming, these studies usually
focus on few typical stocks or futures, having a “large tick” (i.e. an average value of the bid-ask spread
in ticks being lower than 1.3).

In the context of econometrics, academic paper usually prefer to use “bins” of data, typically under-
sampling price dynamics at a 5 minutes frequency2. A typical metric used in such papers is the variance
ratio (for instance 30 minutes volatility divided by 5 minutes volatility), as an indirect indicator of the
ratio of exogenous over endogenous part of price dynamics (see [22] or [36] and references herein). Some
papers build ad hoc models, like [7] that combines a PCA on previously traded volume on forty French
liquid stocks (the components of the CAC 40 index in September 2014) and an ARMA model to predict
the volume traded during the next ﬁve minutes. Another example is [8], in which authors focus on exoge-
nous shocks on liquidity. All these papers implicitly assume autocorrelation (or not) of their variables of
interest, without providing stable reference statistics over a large universe of stocks, covering more than
one geographical zone.

Another important ﬁeld relying on ﬁve-minute to one-hour “bins” of liquidity characteristics is optimal
trading. Most optimal trading (or optimal liquidation) algorithms used by market participants focus at
this kind of time scale [32, Chapter 3]. Very few papers in optimal trading include autocorrelations in their
theoretical framework, simply because of the mathematical complexity generated by path-dependence for
stochastic control. Correlations between diﬀerent liquidity-related variables have been used (see [30])
and some path dependencies have been recently introduced (see [2] for Hawkes process, [33] for Ornstein-
Uhlenbeck information on prices, and [10] to account for ﬂow driven autocorrelations).

Last but not least, practitioners use TCA (Transaction Cost Analysis, see [40] and [29]) to assess
the quality of the execution their brokers provided, and the eﬃciency of their own dealing desks. Very
often the TCA reports are made of plain averages, which can be completely misleading in presence of
autocorrelations. Primarily, TCAs aim to isolate the adequacy of some trading choices, given the expected
state of liquidity on the given day. Ignoring autocorrelations distorts the reference expectations.

This paper is dedicated to establish benchmark models on intraday liquidity dynamics at this inter-
mediate time scale (few times 5 minutes), so that speciﬁc studies or TCA using this nature of data can
use our ﬁndings as a worldwide compass.

Our basic methodology is to systematically ﬁt linear models on time series of liquidity related variables;
and to exhibit and comment on the obtained results. Our goal is on the one hand to document the liquidity
dynamics at this intermediate scale to provide a benchmark for further analyses and on the other hand
to compare the results between stocks and across geographical zones.

By “endogenous dynamics”, we mean that our models only use the past values of the explained
variables as regressors: they do not use any database of external market events or fundamental news
dataset on the considered stocks. By “linear dynamics”, we mean we only use vectorial or scalar standard
autoregressive models [3].

Thanks to Wold theorem, it is well known any centered weakly stationary process can be decomposed
into a regular part and a singular part, and that in non-degenerate cases they can be ﬁt on the right
and left terms of an ARMA (AutoRegressive Moving Average) process [3]. We restrict our analysis on
ARMA(p, 1) models, meaning we will only allow a white noise on the right side of the ARMA. This choice
is driven by the fact it is very diﬃcult to compare an ARMA(p1, q1) and an ARMA(p2, q2), but easier
to compare an ARMA(p1, 1) and an ARMA(p2, 1). As a consequence, the reader should keep in mind
that some of the obtained models could be replaced by full ARMA ones. When it is possible to ﬁt a
full ARMA instead of an AR, the ﬁrst parameter p of the obtained full ARMA will probably be a little
smaller than ours, at the cost of replacing our white noise by a colored one3.

Another viewpoint on our approach would be to consider our models as “linear ﬁlters” on liquidity
variables rather than the best possible models of their dynamics. In this spirit of ﬁltering we will use
Cross Validation to choose the number of lags of our AR or VAR models. This technique is widely used
in the statistical learning community to choose the number of parameters (i.e. “hyperparameters”) of a

1Exogenous shocks aﬀect liquidity dynamics too; [37] underlines the added value of news in Hawkes models
2The noticeable exception is [6], using bins not in minutes but in traded volume.
3An ARMA(p, q) and an ARMA(p(cid:48), 1) both properly ﬁtted on the same empirical time series will usually verify p ≤ p(cid:48)

(see for instance [18] for an illustration of switching from AR modeling to full ARMA modeling ).

2

model (like the number of units of a neural network) [14].

Our liquidity-driven variables of interest are the following quantities, estimated on consecutive bins

of ﬁve minutes from the opening to the closing of trading sessions:

•

•

•

•

the traded value (or “turnover”), i.e. is the value (in the local currency) of the shares traded; we
use the turnover instead of the number of shares to be robust to split or reverse splits,

the average bid-ask spread (sampled just before each transaction in the considered bin),

the “volume on the book” (average of the best ask volume and the best bid volume just before each
trade in the bin),

the Garman-Klass estimate of the volatility4 that uses the open, high, low and close prices of the
bin.

We use the data aggregated from trading venues hosting more than 1% of the traded value on each
considered stock. This means we mix trades done on Nyse, BATS and NASAQ for the same stocks in
the US, and we use the consolidated tape5 to compute the bid-ask spreads. Our database of 300 stocks
covers UK, US and Asian stocks and spans ﬁve years from 2011 to 2016.

We systematically ﬁt AR models on each of them (i.e. predicting the next value of the variable using its
own past) and VAR models on each of their combinations (i.e. predicting the future of each variable using
the past of a subset of all variables). The contributions of this paper include several stylized facts that
show diﬀerences as well as interdependencies between studied variables across diﬀerent markets. Firstly,
large-tick stocks have more predictable book size and less predictable spread, volatility and turnover,
than the small-tick stocks, given their immediate past; we call this a tick size eﬀect. Secondly, volatility
and turnover are also subject to the liquidity eﬀect: the higher the market capitalization of a stock in a
considered market, the shorter the memory in these features.

Thirdly, there exist diﬀerences that could be named country-driven in the structures of the markets,
that we call a liquidity eﬀect. US stocks carry more endogenous information than stocks from the
other markets and have shorter memory. UK stocks have varying informational content, independent
on individual liquidity and tick size. Asian stocks, on their side, carry less endogenous information
and have longer memory. We focus on a representation of such characteristics (amount of endogenous
information and memory) with respect to the relative capitalization of the considered stocks inside each
country. This representation succeeds in explaining the amount of endogenous information and the length
of the memory for the volatility, the traded volume and the book size. Lastly, we observe the memory
eﬀect. Volatility has shorter memory and often carries whole informational content of all considered
variables, i.e. information on the other variables’ past does not improve prediction of volatility. In terms
of Granger causality6 (see [19]), volatility and turnover are less often caused by the the other variables’
immediate past, than the opposite.

The paper is structured as follows: we start by detailing the variables, the databases and the pre-
processing (e.g. stationarizing the time series) in Section 2. Section 3 provides detailed results on few
well-chosen stocks and comments them. We conclude in Section 4 by the presentation of empirical ﬁndings
on the whole dataset, and put the emphasis on few stylized facts: the liquidity eﬀect, the tick-size eﬀect,
and a country-driven eﬀect. We end this last section by the study of what we call a memory eﬀect: using
VAR in place of AR models reduces the needed lags to achieve the same level of explanation.

2 Methodology and Database

2.1 Liquidity Driven Variables

Although liquidity is crucially important for all market participants, the way it might be quantiﬁed varies
by asset and depends on the investors priorities. As a consequence, a number of liquidity measures has
been established within the ﬁnancial industry (see [13] for an industry-driven study on liquidity). They
attempt to build proxies for transaction costs an average investor is expected to face. As a consequence,
they have to reﬂect the cost of trading a very small number of shares (or contracts) on the one hand, and

4cf. [17]; this estimate is robust and very close in practice to more sophisticated ones, like [42] or [38].
5When no consolidated tape exists, like in Europe, we consolidate the bid and ask of trading venues ourselves, using

timestamps provided by markets.

6It is not the ﬁrst time Granger causality is studied on ﬁve-minute intervals. For instance [16] tested it on the joined

volume - volatility dynamics and found some on the US market.

3

measure the depth available to large investors on the other hand. For order book driven markets, the
former is often measured via the bid-ask spread (the atomic cost of instantaneously buying and selling one
share), and the latter is meant to be related to the volume in the book (i.e. the average size available to
trade at these prices). Since implicit transaction costs7 can be mitigated by trading slowly, other metrics
refer to the rhythm or speed of the considered market. Traded value and volatility during a reference time
interval are typical measures of this kind. As a consequence, we have chosen four quantitative measures
that seem to be the most important features of liquidity:

•

•

•

Bid-ask spread (ψ), also known as tightness of the order book, is the diﬀerence between the best
available ask and bid prices in the limit order book. It describes the cost of completing immediately
an order of a number of shares not exceeding the depth on the corresponding ﬁrst nonempty price
limit. As we consider 5-minute bins, the bid-ask spread at the start of each bin is taken as the value
of the variable.

Traded value/turnover (V ), can be deﬁned as the total value of trades carried out within speciﬁed
period. The big turnovers usually suggest high trading velocity, as well as lower costs of carrying
(d, τ ) denote τ -th 5-minute time bin on day d.8 The traded value is given
out large orders. Let
by

B

V (d, τ ) =

q(tk)p(tk),

(1)

(cid:88)

tk∈B(d,τ )

where (tk) is the series of all consecutive transactions times (date-times), while q(t) and p(t) are
respectively traded quantity and traded price recorded at time t.9

Volatility (σ). From a number of diﬀerent estimators of this primary feature, we decided to use the
Garman-Klass volatility, also known as OHLC volatility 10. Note that the microstructure noise in
5-min time-scale has considerable impact on the price variations and therefore the na¨ıve estimator
would inevitably be biased (see [42] for details on the eﬀect of microstructure noise on volatility
estimation).

Let h = max
{

p(tk) : tk
∈ B}
(d, τ ) and let o = p(inf

=

p(tk) : tk
, l = min
{

), c = p(sup

) denote the opening and closing mid-prices for

be the high and low traded prices in the bin
. The

∈ B}

B

B

B
Garman-Klass volatility estimator for the bin
2 log2 (cid:0) h

ˆσ2(d, τ ) = 1

B

B

l

B
(cid:1)

is given by

(2 log(2)

−

1) log2 (cid:0) c

o

(cid:1) .

(2)

−

•

Book size (B) is the amount of shares available at the best bid and best ask levels. The depth of the
ﬁrst-level queue shows roughly how long it is needed to wait for a new limit order to be executed
and hence enables a trader to asses the trade-oﬀ between the price and immediacy of transaction. It
also shows how big market orders can be carried out at the best available price, without additional
costs of consuming liquidity on higher/lower price levels.

Other quantities of interest include the Free Float value, i.e. the share of stocks owned by public
investors, and the average bid-ask spread in ticks ψ∗, i.e. the ratio of bid-ask spread and tick size. The
latter is important as it lets us distinguish between small-tick stocks (ψ∗ (cid:38) 2) and large-tick stocks
(ψ∗ (cid:46) 1.3). The diﬀerence between the distributions of asset returns of small and large-tick stocks is
widely known (e.g.
[15]), therefore we shall be interested in the potential diﬀerences and dependencies
between the aforementioned variables in the context of spread/tick relation.

2.2 Dataset Description

The dataset used in this work comes from the recording of market data made by Capital Fund Man-
agement (CFM) for research purposes. The original data consists of tick-by-tick records from real-time
data feeds connected to each trading venue, stored in binary format and then, when needed, consolidated
according to a timestamp provided by each trading venue, recording the time at which the data has been

7We will not address explicit transaction costs in this paper; they consist of fees, taxes and ﬁnancing or borrowing costs.
8i.e. B(d, τ ) = [t, t + ∆τ ), t = d · ∆d + t0 + τ · ∆τ , where ∆d = 24h, ∆τ = 5min and t0 is opening time, dependent on

the market.

9For convenience, we put p(t) = p(max{tk : tk ≤ t}).
10Open-High-Low-Close volatlity; in fact, Garman-Klass volatility is the best unbiased analytic scale-invariant estimator
based on these four variables, and has 7.4 higher eﬃciency relative to na¨ıve volatility estimator (in terms of estimator
variance). For further information see [17].

4

emitted by the venue. Using these raw data, we rearranged them in ﬁve minute bins to compute our four
liquidity variables.

Only data coming from the continuous auction phases have been used. It means we excluded the
large trades of call auctions and the published inconsistent bids and asks during the pre-auction phases
(at the open and at the close for all of them, and around the lunch break in our two Asian markets
(before and after this break on the Tokyo Stock Exchange and at the start of this break on the Hong
Kong exchange). We also do not use any data from the lunch breaks present at Asian markets. As a
consequence, we have roughly 80 bins in US, 100 bins in the UK, and 60 bins in Asian markets, per
day (see [32] for details on each market). Half-days of trading (like Christmas) are excluded from the
database, but late opening days are included. When there is a trading halt, the reopening call auctions
are not taken into account, and bins with no trades (waiting for the re-opening) are excluded, but we
can have bins that have been opened to trading only for few seconds or minutes11. We have no way to
identify explicitly circuit breakers, as a consequence we cannot provide any statistics on their activation.
For each stock, each bin is labelled by the day and the time of the day; it allows to make intraday
medians of Figure 1, and to study the intraday seasonality. Our dataset covers period of January 2011 to
March 2016; Note this is posterior to the implementation of Reg NMS (and the subsequent decimalization,
see [23]) in the US and MIFID (and the associated fragmentation, see [32]) in Europe. Table 1 provides
descriptive statistics with a breakdown by country; the main remark is that despite a large range of
bid-ask spread in basis points, the bid-ask spread in ticks is less diverse from one zone to another, with
Hong-Kong stocks being mainly “large tick stocks”. Moreover, we have more US stocks (202) that UK
ones (98), and fewer Hong-Kong and Japan stocks (51). To account for microstructure and regulation
diversity, we will most often provide breakdowns by country.

For Section 4.1, we needed capitalisation of listed companies. That for we used average capitalisation
over the period, and the dataset we use are the one provided by the exchanges, that have been recorded
by Capital Fund Management.

location

total number of stocks

Hong Kong

Japan

11

40

avg. number of days
avg. total number of 5-minute bins (datapoints)
max. number of bins per day
avg. number of bins per day

avg. bid-ask spread (bp)
avg. bid-ask spread (ticks)
avg. GK volatility (bp2/bin)

avg. book size ($ million)

(large-tick stocks)
(small-tick stocks)

(large-tick stocks)
(small-tick stocks)

avg. book size (in avg. trade size)

avg. turnover ($ million)

(large-tick stocks)
(small-tick stocks)

(large-tick stocks)
(small-tick stocks)

966
63,730
66
65.94

17.48
1.10
9.45
9.45
-
5.16
5.16
-
52.3
52.3
-
9.73
9.73
-

934
55,890
60
59.81

19.30
1.44
12.44
12.47
12.17
89.32
167.30
28.42
89.7
192.0
17.3
186.62
193.10
93.61

UK

98

1101
110,400
102
100.3

US

202

1241
96,780
78
77.96

6.76
1.54
8.63
7.57
9.27
5.95
10.51
2.02
18.7
28.3
13.2
38.99
44.05
23.01

3.55
1.71
11.46
12.39
10.93
0.09
0.12
.054
21.3
31.9
4.7
1.20
0.89
2.48

Table 1: Dataset statistics per location. Values in all but ﬁrst row are averages across all stocks per each
country. Note that all of the available stocks from Hong Kong were large-tick stocks.

2.3 Preprocessing

Data cleaning.
In the preprocessing stage, after estimation of all four variables over 5-minute bins,
data normalization was carried out. Firstly, for each of the stocks, the trading days for which less than

11if a circuit-breaker is activated and the market has be reopened and is ready to trade few seconds before the end of a

bin.

5

AstraZeneca (UK)

3M

FUJIFILM (UK)

Cathay Paciﬁc Airways

Figure 1: Median, 25% and 75% quantiles for our four liquidity variables on AstraZenaca (UK stock),
3M (US Stock), FUJIFILM (Japanese Stock), Cathay Paciﬁc Airways (Hong Kong Listed stock). The
vertical units are chosen such that the average value of the day is 1; on the horizontal axis we use the
“bin number” (the consecutive number of non empty 5 minutes bins); meaning during the Tokyo or Hong
Kong lunch break we do not count any “bin”, but we use a blank vertical line to position the lunch break.

80% of the total number of bins was available12 were completely removed. Secondly, the zero values for
volatility (i.e. when there is no trade during 5 minutes, the volatility is by deﬁnition zero) have been
substituted with the minimum value higher than threshold (cid:15) = 10−6 observed within the same or the
previous day (separately for each stock). This ensured that all of the variables were positive-valued.

Stationarization.
It is well known liquidity variables have an intraday seasonality (see for instance
[32], or Figure 1): the volatility and the traded volume are higher immediately after the opening, and
quite ﬂat during the mid-day. At the end of the day the traded volumes increase, forming a “U-shape”;
the volatility too, but less sharply.

For European stocks the opening of US market triggers a jump in volatility and volume. The disclosure
of macro-economic news on US markets (like the non farm payrolls), one hour before the openning of US
markets, impacts traded volumes and volatility too.

Fundamental reasons support a relation between the bid-ask spread and the volatility: market par-
ticipants acting as market makers (or at least providing liquidity, i.e. contributing to the bid-ask spread)
fear market risk (see [25] for an economic explanation and [20] for an applied mathematical one); thus
theory predicts the bid-ask spread is large when the volatility is high.
It is not that true before the
trading closes, since liquidity providers targeting a ﬂat inventory at the end of the day have an incentive

12Bins might be unavailable due to trading halt or technical reasons.

6

20406080100012345TradedQuantity204060801000123456VolatilityGK204060801000123456AvgBA-spread204060801000.00.51.01.52.02.5AvgSizeatﬁrstlimit102030405060700.00.51.01.52.02.53.03.54.0TradedQuantity102030405060700.00.51.01.52.02.53.03.5VolatilityGK1020304050607001234AvgBA-spread102030405060700.00.51.01.52.02.5AvgSizeatﬁrstlimit102030405060012345678TradedQuantity10203040506001234VolatilityGK1020304050600.00.51.01.52.02.5AvgBA-spread1020304050600.00.51.01.52.02.53.0AvgSizeatﬁrstlimit1020304050600.00.51.01.52.02.53.03.54.0TradedQuantity10203040506001234567VolatilityGK1020304050600.00.51.01.52.02.53.03.5AvgBA-spread1020304050600.00.51.01.52.02.5AvgSizeatﬁrstlimitto tighten the bid-ask spread, attempting to obtain the fee rebate for limit orders, instead of consuming
liquidity via marketable orders, paying fees.

The bid-ask spread is moreover bounded by the tick size (i.e. the minimum allowed price increase,
see [27] for a discussion about the inﬂuence of the tick size on the bid-ask spread). Because of the
impossibility for liquidity providers to post limit orders inside the bid-ask spread (and thus tighten it)
when the spread value is one tick, they tend to post more quantity at existing ﬁrst limits (on bid and
ask sides). As a consequence the average size on ﬁrst limits (i.e. our book size variable) increases. The
book size and the bid-ask spread hence usually vary an opposite way: when the bid-ask spread is large
the book size is small, and the reverse.

These eﬀects introduce typical intraday seasonalities; it is needed to remove them to focus on dynamics
around this average behaviour. Since all variables are positive, we take their logarithm to symmetrize
them and then we remove the seasonality. Using the notation x(d, τ ) for the value of variable x on day
d at bin τ (i.e. hour is τ0 + δτ
τ , where τ0 is the opening hour and δτ is our bin size –5 minutes–), the
pre processing is then

·

y(d, τ ) := f (x(d, τ )) = log x(d, τ )

−

1
D
(cid:124)

D
(cid:88)

log x(d(cid:48), τ )

,

d(cid:48)=1

(cid:123)(cid:122)
log ¯x(τ )

(cid:125)

computed over all the available days D on our dataset. Figure 2 shows the eﬀects of the stationarization
procedure on Dahaner Corp. stock (US traded stock).

Figure 2: Estimated density functions of the distributions of the original variables (left), after taking
logarithms (middle) and after deseasonalization (right) for Dahaner Corp. The original variables have
highly skewed distributions and take values in very diﬀerent orders of magnitude, hence the densities in
the left plot are not-to-scale.

2.4 Metrics and Methodology

We aim to assess the endogenous information in the scope of the four aforementioned market features. To
understand how the information is propagated within market, we will use univariate (AR) and multivari-
ate (VAR) linear autoregressive models. Although these classes of models are basic and their capacity to
reﬂect the relationships between the variables may be limited, they are well studied and commonly used
in ﬁnancial modeling. Ultimately, they let us establish the benchmark lower estimate for the endogenous
information, measured as proposed in the above section.

Metrics of performance and model selection. Since the preprocessed data is in a time series form,
the estimation of an autoregressive model requires selection of lag (the model’s order), which is often
carried out using Akaike or Bayesian Information Criteria 13. However, we aim to measure what can
be predicted using the past data rather than to ﬁnd the model that is statistically most reasonable.
Therefore, we treat the number of model parameters as a secondary factor, and compare the performance
of all of the models of lags up to 40. For each stock and variable, the best model is being selected in
accordance with the out-of-sample R2 statistic for the variable’s prediction. Note that the VAR model
normally would achieve diﬀerent R2 for each of the variables it comprises.

13See [1] and [39].

7

original variablesvolatilityspreadturnoverbook size1510505101520250.00.51.01.52.02.5log - variablesvolatilityspreadturnoverbook size2.01.51.00.50.00.51.01.52.00.00.51.01.52.02.5deseasonalized log - variablesvolatilityspreadturnoverbook sizeIn the univariate approach we used standard maximum-likelihood estimator
Estimation procedure.
of the AR model, separately for each variable. In the multivariate case, VAR models were estimated with
all possible subsets of variables. For each prediction task14 the best (subset, lag) pair15 was selected.
Figure 14 presents how frequently each subset of input variables achieved the best results, while Figure
15 shows the most frequently chosen lags.

To reduce variance of the estimator and standardize the estimation procedure for time-series of dif-
ferent lengths, models were trained and validated separately on 20 partially overlapping batches. Each
of the batches contained 150 consecutive training days (i.e. between 9,000 and 15,000 consecutive bins)
and another 150 following days that were used for validation. The starting points of the batches were
equally distributed, so the ﬁrst batch contained beginning of the available period, while the last one - the
end of the period.

3 Stylized facts and benchmark results

The linear autoregressive models form standard and well studied class of predictive models that are able
to capture linear dependence between variables. Their simple yet powerful form makes them usual ﬁrst
candidate for the benchmark solution in modeling time series data.

Figure 3: Autocorrelation (blue diamonds) and partial autocorrelation (red circles) functions of each of
the variables for Welltower Inc.

After preprocessing that eliminated seasonality and transformed positive-valued variables into real-
valued ones, the data has appropriate form for autoregressive modeling. For that approach to make sense,
the time series need to exhibit nonzero autocorrelation structure. Although these vary considerably, the
positive autocorrelation can be observed for all stocks and variables; an example is presented in Figure
3.

3.1 Univariate autoregressive modeling

The resulting R2 statistics varied across the variables and stocks; Table 2 presents prediction results
averaged for diﬀerent markets.
In general, the endogenous information increases with the size of the
market. Each of the considered liquidity variables can usually be predicted most accurately for US

14Single prediction task was speciﬁed by a stock and a variable. Note that for VAR models, each combination of variables

count as one prediction task.

15 Following machine learning naming, each such pair will be refereed to as the hyperparameters of our model.

8

R2 of AR models
Variable

volatility

avg. bid-ask spread

book size

traded value

US

UK

Japan

Hong Kong

0.448
(0.045)
0.523
(0.129)
0.640
(0.173)
0.408
(0.090)

0.208
(0.099)
0.380
(0.159)
0.535
(0.104)
0.205
(0.084)

0.143
(0.047)
0.195
(0.098)
0.440
(0.154)
0.130
(0.076)

0.102
(0.026)
0.096
(0.054)
0.659
(0.075)
0.116
(0.056)

Table 2: Results of univariate prediction across diﬀerent markets and variables. The presented values
are the average R2’s and standard deviations of R2 (in parentheses) of the best models on out-of-sample
validation sets across stocks in each market.

stocks, followed by those from UK, and ending on Asian ones. The exception can be observed for the
book size of the Hong Kong stocks, which can be predicted with R2 of 65.9%, which is very close to US
stocks (R2

64%).

Volatility appears to be the variable for which the achievable predictive power (i.e. R2) is the most
stable across the stocks on each market. The markets, however, vary between each other and the average
predictability is on diﬀerent levels. It is worth to notice that the UK stocks have more variable endogenous
information and their R2 spans between 0 and 40%. More details will be presented in the section 4.3.

≈

Another factor that distinguishes volatility from the other variables is the market memory. As our
approach involved the grid search of the best performing model across diﬀerent hyperparameter settings,16
the lag of the model indicates how far in the past a signiﬁcant information can be found. The US and
UK stocks models required considerably less lagged values to achieve the best performance for volatility
than for the other variables17.

The limit order book dynamics is dependent on the tick size of the particular stock18. This has a
direct eﬀect on spread prediction itself, as well as on a book size. The explained variance of the book size
is approximately inverse-proportional to the spread in ticks, and hence is high for the large-tick stocks
and low for small-tick stocks.

3.2 Correlation analysis.

Analysis of the correlations between the features observed at the same time or with a delay naturally
extends the univariate approach. The positive correlation of volatility and traded volume is a known
stylized fact (See [11]) In this section we consider the dependencies between the market features. Figure
4 presents the correlations between variables and their delayed values for a sample stock. In general,
the cross-variable correlation structure varies considerably by stock. Nevertheless, the strong positive
correlation is often observed between volatility and traded volume, while the book size is negatively
correlated with the other features.

The correlation structure between time series is closely related with Granger causality. Let us recall

that the time series X G-causes time series Y if the vector-autoregressive model

Xt =

p
(cid:88)

i=1

(At−iXt−i + Bt−iYt−i) + (cid:15)t

ﬁts the data more closely than the univariate AR model

Xt =

p
(cid:88)

i=1

A(cid:48)

t−iXt−i + (cid:15)(cid:48)
t,

(3)

(4)

16A single setting was determined by lag number and set of explanatory variables, see Section 2.4.
17Moreover, the multivariate models usually did not improve the volatility performance, on the contrary to the other

features. See sections 4.4 and 3.3 for more details.

18Let us recall that we consider a stock as a small-tick stock ( large-tick stock, respectively) if its avg. spread in ticks

ψ∗ (cid:38) 2 (ψ∗ (cid:46) 1.3, respectively.).

9

Figure 4: Pearson correlations between the variables and their (ﬁrst nine) lagged values.

where p is the lag, Ai, Bi, A(cid:48)
t are the error terms. The goodness
of ﬁt is measured in that case by the variance of the error terms, which is linked directly with the R2
statistic19.

i are the estimated parameters and (cid:15)t, (cid:15)(cid:48)

Therefore, the comparison of multivariate and univariate models performance will enable us to better
understand the relationships between the variables in the context of causality. Note, that the only
diﬀerence between our approach and classical approach to Granger causality is that we choose the best
model parameters in accordance with the out-of-sample R2 instead of the in-sample.

3.3 VAR (Vector Auto-Regressive) model

Despite the fact that the considered features measure incomparable quantities represented in diﬀerent
units, these variables are correlated and as will be shown later, modeling them together using simple
linear model can improve prediction of their future values.

In general, we can observe that the VAR models achieved slightly higher explained variance than
univariate models in US and UK, yet the improvement was rarely signiﬁcant and sometimes not present
at all. For instance, the AR models of volatility usually outperformed VAR models. This means that
volatility time series often possesses all the endogenous information needed to predict its future, and the
rest of variables do not cause volatility in the sense of Granger. Interestingly, this is not the case for the
other features.

On the other hand, in many cases the performance close to the univariate benchmark can be achieved
by multivariate models of considerably smaller lag. This eﬀect is especially vital for book size and turnover
in US and UK, and is presented in the Figure 5.

There were, however, situations where VAR model yielded better performance than univariate. For
most of the stocks in Hong Kong and a group of large-tick stocks in Japan more accurate predictions of
turnover and book size were obtained. Lag improvement was also more common on the Asian markets.

10

Figure 5: Sample performance curves for large-tick Vodafone UK stock. Each of the plots presents the
R2 statistic for one of the variables, achieved by diﬀerent AR/VAR models with increasing lags. Each
line corresponds to a certain set of explanatory variables. The higher-lag models overﬁt volatility and
turnover, but perform well for spread and book size. Note the small diﬀerences between multivariate
models.

Figure 6: Average value of traded value (left) and book size (right) compared to the Market Capitalization
(MC) of the stock. MC are normalized a cross-sectional way, on each zone. One can see the average
traded value is clearly linked to the capitalization.

4 Identiﬁed eﬀects: New Stylized Facts on Liquidity

4.1 Liquidity eﬀect

Towards a better deﬁnition of liquidity. Up to now we used our four variables (traded value,
volatility, Bid-Ask spread and volume at ﬁrst limits) as a proxy to the “market liquidity”: the liquidity
available to trade for investors on electronic markets during the continuous auctions. On each of them,
we built dynamical models made of one intraday seasonality times a proportional auto-regressive part:

x(d, τ ) = ¯x(τ )

(cid:89)

·

k

(cid:18) x(d, τ
¯x(τ

k)
k)

(cid:19)Ak

e(cid:15)(d,τ ).

·

−
−

Practitioners often to measure the liquidity of a stock as its free ﬂoat market capitalization: since

19The statistic is given by R2 = 1 − V AR((cid:15))/V AR(X). Since the variance of data does not depend on the model, there

is one-to-one correspondence between these performance measures.

11

05101520253035400.300.320.340.360.380.40R squared(σ) volatility{σ}{σ,V}{σ,ψ,V}{σ,ψ,B,V}05101520253035400.500.520.540.560.580.60(ψ) spread{ψ}{ψ,B}{σ,ψ,B}{σ,ψ,B,V}0510152025303540model order0.600.620.640.660.680.70R squared(B) book size{B}{σ,B}{σ,ψ,B}{σ,ψ,B,V}0510152025303540model order0.300.320.340.360.380.40(V) turnover{V}{σ,V}{σ,ψ,V}{σ,ψ,B,V}Vodafone UK (spread/tick 1.17)−1.5−1.0−0.50.00.51.01.52.0MeanofTradedvalue(normalized)10−1100101Avg.marketcap.(normalized)JPUKUS−1.5−1.0−0.50.00.51.01.52.0MeanofAvgSizeatﬁrstlimit(normalized)10−1100101Avg.marketcap.(normalized)JPUKUSthis market capitalization is the amount of dollars that can be traded (on the paper), it is natural to
believe the more of such “tradable dollars”, the easier of an investor to buy or sell a position, and hence
the more “liquid ” the stock. Figure 6 shows the relationship between our four variables and the average
market capitalization of our Japanese, British and American stocks from June 2011 to March 2016. The
of the variable is computed during the whole period for each stock k of zone20 z, it is
average value
then cross-renormalized:

is replaced by

x(k, z)

x
(cid:105)

(cid:104)

(cid:104)

(cid:105)

x(k, z)

R(
(cid:104)

) = (cid:104)
(cid:105)

x(k, z)

(cid:105) −
stdk(cid:48)

meank(cid:48)

(cid:104)
x(k(cid:48), z)
(cid:105)
(cid:104)

x(k(cid:48), z)

,

(cid:105)

where the mean and std are computed over all the stocks of the same zone. The market capitalization
C(k, z) is cross-renormalized too, dividing it by its standard deviation of all the stocks of the same zone.
One can clearly see the relation between the average traded value in ﬁve minutes and the capitalization
of the stock. The relation is similar across zones. For the other variables, there is no relationship between
their average value during ﬁve minutes and the capitalization of the traded stock.

Figure 7: First value of an AR models (x-axis) for volatility (left) and book size (right) compared to the
Market Capitalization (MC) of the stock. MC are normalized a cross-sectional way, on each zone.

Memory length of intraday short term variations. One of our ﬁndings is that the modeling of
oscillations around the intraday seasonality exhibits a dependence to market capitalization. Figure 7
shows how the market capitalization of a stock as a function of the ﬁrst coeﬃcient a0 of an AR model21
ﬁtted on our variables dynamics at ﬁve minutes (once deseasonalized).

Note λ can be read as “the larger λ, the shorter memory”. Our ﬁndings are thence: the more
liquid in the capitalization sense, the shorter term memory of volatility and traded value around the
intraday seasonality; and the more liquid in the capitalization sense, the less dependence to past values
in amplitude too.

Summary of the “Liquidity Eﬀect”. These ﬁndings are compatible with the following hypothesis:
if a liquid stock sees its volatility or traded value going away from its “usual behavior”, the faster it
will come back to normal. It is weakly true for the Bid-Ask spread (probably the discrete and bounded
nature of the spread forces its dynamics to be similar for most stocks, somehow independently from the
market capitalization of the stock). The tick size is certainly of paramount importance in shaping the
short term dynamics of the Bid-Ask spread (see the “tick eﬀect” documented in the next Subsection).
Nor the dynamics of volume on ﬁrst limits or even its average value is disconnected from the market
capitalization of the traded stock.

4.2 Tick size eﬀect

In this section we discuss endogenous information in the context of avg. bid-ask spread in tick size. We
deﬁne the former as the explained variance – the R2 statistic – achievable by an autoregressive model
in prediction of the future values given the variable immediate past. The latter variable is often used
to segment stocks according to the role the bid-ask spread is playing in the microstructure of their limit
order books. For the large-tick stocks the value of average bid-ask spread to tick size is small (lower than
1.3) which means that often there is no empty price limit between the best bid and best ask prices, as

20zone is Amerian, Japan or UK.
21with the following notation (cid:80)P

i=0 aiXt−i = ε(t).

12

0123456Coef0ofAR(VolatilityGK),normalized10−1100101Avg.marketcap.(normalized)JPUKUS0123456Coef0ofAR(AvgSizeatﬁrstlimit),normalized10−1100101Avg.marketcap.(normalized)JPUKUSFigure 8: Memory term λ ﬁtted on an AR model (x-axis) for traded value (left) and avg. bid-ask spread
(right) compared to the Market Capitalization (MC) of the stock. MC are normalized a cross-sectional
way, on each zone.

well as among several higher levels. This increases the importance of book size as a measure of liquidity
and market signiﬁcance of any price movement.

For small-tick stocks, on the contrary, the spread often stretches over several price levels, making the
book size less signiﬁcant, as liquidity providers submit orders on multiple price levels on each side. The
limit orders might also be submitted in between best-bid and best-ask prices, forming a new best-level.
The endogenous information of individual stocks is dependent on the average bid-ask spread in ticks

and particular variable.

For book size, the informational content of the past is highest for the large-tick stocks, with R2
between 60% and 90%. The statistic is negatively correlated with the spread in ticks but stabilizes at 20
to 40% for very small-tick stocks.

Figure 9: R2 in out-of-sample prediction of book size and spread across diﬀerent stocks from four markets.
Each point represents a single stock while it’s position indicates the values of achieved R2 and average
bid-ask spread in ticks.

All other variables show quite similar patterns. At each market, medium- and small-tick stocks had
similar levels of predictability, and higher than the ones of large-tick stocks, for which R2 stretched from
0 up to 70%.

These outcomes can easily be observed in Figure 9. Note that for the average bid-ask spread of large-
tick stocks, its poor predicting power might seem counter-intuitive, as the spread for such stocks for most
of the time is equal to one tick. This, however indicates that the distribution of spread, averaged over
5-minute bins, is less continuous and has signiﬁcant mass at 1 (see Figure 10), which limits the modeling
capabilities of linear regression models.

Moreover, as expected: the large-tick stocks have less volatile bid-ask spread. This has crucial impact
on R2, as this statistic is relative to the data deviations; namely, the less variance to predict, the more
accurate the predictions must be to retain the given level of R2. Hence, the large-ticks stocks may have
their spread predicted more accurately in absolute terms, despite achieving considerably low R2.

To sum up, the large-tick stocks have diverse informational content of the immediate past, generally
smaller for bid-ask spread and larger for book size, as compared with the medium- and small-tick stocks
of the same market.

13

0.020.040.060.080.100.120.140.160.18λofAR(Tradedvalue),normalized10−1100101Avg.marketcap.(normalized)JPUKUS0.000.050.100.150.20λofAR(AvgBA-spread),normalized10−1100101Avg.marketcap.(normalized)JPUKUS1.01.52.02.53.03.54.0avg. spread/tick0.00.20.40.60.81.0R squared() spread1.01.52.02.53.03.54.0avg. spread/tick0.00.20.40.60.81.0(B) book sizeUSUKJapanHong KongFigure 10: Sample distributions of the spread/tick for four diﬀerent stocks. The stock’s spread distribu-
tions have discrete probability mass, mostly at 1, that is decreasing with the increase of avg. spread/tick.
For the presented stocks it is equal to .44, .34, .14, .01, respectively. The number next to the stock name
shows the average spread/tick size.

4.3 Country-driven eﬀect

Results presented in Table 2, Figure 9 and Figure 11 legitimize a general observation that there is a
country-driven eﬀect:
in general, it is easier to predict the considered variables, given their immediate
past in the US than in the UK. It is worst for Asian stocks. This country-driven eﬀect is diﬃcult to
identify clearly; it is probably a mix of eﬀects, including capitalization of listed companies (that are on
average greater for the US than for the UK, and then for Japan and Hong-Kong, in general and thus
in our database too), and of the tick size. Regulations probably play a role as trading practices too22.
Although the achieved R2 varies by stock, on average the US stocks carry the highest informational
content, followed, with few exceptions, by UK, Japanese and Hong Kong stocks.

The UK market appears to have signiﬁcantly less structured relation between endogenous information
and the average spread in ticks, especially for volatility and bid-ask spread. While the stocks from the
other markets form clear clusters, for UK stocks the informational content of the past stretches from very
low to fairly high (R2 from 0 to .8), with little or no dependence on the avg. spread in ticks characteristic.
This eﬀect is not observed for the book size and was less signiﬁcant for the traded value.

Another diﬀerences between the markets can be observed for traded value. The smaller market, the
more signiﬁcant are the diﬀerences between univariate and multivariate models. In general, the VAR
model helps in lowering the lag23 rather than in attaining higher information content. This however is
not the case for traded value of Hong Kong and Japanese stocks, where the diﬀerence between AR and
VAR is signiﬁcant in terms of R2.

To conclude, the informational content of the the liquidity variables is dependent on the market. The
endogenous information of each variable is generally similar across the stocks traded in the same area
(except the UK), which might be related both to the internal regulations and to the market size.

14

Figure 11: R2 in out-of-sample prediction of
volatility across diﬀerent stocks from four markets.
Each point represents a single stock’s relationship
between average bid-ask spread in ticks and infor-
mational content of the immediate past.

Figure 12: Cumulative distribution functions of
R2 improvement (diﬀerence between VAR’s and
AR’s R2) for traded value. The distribution is es-
timated separately for each market on the improve-
ments obtained for single stocks from that market.
One may notice ’steps’ in the distribution for Hong
Kong, which occur due to lower number of stocks
from this market available for this study.

Figure 13: Results from Granger χ2 causality test for the ﬁrst 4 lags. The shade indicates the proportion
of stocks for which the null hypothesis (that there is causality between variables)) was retained under
longer time-span between the potential cause and the
signiﬁcance level of 0.001. For higher lags (i.e.
caused variable) more than 99% of tests retained the null hypothesis.

4.4 Memory eﬀect and causality

Causality test. The considered variables expose clear correlation structure between each other (See
Figure 4). To examine causality between these variables we carried out Granger χ2 causality tests,
separately for each stock, each pair of variables and each lag between them. As presented on Figure 13,
most of the tests retained null hypothesis that there is a causality between given variables, yet whenever
the lag, i.e. time diﬀerence between the (potential) cause and the dependent variable, was small, in some
cases (up to 15% of test) the null hypothesis was rejected. The higher the lag, the share of rejected tests
is smaller (less than 1% for lag 4, 0% for lags above 16).

This suggests that although the variables inﬂuence each other, the information between them is not
passed instantly. Moreover, the information passing is not symmetric. For instance, the traded value
G-causes the next value of bid-ask spread for almost all variables; the opposite is much less common (see
Figure 13).

The positive results from Granger test reaﬃrm the legitimacy of multivariate autoregressive modeling.

Given these, we discuss the choice of lag and its eﬀects on the results.

22Chapter 3 of [32] underlines trading algorithms using in these countries is diﬀerent, with more implementation shortfall

in the US, more VWAP in Europe and more Percentage of Volume in Asia.

23Note that as we compare one-dimensional and multi-dimensional autoregressive models, the lower lag does not neces-
sarily mean less parameters. Nevertheless, lag is related to the process’ memory and will be discussed further in the next
section.

15

1.01.52.02.53.03.54.0avg. spread/tick0.00.20.40.60.81.0R squared() volatilityUSUKJapanHong Kong0.000.020.040.060.080.10R squared improvement0.00.20.40.60.81.0VAR vs AR improvement for traded valueUSUKJapanHong KongB1V111causeVBcausedlag 1B2V222causeVBlag 2B3V333causeVBlag 3B4V444causeVBlag 488%90%92%94%96%98%100%location

model

Hong Kong

Japan

UK

US

AR VAR AR VAR AR VAR AR VAR

volatility
bid-ask spread
book size
traded value

31.5
38.3
24.1
32.7

25.5
24.4
5.6
17.6

31.7
33.6
34.4
38.2

22.6
24.9
14.0
23.2

13.9
29.4
33.8
35.1

12.8
22.7
14.4
22.4

14.9
18.2
29.2
18.4

10.7
14.9
10.8
8.0

Table 3: The average lags of the best AR and VAR models across diﬀerent variables and markets.

Choice of lag. The choice of the right number of lags is an important problem in autoregressive
modeling. As explained in Section 2, the criterion that we used for the selection of optimal lag was the
out-of-sample performance. Theoretically, extending the number of lags should not have the negative
impact on the performance. In practice, however, the models with higher numbers of parameters are
more prone to overﬁtting, which might be seen as inference from noise or local features present only in
the training set. As a consequence, the lags of the selected models were extended as long as the input
series carried more endogenous informational content.

This approach let us infer how many past observations of the series cause the current one, in the sense

of Granger, and hence discuss the ’market memory’ of each stock.

Figure 15 presents the distribution of the most informative lags among diﬀerent countries and target
variables. On average, the best models for bid-ask spread had on average signiﬁcantly higher numbers
of lags (18) than the other variables (12-14). These lags correspond to periods of 60 to 90 minutes.
However, for certain stocks and features, the numbers of lags were much lower or much higher, including
the maximal tested lag (40). Table 3 presents the average lags estimated for each country and variable
and compares with the respective results of univariate model.

One may notice that in some cases the results varied by location. For instance, the average lags for
American stocks were the lowest, for all the variables except the book size, where Hong Kong stocks had
exceptionally small average lag (˜5.6). On the other hand, the average lags for Japanese stocks were often
the highest. For volatility, the average lags among Asian stocks were twice as big as for UK and US
stocks.

We can also observe that in many cases VAR models reduce the lag signiﬁcantly. In many cases, quite
similar R2 was attained by both AR and VAR, yet the latter did not need to look as far back as the
former. This eﬀect was particularly apparent for book size for most of the stocks. For the other variables
it was observed less often. For instance, since for volatility the univariate models were usually preferable,
the VAR model rarely gave any advantage.

Choice of variables. The variables showed diﬀerent behavior in terms of preferred VAR model. As
mentioned before, for volatility, the most common best model was the univariate one, i.e. the other
variables often did not carry additional informational content on volatility. These variables, on the other
hand, showed more complicated, diverse relationships between each other. Although four-variable model
was often the model of choice (especially for bid-ask spread), for many stocks we observed VAR models
of one, two or three variables obtaining the highest out-of-sample R2. Figure 14 summarizes the models
that commonly attained the highest informational content of the past among studied stocks. Note that
the popularity of each model for a particular variable varied by geographical zone.

Overall, the bid-ask spread has longer memory than the other variables. The informational content of
the individual variables can stretch from 15 minutes to over 3 hours of their immediate past, but, except
for volatility, the same information can often be found in the lower lags of the other variables.

The plausible explanation for the diﬀerent behavior of volatility is that the other variables are en-
dogenous features the order book. Although their values also are dependent on the order ﬂow, volatility
might be more susceptible to the information exogenous to the microstructure of the market.

5 Conclusion

In this paper we present a systematic study of the endogenous dynamics of four liquidity variables at the
5 minutes time scales. Once we removed the intraday seasonality of the logarithms of the traded value,
the (Garman-Klass) volatility, the bid-ask spread and the size of the book (i.e. the average size at ﬁrst
limits), we model their dynamics a linear way (i.e. via AR or VAR models) using their own past and the

16

Figure 14: Distributions of the most-informative sets of explanatory variables for each of the explained
variables. Each of the 16 considered conﬁgurations is labeled by the symbols of variables it consisted
’σψBV ’ denotes the four-dimensional VAR model that included all of the variables: volatility,
of, e.g.
bid-ask spread, book size and turnover.

Figure 15: Distributions of the most-informative lags for each of the explained variables.

past of other variables. Hence our models focus on the multiplicative variations around the seasonality
of each variable. We used cross validation and took the out of sample R2 as our main criterion to draw
conclusion from this unique empirical study covering 300 worldwide stocks over ﬁve years.

We isolate some stylized facts:

•

•

•

A liquidity eﬀect: The larger the market capitalization of a stock, the smaller the length of the past
inﬂuencing volatility and traded value.

The informational content of the book size dynamics deeply relies on a “tick size eﬀect”, for all
zones, all stocks: the smaller the bid-ask spread in ticks, the easier to predict the book size.

A country-driven eﬀect: For the three other variables (volatility, traded value and bid-ask spread):
the length of the past needed to anticipate current value is far smaller for US stocks (around one

17

σVσψBVσ(σ) volatilityσψBσψBV(ψ) spread0%10%20%30%40%50%60%model frequencyBVψBVσψBσBVσψBV(B) book size0%10%20%30%40%50%60%model frequencyσVVψBVψVσψBVσBVBV(V) turnoverUSUKJapanHong Kong0102030405060708090frequency(σ) volatility0102030405060708090(ψ) spread 1- 5 6-1011-1516-2021-2526-3031-3536-40model lag0102030405060708090frequency(B) book size 1- 5 6-1011-1516-2021-2526-3031-3536-40model lag0102030405060708090(V) turnoverUSUKJapanHong Konghour) than for stock from other zones (around two and a half hour for UK and Asia). Moreover,
the informational content of the variables on their endogenous dynamics is higher on the US than
on other zones.

The speciﬁcity of US stocks dynamics is diﬃcult to explain. One explanation could be the US market
is faster than others, in terms of liquidity. But having an out of sample R2 twice higher in the US than
on other zones (i.e. it is easier to anticipate the future values of volatility, bid-ask spread and turnover
using their own past only) means more than just a speed diﬀerence.

Moreover, the volatility seems to be speciﬁc in the sense that

using other variables does not helps to anticipate volatility,

the quality of the anticipation of volatility dynamics does not vary a lot from one stock to another.

•

•

These two remarks could suggest that, once the seasonality is removed, volatility has a macroscopic
(systematic) meaning, quite disconnected from the dynamics of other liquidity variables.

In terms of the informational content of other variables:

•

•

•

•

In most cases: using not only the variable itself, but the other ones to model its dynamics decreases
the needed length of the past (i.e.
the memory), without really improving the quality of the
anticipation.

The turnover dynamics helps to predict the volume of the book ones,

and all other variables dynamics are needed to improve the knowledge of bid-ask spread dynamics.

The UK seems to be speciﬁc in the sense the causality between turnover and volume of the book
goes both ways: each of them signiﬁcantly helps to reduce the number of lags needed to anticipate
dynamics of the other.

Our results clearly exhibit auto-correlations between variables driving liquidity dynamics at the ﬁve-
minute time scale. Since most frameworks using for optimal trading and transaction cost analysis are
positioned at this scale, it could be good to consider to introduce our endogenous dynamics into these
frameworks. This opens a new direction of research.

References

[1] H. Akaike. Information theory and an extension of the maximum likelihood principle. 2nd Interna-

tional Symposium on Information Theory, pages 267–281, 1973.

[2] Aur´elien Alfonsi and Pierre Blanc. Dynamic optimal execution in a mixed-market-impact Hawkes

price model, April 2014. URL http://arxiv.org/abs/1404.0648.

[3] Robert Azencott and Didier Dacunha-Castelle. Series of Irregular Observations: Forecasting and
ISBN 0387962638. URL
Model Building (Applied Probability). Springer, 1 edition, June 1986.
http://www.amazon.com/exec/obidos/redirect?tag=citeulike07-20&path=ASIN/0387962638.

[4] Emmanuel Bacry, Adrian Iuga, Matthieu Lasnier, and Charles-Albert Lehalle. Market Impacts and
the Life Cycle of Investors Orders. Market Microstructure and Liquidity, 1(2), December 2015. URL
http://ssrn.com/abstract=2532152.

[5] Emmanuel Bacry, Iacopo Mastromatteo, and Jean-Fran¸cois Muzy. Hawkes Processes in Finance.
Market Microstructure and Liquidity, 01(01):1550005, 2015. doi: 10.1142/S2382626615500057. URL
http://www.worldscientific.com/doi/abs/10.1142/S2382626615500057.

[6] Kyle Bechler and Mike Ludkovski. Order ﬂows and limit order book resiliency on the meso-scale.

Market Microstructure and Liquidity, page 1850006, 2017.

[7] Jedrzej P. Bialkowski, Serge Darolles, and Ga¨elle Le Fol. Improving VWAP Strategies: A Dynamical

Volume Approach. Journal of Banking and Finance, 32(9):1709–1722, September 2008.

18

[8] Dion Bongaerts, Richard Roll, Dominik R¨osch, Mathijs A. Van Dijk, and Darya Yuferova. The
Propagation of Shocks Across International Equity Markets: A Microstructure Perspective. Social
Science Research Network Working Paper Series, August 2014. URL http://ssrn.com/abstract=
2475518.

[9] X. Brokmann, E. Serie, J. Kockelkoren, and J. P. Bouchaud. Slow decay of impact in equity markets,

July 2014. URL http://arxiv.org/abs/1407.3390.

[10] ´Alvaro Cartea and Sebastian Jaimungal. Incorporating Order-Flow into Optimal Execution. Social
Science Research Network Working Paper Series, January 2015. URL http://ssrn.com/abstract=
2557457.

[11] Rama Cont. Empirical properties of asset returns: stylized facts and statistical issues. Quantitative

Finance, 1:223–236, 2001.

[12] Rama Cont and Adrien De Larrard. Price Dynamics in a Markovian Limit Order Book Market.
SIAM Journal for Financial Mathematics, 4(1):1–25, January 2013. URL http://epubs.siam.
org/doi/abs/10.1137/110856605.

[13] Price W. Cooper. Global ﬁnancial markets liquidity study. Technical report, PwC, August 2015.

[14] Matthieu Cornec. Concentration inequalities of the cross-validation estimator for empirical risk
minimizer. Statistics, 51(1):43–60, January 2017. doi: 10.1080/02331888.2016.1261479. URL http:
//dx.doi.org/10.1080/02331888.2016.1261479.

[15] Gianbiagio Curato and Fabrizio Lillo. How Tick Size Aﬀects the High Frequency Scaling of Stock
Return Distributions, pages 55–76. Springer International Publishing, Cham, 2015. ISBN 978-3-319-
09946-0.

[16] Ali F Darrat, Shaﬁqur Rahman, and Maosen Zhong. Intraday trading volume and return volatility

of the djia stocks: A note. Journal of Banking & Finance, 27(10):2035–2043, 2003.

[17] Mark B. Garman and Michael J. Klass. On the Estimation of Security Price Volatility from Historical

Data. Journal of Business, 53(1):67–78, 1980.

[18] Matthieu Geist, Olivier Pietquin, et al. Kalman ﬁltering & colored noises: the (autoregressive)

moving-average case. In Workshop Proceedings of ICMLA 2011, number 9. Citeseer, 2011.

[19] Clive WJ Granger. Some recent development in a concept of causality. Journal of econometrics, 39

(1):199–211, 1988.

[20] Olivier Gu´eant, Charles-Albert Lehalle, and Joaquin Fernandez-Tapia. Dealing with the inventory
risk: a solution to the market making problem. Mathematics and Financial Economics, 4(7):477–507,
September 2013. URL http://arxiv.org/abs/1105.3115.

[21] Stephen J. Hardiman, Nicolas Bercot, and Jean-Philippe Bouchaud. Critical reﬂexivity in ﬁnancial

markets: a Hawkes process analysis, June 2013. URL http://arxiv.org/abs/1302.1405.

[22] Joel Hasbrouck. One Security, Many Markets: Determining the Contributions to Price Discovery.

The Journal of Finance, 50(4):1175–1199, 1995. URL http://www.jstor.org/stable/2329348.

[23] Terrence Hendershott, Charles M Jones, and Albert J Menkveld. Does algorithmic trading improve

liquidity? The Journal of Finance, 66(1):1–33, 2011.

[24] Terrence J. Hendershott, Charles M. Jones, and Albert J. Menkveld. Does Algorithmic Trading
Improve Liquidity? Social Science Research Network Working Paper Series, March 2008. URL
http://ssrn.com/abstract=1100635.

[25] Thomas Ho and Hans R. Stoll. Optimal dealer pricing under transactions and return uncertainty.
Journal of Financial Economics, 9(1):47–73, March 1981. URL http://ideas.repec.org/a/eee/
jfinec/v9y1981i1p47-73.html.

[26] Weibing Huang, Charles-Albert Lehalle, and Mathieu Rosenbaum. Simulating and analyzing order
book data: The queue-reactive model. Journal of the American Statistical Association, 10(509), De-
cember 2015. doi: 10.1080/01621459.2014.982278. URL http://dx.doi.org/10.1080/01621459.
2014.982278.

19

[27] Weibing Huang, Charles-Albert Lehalle, and Mathieu Rosenbaum. How to predict the consequences
of a tick value change? Evidence from the Tokyo Stock Exchange pilot program, July 2015. URL
http://arxiv.org/abs/1507.07052.

[28] Thibault Jaisson. Market activity and price impact throughout time scales. Theses, Ecole Polytech-

nique, October 2015. URL https://tel.archives-ouvertes.fr/tel-01212087.

[29] Robert Kissell, Morton Glantz, and Roberto Malamut. A practical framework for estimating trans-
action costs and developing optimal trading strategies to achieve best execution. Finance Research
Letters, 1(1):35–46, 2004. URL http://isiarticles.com/bundles/Article/pre/pdf/19891.pdf.

[30] Charle-Albert Lehalle. Rigorous optimisation of intra day trading. Wilmott Magazine, November

2008.

[31] Charles-Albert Lehalle.

liquidity. AMF Scientiﬁc Advisory
Board Review, 1(1):55–62, September 2014. URL https://fr.scribd.com/doc/265523446/
AMF-Scientific-Advisory-Board-Review-1.

Towards dynamic measures of

[32] Charles-Albert Lehalle and Sophie Laruelle, editors. Market Microstructure in Practice. World Sci-
entiﬁc publishing, 2013. URL http://www.worldscientific.com/worldscibooks/10.1142/8967.

[33] Charles-Albert Lehalle and Eyal Neuman. Incorporating Signals into Optimal Trading, April 2017.

URL http://arxiv.org/abs/1704.00847.

[34] Annie Massa.

January
high-speed-firms-now-oversee-almost-all-stocks-at-nyse-floor.

2016.

URL

High speed ﬁrms now oversee

at Nyse ﬂoor.
all
http://www.bloomberg.com/news/articles/2016-01-26/

almost

stocks

[35] Albert J. Menkveld. High Frequency Trading and The New-Market Makers. Journal of Financial
Markets, 16(4):712–740, November 2013. URL http://onlinelibrary.wiley.com/doi/10.1111/
fire.12038/abstract;jsessionid=FBAC8B08D47B2BBEFA3234320A59C381.f01t0.

[36] Christian Nguenang. Evaluating market’s contribution to price discovery in high-frequency for co-

listed assets. Technical report, SSRN, 2016.

[37] Marcello Rambaldi, Paris Pennesi, and Fabrizio Lillo. Modeling foreign exchange market activity
around macroeconomic news: Hawkes-process approach. Phys. Rev. E, 91:012819+, January 2015.
doi: 10.1103/physreve.91.012819. URL http://dx.doi.org/10.1103/physreve.91.012819.

[38] Christian Y Robert and Mathieu Rosenbaum. A new approach for the dynamics of ultra-high-
frequency data: The model with uncertainty zones. Journal of Financial Econometrics, 9(2):344–366,
2010.

[39] Gideon Schwarz. Estimating the dimension of a model. Ann. Statist., 6(2):461–464, 03 1978. doi:

10.1214/aos/1176344136. URL http://dx.doi.org/10.1214/aos/1176344136.

[40] Adam Sussman.

Imperfect Knowledge: International Perspectives on Transaction Cost Analysis.

Technical report, TABB Group, March 2008.

[41] Henri Waelbroeck and Carla Gomes. Is Market Impact a Measure of the Information Value of Trades?
Market Response to Liquidity vs. Informed Trades. Social Science Research Network Working Paper
Series, July 2013. URL http://ssrn.com/abstract=2291720.

[42] Lan Zhang, Per A. Mykland, and Yacine A¨ıt-Sahalia. A Tale of Two Time Scales: Determining Inte-
grated Volatility With Noisy High-Frequency Data. Journal of the American Statistical Association,
100(472), 2005.

20

