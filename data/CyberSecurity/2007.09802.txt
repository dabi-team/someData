Performance Evaluation of Differential Privacy
Mechanisms in Blockchain based Smart Metering

Muneeb Ul Hassan, Mubashir Husain Rehmani, and Jinjun Chen

1

0
2
0
2

l
u
J

9
1

]

R
C
.
s
c
[

1
v
2
0
8
9
0
.
7
0
0
2
:
v
i
X
r
a

The concept of differential privacy emerged as a strong notion to protect database privacy in an untrusted
environment. Later on, researchers proposed several variants of differential privacy in order to preserve
privacy in certain other scenarios, such as real-time cyber physical systems. Since then, differential privacy
has rigorously been applied to certain other domains which has the need of privacy preservation. One
such domain is decentralized blockchain based smart metering, in which smart meters acting as blockchain
nodes sent their real-time data to grid utility databases for real-time reporting. This data is further used to
carry out statistical tasks, such as load forecasting, demand response calculation, etc. However, in case if
any intruder gets access to this data it can leak privacy of smart meter users. In this context, differential
privacy can be used to protect privacy of this data. In this chapter, we carry out comparison of four variants
of differential privacy (Laplace, Gaussian, Uniform, and Geometric) in blockchain based smart metering
scenario. We test these variants on smart metering data and carry out their performance evaluation by
varying different parameters. Experimental outcomes shows at low privacy budget (ε) and at low reading
sensitivity value (δ), these privacy preserving mechanisms provide high privacy by adding large amount of
noise. However, among these four privacy preserving parameters Geometric parameters is more suitable
for protecting high peak values and Laplace mechanism is more suitable for protecting low peak values
at (ε = 0.01).

I. INTRODUCTION

Differential privacy have been proposed by C. Dwork in 2006, and since then it has been applied to
various domains to protect their privacy [1]. Differential privacy provides an insightful privacy deﬁnition
which can be used to perturb raw data records by adding an adequate amount of noise drawn from
respective distribution [2]. Informally, the notion of differential privacy guarantees that addition, modiﬁ-
cation, deletion, or variation of a single record within a dataset will not have any signiﬁcant effect on the
output query results [3]. Initially, differential privacy notion was proposed to protect privacy of statistical
databases, however later experiments showed that it can effectively be applied to other real-life scenarios
as well, such as real-time reporting and machine learning. Afterwards, researches are being carried out
to apply differential privacy in major domains that require privacy protection including smart grid, cloud
computing, industries, and other similar cyber physical systems [4], [5].
Conventional smart grid networks did not used any speciﬁc security of privacy strategies and just used to
rely on security and privacy provided by communication protocols, however, with the passage of time, it
was found out that data of smart grid can be used to carry out major privacy and security breaches [6],
[7]. Since then, plenty of researches are being carried out to enhance smart grid technology by improving
its security and privacy. For example, the use of homomorphic cryptosystem and trusted remote entity
have been proposed by researchers to overcome these eavesdropping issues [8], [9]. One such way that
effectively enhances the security and trust of smart grid network is the integration of blockchain in smart
grid domain [10], [11]. Blockchain network ensures that all the communication and storage being carried
out via blockchain network is secure and adversaries will not be able eavesdrop into the privacy of

M. Ul Hassan and J. Chen are with the Swinburne University of Technology, Hawthorn VIC 3122, Australia (e-mail:

muneebmh1@gmail.com; jinjun.chen@gmail.com).

M.H. Rehmani is with the Department of Computer Science, Cork Institute of Technology, Rossa Avenue, Bishopstown, Cork, Ireland

(e-mail: mshrehmani@gmail.com).

 
 
 
 
 
 
2

blockchain users. This is done by using advanced secure technologies, such as cryptographic hashing,
tamper-proof record storing, and strong distributed consensus [12].
Despite of this secure nature, it has been highlighted that blockchain based smart grid network is still
vulnerable to certain privacy threats because of its decentralized nature [13]. For example, an adversary
can compromise a speciﬁc smart meter after analysing the available data on decentralized blockchain
ledger. Similarly, the stored data on grid utility database can be analysed to infer into private information
of consumer usage patterns. In order to mitigate such issue, certain researches have been carried out
that involved integration of certain privacy preservation approaches in blockchain scenarios, such as zero-
knowledge proofs and anonymization [13], [14]. These works are viable to certain extent, but they cannot
directly be applied to real-time smart metering networks because majority of them either works over
stored data or only works over private data provenance. One such mechanism that can effectively protect
privacy of smart grid users in a decentralized blockchain scenario is differential privacy [15]. Differential
privacy can protect this information because of its dynamic nature, especially point-wise perturbation
mechanism of differential privacy can protect real-time data without running extensive computationally
complex algorithms [16].
In this chapter, we work over integration of differential privacy protection mechanism in decentralized
blockchain based smart metering scenario. To examine it further, we evaluate four variants of differential
privacy (Laplace, Gaussian, Uniform, and Geometric) on real-time smart metering data. In order to check
their efﬁciency and effectiveness we use mean absolute error (MAE) as evaluation parameter. Experimental
results demonstrate that each mechanism has their own pros and cons depending upon the privacy budget,
sensitivity value, and the data applied over it. For instance, all mechanisms provide high level of privacy
when the privacy parameters (ε&δ) have low values (e.g., ε = 0.01 & δ = 0.01). However, when these
values increases, the privacy of the meter reading value reduces gradually and at ε = 1 & δ = 1, the privacy
reaching to a minimum level, although data utility is maximum at this stage. Similarly, among these four
privacy notions, Geometric and Laplace performs better at lower privacy budgets by adding sharp amount
of noise. Speciﬁcally, when there are high peaks values in metering data (e.g., high usage), then the
Geometric mechanism preserves privacy is the most proﬁcient manner, and when the smart metering data
has low peaks (e.g., less occupancy/usage), Laplace mechanism outperforms other mechanisms.

A. Key Contributions

The key contributions of our book chapter are as follows:
• We integrate differential privacy in blockchain based smart metering scenario.
• We carry out in-depth performance evaluation of differential privacy mechanisms in decentralized

blockchain scenarios at different privacy budget (ε) values.

• From experimental results, we analyse the effectiveness of variants of differential privacy along
with the reported mean absolute error rate. We conclude that Geometric noise addition mechanism
outperforms other mechanism in high peak values, however, for low peak values, Laplace mechanism
outperforms other mechanisms.

B. Related Work

Since the advent of modern smart grid, researches are being carried out to make it autonomous, secure,
and user friendly. In order to do so, plenty of works targeted privacy preservation or integration of
blockchain in smart grid scenario. For example, the ﬁrst work that highlighted the use of differential
privacy in smart metering scenario was carried out by Acs et al. in [17]. The presented work in the article
used gamma distribution based differential privacy protection to preserve smart metering data and also
used encryption based cryptography to enhance security during transmission. Authors also worked over
the phenomenon of multi-slot privacy in which they effectively use the dynamic nature of differential
privacy to protect this real-time data. Another similar work was carried out by Eibl et al. in [18]. The

TABLE I
COMPARATIVE VIEW OF WORKS CARRIED OUT IN SMART METERING FROM PERSPECTIVE OF
DIFFERENTIAL PRIVACY (DP) AND BLOCKCHAIN.

Name of
Strategy

Ref
No.

Major
Contribution

Parameters
Enhanced

Consid-

Consid-

Simulator
Used

3

ered
DP

✔

✔

✔

✗

✗

✗

ered
Block-
chain
✗

✗

✗

Electricity
Trace
Simulator

N/A

Python

✔

N/A

✔

MATLAB

tick

GoEth

✔

✔

Python

DREAM

DP for
Real Smart
Metering
Data
DP for
RER based
Smart
Metering

GridMoni-
toring

Light-
weight
blockchain
based AMI

Blockchain
based
Secure
Smart Grid

DP
Variants
in decen-
tralized
Smart
Metering

[17]

Introduced
the concept of
DP in Smart
Metering

[18] Efﬁcient DP

[19]

mechanism
to balance
utility-privacy
Protected
usage and
generation
privacy of
RER based
smart homes

[20] Monitoring
smart grid
values via
blockchain

[21] AMI network

is protected
and secured
via blockchain

[22] Key-less

secure
signature
scheme for
decentralized
smart grid
Performance
evaluation of
DP variants
in blockchain
based smart
metering

This
Work

• Appliance
privacy
protection

• Aggregated
data protection
via smoothing

• Peak-load
protection
• RER
generation
protection

• Enhanced
provenance &
transparency
• Enhanced
trust
• Enhanced
received signal
strength

• Developed
automated
access control
manager

• Comparison
of DP variants
at different
privacy
parameters
• MAE
comparison

authors for the ﬁrst time discussed the terminology of point-wise differential privacy protection for real-
time smart data. Authors evaluated the use of Laplace noise and worked over signal smoothing to reduce
the risk for privacy leakage in case of any adversarial attack. Similarly, a work that targets the integration
of differential privacy in renewable energy resources have been discussed by authors in [19]. The work
discussed the protection of energy being generated from their resources by adding dynamic Laplace noise.
The work also introduced the concept of peak protection in renewable energy resources reporting to ensure
that privacy of smart meter users remain unviolated despite of any adversarial attack on grid database.
Similarly, from perspective of blockchain based smart grid, a work that discusses the integration of
blockchain in grid monitoring scenario was carried out by Gao et al. in [20]. Authors in this work used
blockchain to ensure transparency and to enhance trust in the network by providing information publicly
available to users via decentralized distributed ledger. Furthermore, authors provide a platform to users
via which they can monitor their usage without depending upon any third-party. One more work that
discusses integration of blockchain in advance metering infrastructure (AMI) to enhance its security and

4

transparency is carried out by Kamal et al. in [21]. The major motto of the work is to protect smart
meters from various cyberattacks speciﬁcally targeting data tampering, and man-in-the-middle attacks.
Authors did this by proposing a light-weight blockchain based solution for decentralized AMI network.
Similarly, authors in [22] proposed a keyless blockchain based signature scheme for smart grid network
via which they enhance security of traditional smart grid. Authors also discussed the aspect of trusted
third party breaches and failures and suggested that use of blockchain based secure platform is a viable
solution to overcome these issues. Furthermore, authors claimed that the proposed strategy turns blockchain
network into an automated manager to carry out access-control operation on smart grid. Another signiﬁcant
contribution carried out by authors is the enhancement of storage cost over the decentralized blockchain
network, which is one of the major issue blockchain is facing nowadays.
After analysing all these works, we can say that to the best of our knowledge, no work that discuss the
integration of differential privacy in blockchain based smart metering network have been carried out in
the literature. In this chapter, we not only discuss the integration of differential privacy in decentralized
smart metering, but also evaluate four major mechanisms of differential privacy in this network to check
their effectiveness.

1) Organization of This Chapter: The remainder of this chapter is organized as follows: Section
1.2 discusses preliminaries of our work including differential privacy, blockchain, and real-time smart
metering, Section 1.3 provided detailed discussion about system model, differentially private reporting
algorithms, along with design goals and adversary model. Furthermore, Section 1.4 provides performance
evaluation of variants of differential privacy in blockchain based smart metering scenario. Finally, the
work is concluded by providing conclusion and future directions in Section 1.5.

In this section, we discuss the preliminaries involved in our evaluation, ranging from differential privacy

II. PRELIMINARIES OF OUR WORK

mechanisms to blockchain and smart grid.

A. Differential Privacy Mechanisms

Differential privacy can be termed as a notion to protect privacy in an adversarial environment [23].
Formally, differential privacy can be deﬁned as a randomize response that ensures that query evaluation
of two neighbouring datasets varying by just one element will produce similar output results that will
introduce randomness in the results [24]. The equation is as follows:

Pr[F(db1))

R]

∈

≤

exp(ε)

×

Pr[F(db2))

∈

R] + δ

(1)

In above equation, ε is the privacy budget that controls the amount of noise being added. δ is the
sensitivity value that is usually determined on the basis of dataset. R is the query output range for query
function F . Similarly, the formula of sensitivity calculation for two adjacent datasets (db1) & (db2) can
be deﬁned as follows [4], [25]:

∆Fs = max

db1,db2 ||

F (db1)–F (db2)

||

(2)

Apart from the formal deﬁnitions, researchers worked over proposing of various variants of differential
privacy to support different privacy needs. These variants can be classiﬁed into distribution protection
mechanisms and data perturbation mechanisms. In this section, we discuss four major data perturbation
mechanisms named as Laplace, Gaussian, Uniform, and Geometric mechanisms of differential privacy. A
detailed discussion about notions and variants of differential privacy can be found in [26].

1) Laplace Mechanism: Laplace mechanism is considered to be the pioneering mechanism which was
used by C. Dwork at the time of proposal of this notion of differential privacy perturbation. Afterwards, this
notion has been used widely to protect privacy at different application scenarios [27]. Taking insights from
sensitivity equation (Eqn. 2), we can demonstrate Laplace noise by considering Sc = ∆Fs
as follows [28]:
ε

Lap(Sc) = exp (

µ

|

)

x

|

−
Sc

−

5

(3)

Since, the standard deviation of the given function is calculated using an exponential distribution which
is symmetric with respect to parameter √2b. Then, the probability density function (pdf) of traditional
Laplace noise at mean value (µ) is deﬁned as follows:

P df (x) =

exp ( |x−µ|
2b

b

)

(4)

The noise is then computed via probability density function, and then added to the query/point-wise
reading result in order to protect privacy.

2) Gaussian Mechanism: Gaussian mechanism also known as bell curve distribution has also been
widely used as a traditional notion of differential privacy. The bell shape of Gaussian probability distri-
bution provided ﬁne-grained noise that can be added to query evaluation in order to integrate randomness
in the output results [4]. The standard formula for Gaussian mechanism is as follows:

1
√2πb2
In the above equation, b or the standard deviation is used as a scale to choose the appropriate amount of
noise, which is controlled by the privacy budget value ε.

e− (x−µ)2

pdf (x) =

(5)

2b2

3) Uniform Mechanism: The concept of using uniform distribution as a notion of differential privacy
have been proposed by plenty of researchers because of its strong privacy along with low computational
complexity. For example, Kalantari et al. analysed privacy-utility trade-offs via uniform differential privacy
and integrated this concept with hamming distortion in [29]. Similarly, Geng and Viswanath discussed it
under the umbrella of optimal noise adding mechanisms in their article [30].
Formally, uniform distribution noise is a discrete noise addition mechanism which works over sensitity
value (0, δ), instead of just being dependent upon ε. Noise in this mechanism is computed using uniform
probability distribution as follows:

pdf (x) =

δ
∆ ,
0,

(

if
∀ −
otherwise

∆
2δ ≤

k

∆
2δ −

1

≤

(6)

4) Geometric Mechanism: Geometric differential privacy mechanism was also proposed by researchers
under the umbrella of oblivious notions of differential privacy. This notion is pretty diverse and plenty of
sub-mechanism/variants have been proposed that constitute of various ways to draw differentially private
noise from Geometric distribution. For example, authors in [31] discussed it as a discrete version of
traditional Laplace mechanism and states that it generates optimal utility value for all type of Bayesian
information counting queries. Similarly, Ghosh et al. proposed the notion of Geometric, and truncated
Geometric differential privacy noise addition to perturb query results [32]. Formally, Geometric mechanism
of differential privacy can be deﬁned as follows:

pdf (X = x) =

α
1
−
1 + α

α|x|,

Z

x

∀

∈

(7)

B. Real-Time Smart Metering and Privacy Issues

Smart meter is a device that serves as a bridge between grid utility and smart homes as it links
grid utility with smart home via strong communication medium. Together, all smart meters within a
range constitute a network named as advanced metering infrastructure (AMI) [33]. In order to carry out
various statistical processes such as net metering, demand response calculation, load forecasting, and load
scheduling, these smart meters send their actual real-time ﬁne grained meter reading to grid utility. These

6

values are then stored int their databases which can be accessed for query evaluation after getting approval
from authorities. It deﬁnitely is a good model to carry out statistical analysis, however, one of the major
drawback of this model is that it leaks privacy of smart meter users [34]. For example, the reported
ﬁne-grained data from smart meters can further be fed to various non-intrusive load monitoring (NILM)
algorithms that can even provide information about usage of any speciﬁc appliance at a speciﬁc time by
visualizing load curves [35].
This information can also lead to carry out various criminal/ burglar activities at the time of unoccupancy
of house. Therefore, it is important to protect this information via some privacy preserving mechanism.

C. Blockchain Network

Blockchain came into limelight after successful functioning of decentralized cryptocurrency called
Bitcoin by Satoshi Nakamoto [36]. Formally, blockchain is categorized into two major types from per-
spective of permission named as permissioned blockchain and permission-less blockchain. Furthermore,
from perspective of availability and controlling authorities, it is categorized into three major types called
as public, private, and consortium. A detailed discussion about these type and their pros and cons are
available in [37]. In this chapter, we use public permissionless blockchain in which every smart meter
node can join after ﬁlling a detailed form to ensure its legitimacy. Since, it is a public blockchain, so
every blockchain node can participate in the consensus part and can earn extra reward by mining the
block. Since smart meters have less computational power, therefore they can only take part in consensus
if the provided consensus mechanism is not dependent upon computation power. In order to fulﬁl this
requirement, we use proof-of-stake (PoS) instead of traditional computationally expensive proof-of-work
(PoW) consensus mechanism.
In our PoS mechanism, every smart meter acting as a blockchain node can take part in the mining process
after depositing a speciﬁc number of tokens in the network. This eradicates the need for having high
mining power. Similarly, in this way smart meters can also incentivize themselves a bit more if they are
interested to contribute to the network. The incentive can be in the form of mining reward that a mining
node will get if it gets selected as a winning miner.

In this section, we present system model, design goals, adversary model, and algorithmic foundation

of integration of differential privacy in blockchain based smart metering scenario.

III. FUNCTIONING AND SYSTEM MODEL

A. System Model

Our application scenario consists of two important entities, i.e., smart homes (deployed with smart
meters) and grid utility. Our scenario works over the model of a public blockchain, which means that all
the participating nodes can take part in the mining process. The most important entity in these nodes are
smart homes that contains smart meters which are reporting their real-time energy to grid utilities. Each
smart meter is a blockchain node which can take part in the mining process after adding some tokens as
a stake in the network. A detailed system model is given in Fig. 1.
From Fig. 1, it can be seen that each smart home is connected to every other smart home via decentralized
blockchain network, similarly, these smart homes are also connected to the grid utility via same network.
However, an additional feature which distinguish this speciﬁc connection from other is that these smart
homes regularly report their real-time values to grid database utility after the speciﬁed time interval (e.g.,
10 minutes). Grid utility collect these values from all smart homes and put these values along with some
other transaction values in a public mining pool. The values at mining pool can be viewed publicly by
all mining nodes in order to facilitate them in mining the block.
On the other hand, all miner nodes (smart homes) participate in the mining process by putting some
stakes in the network. In PoS mining, a miner is choses in accordance with the sake it has invested in

7

Fig. 1: An Illustrative Demonstrating of Our Proposed System Model for Differentially Private Blockchain-
based Smart Metering

the network. For example, a node which have invested 50% stakes as compared to all other nodes have
approximately 50% chances of being selected as the miner. Contrary to this, if the proportion of stakes
of some node is even less than 1% then its chances of winning the mining election is fairly low. Coming
back to the mining process; these miner nodes submit their stakes and wait for the mining process to
select miners in the basis of stake probability. The mechanism selects a miner node according to the
mentioned process, and the selected miner then move further towards the next process.
Once the miner gets ﬁnalized, it selects all the available transaction from the mining pool, compute their
hash, and form a block like structure. After formation of block, this miner disseminates the block to all
other blockchain nodes via broadcasting mechanism in order to get veriﬁcation votes. All receiving nodes
compute hash at their end and verify the content of block. Once the veriﬁcation stage gets completed, the
block is then added to the blockchain network and is disseminated as a mined block. In this way, each
blockchain node will have a copy of updated decentralized ledger that can be backtracked at any time to
ensure transparency and enhance trust in the network.
This complete process involves dealing with real-time reported energy values, therefore, protecting the
privacy of these reading before disseminating in mining pool, or for veriﬁcation is pretty important in
order to overcome any catastrophe. Therefore, in our proposed model we protect these readings via adding
differentially private noise before transmitting them to grid utility for evaluation. A graphical representation
of noise addition via smart homes is provided in Fig. 1.

B. Design Goals

Previous work in privacy protection in real-time smart metering do not incorporate the advantageous
nature of blockchain and differential privacy at the same time. Some previous works evaluated the use
of differential privacy in smart metering, while some works discussed the integration of blockchain with
smart metering. However, no combined literature that integrates all three technologies of smart metering,
blockchain, and differential privacy have been discussed by researchers. The design goals of our proposed
scenario are as follows:

• Integrating public blockchain network in a smart metering networks using the concept of decentralized

distributed ledger.

• Enhancing security of smart metering network by providing a model to carry out distributed consensus

in the network.

• Maintaining trust and transparency in the network by updating the decentralized ledger after addition

of every new block.

• Ensuring privacy of real-time smart metering data in run-time by adding dynamic differentially private

noise in the data.

• Enhancing mean absolute error of the network by carrying out comparison between differential privacy

8

mechanisms.

C. Adversary Model

Adversaries in our scenario can be any type of intruders that could be interested to get information
regarding real-time usage of smart meter electricity. This could be done in order to get more precise
information regarding availability of occupants of smart homes so that they can carry out malicious/burglar
activities. Moreover, some adversaries do also require ﬁne-grained data to ﬁnd out type of appliances being
used in smart homes, or to know about appliances who are expected to get damaged in near future, etc.
This is done by certain marketing companies and they use this ﬁne-grained data to carry out targeting
advertising [19]. Similarly, man-in-the-middle attack can also be carried out via which the information
being transmitted from smart meter to grid utility can be misused after analyzation [38]. Furthermore, data
linking attack can also be carried out over the stored data in smart grid database, in which the data can
be exploited and can be linked with certain other databased to get to know more information regarding
any speciﬁc person [39].
In order to overcome these attacks and adversarial behaviours, we ﬁrst integrate blockchain that ensure
security and trust in the network via its cryptographic mechanisms. Furthermore, we work over integration
of variants of differential privacy that enhances privacy of the complete network.

Algorithm 1 Algorithm for Selection of Differential Privacy Noise Variants
1: main()
2:
ε ← Epsilon Value from User
3:
δ ← Reading Sensitivity Value from User
4: MR ← Actual Meter Reading from Smart Meter
5:
F unc ← Select Noise Function from User
6:
Switch (F unc) do
7:
Case Lap:
8:
9:
10:
11:
12:
13:
14:
15:
16:
17:
18:
19:
20: end main()

Call UniformNoiseMechanism(ε, δ, MR)
Break;
Case Geo:

Call GaussianNoiseMechanism(ε, MR)
Break;
Case Unif :

Call LaplaceNoiseMechanism(ε, MR)
Break;
Case Gaus:

Call GeoNoiseMechanism(ε, MR)
Break;

End Switch

Algorithm 2 Differential Privacy Variants in Decentralized Smart Metering
Input: N, F, MR, ε, ∆, δ
Output: PV , AE

(1) Laplace Differential Privacy Mechanism

9

for (each j in N) do

1: if LaplaceNoiseMechanism() then
2:
3:
4:
5:

εL ← Laplace Privacy Budget
∆ ← Database Sensitivity
Generate Laplace Noise via
noise
j
Calculate PV
= M R
j
Call AEf unction(PV
j
return PV
j

= Lap(F, εL, MR)
+ noise
j
, MR
)
j

, AE
j

j

end for

6:
7:
8:
9:
10: end if

(2) Gaussian Differential Privacy Mechanism

for (each j in N) do

11: if GaussianNoiseMechanism() then
12:
13:
14:
15:

εG ← Gaussian Privacy Budget
∆ ← Database Sensitivity
Generate Gaussian Noise via
noise
j

16:
17:
18:
19:
20: end if

Calculate PV
= M R
j
Call AEf unction(PV
j
return PV
j

, AE
j

j

+ noise
j
, MR
)
j

end for

= Gaussian(F, εG, MR)

(3) Uniform Differential Privacy Mechanism

for (each j in N) do

21: if UniformNoiseMechanism() then
22:
23:
24:
25:
26:

εU ← 0
∆ ← Database Sensitivity
δU ← Meter Reading Sensitivity Value
Generate Uniform Noise via
noise
j

27:
28:
29:
30:
31: end if

Calculate PV
= M R
j
Call AEf unction(PV
j
return PV
j

, AE
j

j

+ noise
j
, MR
)
j

end for

= U nif orm(F, εU , δU , MR)

(4) Geometric Differential Privacy Mechanism

32: if GeometricNoiseMechanism() then
33:
for (each j in N) do
34:
35:
36:
37:

εgeo ← Geometric Privacy Budget
∆ ← Database Sensitivity
PR ← Probability of Success via εgeo&δ
Generate Geometric Noise via

noise
j

= Geometric(F, PR)

38:
39:
40:
41:
42: end if

Calculate PV
= M R
j
Call AEf unction(PV
j
return PV
j

, AE
j

j

+ noise
j
, MR
)
j

end for

(5) Absolute Error Calculation Function

43: Function AEf unction() do
44:
MR ← Meter Reading
45:
PV
← Protected Value
j
46:
AE = |PV
j
47: End Function

− MR| ← For Positive Value

1) Algorithmic Foundation: Traditional smart meters directly transmit their real-time energy values to
smart grid utility without using any type of privacy protection mechanism. However, our proposed model
uses the advantages of dynamic differential privacy protection to protect this sensitive data. In order to
demonstrate the complete technical functioning of our model we develop a detailed algorithm containing

10

conditions for all differential privacy variants. The detailed pseudo-code is given in Algorithm 2. Similarly,
the algorithm for selection of speciﬁc noise addition mechanism is given in Algorithm 1.
The algorithm is divided into ﬁve major parts, in which the ﬁrst four parts contains addition of nose
via any variant of differential privacy, while the ﬁfth part comprises of computation of absolute error
value. Firstly, the input values such as instantaneous meter reading (MR), number of smart meters for
that speciﬁc slot (N), privacy budget (ε), sensitivity (δ), database sensitivity (∆), and noise function (F )
is fed to the algorithm to initiate the process. Afterwards, the condition for speciﬁc variant of differential
privacy is checked. In case if the user calls for Laplace noise addition mechanism, then the ﬁrst part (1)
Laplace privacy mechanism is called for execution. In this part, ﬁrst of all the Laplace privacy budget
(εL) is taken from user. After that, database sensitivity value is computed using 2. After computation and
collection of these values, the noise is generated using the Laplace noise probability distribution function
given in Eq. 4. The values of εL and MR are fed to the function to determine the noise scale. After
successful computation of noise, this value is added to the meter reading value via PV = MR + noise.
Next, the absolute error function is called to get the value of error, which is then stored to calculate the
mean absolute error. After this process, the protected value PV is transmitted to grid utility to carry out
statistical processes.

Similarly, if function of Gaussian noise addition is selected then the second part (2) of the algorithm is
used to compute Gaussian noise via normal distribution. In this part, the value of Gaussian privacy budget
εG is used to compute noise in a way that it protected the ﬁnal reading. The noise in this mechanism is
computed using the probability density function in Eq. 5. Moving further to the third part, the functionality
of uniform noise addition mechanism is different from Gaussian or Laplace mechanism, because in this
mechanism, the privacy budget (εU is set to be zero, and it does not play any critical role in computation of
noisy value. Contrary to this, Uniform sensitivity value of meter reading (δU ) is used to generate random
noise value via uniform distribution whose equation has been provided in Eq. 6. The remainder of the
steps for Uniform noise addition mechanism are same as that of above two parts.
Similarly, if the user calls for addition of noise via Geometric differential privacy mechanism, then the
fourth (4) part of the algorithm executes. In this part, probability of success is computed for Geometric
mechanism by taking into account the value of varepsilongeo and ∆. After successful computation of
success probability (PR), this value is fed to Geometric noise additions function, which then computes
geometric noise according to the provided density function. Finally, the ﬁfth part of algorithm calculates
absolute error value by subtracting meter reading from the protected noise value. This function of error
calculation is called for every individual perturbed value in order to keep a record error in the transmitted
readings. Afterwards, these values are accumulated to calculate mean absolute error, which is demonstrated
in performance evaluation section.

IV. PERFORMANCE EVALUATION

In our blockchain based smart metering scenario, protected real-time data is transmitted from smart
meters instead of original real-time data. In order to protect privacy leakage from original data, we use
four different variants of differential privacy discussed in previous section. The noise produced by each
variant have different effect on privacy level depending upon the privacy budget (ε) and reading sensitivity
(δ). In this section, we ﬁrst discuss simulation environment and afterward provide a detailed performance
evaluation on the basis of real-time reporting and mean absolute error.

A. Simulation Parameters

In order to implement differential privacy variants in our blockchain based smart metering scenario,
we ﬁrst of all used grid energy data from [40] and modiﬁed it accordingly to carry out experiment for 24
hour usage. We carried out performance evaluation of differential privacy variants on above mentioned
real-time smart metering data in which readings are being sent to grid utility after every 10 minutes. So,

11

Fig. 2: Performance Evaluation of Differential Privacy Mechanisms at Various Privacy Parameters [Laplace ε = 0.01, Gaussian
ε = 0.01, Uniform δ = 0.01, Geometric ε = 0.01].

Fig. 3: Performance Evaluation of Differential Privacy Mechanisms at Various Privacy Parameters [Laplace ε = 0.05, Gaussian
ε = 0.05, Uniform δ = 0.05, Geometric ε = 0.05].

for daily usage proﬁle, we carried out evaluation on 144 data samples collectively for each smart home.
To carry out experimental evaluation, we use NumPy v1.14 and pandas v1.0.3 libraries in Python 3.0. In
order to implement differential privacy variants, we use respective distribution of NumPy v1.1.4 library
and modify the input parameters according to the requirement of each variant given in Section II-A.
Furthermore, we generate the graphs at different varepsilon values for three mechanism and for Uniform
differential privacy, we carry out evaluation at different δ values. In this way, six graphs showing the
original and protected readings for each noise adding variant are generated. Similarly, to take an account
of noise and to compare efﬁciency of each noise addition variant, we pick the best performing varepsilon
value for each variant and compare their mean absolute error (MAE) values.

B. Private Real-Time Data Reporting

Reporting real-time smart meter data can leak users’ privacy and can cause serious threats to occupants
of smart homes, therefore, we use differential privacy to protect this information. In order to do so, we
implement four variants and analysed their output in the form of given graphs. In Fig. 2, the graph for ε
= 0.01 can be seen for Laplace, Gaussian, and Geometric noise addition mechanism. Similarly, the graph
for δ = 0.01 for Uniform noise addition mechanism is also plotted in the same ﬁgure for comparison
purpose. The graph depicts values transmitted in 24 hours by using different variants as compared to the

12

Fig. 4: Performance Evaluation of Differential Privacy Mechanisms at Various Privacy Parameters [Laplace ε = 0.1, Gaussian
ε = 0.1, Uniform δ = 0.1, Geometric ε = 0.1].

Fig. 5: Performance Evaluation of Differential Privacy Mechanisms at Various Privacy Parameters [Laplace ε = 0.3, Gaussian
ε = 0.3, Uniform δ = 0.3, Geometric ε = 0.3].

Fig. 6: Performance Evaluation of Differential Privacy Mechanisms at Various Privacy Parameters [Laplace ε = 0.7, Gaussian
ε = 0.7, Uniform δ = 0.7, Geometric ε = 0.7].

13

Fig. 7: Performance Evaluation of Differential Privacy Mechanisms at Various Privacy Parameters [Laplace ε = 1, Gaussian
ε = 1, Uniform δ = 1, Geometric ε = 1].

actual meter reading. Starting from ﬁrst quarter of the graph, ranging from 12:00AM to 06:00AM, the
usage is pretty low because of night, and only few peaks can be seen. However, the behaviour of all noise
addition mechanism can be observed clearly. If one closely analyses the graph, it can easily be seen that
Laplace mechanism provided more diversiﬁed amount of noise as compared to any other noise addition
mechanism in this quarter. After Laplace, some variation for Gaussian mechanism can also been for some
low peaks such as 04:30AM, and after that some at some high peak values Geometric mechanism shows
variance as compared to other three.
Moving further to second quarter of the graph from 06:00AM to 12:00PM, similar trend can be observed,
that whenever there is low value of original meter reading, then Laplace noise addition mechanism
provides maximum variance followed by Gaussian mechanism, which usually provides negative variance
as compared to the trend. And whenever there is high peak value, such as 10:30AM when the original
usage is around 1200Wh, then the Geometric mechanism add a considerable amount of noise to protect
privacy of real-time smart metering data. After that, in the third quarter ( which is the most highly utilised
quarter), Geometric noise addition mechanism outperforms other variants, because of its usual reputation
of protecting reading at higher peaks. At it can be seen that around 01:00PM, the value of load usage
is pretty high around 1600Wh, and at this stage Geometric mechanism provides highest peak value by
providing maximum ﬂuctuation. This trend continues and Geometric mechanism keeps on dominating
other mechanism because the usage values are pretty high. After Geometric, the second most dominant
noise addition mechanism here is Laplace mechanism, which protect the peak values by either adding
negative noise or either by adding minor positive noise depending upon the noise calculation. However,
the result of remaining two mechanisms can partially be seen at this stage.
In the fourth quarter of the graph from 06:00PM to 12:00AM, the load utilization again reduces, and
in this quarter, the trend similar to quarter number 2 can be seen. Where Laplace mechanism dominates
because of low peak values and after that Gaussian mechanism came into light because of the negative
random noise it is adding in those low peak values. The variation because of Geometric mechanism can
also be seen at some places, although, it is not as dominant as that of Laplace and Gaussian mechanism.
Throughout the graph, Uniform noise addition mechanism does not came into lime-light which is because
of the reason that its noise span is pretty low as compared to other three mechanisms. If one zooms the
graph, it surely can see the variations because of Uniform mechanism, but due to high variations by other
three variants, it gets supressed.
A similar trend can be seen for remaining output graphs as well. For example, in Fig. 3, the graph for
ε = 0.01 for Laplace, Gaussian, and Geometric mechanism. And δ = 0.01 for Uniform noise addition
mechanism can be seen. As the value of privacy budget is increased, which means less privacy protection

14

Fig. 8: Mean Absolute Error of Differential Privacy Variants at Different Privacy Parameters

and more utility, so it can be observed that at majority of places, very minimal noise has been added to
protect users’ privacy. Some low peaks can be seen for Laplace mechanism in the graph at the time of
less usage, however, majority of added noise values remain unnoticed because of not producing much
variation. Moving further to other graphs presented in Fig. 4, 5, and 6, the variation reduces, and
very minimal noise addition can be observed. Finally, in Fig. 7, when the value of varepsilon and δ is
increased to ‘1’, the added noise almost reaches zero, which means that minimum privacy and maximum
utility. At this privacy budget, mostly the actual meter is reported as it is to the grid utility with very
minimal and negligible variation because of noise. Therefore, it can be concluded that lower values of
privacy parameters provide high privacy protection, and increasing these values result in gradual decrease
in privacy protection to a limit that utility becomes maximum with very minimal privacy protection as
demonstrate in the graphical ﬁgures.
Keeping in view all the graphs and discussion, it can be said that in high peak values, Geometric mechanism
provides healthy variation to protect privacy, and for low peak values, Laplace mechanism followed by
Gaussian mechanism provides considerable variation to protect users’ privacy.

C. Mean Absolute Error

In order to provide statistical analysis regarding differential privacy noise addition variants, we use the
parameter of MAE. Formally, MAE can be termed as the difference between the noisy value and the
original reading. The equation for MAE is given as follows:

NR

MAE =

Pv–MR|

|

(8)

n=1
X
In the above equation, NR is the total number of noisy readings sent in the day. In our mechanism, we
accumulate energy usage of every 10 minutes and then transmit the values to grid utility after addition of
noise. Therefore, the value of NR = 144, although, this value can vary according to the dataset. Similarly,
Pv is the protected noisy value, and MR is the actual meter reading which demonstrate the actual usage
within 10 minutes by smart meter user. A graphical illustration of MAE values is given in Fig. 8.
In Fig. 8, we show graphical illustration at ε, delta = 0.01 and 0.05, because these two privacy parameter
values add an adequate amount of noise to protect privacy. After further increment of ε or δ, this value
of MAE decreases and eventually reduces to approximately zero at ε, δ = 1. Furthermore, the average
meter reading value for 144 readings in daily load is 872Wh per reading, which means that approximately
872Wh is being used every 10 minutes.
It can be seen from the graph that Geometric noise addition mechanism provides MAE value of 101.5 at ε

15

= 0.01, followed by Laplace and Gaussian mechanism who provides MAE of 99.3 and 82.5, respectively.
Similarly, at ε = 0.05, the MAE value 23.4 provided by Laplace is maximum, which is followed by
Geometric and Gaussian noise addition mechanism as 21.1 and 17.9, respectively. From Fig. 8, it can
be concluded that both Geometric and Laplace mechanisms provides similar MAE, however, from the
above section, it can be seen that Laplace provides efﬁcient variation in case of small meter reading and
Geometric provides variation in case of large used values.

D. Summary & Lessons Learnt

After careful visualization of real-time smart metering graphs and MAE graph, it can be concluded
that both Laplace and Geometric mechanisms outperform other noise addition variants by providing more
variation as compared to other two. However, if the data usage values are large, then geometric noise
addition is more suitable because it provides more variation in case of large values by showing high
positive peaks. Contrary to this, Laplace mechanism usually provides negative peaks in case of low
values to protect user privacy. Furthermore, from perspective of ε&δ, the lower these values are, the
higher the privacy is, therefore, in order to protect at least an adequate amount of privacy, ε, δ = 0.01
are the most suitable privacy parameters. Furthermore, MAE evaluation value of Geometric and Laplace
mechanism are quite similar, which also shows that both of the mechanism are efﬁcient to protect smart
metering privacy. Though, if there is a smart home in which on average less energy is used, then Laplace
mechanism (at ε = 0.01) outperforms other privacy preserving mechanisms, and in case if there is a smart
home which regularly uses high amount of energy throughout the day, then Geometric noise addition
mechanism (with ε = 0.01) is the most feasible one to be used.

V. CONCLUSION AND FUTURE DIRECTIONS

Differential privacy appeared as a strong privacy preserving notion after its invent by C. Dwork in
2006. Since then, plenty of variants of differential privacy have been proposed by researchers that have
been applied over certain real-time application, and real-time smart metering is one of them. Similarly, the
security and transparency of smart metering has also been enhanced by usage of decentralized blockchain
technology. In this chapter, we ﬁrst work over integration of differential privacy and blockchain in real-time
smart metering scenario. Afterwards, we carried out performance evaluation of four variants of differential
privacy in the proposed blockchain based smart metering scenario. Performance evaluation section of the
chapter demonstrate that each privacy preserving mechanism adds performs differently depending upon
the selected privacy parameters and the input data. However, in case of high peak values Geometric
mechanism surpasses other noise addition variant, although, in case of low peak values in meter reading,
Laplace mechanism performs better at ε = 0.01. As a part of future work, we are working over integration
of differential privacy and blockchain in other cyber physical systems scenarios.

REFERENCES

[1] Yu S. Big privacy: Challenges and opportunities of privacy study in the age of big data. IEEE access. 2016;4:2751–2763.
[2] Wang T, Zheng Z, Rehmani MH, et al. Privacy preservation in big data from the communication perspective—A survey.

IEEE

Communications Surveys & Tutorials. 2018;21(1):753–778.

[3] Dwork C. Differential privacy: A survey of results. In: International conference on theory and applications of models of computation.

Springer; 2008. p. 1–19.

[4] Hassan MU, Rehmani MH, Chen J. Differential privacy techniques for cyber physical systems: A survey.

IEEE Communications

Surveys & Tutorials, in Print. 2019;.

[5] Liu K, Chen J, Yang Y, et al. A throughput maximization strategy for scheduling transaction-intensive workﬂows on SwinDeW-G.

Concurrency and Computation: Practice and Experience. 2008;20(15):1807–1820.

[6] Komninos N, Philippou E, Pitsillides A. Survey in smart grid and smart home security: Issues, challenges and countermeasures. IEEE

Communications Surveys & Tutorials. 2014;16(4):1933–1954.

[7] Puthal D, Nepal S, Ranjan R, et al. A dynamic key length based approach for real-time security veriﬁcation of big sensing data stream.

In: International conference on web information systems engineering. Springer; 2015. p. 93–108.

16

[8] Kumar P, Lin Y, Bai G, et al. Smart grid metering networks: A survey on security, privacy and open research issues.

IEEE

Communications Surveys & Tutorials. 2019;21(3):2886–2927.

[9] Wang M, Ramamohanarao K, Chen J. Trust-based robust scheduling and runtime adaptation of scientiﬁc workﬂow. Concurrency and

Computation: Practice and Experience. 2009;21(16):1982–1998.

[10] Gai K, Wu Y, Zhu L, et al. Permissioned blockchain and edge computing empowered privacy-preserving smart grid networks. IEEE

Internet of Things Journal. 2019;6(5):7992–8004.

[11] Puthal D, Nepal S, Ranjan R, et al. DLSeF: A dynamic key-length-based efﬁcient real-time security veriﬁcation model for big data

stream. ACM Transactions on Embedded Computing Systems (TECS). 2016;16(2):1–24.

[12] Belotti M, Boˇzi´c N, Pujolle G, et al. A Vademecum on Blockchain Technologies: When, Which, and How. IEEE Communications

Surveys & Tutorials. 2019;21(4):3796–3838.

[13] Hassan MU, Rehmani MH, Chen J. Privacy preservation in blockchain based IoT systems: Integration issues, prospects, challenges,

and future research directions. Future Generation Computer Systems. 2019;97:512–529.

[14] Wanchun D, Chao L, Xuyun Z, et al. A QoS-aware service evaluation method for co-selecting a shared service. In: IEEE International

Conference on Web Services; 2011. p. 145–152.

[15] Hassan MU, Rehmani MH, Chen J. Differential Privacy in Blockhain Technology: A Futuristic Approach.

arXiv preprint

arXiv:191004316. 2019;.

[16] Eibl G, Engel D. Differential privacy for real smart metering data. Computer Science-Research and Development. 2017;32(1-2):173–

[17]

182.
´Acs G, Castelluccia C.
Springer; 2011. p. 118–132.

I have a dream!(differentially private smart metering).

In: International Workshop on Information Hiding.

[18] Eibl G, Engel D. Differential privacy for real smart metering data. Computer Science-Research and Development. 2017;32(1-2):173–

182.

[19] Hassan MU, Rehmani MH, Kotagiri R, et al. Differential privacy for renewable energy resources based smart metering. Journal of

Parallel and Distributed Computing. 2019;131:69–80.

[20] Gao J, Asamoah KO, Sifah EB, et al. Gridmonitoring: Secured sovereign blockchain based monitoring on smart grid. IEEE Access.

2018;6:9917–9925.

[21] Kamal M, Tariq M. Light-weight security and blockchain based provenance for advanced metering infrastructure.

IEEE Access.

2019;7:87345–87356.

[22] Zhang H, Wang J, Ding Y. Blockchain-based decentralized and secure keyless signature scheme for smart grid. Energy. 2019;180:955–

967.

[23] Cao Y, Yoshikawa M, Xiao Y, et al. Quantifying differential privacy in continuous data release under temporal correlations. IEEE

transactions on knowledge and data engineering. 2018;31(7):1281–1295.

[24] Huang W, Zhou S, Liao Y, et al. An efﬁcient differential privacy logistic classiﬁcation mechanism. IEEE Internet of Things Journal.

[25]

2019;6(6):10620–10626.
Inan A, Gursoy ME, Saygin Y. Sensitivity analysis for non-interactive differential privacy: bounds and efﬁcient algorithms.
Transactions on Dependable and Secure Computing. 2017;.

IEEE

[26] Desfontaines D, Pej´o B. Sok: Differential privacies. arXiv preprint arXiv:190601337. 2019;.
[27] Hassan MU, Rehmani MH, Chen J. DEAL: differentially private auction for blockchain based microgrids energy trading.

IEEE

Transactions on Services Computing, in Print. 2019;.

[28] Ni L, Li C, Wang X, et al. DP-MCDBSCAN: Differential privacy preserving multi-core DBSCAN clustering for network user data.

IEEE Access. 2018;6:21053–21063.

[29] Kalantari K, Sankar L, Sarwate AD. Robust privacy-utility tradeoffs under differential privacy and Hamming distortion.

IEEE

Transactions on Information Forensics and Security. 2018;13(11):2816–2830.

[30] Geng Q, Viswanath P. Optimal noise adding mechanisms for approximate differential privacy.

IEEE Transactions on Information

Theory. 2015;62(2):952–969.

[31] Brenner H, Nissim K. Impossibility of differentially private universally optimal mechanisms. In: IEEE 51st Annual Symposium on

Foundations of Computer Science; 2010. p. 71–80.

[32] Ghosh A, Roughgarden T, Sundararajan M. Universally utility-maximizing privacy mechanisms. SIAM Journal on Computing.

2012;41(6):1673–1693.

[33] Mustapa M, Niamat MY, Nath APD, et al. Hardware-oriented authentication for advanced metering infrastructure. IEEE Transactions

on Smart Grid. 2016;9(2):1261–1270.

[34] Zhang Z, Cao W, Qin Z, et al. When privacy meets economics: Enabling differentially-private battery-supported meter reporting in

smart grid. In: 2017 IEEE/ACM 25th International Symposium on Quality of Service (IWQoS). IEEE; 2017. p. 1–9.

[35] Cao H, Liu S, Wu L, et al. Achieving differential privacy against non-intrusive load monitoring in smart grid: A fog computing

approach. Concurrency and Computation: Practice and Experience. 2019;31(22):e4528.

[36] Nakamoto S. Bitcoin: A peer-to-peer electronic cash system. Manubot; 2019.
[37] Belotti M, Boˇzi´c N, Pujolle G, et al. A Vademecum on Blockchain Technologies: When, Which, and How. IEEE Communications

Surveys & Tutorials. 2019;21(4):3796–3838.

[38] Fritz JJ, Sagisi J, James J, et al. Simulation of Man in the Middle Attack On Smart Grid Testbed. In: SoutheastCon. IEEE; 2019. p.

1–6.

[39] Danezis G. Statistical disclosure attacks. In: IFIP International Information Security Conference. Springer; 2003. p. 421–426.
[40] Muratori M. Impact of uncoordinated plug-in electric vehicle charging on residential power demand. Nature Energy. 2018;3(3):193–201.

