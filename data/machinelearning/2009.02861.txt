0
2
0
2

c
e
D
9
2

]

C
O
.
h
t
a
m

[

2
v
1
6
8
2
0
.
9
0
0
2
:
v
i
X
r
a

Constant Regret Re-solving Heuristics for Price-based Revenue

Management

Yining Wang1 and He Wang2

1Warrington College of Business, University of Florida
2School of Industrial and Systems Engineering, Georgia Institute of Technology

January 1, 2021

Abstract

Price-based revenue management is an important problem in operations management with

many practical applications. The problem considers a retailer who sells a product (or multiple

products) over T consecutive time periods and is subject to constraints on the initial inventory

levels. While the optimal pricing policy could be obtained via dynamic programming, such an

approach is sometimes undesirable because of high computational costs. Approximate policies,

such as the re-solving heuristics, are often applied as computationally tractable alternatives. In

this paper, we show the following two results. First, we prove that a natural re-solving heuristic

attains O(1) regret compared to the value of the optimal policy. This improves the O(ln T )

regret upper bound established in the prior work of Jasin (2014). Second, we prove that there

is an Ω(ln T ) gap between the value of the optimal policy and that of the ﬂuid model. This

complements our upper bound result by showing that the ﬂuid is not an adequate information-

relaxed benchmark when analyzing price-based revenue management algorithms.

Keywords: re-solving, self-adjusting controls, price-based revenue management, dynamic

pricing

1 Introduction

We study a classic price-based revenue management problem where a retailer sells either a single

product or a group of products over a ﬁnite horizon given ﬁxed initial inventory (Gallego and

Van Ryzin 1994, 1997). More speciﬁcally, consider n products and T consecutive selling periods
+. At time t, the retailer posts a price vector pt ∈ P ⊂ Rn
with an initial inventory level y0 ∈ Rn
+.
Suppose f : P → Rn
t=1, Pr) be a ﬁltered probability
space. The realized demand dt, realized revenue rt, and remaining inventory level yt at the end of
period t are governed by

+ is a ﬁxed demand function. Let (Ω, F, {Ft}T

dt = f (pt) + ξt,

rt = p(cid:62)

t min{dt, yt−1}, yt = max{0, yt−1 − dt},

(1)

1

 
 
 
 
 
 
where {ξt}T
detailed assumptions.)

t=1 is a martingale diﬀerence sequence adapted to the ﬁltration {Ft}T

t=1 (see Sec. 3 for

The retailer’s objective is to design an admissible pricing policy π to maximize the expected revenue

over the T periods. A pricing policy π can be represented by π = (π1, · · · , πT ), where πt is a
mapping from the inventory level yt−1 to the price pt ∈ P. A pricing policy π is admissible or
non-anticipating if the posted price pt only depends on the history up to the end of period t − 1,
namely, pt is measurable with respect to Ft−1. Given the initial inventory level xT := y0/T , the
expected revenue of an admissible policy π is denoted by

Rπ(T, xT ) := E

(cid:34) T

(cid:88)

t=1

(cid:12)
(cid:12)
(cid:12)
(cid:12)

rt

pt = πt(yt−1), ∀t = 1, · · · , T

.

(2)

(cid:35)

1.1 Existing Results on the Fluid Model and the Re-solving Heuristic

An optimal policy π∗ maximizing Rπ(T, xT ) deﬁned in Eq. (2) can be in principle obtained via
dynamic programming (DP). However, it is well known that the exact DP algorithm suﬀers from

the curse of dimensionality, as the (discretized) state space grows exponentially in size with the

number of products.

The seminal work of Gallego and Van Ryzin (1994) proposed a ﬂuid approximation model of

the optimal dynamic pricing problem. To deﬁne the ﬂuid model, suppose there exists an inverse
function f −1 of the demand rate function of f . Let r(x) := x(cid:62)f −1(x) be the mean revenue in one
period given the price vector f −1(x). We assume r(x) is strictly concave and smooth on its domain
D ⊂ Rn
+ (see Sec. 3 and Sec. 6 for the statements of these assumptions). The ﬂuid model for the
dynamic pricing problem is

max
x∈D

r(x)

s.t. 0 ≤ x ≤ xT .

(3)

Let rF and xF denote the optimal value and the (unique) optimal solution of the ﬂuid model,
respectively. The optimization problem (3) chooses a demand rate xF (or equivalently, setting
the price to f −1(xF)) such that the revenue function is maximized subject to the initial inventory
constraint. Intuitively, the ﬂuid approximation model ignores the randomness caused by demand

noises and replaces the stochastic inventory constraint with a deterministic constraint.

The following results are established by Gallego and Van Ryzin (1994, 1997).

Theorem 1 (Gallego and Van Ryzin (1994, 1997)). For any admissible policy π and the initial
inventory level y0 = xT T , the expected revenue is upper bounded by Rπ(T, xT ) ≤ T rF. Furthermore,
for a static pricing policy πs such that pt = f −1(xF) (∀t = 1, · · · , T ), the expected revenue is lower

2

√

Figure 1: An illustration of existing results (blue) compared to our results (red).

bounded by Rπs(T, xT ) ≥ T rF − O(

√

T ).

However, the main drawback of the static pricing policy is that it is not adaptive to demand

randomness. Researchers have proposed various approaches to modify the static pricing policy,

aiming to improve the O(

T ) gap in Theorem 1 (see Sec. 2 for a survey). One intuitive approach

is to re-solve the ﬂuid model in every period using the current inventory level:

max
x∈D

r(x)

s.t. 0 ≤ x ≤ xt,

where xt := yt−1/(T − t + 1) is the normalized inventory level realized at the beginning of period t.
Let the solution to the above problem be xc
t (the superscript c stands for “constrained”). The price
is then reset to pt = f −1(xc
t ) at the start of period t. We will refer to this policy as the re-solving
heuristic. In the work of Jasin (2014), the gap is reduced from O(
T ) to O(ln T ) by using the

√

re-solving heuristic, as shown by the following result.

Theorem 2 (Jasin (2014)). Let πr = (πr
pt = f −1(xc
expected revenue is bounded by Rπr (T, xT ) ≥ T rF − O(ln T ), where xT = y0/T .

T ) be the re-solving heuristic policy deﬁned as
t ). Assume the optimal dual variables of the ﬂuid model (3) are strictly positive. The

1, · · · , πr

1.2 Our Results: Constant Regret and Logarithmic Gaps

In this paper we establish two main results: constant regret for the re-solving heuristic, and a

logarithmic regret lower bound on the gap between the value of the optimal pricing policy and the

ﬂuid model. Figure 1 summarizes results established in this paper and compares them with existing

results in the prior literature.

Our ﬁrst main result, as stated in Theorems 3 and 5 later in the paper, asserts that for any initial

inventory level (except for certain boundary cases), the cumulative regret of the re-solving heuristic
πr is upper bounded by a constant that is independent of T , compared against the expected reward

3

Optimal policyFluid modelRe-solvingStatic pricing𝑂(ln𝑇), Jasin(2014)𝑂(𝑇), Gallego & van Ryzin(1994).𝑂(1), this paperΩ(ln𝑇), this paper√

of the optimal dynamic pricing policy π∗. Apart from the obvious improvement from O(ln T ) to
O(1) in regret bound, our proof technique is quite diﬀerent from existing work that compares the

expected reward of the re-solving policy to a certain information relaxed benchmark, such as the
ﬂuid model or the hindsight optimum benchmark. Instead, we compare the value of πr directly
with the value of the optimal DP policy π∗ by carefully analyzing the stochastic inventory levels
under the two policies.

Our second main result, as stated in Theorem 4 later in this paper, shows that there is an Ω(ln T )
lower bound on the gap between the expected revenue of the re-solving heuristics πr and the optimal
objective of the ﬂuid model T rF. Coupled with the O(1) regret upper bound established in Theorem
3, this shows that there is an Ω(ln T ) lower bound on the gap between the value of the optimal
policy π∗ and the ﬂuid model as well. This demonstrates a fundamental limitation of using the
ﬂuid model as a benchmark to analyze the regret for the price-based revenue management problem.

2 Related Work

The idea of using simple, easy-to-compute pricing policies to approximate optimal dynamic pricing

policies originates from Gallego and Van Ryzin (1994, 1997), who proposed a static price policy

using ﬂuid models and established O(

T ) regret. Later, Maglaras and Meissner (2006) showed

that the re-solving heuristic has o(T ) regret in the single resource case. The most relevant prior

research to our paper is the work by Jasin (2014), who studied a price-based network revenue

management problem and showed that re-solving heuristics attain O(ln T ) asymptotic regret upper

bound under mild conditions. Jasin (2014) also showed that infrequent re-solving has similar

theoretical performance guarantees and is much more computationally eﬃcient. In this paper, we

improve the regret of the re-solving heuristic to an O(1) constant bound that is independent of T .

Our analysis is diﬀerent from the one in Jasin (2014) in the sense that we directly compare the

expected revenue of re-solving with the value of the optimal DP policy, instead of the ﬂuid model.

Additionally, we complement the result in Jasin (2014) by establishing an Ω(ln T ) lower bound

between the expected revenue of the optimal DP policy and the ﬂuid model.

Re-solving heuristics have also been studied in quantity-based revenue management (Cooper 2002,

Reiman and Wang 2008, Secomandi 2008, Jasin and Kumar 2013, Bumpensanti and Wang 2020).

The decisions involved in a quantity-based revenue management problem are the opening and clos-

ing of available products, so the feasible decisions form a discrete set. In contrast, the price-based

revenue management model studied in this paper assumes continuous prices in an inﬁnite set. When

the decision set is discrete, re-solving the ﬂuid model will lead to fractional solutions that require

rounding; it is shown that the design of the rounding procedures (e.g. by randomization, thresh-

olding, etc.) plays a critical role in the performance of re-solving heuristics (Arlotto and Gurvich

2019, Bumpensanti and Wang 2020, Vera and Banerjee 2020). When the decision set is continuous,

4

re-solving algorithms must precisely track the updated inventory level in the ﬂuid model without

using any rounding. As such, analysis for the (continuous) price-based revenue management prob-

lem is much diﬀerent from the previous proofs for quantity-based revenue management. Moreover,

existing proofs of constant regret in the quantity-based model often use an information relaxation

bound called hindsight-optimum benchmark (see Appendix for a detailed discussion). However, the

hindsight-optimum benchmark does not readily translate to the price-based revenue management

setting, and our analysis does not rely on such a benchmark.

It is worth mentioning that Vera et al.

(2019) proposed a constant regret algorithm that works for both quantity-based and price-based

revenue management problems. However, the price-based revenue management model considered

in Vera et al. (2019) assumes a single product and a ﬁnite set of candidate prices. Because a ﬁnite

set of prices implies that the feasible decision set has a discrete structure, the pricing setting studied

in Vera et al. (2019) is signiﬁcantly diﬀerent from this paper. In fact, Maglaras and Meissner (2006)

showed that a single-resource revenue management problem with discrete prices is equivalent to a

quantity-based revenue management problem.

In this paper, we restrict our attention to stationary demand. Several other papers studied revenue

management problems with non-stationary, time-correlated, or arbitrary demand sequences (e.g.

Chen and Farias 2013, Ma et al. 2020, Ma and Simchi-Levi 2020). Revenue management problems

with non-stationary demand are harder and therefore these papers consider diﬀerent performance

metrics such as approximation ratios or competitive ratios rather than regret. Chen and Farias

(2013) studied a dynamic pricing problem under a general non-stationary demand setting. They

showed that re-solving heuristics can achieve constant competitive ratios, whereas static pricing

policies have asymptotically diminishing competitive ratios. Due to diﬀerent model assumptions,

the results in Chen and Farias (2013) are not directly comparable to ours.

Another stream of related literature studies dynamic pricing with demand learning, where the un-

derlying demand function is unknown and needs to be learned on the ﬂy from sales data. Many

papers consider demand learning settings using the price-based ﬁnite-inventory revenue manage-

ment model from Gallego and Van Ryzin (1994) as the ground truth model (e.g., Aviv and Pazgal

2005, Besbes and Zeevi 2009, 2012, Wang et al. 2014, Lei et al. 2014, den Boer and Zwart 2015,

Ferreira et al. 2018). Re-solving heuristics have also been applied to demand learning algorithms

(Jasin 2015, Ferreira et al. 2018). In contrast, our paper assumes that the retailer has full infor-

mation about the demand curve and demand distributions, so we are able to show O(1) regret,

which is tighter than typical regret bounds in the learning literature. Also, the lower bound result

in this paper (Theorem 4) is proved using diﬀerent techniques from lower bound proofs in the

learning setting (e.g. Broder and Rusmevichientong 2012, Wang et al. 2020), as the latter relies on

information-theoretical lower bounds.

5

3 Main Results

In this section, we consider a price-based revenue management problem with a single product. The

extension to multiple products is deferred to Sec. 6. Although some of the results in this section are

special cases of those in Sec. 6, presenting the single-product model helps illustrate the key insight

of our analysis. We make the following assumptions on the single-product demand model.

A1. (Monotonicity) The demand rate function f : [p, p] → R+ is strictly decreasing with f (p) =
d, f (p) = d. (We allow the case p = +∞ or d = 0.) Note that this implies the existence of
the inverse function f −1 on [d, d].

A2. (Strict Concavity) The expected revenue r(d) = df −1(d) as a function of the demand rate
d is strictly concave. There exists a positive constant m > 0 such that r(cid:48)(cid:48)(d) ≤ −m for all
d ∈ [d, d]. The maximizer of r(d) is in the interior of the domain, i.e., arg maxd r(d) ∈ (d, d).

A3. (Smoothness) The third derivative of r(d) exists and satisﬁes |r(cid:48)(cid:48)(cid:48)(d)| ≤ M for all d ∈ [d, d].
Furthermore, there exists a constant C > 0 such that |r(d) − r(d(cid:48))| ≤ C|d − d(cid:48)| for all
d, d(cid:48) ∈ [d, d].

A4. (Martingale Diﬀerence Sequence) Conditional on the price pt (∀t = 1, . . . , T ), the de-
mand noise ξt is independent of {ξ1, . . . , ξt−1} and satisﬁes E[ξt | Ft−1] = E[ξt | pt] = 0 a.s.
The conditional distribution of ξt given pt is denoted by ξt ∼ Q(pt). In addition, |ξt| ≤ Bξ a.s.
for some constant Bξ < ∞.

A5. (Wasserstein Distance) There exists a constant L > 0 such that for any p, p(cid:48) ∈ [p, p], it
(cid:112)Eξ,ξ(cid:48)∼Ξ[|ξ − ξ(cid:48)|2] is
holds that W2(Q(p), Q(p(cid:48))) ≤ L|f (p) − f (p(cid:48))|, where W2(Q, Q(cid:48)) := inf Ξ
the L2-Wasserstein distance between Q, Q(cid:48), with Ξ being an arbitrary joint distribution with
marginal distributions being Q and Q(cid:48), respectively.

Assumptions (A1)–(A3) are standard assumptions for the price-based revenue management problem

(Gallego and Van Ryzin 1994, Jasin 2014). In particular, the strict concavity of r(d) stems from the

economic principle of diminishing marginal returns. Assumption (A4) allows demand noise to have

general dependence on the price. Assumption (A5) states that if two prices are close to each other,

then the demand noises given these prices should also have similar distributions. This assumption

is satisﬁed when the demand distribution is modeled by a parametric family of distributions (e.g.,

Bernoulli, binomial, truncated normal) whose parameters depend continuously on price.

3.1 Constant Regret of the Re-solving Heuristic

Let ru := maxx≥0 r(x) and xu := arg maxx≥0 r(x) be the unconstrained optimal revenue rate and
its maximizer, respectively. Because r(x) is strictly concave, in the case of a single product, it is
easily veriﬁed that the unique optimal solution to the ﬂuid model is equal to xF = min{xT , xu}
and hence the ﬂuid optimal price is f −1(min{xT , xu}).

6

When the normalized initial inventory level xT exceeds the (unconstrained) optimal demand rate
xu, it is easy to verify that both the static policy πs : pt ≡ f −1(xu) and the re-solving heuristic πr
have constant regret.

Proposition 1. Suppose xT > xu. Let πs : pt ≡ f −1(xu) be the static pricing policy. Then
Rπs(T, xT ) ≥ T r(xu) − O(1) ≥ Rπ∗(T, xT ) − O(1).
In addition, the re-solving heuristic satisﬁes
Rπr (T, xT ) ≥ T r(xu) − O(1) ≥ Rπ∗(T, xT ) − O(1).

Proof. Proof of Proposition 1. For any 1 ≤ t ≤ T , let xt = yt−1/t be the normalized inventory
level in period t. The static pricing policy commits to the price f −1(xu). If xt > xu, the re-solving
heuristic also selects the price f −1(xu). Let π denote either the static pricing policy πs or the re-
solving heuristic πr. Let Et = {sup1≤t(cid:48)≤t−1
τ =1 ξτ ≤ T (xT − xu)} be the event that the inventory
level never drops below xu from the start to the beginning of period t. Then, we have

(cid:80)t(cid:48)

Rπ(T, xT ) ≥ E

(cid:34) T

(cid:88)

(cid:35)
(r(xu) + ξt)1{Et}

= E

t=1

(cid:35)

(cid:32)

r(xu)1{Et}

= r(xu)

T −

(cid:34) T

(cid:88)

t=1

(cid:33)

Pr[E c
t ]

,

T
(cid:88)

t=1

where the ﬁrst equality uses the fact that {ξt} is a martingale diﬀerence sequence and Et ∈ Ft−1.
By Doob’s martingale inequality, for any 1 ≤ t ≤ T , we have

(cid:34)

Pr[E c

t ] = Pr

sup
1≤t(cid:48)≤t−1

t(cid:48)
(cid:88)

τ =1

(cid:35)
ξτ > T (xT − xu)

≤

(cid:80)t
E[ξ2
τ ]
T 2(xT − xu)2 ≤

τ =1

tB2
ξ
T 2(xT − xu)2 .

Thus, Rπ(T, xT ) ≥ T r(xu) − (B2
that T r(xu) ≥ Rπ∗(T, xT ) using Theorem 1. (cid:3)

ξ )/(xT − xu)2 = T r(xu) − O(1). The proof is complete by noting

However, analysis for the limited inventory case (xT < xu) is much more complicated. The static
price policy πs ≡ f −1(xT ) typically suﬀers Ω(
T ) regret in this case. The work by Jasin (2014)
established that the regret of the re-solving heuristic πr when measured against the ﬂuid benchmark
(Note that the “positive dual variable” assumption in Jasin (2014) (see
T r(xT ) is at most O(ln T ).
Theorem 2) is equivalent to the condition xT < xu in the single product case.) Our next theorem
improves the regret of πr to a constant.

√

Theorem 3. Suppose xT ∈ (d, xu). Let πr be the re-solving heuristic and π∗ be the optimal policy.
For T ≥ 2, it holds that Rπr (T, xT ) ≥ Rπ∗(T, xT ) − O(1).

Theorem 3 is the main result of this section and its proof is given in Sec. 4. Unlike the previous

results by Gallego and Van Ryzin (1994) and Jasin (2014), Theorem 3 compares the expected
revenue of πr directly with the optimal DP pricing policy π∗, rather than comparing it with the
ﬂuid approximation value T r(xT ). This allows for tighter regret bounds. In fact, it is impossible
to obtain O(1) regret using the ﬂuid model as a benchmark, as we shall establish in the next

subsection.

7

In light of Proposition 1 and Theorem 3, we know that the re-solving heuristic πr has constant
regret either in the suﬃcient inventory case (xT > xu) or in the limited inventory case (xT < xu).
The only remaining scenario is the boundary case (xT = xu). We will investigate this scenario using
numerical experiments in Sec. 5. Our numerical result indicates that πr does not have constant
regret in the boundary case. This observation is analogous to the situation for the quantity-based

revenue management problem, where the re-solving heuristic has constant regret when the ﬂuid

model (a linear program) has non-degenerate solutions but does not have constant regret in certain

boundary cases when the ﬂuid model has degenerate solutions (Jasin and Kumar 2012, Bumpensanti

and Wang 2020).

3.2 Logarithmic Gap of the Fluid Model Benchmark

In this section, we show that in the limited inventory case (xT < xu), the regret of the re-solving
policy πr measured against the ﬂuid approximation value T r(xT ) can be at least Ω(ln T ).

Theorem 4. Suppose xT ∈ (d, xu) and let πr be the re-solving policy deﬁned in Theorem 2. Sup-
pose there exists σ > 0 such that Eξ∼Q(p)[ξ2] ≥ σ2 for any p ∈ [p, p]. For suﬃciently large T , it
holds that Rπr (T, xT ) ≤ T r(xT ) − Ω(ln T ).

Theorem 4 is proved in Sec. 4. It implies that the logarithmic regret by Jasin (2014) (see Theo-

rem 2 above), which uses the ﬂuid model benchmark, is tight and cannot be improved. Because
Rπ∗(T, xT ) − Rπr (T, xT ) = O(1) by Theorem 3, Theorem 4 also shows that there is an logarithmic
gap Ω(ln T ) between the value of the optimal DP pricing policy and the ﬂuid approximation value.

This is why our constant regret analysis does not use the ﬂuid model as the benchmark.

Prior work on the quantity-based revenue management problem (Reiman and Wang 2008, Bumpen-

santi and Wang 2020, Vera et al. 2019) also considered diﬀerent regret benchmarks that are tighter

than the ﬂuid model, including various versions of the “hindsight optimum” benchmark. The “hind-

sight optimum” model assumes a clairvoyant who knows the aggregate realized demands for the

entire horizon at the start. In the Appendix of this paper, we show that one version of the hindsight

optimum benchmark proposed by Vera et al. (2019) has O(1) regret when measured against the

ﬂuid approximation benchmark. By Theorem 4, this hindsight optimum benchmark is also Ω(ln T )

away from the value of the optimal DP policy.

4 Proofs

Before presenting our proof, we ﬁrst deﬁne some notations.

For convenience, throughout this

section, time indices are counted backwards: time index t occurs when there are t periods until the
t (x) = Rπr (t, x) be the expected cumulative
end of the selling horizon. Let φ∗
revenue of the optimal DP pricing policy π∗ and the re-solving policy πr, respectively, when there
are t remaining periods and xt units of remaining inventory. For 1 ≤ τ ≤ T , let x∗
τ be

t (x) = Rπ∗(t, x) and φr

τ and xr

8

Table 1: Notations used in the proof.

Notation Deﬁnition
xu
φ∗
t (x)
φr
t (x)
Ft
x∗
τ , xr
τ
∆τ
¯∆→t
ξ∗
τ , ξr
τ
¯ξ∗
→t, ¯ξr
→t
¯ξδ
→t
Ξτ
T (cid:93)

xu = arg maxx∈[d,d] r(x)
t (x) = Rπ∗(t, x)
φ∗
t (x) = Rπr (t, x)
φr
σ-algebra of {ξτ }τ ≥t
remaining inventory divide by τ
see Eq. (4)
T −1 + ∆T −1
∆T
ξ∗
τ ∼ Q(f −1(x∗
T −1 + ξT −1
ξT
→t − ¯ξ∗
¯ξr
→t
joint distribution over (ξ∗
see Eq. (7)

T −2 + · · · + ∆t+1
τ + ∆τ )), ξr

T −2 + · · · + ξt+1

τ , ξr
τ )

t

t

τ ∼ Q(f −1(xr

τ ))

Meaning
the optimal demand rate without inventory constraints
reward of π∗ with t periods and xt inventory
reward of re-solving with t periods and xt inventory
all the events known at the end of period t
normalized inventory levels under policy π∗ and πr
the optimal demand correction with τ periods remaining
harmonic series of demand corrections up to t
the stochastic demand noises at time τ under π∗, πr
demand noises up to t, under π∗ and πr
diﬀerence in harmonic demand noise series
the joint distribution that minimizes (cid:112)EΞτ [|ξ∗
stopping time such that {xr

τ }τ ≤T (cid:93) is well-behaved

τ − ξr

τ |2]

the normalized inventory levels under policy π∗ and πr, when there are τ time periods remaining.
These notations are summarized in Table 1, with some additional notations being deﬁned later in

the proof.

The rest of this section is organized as follows. In the ﬁrst subsection we establish some properties
of the optimal policy π∗ and the re-solving policy πr. More speciﬁcally, we establish upper and
t (·) using the key quantities of { ¯∆→t} (harmonic
lower bounds of the expected rewards φ∗
series of optimal demand corrections), { ¯ξ∗
→t} (harmonic series of stochastic noise variables)
and T (cid:93) (a stopping time until which the demand noise process is well-behaved). We then proceed
with the proofs of Theorems 3, 4 by carefully analyzing the diﬀerences in the Taylor expansions of
t (·), φr
φ∗

t (·), φr
→t, ¯ξr

t (·).

4.1 Properties of the Optimal Policy and the Re-solving Heuristic

For any τ ≥ 1, let the random variable x∗
τ be the normalized inventory level (i.e., remaining
inventory divided by remaining time) at period τ under policy π∗.
τ τ and yτ −1 =
x∗
τ −1(τ − 1) be the actual inventory levels when τ and (τ − 1) time periods are remaining. If the
policy selects the demand rate x∗
τ + ∆ + ξτ ), which implies
τ − (∆ + ξτ )/(τ − 1). Therefore, the value of the optimal policy π∗ is given
τ −1 = yτ −1/(τ − 1) = x∗
x∗
by the following Bellman equation:

τ + ∆ ∈ [d, d], we have yτ −1 = yτ − (x∗

Let yτ = x∗

τ (x∗
φ∗

τ ) =

max

∆∈[d−x∗

τ ,d−x∗
τ ]

r(x∗

τ + ∆) + Eξτ ∼Q(f −1(x∗

τ +∆))

(cid:20)

φ∗
τ −1

(cid:18)

x∗
τ −

∆ + ξτ
τ − 1

(cid:19)(cid:21)

.

Let ∆τ denote the maximizer of the above equation. Let ξ∗
is drawn from the distribution Q(f −1(x∗
level in the next period is x∗

τ be the realized demand noise, which
τ + ∆τ )) (by Assumption (A4)). The normalized inventory
τ )/(τ − 1). The Bellman equation can be rewritten

τ − (∆τ + ξ∗

τ −1 = x∗

9

as

τ (x∗
φ∗

τ ) = r(x∗

τ + ∆τ ) + E

(cid:20)

φ∗
τ −1

(cid:18)

x∗
τ −

(cid:19)(cid:21)

∆τ + ξ∗
τ
τ − 1

∀ 2 ≤ τ ≤ T, x∗

τ ≥ 0.

(4)

The above equation implies d − x∗
be in the domain [d, d].

τ ≤ ∆τ ≤ d − x∗

τ , but we remark that it does not required x∗

τ to

ξ∗
For any t < T , let ¯∆→t := ∆T
t+1
t be the
harmonic series of demand noises up to time t under the optimal policy. For t = T , we also deﬁne
¯∆→t = ¯ξ∗

T −2 + · · · + ∆t+1

→t = 0. It then holds that

ξ∗
T −1
T −2 + · · · +

T −1 + ∆T −1

→t := ξT

and ¯ξ∗

T −1 +

t

τ = xT − ¯∆→τ − ¯ξ∗
x∗

→τ ,

∀ 1 ≤ τ ≤ T.

(5)

Next, we consider the re-solving heuristic πr. For any τ ≥ 1, let the random variable xr
normalized inventory level under the re-solving heuristic. If xr
selects the price f −1(xr
from the distribution Q(f −1(xr
τ −1 = (xτ τ − xτ − ξr
xr
be written as

τ be the
τ ∈ [d, xu], the re-solving heuristic
τ be the realized demand noise under this price, which is drawn
τ )). The normalized inventory level in the next period is equal to
τ /(τ − 1). Thus, the value of the re-solving policy πr can

τ )/(τ − 1) = xr

τ ). Let ξr

τ − ξr

t (xr
φr

τ ) = r(xr

(cid:20)
φr
τ ) + E
t−1

(cid:18)

xr
τ −

ξr
τ
τ − 1

(cid:19)(cid:21)

∀ 2 ≤ τ ≤ T, d ≤ xr

τ ≤ xu.

(6)

Note that Eq. (6) does not hold for xr
τ > xu, in which case the re-solving policy πr would commit to
the unconstrained optimal demand rate xu instead of xr
τ . This motivates the deﬁnition of a certain
stopping time T (cid:93) in Eq. (7) below, which ensures that Eq. (6) holds for all τ ≥ T (cid:93). Comparing
Eq. (6) with Eq. (4), we remark that the re-solving heuristics πr can be viewed a special case of
the dynamic programming policy with the decision rule restricted to ∆τ ≡ 0 for all xr

τ ∈ [d, xu].

Deﬁne a time index T (cid:93) as

(cid:26)

T (cid:93) := max

τ ≥ 1 :

(cid:12)
(cid:12) ¯ξr

→τ −1

(cid:12)
(cid:12) > min

(cid:18)

xT − d, xu − xT , −

(cid:19)(cid:27)

r(cid:48)(xT )
r(cid:48)(cid:48)(xT )

∨ 2,

(7)

ξr
τ +1
τ

→τ = ξr

T

T −1 + · · · +

where ¯ξr
is the harmonic series of demand noises under the re-solving policy.
Note that ¯ξr
t=τ and measurable with respect to Fτ , so T (cid:93) is indeed a
stopping time. Because of the bound | ¯ξ→τ | ≤ min{xT − d, xu − xT } holds for all τ ≥ T (cid:93) − 1, we
have

→τ −1 is a function of {ξr

t }T

τ = xT − ¯ξr
xr

→τ ,

∀τ ≥ T (cid:93) − 1.

(8)

Intuitively, T (cid:93) is the ﬁrst time that the inventory level in the next period xr
τ −1 falls outside of the
interval [d, xu]. In other words, the inventory levels of the re-solving heuristic xr
τ satisﬁes Eq. (6)
up to time T (cid:93). The additional term −r(cid:48)(xT )/r(cid:48)(cid:48)(xT ) in Eq. (7) is needed for technical reasons in

10

the proof (this term is equal to xu − xT when r(d) is a quadratic function).

Lemma 1. For xT ∈ (d, xu) and any T ≥ 1, it holds that

E[T (cid:93)] ≤ 2 +

4B4
ξ
min{xT − d, xu − xT , −r(cid:48)(xT )/r(cid:48)(cid:48)(xT )}4 .

(9)

Proof. Proof of Lemma 1. Let γ := min{xT − d, xu − xT , −r(cid:48)(xT )/r(cid:48)(cid:48)(xT )}. By the deﬁnition from
Eq. (7), for τ > 2, we have

Pr[T (cid:93) ≥ τ ] = Pr

(cid:34)

(cid:35)

sup
τ −1≤t≤T

| ¯ξr

→t| > γ

≤

E[| ¯ξr

→τ −1|4]
γ4

,

which follows from Doob’s martingale inequality by noting that {ξτ /τ } is a martingale diﬀerence
→t = ξr
sequence (see Assumption (A4)). Recall that ¯ξr
t | ≤ Bξ a.s. For τ > 2,
it is easily veriﬁed that

ξr
t with |ξr
t+1

T −1 + · · · +

T

E[| ¯ξr

→τ −1|4] =

(cid:88)

τ ≤j,k≤T

E[|ξr

j |2|ξr
(j − 1)2(k − 1)2 ≤

k|2]





(cid:88)

τ ≤j≤T

B2
ξ
(j − 1)2









(cid:88)

τ ≤k≤T

B2
ξ
(k − 1)2



 ≤

4B4
ξ
(τ − 1)2 .

Using the equality E[T (cid:93)] = (cid:80)T

τ =1 Pr[T (cid:93) ≥ τ ], we have

E[T (cid:93)] ≤

T
(cid:88)

τ =1

E[| ¯ξr

→τ −1|4]
γ4

≤ 2 +

T
(cid:88)

τ =3

4B4
ξ

γ4(τ − 1)2 ≤ 2 +

4B4
ξ
γ4 .

(cid:3)

Lemma 2. Let xT ∈ (d, xu). Let T (cid:93) be the stopping time deﬁned in Eq. (7). Then, it holds that

(cid:34) T

(cid:88)

E

τ =T (cid:93)

(cid:35)

r(x∗

τ + ∆τ )

≤ φ∗

T (xT ) ≤ E

(cid:34) T

(cid:88)

E

τ =T (cid:93)

(cid:35)

r(xr
τ )

≤ φr

T (xT ) ≤ E

(cid:34) T

(cid:88)

τ =T (cid:93)

(cid:34) T

(cid:88)

τ =T (cid:93)

r(x∗

τ + ∆τ ) + (T (cid:93) − 1)r(min{x∗

T (cid:93)−1, xu})

(cid:35)

,

r(xr

τ ) + (T (cid:93) − 1)r(min{xr

(cid:35)
T (cid:93)−1, xu})

.

(10)

Proof. Proof of Lemma 2. For the optimal DP policy, the revenue collected in periods T, T −
1, · · · , T (cid:93) is (cid:80)T
τ ]. At the beginning of period T (cid:93) − 1, the remaining

τ + ∆τ ) + f −1(x∗

τ + ∆τ )ξ∗

τ =T (cid:93)[r(x∗

11

inventory level is x∗

T (cid:93)−1(T (cid:93) − 1). Therefore,

φ∗
T (xT ) = E

= E

(cid:34) T

(cid:88)

τ =T (cid:93)

(cid:34) T

(cid:88)

τ =T (cid:93)

[r(x∗

τ + ∆τ ) + f −1(x∗

τ + ∆τ )ξ∗

τ ] + φ∗

T (cid:93)−1(x∗

T (cid:93)−1)

(cid:35)

r(x∗

τ + ∆τ ) + φ∗

T (cid:93)−1(x∗

(cid:35)
T (cid:93)−1)

,

where the second equality holds because E[(cid:80)T
τ =T (cid:93) f −1(x∗
τ ] = 0 by applying Doob’s optional
stopping theorem. Similarly, for the re-solving policy, because the revenue collected in periods
T, T − 1, · · · , T (cid:93) is (cid:80)T
τ ], we have

τ ) + f −1(xr

τ +∆τ )ξ∗

τ =T (cid:93)[r(xr

τ )ξr

T (xr
φr

T ) = E

= E

(cid:34) T

(cid:88)

τ =T (cid:93)

(cid:34) T

(cid:88)

τ =T (cid:93)

[r(xr

τ ) + f −1(xr

τ )ξr

τ ] + φr

T (cid:93)−1(xr

(cid:35)
T (cid:93)−1)

r(xr

τ ) + φr

T (cid:93)−1(xr

(cid:35)
T (cid:93)−1)

.

To complete the proof, note that for any admissible policy π, we have 0 ≤ φπ
1)r(xc

T (cid:93)−1) = (T (cid:93) − 1)r(min{xT (cid:93)−1, xu}) by Theorem 1. (cid:3)

T (cid:93)−1(xT (cid:93)−1) ≤ (T (cid:93) −

4.2 Proof of Theorem 3

In this section we prove Theorem 3. By Lemma 2, for any xT ∈ (d, xu), it holds that

φ∗
T (xT ) ≤ E

τ =T (cid:93) r(x∗

τ + ∆τ ) + (T (cid:93) − 1)r(min{x∗

(cid:104)(cid:80)T

(cid:105)
T (cid:93)−1, xu})

φr
T (xT ) ≥ E

(cid:104)(cid:80)T

(cid:105)
τ =T (cid:93) r(xr
τ )

.

,

(11)

(12)

Recall that T (cid:93) is the stopping time deﬁned in Eq. (7). For any τ ≥ T (cid:93) −1, we have x∗
→τ := ¯ξr
¯ξ∗
→τ by Eq. (5), xr

→τ by Eq. (8). For notational simplicity, deﬁne ¯ξδ

τ = xT − ¯ξr

τ = xT − ¯∆→τ −
→τ − ¯ξ∗
→τ . So,

r(x∗

τ + ∆τ ) − r(xr

τ ) ≤ r(cid:48)(xT − ¯ξr

→τ )[∆τ − ¯∆→τ + ¯ξδ

≤ r(cid:48)(xT )[∆τ − ¯∆→τ + ¯ξδ

+

M
2

→τ |2|∆τ − ¯∆→τ + ¯ξδ
| ¯ξr

→τ ] −

|∆τ − ¯∆→τ + ¯ξδ

m
2
→τ [∆τ − ¯∆→τ + ¯ξδ
→τ ] − r(cid:48)(cid:48)(xT ) ¯ξr
m
2

|∆τ − ¯∆→τ + ¯ξδ

→τ | −

→τ |2,

→τ |2

→τ ]

(13)

where the ﬁrst inequality uses the strict concavity condition (A2) and the second inequality uses

the smoothness condition (A3) of r(d).

τ := ξr

Deﬁne ξδ
dexed backwards). By Doob’s optional stopping theorem, E[(cid:80)T

→τ is measurable with respect to Fτ +1 (note: Fτ +1 ⊂ Fτ as time are in-
τ ] =

τ ] = 0 and E[(cid:80)T

τ −ξ∗

→τ ξδ

τ =T (cid:93) ¯ξr

τ =T (cid:93) ξδ

τ . Also, ¯ξδ

12

0. Taking expectations on both sides of Eq. (13) and summing over τ = T, T − 1, · · · , T (cid:93), we have

(cid:20) T

(cid:88)

E

(cid:0)r(x∗

τ + ∆τ ) − r(xr

τ )(cid:1)

(cid:21)

(cid:20) T

(cid:88)

≤ E

(cid:18)

r(cid:48)(xT )[∆τ − ¯∆→τ + ¯ξδ

→τ − ξδ

τ ] − r(cid:48)(cid:48)(xT ) ¯ξr

→τ [∆τ − ¯∆→τ ]

τ =T (cid:93)

+r(cid:48)(cid:48)(xT ) ¯ξr

→τ [ξδ

τ − ¯ξδ

→τ ] +

τ =T (cid:93)
M
2

→τ |2|∆τ − ¯∆→τ + ¯ξδ
| ¯ξr

→τ | −

|∆τ − ¯∆→τ + ¯ξδ

→τ |2

(cid:19)(cid:21)

. (14)

m
2

Deﬁne η∗ = −(x∗
Eq. (13) to period τ = T (cid:93) − 1, we have

T (cid:93)−1 − xu)+, ηr = (r(cid:48)(xT )/r(cid:48)(cid:48)(xT ) − ¯ξr

→T (cid:93)−1)+ and η = η∗ + ηr. By applying

r(min{x∗

T (cid:93)−1, xu}) − r(xr
≤ r(cid:48)(xT )[η − ¯∆→T (cid:93)−1 + ¯ξδ

T (cid:93)−1 − ηr) = r(x∗
→T (cid:93)−1] − r(cid:48)(cid:48)(xT )( ¯ξr

+

M
2

| ¯ξr
→T (cid:93)−1 + ηr|2|η − ¯∆→T (cid:93)−1 + ¯ξδ

→T (cid:93)−1| −

T (cid:93)−1 − ηr)

T (cid:93)−1 + η∗) − r(xr
→T (cid:93)−1 + ηr)[η − ¯∆→T (cid:93)−1 + ¯ξδ
|η − ¯∆→T (cid:93)−1 + ¯ξδ

→T (cid:93)−1|2

m
2

→T (cid:93)−1]

≤ r(cid:48)(xT )[η − ¯∆→T (cid:93)−1 + ¯ξδ

→T (cid:93)−1] − r(cid:48)(cid:48)(xT )( ¯ξr

→T (cid:93)−1 + ηr)[η − ¯∆→T (cid:93)−1 + ¯ξδ

→T (cid:93)−1] +

| ¯ξr
→T (cid:93)−1|4

−

M 2
8m

| ¯ξr
→T (cid:93)−1|4 +

M
2

→T (cid:93)−1|2|η − ¯∆→T (cid:93)−1 + ¯ξδ
| ¯ξr

→T (cid:93)−1| −

m
2

|η − ¯∆→T (cid:93)−1 + ¯ξδ

≤ r(cid:48)(xT )[η − ¯∆→T (cid:93)−1 + ¯ξδ

→T (cid:93)−1] − r(cid:48)(cid:48)(xT )( ¯ξr

→T (cid:93)−1 + ηr)[η − ¯∆→T (cid:93)−1 + ¯ξδ

→T (cid:93)−1] +

M 2
8m
→T (cid:93)−1|2
M 2
8m

| ¯ξr
→T (cid:93)−1|4,
(15)

where the second inequality holds because | ¯ξr
inequality follows by completing the square, because − M 2
¯ξδ
→T (cid:93)−1| − m
surely.

8m | ¯ξr
2 (|η − ¯∆→T (cid:93)−1 + ¯ξδ

2 |η − ¯∆→T (cid:93)−1 + ¯ξδ

→T (cid:93)−1|2 = − m

→T (cid:93)−1 + ηr| ≤ | ¯ξr

→T (cid:93)−1| by deﬁnition and the last
→T (cid:93)−1|2|η − ¯∆→T (cid:93)−1 +
→T (cid:93)−1|2)2 ≤ 0 almost

→T (cid:93)−1|4 + M
→T (cid:93)−1| − M

2 | ¯ξr
2m | ¯ξr

Subtracting (12) from (11), we obtain

T (xT )

T (xT ) − φr
φ∗
(cid:34) T

(cid:88)

≤ E

≤ E

τ =T (cid:93)

(cid:34) T

(cid:88)

τ =T (cid:93)

(cid:0)r(x∗

τ + ∆τ ) − r(xr

τ )(cid:1) + (T (cid:93) − 1)r(min{x∗

T (cid:93)−1, xu})

(cid:35)

(cid:0)r(x∗

τ + ∆τ ) − r(xr

τ )(cid:1) + (T (cid:93) − 1)(cid:0)r(x∗

T (cid:93)−1 + η∗) − r(xr

T (cid:93)−1 − ηr)(cid:1)

(cid:35)

(cid:104)

+ E

(T (cid:93) − 1)r(xu)

(cid:105)

≤ E(cid:2)r(cid:48)(xT )A − r(cid:48)(cid:48)(xT )B + r(cid:48)(cid:48)(xT )C + D(cid:3) + E

(cid:105)
(cid:104)
(T (cid:93) − 1)r(xu)

,

(16)

where the second inequality holds because xT (cid:93)−1 + η∗ = min{x∗

T (cid:93)−1, xu} by deﬁnition, and xu is

13

the maximizer of r(·). The last inequality uses (14) (15) and the terms A, B, C, D are deﬁned as

A = (cid:80)T
B = (cid:80)T
C = (cid:80)T
D = (cid:80)T

→τ − ξδ

τ =T (cid:93)[∆τ − ¯∆→τ + ¯ξδ
→τ [∆τ − ¯∆→τ ] − (T (cid:93) − 1) ¯ξr
τ =T (cid:93) ¯ξr
→τ ] − (T (cid:93) − 1)( ¯ξr
τ =T (cid:93) ¯ξr
→τ [ξδ
(cid:0) M
2 | ¯ξr

τ − ¯ξδ
→τ |2|∆τ − ¯∆→τ + ¯ξδ

τ =T (cid:93)

τ ] − (T (cid:93) − 1)( ¯∆→T (cid:93)−1 − ¯ξδ

→T (cid:93)−1) + (T (cid:93) − 1)η,

→T (cid:93)−1

¯∆→T (cid:93)−1 + (T (cid:93) − 1)( ¯ξr
→T (cid:93)−1,

→T (cid:93)−1 + ηr) ¯ξδ

→T (cid:93)−1 + ηr)η,

→τ | − m

2 |∆τ − ¯∆→τ + ¯ξδ

→τ |2(cid:1) + (T (cid:93) − 1) M 2

8m | ¯ξr

→T (cid:93)−1|4.

Next, we analyze the four terms A, B, C, D separately. Recall the deﬁnition ¯∆→τ = ∆T
→τ = ξδ
δ
ξ

. For the term A, with elementary algebra, it can be veriﬁed that

T −1 + · · · +

ξδ
τ +1
τ

T

T −1 +· · ·+ ∆τ +1

τ

,

(cid:80)T

τ =T (cid:93)[∆τ − ¯∆→τ + ¯ξδ

→τ − ξδ

τ ] − (T (cid:93) − 1)( ¯∆→T (cid:93)−1 − ¯ξδ

→T (cid:93)−1) = 0,

(17)

which implies that E[A] = E[(T (cid:93) − 1)η].

Re-organizing all terms in B by ξt (∀t ≥ T (cid:93)), we obtain

(cid:80)T

t=T (cid:93)

→τ [∆τ − ¯∆→τ ] − (T (cid:93) − 1) ¯ξr
τ =T (cid:93) ¯ξr
ξr
t
t−1
ξr
t
t−1
t=T (cid:93) ξr
t

(cid:80)t−1
τ =T (cid:93)(∆τ − ¯∆→τ ) − (T (cid:93) − 1) ¯ξr
(cid:2)−(t − 1) ¯∆→t−1 + (T (cid:93) − 1) ¯∆→T (cid:93)−1
¯∆→t−1,

= (cid:80)T
= (cid:80)T
t=T (cid:93)
= − (cid:80)T

→T (cid:93)−1

¯∆→T (cid:93)−1

→T (cid:93)−1

¯∆→T (cid:93)−1
(cid:3) − (T (cid:93) − 1) ¯ξr

¯∆→T (cid:93)−1

→T (cid:93)−1

where the last equality uses ξ
∆T
T −1 + · · · + ∆τ
Doob’s optional stopping theorem, we have E[− (cid:80)T

ξδ
T (cid:93)−1 . Note that the random variable ¯∆→τ −1 =
T (cid:93)
τ −1 is measurable with respect to Fτ +1, since the DP policy is non-anticipating. By
τ =T (cid:93) ξr
τ

¯∆→τ −1] = 0 and thus

→T (cid:93)−1 = ξδ

T −1 + · · · +

δ

T

E[B] = E

(cid:104)
− (cid:80)T

τ =T (cid:93) ξr
τ

¯∆→τ −1

(cid:105)

+ E

(cid:104)
(T (cid:93) − 1)( ¯ξr

→T (cid:93)−1 + ηr)η

(cid:105)

= E

(cid:104)
(T (cid:93) − 1)( ¯ξr

→T (cid:93)−1 + ηr)η

(cid:105)

. (18)

Next we analyze the term C. Note that C has a similar structure as B; therefore

(cid:34)

E[C] = E

−

T
(cid:88)

t=T (cid:93)

(cid:35)

(cid:104)

− E

ξr
t

¯ξδ
→t−1

(T (cid:93) − 1)ηr ¯ξδ

→T (cid:93)−1

(cid:105)

(cid:34)

= E

−

T
(cid:88)

t=T (cid:93)

ξr
t (

ξδ
T
T − 1

+ · · · +

(cid:35)

ξδ
t+1
t

+

ξδ
t
t − 1

)

− E

(cid:104)
(T (cid:93) − 1)ηr ¯ξδ

→T (cid:93)−1

(cid:105)

(cid:34)

= E

−

(cid:35)

ξr
t ξδ
t
t − 1

T
(cid:88)

t=T (cid:93)

− E

(cid:104)
(T (cid:93) − 1)ηr ¯ξδ

→T (cid:93)−1

(cid:105)

,

14

where the last equality uses Doob’s optional stopping theorem. Because |ξr

t | ≤ Bξ a.s., we have

(cid:12)
(cid:12)
E
(cid:12)
(cid:12)
(cid:12)

(cid:34)

−

T
(cid:88)

t=T (cid:93)

ξr
t ξδ
t
t − 1

(cid:35)(cid:12)
(cid:12)
(cid:12)
(cid:12)
(cid:12)

(cid:34) T

(cid:88)

≤ E

|ξr

t ||ξr

t − ξ∗
t |

t − 1

(cid:35)

≤ BξE

(cid:34) T

(cid:88)

t=T (cid:93)

(cid:35)

|ξr

t − ξ∗
t |
t − 1

= BξE

(cid:34) T

(cid:88)

t=2

1{T (cid:93) ≤ t}

(cid:35)

|ξr

t − ξ∗
t |
t − 1

= BξE

(cid:34) T

(cid:88)

t=2

1{T (cid:93) ≤ t}

E[|ξr

t | | Ft+1]

t=T (cid:93)
t − ξ∗
t − 1

(cid:35)

≤ BξE

(cid:34) T

(cid:88)

t=2

1{T (cid:93) ≤ t}

(cid:112)E[|ξr

t |2 | Ft+1]

t − ξ∗
t − 1

(cid:35)

,

(19)

where the last equality holds because the event {T (cid:93) ≤ t} = {T (cid:93) ≥ t + 1}c ∈ Ft+1.

Because the regret is deﬁned as the diﬀerence between the expected revenues under the optimal
DP policy and the re-solving heuristic, we can choose the joint distribution of (ξ∗
t ) freely, as long
as their marginal distributions remain the same. We choose the joint distributions as follows. At
each time period t with posted prices p∗
t , let
(ξ∗

t and corresponding demand rates x∗
t ), Qt(pr

t ) ∼ Ξt such that the marginal distributions are Qt(p∗

t ) and furthermore

t + ∆t and xr

t , ξr

t , ξr

t , pr

(cid:113)

E [|ξ∗

t − ξr

t |2|Ft+1] =

(cid:113)

E(ξ∗

t )∼Ξt [|ξ∗

t ,ξr

t − ξr

t |2] ≤ L|f (p∗

t ) − f (pr

t )| = L|x∗

t + ∆t − xr

t | a.s.

The existence of such a joint distribution Ξt is implied by W2(Q(p∗
Assumption (A5)). As a result, Eq. (19) can be simpliﬁed to

t ), Q(pr

t )) ≤ L|f (p∗

t ) − f (pr

t )| (see

(cid:12)E[C](cid:12)
(cid:12)

(cid:12) ≤ LBξE

(cid:34) T

(cid:88)

τ =T (cid:93)

|∆τ − ¯∆→τ + ¯ξδ
τ − 1

→τ |

(cid:35)

+ E

Combining Eq. (16) with Eqs. (17,18,20), we have

(cid:104)
(T (cid:93) − 1)ηr(cid:12)

(cid:12) ¯ξδ

→T (cid:93)−1

(cid:105)

(cid:12)
(cid:12)

.

(20)

E(cid:2)r(cid:48)(xT )A − r(cid:48)(cid:48)(xT )B + r(cid:48)(cid:48)(xT )C + D(cid:3)
(cid:20)
≤ E

r(cid:48)(xT )η − r(cid:48)(cid:48)(xT )( ¯ξr

(T (cid:93) − 1)

(cid:18)

→T (cid:93)−1 + ηr)η − r(cid:48)(cid:48)(xT )ηr(cid:12)
(cid:12) ¯ξδ

→T (cid:93)−1

(cid:12)
(cid:12) +

M 2
8m

(cid:19)

| ¯ξr
→T (cid:93)−1|4

T
(cid:88)

(cid:18)(cid:18)

+

|r(cid:48)(cid:48)(xT )|

LBξ
τ − 1

+

M
2

(cid:19)

| ¯ξr

→τ |2

|∆τ − ¯∆→τ + ¯ξδ

→τ | −

m
2

|∆τ − ¯∆→τ + ¯ξδ

→τ |2

(cid:19) (cid:21)

τ =T (cid:93)
(cid:20)

(T (cid:93) − 1)

≤ E

(cid:18)

T
(cid:88)

+

τ =T (cid:93)
(cid:20)

(cid:18)

r(cid:48)(xT )η − r(cid:48)(cid:48)(xT )( ¯ξr

→T (cid:93)−1 + ηr)η − r(cid:48)(cid:48)(xT )ηr(cid:12)
(cid:12) ¯ξδ

→T (cid:93)−1

(cid:18)

1
2m

|r(cid:48)(cid:48)(xT )|

LBξ
τ − 1

+

M
2

| ¯ξr

→τ |2

(cid:19)2 (cid:21)

≤ E

(T (cid:93) − 1)

r(cid:48)(xT )η − r(cid:48)(cid:48)(xT )( ¯ξr

→T (cid:93)−1 + ηr)η − r(cid:48)(cid:48)(xT )ηr(cid:12)
(cid:12) ¯ξδ

→T (cid:93)−1

+

T
(cid:88)

τ =T (cid:93)

1
m

(cid:18)
(cid:0)|r(cid:48)(cid:48)(xT )|

LBξ
τ − 1

(cid:1)2 +

M 2
4

(cid:19) (cid:21)
.

| ¯ξr

→τ |4

(cid:12)
(cid:12) +

M 2
8m

| ¯ξr
→T (cid:93)−1|4

(cid:12)
(cid:12) +

M 2
8m

| ¯ξr
→T (cid:93)−1|4

(cid:19)

(cid:19)

(21)

In the second inequality above, we use the fact that − m

2 u2 + bu = − m

2 (u − b

m )2 + b2

2m ≤ b2

2m for

15

any b, u ∈ R and m > 0. In the third inequality, we use the fact that (a + b)2 ≤ 2(a2 + b2) for any
a, b ∈ R.

→T (cid:93)−1)+, so r(cid:48)(xT ) − r(cid:48)(cid:48)(xT )( ¯ξr

Recall that ηr = (r(cid:48)(xT )/r(cid:48)(cid:48)(xT ) − ¯ξr
r(cid:48)(cid:48)(xT )( ¯ξr
→T (cid:93)−1 + ηr)]ηr = 0. Recall that η∗ = −(x∗
ηr)]η∗ ≤ 0. In sum, as η = η∗ + ηr, we have [r(cid:48)(xT ) − r(cid:48)(cid:48)(xT )( ¯ξr

T (cid:93)−1 − xu)+ ≤ 0, so [r(cid:48)(xT ) − r(cid:48)(cid:48)(xT )( ¯ξr
→T (cid:93)−1 + ηr)]η ≤ 0.
→T (cid:93)−1| = | ¯ξr
Furthermore, by the deﬁnition of the stopping time T (cid:93), we have | ¯ξr
r(cid:48)(xT )/|r(cid:48)(cid:48)(xT )| + Bξ/(T (cid:93) − 1), so ηr ≤ Bξ/(T (cid:93) − 1) a.s. By Eq. (21), we get

→T (cid:93)−1 + ηr) ≥ 0 and [r(cid:48)(xT ) −
→T (cid:93)−1 +

T (cid:93)/(T (cid:93) − 1)| ≤

→T (cid:93) + ξr

E(cid:2)r(cid:48)(xT )A − r(cid:48)(cid:48)(xT )B + r(cid:48)(cid:48)(xT )C + D(cid:3)
(cid:20)
≤E

(cid:12)
(cid:12) + (T (cid:93) − 1)

|r(cid:48)(cid:48)(xT )|Bξ

(cid:12)
(cid:12) ¯ξδ

→T (cid:93)−1

M 2
8m

| ¯ξr
→T (cid:93)−1|4 +

T
(cid:88)

τ =T (cid:93)

(cid:18)

1
m

(cid:0)|r(cid:48)(cid:48)(xT )|

LBξ
τ − 1

(cid:1)2 +

M 2
4

(cid:19) (cid:21)
.

| ¯ξr

→τ |4

To complete the proof, we upper bound each term in Eq. (22). First it is easy to verify that

T
(cid:88)

τ =T (cid:93)

(cid:18) |r(cid:48)(cid:48)(xT )|LBξ
τ − 1

(cid:19)2

≤ (|r(cid:48)(cid:48)(xT )|LBξ)2

T −1
(cid:88)

j=1

1
j2 ≤ 2(|r(cid:48)(cid:48)(xT )|LBξ)2 a.s.

(22)

(23)

→τ |4. Recall the deﬁnition that ¯ξr
→t−1. Then {zt} is a martingale adapted to the ﬁltration {Ft}T

We next focus on the terms involving | ¯ξr
Let zt := ¯ξr
which implies that {|zt|4} is a submartingale. Let St = (cid:80)T
also a submartingale. Since T (cid:93) is stopping time, we have

→t = ξr
T −1 + · · · +
.
t=1 by Assumption (A4),
τ =t(t − 1)(|zτ |4 − |zτ +1|4), then {St} is

ξr
t+1
t

T

(cid:34)

E

(T (cid:93) − 1)| ¯ξr

→T (cid:93)−1|4 +

T
(cid:88)

τ =T (cid:93)

(cid:35)

| ¯ξr

→τ |4

= E[ST (cid:93)] ≤ E[S1] = E

(cid:34) T

(cid:88)

τ =2

(cid:35)

|zτ |4

= E

(cid:35)

| ¯ξr

→τ |4

.

(cid:34) T

(cid:88)

τ =1

It is easy to verify that

E[| ¯ξr

→t|4] =

(cid:88)

j,k>t

Subsequently,

j |2|ξr

E[|ξr
k|2]
(j − 1)2(k − 1)2 ≤ B4

ξ



(cid:88)



j>t

1
(j − 1)2



2



≤

4B4
ξ
t2 .

(cid:34)

E

M 2
8m

(T (cid:93) − 1)| ¯ξr

→T (cid:93)−1|4 +

(cid:35)

(cid:12)
(cid:12) ¯ξr

→τ

4

(cid:12)
(cid:12)

M 2
4m

T
(cid:88)

τ =T (cid:93)

≤

M 2
4m

(cid:88)T

τ =1

4B4
ξ
τ 2 ≤

M 2B4
ξ
2m

.

(24)

To analyze the term |ξ

δ
→T (cid:93)−1|, let ζt := ¯ξδ

t−1. As before, {ζt} is martingale and thus {|ζt|} is a

16

submartingale. Since ξ

δ

→τ = ξδ

T

T −1 + · · · +

ξδ
τ +1
τ

and |ξδ

τ | = |ξr

τ − ξ∗

τ | ≤ 2Bξ a.s., we have

E(cid:2)(cid:12)

(cid:12) ¯ξδ

→T (cid:93)−1

(cid:3) = E[|ζT (cid:93)|] ≤ [|ζ2|] = E(cid:2)(cid:12)
(cid:12)
(cid:12)

(cid:12) ¯ξδ

→1

(cid:12)
(cid:3) ≤
(cid:12)

(cid:113)

E(cid:2)(cid:12)

(cid:12) ¯ξδ

→1

(cid:12)
2(cid:3) ≤ 2Bξ
(cid:12)

(cid:118)
(cid:117)
(cid:117)
(cid:116)

T −1
(cid:88)

j=1

1
j2 ≤ 3Bξ.

(25)

Combining Eqs. (16,22,23,24,25) we have

T (xT ) − φr
φ∗

T (xT ) ≤

M 2B4
ξ
2m

+

2(|r(cid:48)(cid:48)(xT )|LBξ)2
m

+ 3|r(cid:48)(cid:48)(xT )|B2

ξ + r(xu)E[T (cid:93) − 1] = O(1),

(26)

where the last equality holds by applying Lemma 1. This completes the proof of Theorem 3.

4.3 Proof of Theorem 4

τ = xT − ¯ξr

→τ for all τ ≥ T (cid:93) − 1, where T (cid:93) is the stopping time deﬁned in Eq. (7).
Recall that xr
Because this proof only concerns the re-solving policy, for convenience we will drop the superscript
r and denote ξr

→τ by ξτ , ¯ξ→τ .

τ , ¯ξr

Invoking Lemma 2, we have

T r(xT ) − φr

T (xT ) ≥ E

= E

(cid:104)(cid:80)T

(cid:104)(cid:80)T

τ =T (cid:93)(r(xT ) − r(xr

T (cid:93)−1, xu})
τ )) + (T (cid:93) − 1)(r(xT ) − r(min{xr
(cid:105)

τ =T (cid:93)(r(xT ) − r(xr

τ )) + (T (cid:93) − 1)(r(xT ) − r(xr

T (cid:93)−1)

(cid:105)

(cid:104)

+ E

(T (cid:93) − 1)(r(xr

T (cid:93)−1) − r(min{xr

T (cid:93)−1, xu})

(cid:105)

.

(27)

By the smoothness of r(d) (Assumption (A3)) and the fact that xr
term in Eq. (27) is bounded by

T (cid:93) ≤ xu (see Eq. (7)), the second

(cid:104)
(T (cid:93) − 1)(r(xr

E

T (cid:93)−1) − r(min{xr

(cid:105)
T (cid:93)−1, xu})

≥ − CE

≥ − CE

= − CE

(cid:104)
(T (cid:93) − 1)(xr
(cid:104)
(T (cid:93) − 1)|xr
(cid:104)
(T (cid:93) − 1)

T (cid:93)−1 − xu)+(cid:105)
(cid:105)
T (cid:93)−1 − xr
T (cid:93)|
(cid:12)
(cid:105)
ξT (cid:93)
(cid:12)
(cid:12)
T (cid:93)−1

(cid:12)
(cid:12)
(cid:12)

≥ −CBξ,

where the last inequality holds since |ξτ | ≤ Bξ a.s for all τ .

In the rest of the proof, we will bound the ﬁrst term in Eq. (27).
r(xr

τ ) − r(xT ) at xT and using the strict concavity of r(d) (Assumption (A2)), we have

Expanding the diﬀerence

r(xT ) − r(xr

τ ) = r(xT ) − r(xT − ¯ξ→τ ) ≥ r(cid:48)(xT ) ¯ξ→τ +

m
2

| ¯ξ→τ |2,

∀τ ≥ T (cid:93) − 1.

17

Therefore,

(cid:104)(cid:80)T

E

τ =T (cid:93)(r(xT ) − r(xr

τ )) + (T (cid:93) − 1)(r(xT ) − r(xr

≥ r(cid:48)(xT )E

(cid:104)(cid:80)T

τ =T (cid:93) ¯ξ→τ + (T (cid:93) − 1) ¯ξ→T (cid:93)−1

(cid:105)

+

E

m
2

(cid:105)
T (cid:93)−1))
(cid:104)(cid:80)T
τ =T (cid:93) | ¯ξ→τ |2 + (T (cid:93) − 1)| ¯ξ→T (cid:93)−1|2(cid:105)

For the ﬁrst term in Eq. (28), because ¯ξτ = (cid:80)T

t=τ +1 ξt/(t − 1), it holds that

E[(cid:80)T

τ =T (cid:93) ¯ξ→τ + (T (cid:93) − 1) ¯ξ→T (cid:93)−1] = E[(cid:80)T

t=T (cid:93) ξt] = 0

(28)

(29)

by Doob’s optional stopping theorem (recall that T (cid:93) is a stopping time). For the second term in
Eq. (28), using ¯ξτ = ξT

, we have

T −1 + · · · + ξτ +1

τ

(cid:34) T

(cid:88)

E

(cid:35)

| ¯ξ→τ |2

− E

| ¯ξ→τ |2 + (T (cid:93) − 1)| ¯ξ→T (cid:93)−1|2

= E

(cid:35)

(cid:34) T

(cid:88)

τ =T (cid:93)

τ =1




T (cid:93)−2
(cid:88)

= 2E

= 2E

( ¯ξ→τ − ¯ξ→T (cid:93)−1) ¯ξ→T (cid:93)−1


 + E





T (cid:93)−2
(cid:88)

( ¯ξ→τ − ¯ξ→T (cid:93)−1)2



τ =1


 ¯ξT (cid:93)−1

T (cid:93)−2
(cid:88)

T (cid:93)−1
(cid:88)

τ =1

j=τ +1


 + E

ξj
j − 1

τ =1


T (cid:93)−1
(cid:88)

T (cid:93)−2
(cid:88)







τ =1

j=τ +1



2



 .

ξj
j − 1

T (cid:93)−2
(cid:88)





τ =1


(cid:0) ¯ξ2

→τ − ¯ξ2

→T (cid:93)−1





(cid:1)

(30)

Because T (cid:93) is a stopping time and {ξτ } is a martingale diﬀerence sequence, we have E[ξj | j <
T (cid:93)] = 0 and E[ξjξk | j < k < T (cid:93)] = 0. So we have

Eq.(30) = 0+E





T (cid:93)−2
(cid:88)

T (cid:93)−1
(cid:88)

(cid:18) ξj

(cid:19)2

τ =1

j=τ +1

j − 1


 = E





T (cid:93)−1
(cid:88)

(j − 1)

(cid:18) ξj

(cid:19)2

j − 1


 ≤ E

T (cid:93)−1
(cid:88)






 ≤ B2
ξ

ξ2
j−1

E[T (cid:93)−2].

j=2

Moreover, E[(cid:80)T
equation and Eq. (30), we have

→τ ] = E[(cid:80)T
¯ξ2

τ =1

j=2

1

j−1 ≥ σ2 (cid:82) T

1 udu = σ2 ln T , so by the above

j=2

ξ2
j−1 ] ≥ σ2 (cid:80)T
j

j=2

(cid:35)

| ¯ξ→τ |2 + (T (cid:93) − 1)| ¯ξ→T (cid:93)−1|2

≥ σ2 ln T − B2
ξ

E[T (cid:93) − 2] = σ2 ln T − O(1),

(31)

(cid:34) T

(cid:88)

E

τ =T (cid:93)

where the last equality holds by Lemma 1.

Combining Eqs. (27,28,29,31), we get T r(xT )−φr
is complete.

T (xT ) ≥ mσ2

2

ln T −O(1) and the proof of Theorem 4

18

5 Numerical Results

We corroborate the theoretical ﬁndings in this paper with a few simple numerical experiments.

In the simulation we assume a linear demand curve with Bernoulli demand distribution: Pr[dt =
1|pt] = α − βpt, Pr[dt = 0|pt] = 1 − Pr[dt = 1|pt] with p ∈ [0, 1], α = 3/4 and β = 1/2. The
(normalized) initial inventory level is xT = 5/16, meaning that for problem instances with T time
periods the initial inventory level is xT T = 5T /16. It is easy to verify that the optimal demand
rate xu without inventory constraints is xu = 3/8 > xT , and the ﬂuid approximation suggests a
T r(xT ) = (19/32)T = .59375T expected revenue. We select the Bernoulli demand distribution
because the states of inventory levels are discrete and therefore the optimal dynamic programming

pricing policy can be exactly obtained.

Table 2: Regret for the ﬂuid model, the optimal static policy πs and the re-solving heuristics πr
compared against the value of the optimal DP pricing policy.
log2 T
Fluid Model
Static policy πs
Resolving heuristics πr

13
-2.78
11.81
0.24

14
-3.08
17.55
0.24

10
-1.91
3.27
0.23

11
-2.19
5.13
0.23

6
-0.90
0.38
0.11

7
-1.13
0.70
0.15

12
-2.48
7.84
0.24

8
-1.37
1.22
0.18

9
-1.63
2.03
0.21

15
-3.37
25.84
0.25

In Table 2 we report the regret of the ﬂuid approximation, the static policy πs : pt ≡ f −1(xT ) = 7/8
and the re-solving heuristics πr. All regret is deﬁned with respect to the value (expected reward)
of the optimal DP pricing policy, and the regret for the ﬂuid approximation benchmark is negative
since the ﬂuid model always upper bounds the value of any policy. Both the static policy πs and the
re-solving heuristics πr are run for each value of T ranging from T = 26 = 64 to T = 215 = 32, 768
to obtain an accurate estimation of their expected rewards. We also plot the regret in Figure 2 to

make the regret growth of each policy more intuitive.

As we can see from Table 2, the gap between the value of the optimal policy and the value of

the ﬂuid model grows nearly linearly as the number of time periods T grows geometrically, which

veriﬁes the Ω(ln T ) growth rate established in Theorem 4. On the other hand, the growth of regret
of the re-solving heuristics πr stagnated at T ≥ 210 and is nearly the same for T ranging from
210 = 1024 to 215 = 32768. This shows the asymptotic growth of regret of πr is far slower than
O(ln T ) and is compatible with the O(1) regret upper bound we proved in Theorem 3.

We report additional sets of numerical results in Figure 5, in which we only report the cumulative

regret of the re-solving heuristic compared against the benchmark of the optimal DP policy.

On the left panel of Figure 5, we report the regret of the re-solving heuristic with T ranging from
24 = 16 to 220 ≈ 1, 000, 000 and diﬀerent xu − xT gap values. More speciﬁcally, all four curves
are reported under the demand model d = .75 − .5p, with unconstrained optimum xu = .375 and
(normalized) initial inventory levels xT ∈ {.3, .325, .35, .375}. Figure 5 clearly shows that the regret
of the re-solving heuristic increases as the gap between xu and xT narrows, and furthermore in the

19

Figure 2: Plots of regret of the ﬂuid model, the static policy πs and the re-solving heuristics πr
compared against the value of the optimal DP pricing policy.

boundary case (i.e., xT = xu) the regret seems to grow logarithmically in T . It is an interesting
direction of future research to formally establish the logarithmic regret for the boundary case and
explore alternative policies that attain constant regret with xT = xu.

On the right panel of Figure 5, we report the regret of the re-solving heuristic with diﬀerent a, b

values in the demand model d = a − bp, with a = b ∈ {0.3, 0.5, 0.7, 0.9}. The normalized initial

inventory level is ﬁxed at xT = 0.1. With diﬀerent values of the slopes, the demand and revenue
models exhibit diﬀerent strong concavity parameter values, with r(cid:48)(cid:48)(p) = −b/2 and r(cid:48)(cid:48)(d) = −1/(2b).
Unlike the gap xu − xT , the results reported in the right panel of Figure 5 do not paint a clear
picture of the role the strong concavity parameters played in the regret. Overall, intermediate
values (b = 0.5, r(cid:48)(cid:48)(p) = −.25, r(cid:48)(cid:48)(d) = −1) seem to result in the lowest regret of the re-solving
heuristic.

6 Extension to Multiple Products

In this section, we extend our constant regret result to the case when there are n ≥ 2 products

with correlated demand. We follow the convention in Section 4 and count time indices backwards.
The seller starts with an initial inventory vector xT T , where xT = (xT (1), · · · , xT (n)) ∈ Rn
+ is the
normalized initial inventory vector. When there are t periods remaining, the seller posts a price
vector pt = (pt(1), · · · , pt(n)) ∈ P ⊂ Rn
+ and observes a realized demand vector dt = f (pt) + ξt,
where f : P → D is the demand curve and ξt ∼ Q(pt) is a centered noise vector. The realized
revenue at period t is rt = (cid:104)pt, dt(cid:105), which in expectation equals to E[rt | pt] = (cid:104)pt, f (pt)(cid:105). When
the inventory level of a speciﬁc product k ∈ [n] dips below zero ([n] := {1, 2, · · · , n}), the seller is

20

46810121416log2 T-50510Regret vs. log2 TStatic LP relaxationStationary policyResolving policyFigure 3: Cumulative regret of the resolving heuristic (compared with the optimal DP value) under
diﬀerent xu − xT and m settings.

forced to set pt(k) = +∞ for all remaining time periods, resulting in dt(k) = 0 almost surely.

Throughout this section, we use (cid:107)x(cid:107) to denote the Euclidean norm of any vector x, and (cid:107)A(cid:107)2 to
denote the spectral norm of any matrix A. We extend the assumptions (A1)–(A5) to the multiple-

product setting as follows:

B1. (Invertibility) The demand rate function f : P → D is a bijection, where P ⊂ Rn

+, D ⊂ Rn
+.
Let f −1 : D → P denote its inverse function. Assume D is convex, compact, has nonempty
interior, and satisﬁes 0 ∈ D.

B2. (Strict Concavity) The expected revenue r(d) = (cid:104)d, f −1(d)(cid:105) as a function of the demand
rate vector d is strictly concave. That is, there exists a positive constant m(cid:48) > 0 such that
∇2r(d) (cid:22) −m(cid:48)In for all d ∈ D. The maximizer of r(d) is in the interior of the domain D.

B3. (Smoothness) r(d) is three times continuously diﬀerentiable in the interior of D.

B4. (Martingale Diﬀerence Sequence) Conditional on any price vector pt ∈ P (∀t = 1, . . . , T ),
the demand noise ξt is independent of {ξT , . . . , ξt+1} and satisﬁes E[ξt | Ft+1] = E[ξt | pt] =
0 a.s. The conditional distribution of ξt given pt is denoted by ξt ∼ Q(pt).
In addition,
(cid:107)ξt(cid:107) ≤ Bξ a.s. for some constant Bξ < ∞.

B5. (Wasserstein Distance) There exists a constant L > 0 such that for any p, p(cid:48) ∈ P, it
E
ξ,ξ(cid:48)∼Ξ[(cid:107)ξ − ξ(cid:48)(cid:107)2]
holds that W2(Q(p), Q(p(cid:48))) ≤ L(cid:107)f (p) − f (p(cid:48))(cid:107), where W2(Q, Q(cid:48)) := inf Ξ
is the L2-Wasserstein distance between Q, Q(cid:48), with Ξ being an arbitrary joint distribution
with marginal distributions being Q and Q(cid:48), respectively.

(cid:113)

Recall that xT ∈ Rn

+ is the normalized inventory level vector at the beginning of the T time periods

21

5101520log2 T00.10.20.30.40.50.60.7Regret vs. log2 T with different xu-xTxu-xT=0xu-xT=.025xu-xT=.05xu-xT=.0755101520log2 T0.010.020.030.040.050.060.07Regret vs. log2 T with different m valuesa=b=.9a=b=.7a=b=.5a=b=.3(i.e., the total inventory is xT T ). The ﬂuid approximation model is formulated as

At the beginning of each period t = T, · · · , 1, the re-solving heuristic solves

max
x∈D

{r(x), s.t. 0 ≤ x ≤ xT } .

max
x∈D

{r(x), s.t. 0 ≤ x ≤ xt},

(32)

where xt is the normalized inventory level at the beginning of period t. Since 0 ∈ D by Assumption
(B1), Eq. (32) always has feasible solutions. Let the optimal solution to (32) be xc
t (the superscript
c stands for “constrained”). The re-solving policy sets the price vector to pt = f −1(xc
t ) for period
t.

In (32), for any given xt ∈ Rn
the inventory constraints are active at the point xc
inventory-unconstrained product set U, deﬁned as

+, the n products are partitioned into two disjoint sets based whether
t . The inventory-constrained product I and the

I := {k ∈ [n] : xc

t (k) = xt(k)},

U := {k ∈ [n] : xc

t (k) < xt(k)}.

(33)

As a special case, in the single-product setting (n = 1), we have I = ∅, U = {1} if xt > xu =
arg maxx∈[d,d] r(x), and I = {1}, U = ∅ if xt ≤ xu.

From the deﬁnitions in Eqs. (32, 33), it is clear that the sets I and U are determined by the

inventory vector xt, which serves as the right-hand side of the ﬂuid problem. We may thus write
I(xt), U(xt) to emphasize such dependency. This leads to a partition of Rn
+ into 2n sub-regions
{SI, ∀I ⊂ [n]}, where

SI = {x ∈ Rn

+ : I(x) = I}.

(34)

We specify an additional assumption on the initial inventory level xT for the multi-product setting:

C1. The initial inventory level xT is in the interior of SI for some I ⊂ [n]. That is, given xT ∈ SI,

there exists a neighborhood Bδ0(xT ) = {x(cid:48) ∈ Rn

+ : (cid:107)x(cid:48) − x(cid:107) ≤ δ0} such that Bδ0(xT ) ⊂ SI.

Intuitively, Assumption (C1) asserts that when the constrained inventory level xt ﬂuctuates in
a close neighborhood of xT , the set of active constraints in the ﬂuid problem Eq. (32) remains
unchanged. In the single-product case (n = 1), Assumption (C1) reduces to the condition xT (cid:54)= xu.

We now characterize the expected value of the optimal DP policy π∗ and the re-solving heuristic πr
τ ) be the expected revenue of the optimal policy π∗
for the multi-product pricing problem. Let φ∗
when there are τ time periods left with the inventory level being x∗
+. We have the following
Bellman equation:

τ ∈ Rn

τ (x∗

τ (x∗
φ∗

τ ) = max
∆:x∗

τ +∆∈D

r(x∗

τ + ∆) + Eξτ ∼Q(f −1(x∗

τ +∆))

(cid:20)
φ∗
τ −1

(cid:18)

x∗

τ −

(cid:19)(cid:21)

∆ + ξτ
τ − 1

∀τ = T, · · · , 1. (35)

22

We denote the maximizer of Eq. (35) by ∆τ . The DP policy selects the price vector pτ = f −1(x∗
∆τ ). Let ξ∗

τ be the realized demand noise under this price.

τ +

The re-solving heuristic πr and its expected revenue φr
recursive equation

τ (xr

τ ), on the other hand, satisﬁes the following

τ (xr
φr

τ ) = r(xc

τ ) + Eξτ ∼Q(f −1(xc
τ ))

(cid:18)

(cid:20)

φr
τ −1

xr

τ −

τ − xr
xc

τ + ξτ

(cid:19)(cid:21)

τ − 1

∀τ = T, · · · , 1,

(36)

τ = arg maxx∈D{r(x), s.t. 0 ≤ x ≤ xr

where xc
τ being
the right-hand side. The following theorem extends the constant regret result in Sec. 3 to the

τ } is the solution to the ﬂuid model with xr

multi-product setting.

Theorem 5. Given a demand function f and an initial inventory level xT ∈ SI satisfying Assump-
tions (B1)–(B5) and (C1), for all T ≥ 2, we have

T (xT ) ≥ φ∗
φr

T (xT ) − O(1).

In the rest of this section we prove Theorem 5.

6.1 Partial Optimization on a Subset of Products

For any vector x ∈ Rn and subset S ⊂ [n], denote x(S) = (x(k) : k ∈ S) as the |S|-dimensional
sub-vector of x whose coordinates are restricted to the subset S. The following observation follows

immediately from the deﬁnition of SI and the proof is omitted.

Lemma 3. Suppose x ∈ SI for some I ⊂ [n]. Let U = [n] \ I. For any inventory vector x(cid:48) ∈ Rn
+
with x(cid:48)(I) = x(I) and x(U)(cid:48) ≥ x(U), we have x(cid:48) ∈ SI.

Given a ﬁxed xT ∈ SI with I ⊂ [n], let projI(D) be the projection of the domain D onto the
dimensions in I. For every z ∈ projI(D), deﬁne R(z) as the value of partial optimization of r(x)
by changing the variables in U = [n] \ I while ﬁxing the variables in I:

R(z) := max
x∈D

{r(x), s.t. x(I) = z}.

(37)

The motivation for Eq. (37) is that in the region SI, the solution of the re-solving heuristic is only
aﬀected by the inventory levels of the constrained products in I. The following lemma establishes

some useful properties of the function R.

Lemma 4. The function R has the following properties:

1. For any xt ∈ SI, let zt = x(I). It holds that R(zt) = maxx∈D{r(x), s.t. 0 ≤ x ≤ xt} = r(xc

t ).

2. R(z) is strictly concave and three times continuously diﬀerentiable for all z ∈ projI(D) and

23

satisﬁes ∇2R(z) (cid:22) −mI, (cid:107)∇3R(z)(cid:107)op ≤ M with some constants m > 0, M > 0.

3. Given z, z(cid:48) ∈ projI(D), let x, x(cid:48) be the optimal solutions in (37). Then (cid:107)x − x(cid:48)(cid:107) ≤ Lz(cid:107)z − z(cid:48)(cid:107)

for some constant Lz > 0 uniformly on projI(D).

Proof. Proof of Lemma 4. The ﬁrst property follows immediately from the deﬁnition of R(z) in

Eq. (37) and the deﬁnition of SI in Eq. (34).

To prove the second property, consider the Lagrangian L(x, λ, z) := r(x) + λ(cid:62)(z − x(I)) of (37).
Since r(x) is concave, D is a convex set with nonempty interior, and the optimization problem (37)
satisﬁes Slater’s condition, L has a saddle point (x∗(z), λ∗(z)) satisfying

R(z) = max
x∈D

min
λ∈R|I|

L(x, λ, z) = min
λ∈R|I|

max
x∈D

L(x, λ, z) = L(x∗(z), λ∗(z), z).

Note that the saddle point (x∗(z), λ∗(z)) is unique because r(x) is strictly convex. By the envelop
theorem for saddle point problems (Milgrom and Segal 2002, Theorem 5), when the saddle point is
unique for every z, the function R(z) is diﬀerentiable in the interior of projI(D) with ∇R(z) = λ∗(z).
By the KKT conditions, ∇Ir(x∗(z)) = λ∗(z), so

∇R(z) = ∇Ir(x∗(z)).

(38)

(Here ∇Sr(x) denotes the restriction of ∇r(x) to a subset S ∈ [n].)

Denote the Hessian of r(x) at the point x∗(z) by

∇2r(x∗(z)) = H =

(cid:34)

(cid:35)

HI×I HI×U
HU×I HU×U .

Let x∗(z) = (z, u∗(z)). By the KKT conditions again, we have ∇U r(z, u∗(z)) = 0. By the
implicit function theorem, u∗(z) is continuously diﬀerentiable and the Jacobian matrix of u∗(z) is
Ju(z) = −H−1
U×U HU×I. Note that HU×U is invertible because H is negative deﬁnite by Assumption
(B2). Using Eq. (38) and the chain rule, we have

∇2R(z) = ∇2

I×Ir(z, u∗(z)) + ∇2

I×U r(z, u∗(z)) · Ju(z) = HI×I − HI×U H−1

U×U HU×I.

(39)

The right-hand side of Eq. (39) is the Schur complement of the block HU×U in the matrix H. Since
H is negative deﬁnite by Assumption (B2), the Schur complement is also negative deﬁnite (Zhang

2005, Theorem 1.12), which implies that R(z) is strictly concave.

Next, we establish the smoothness condition of R(z). Recall that ∇U r(z, u∗(z)) = 0, the Jacobian
matrix Ju(z) is invertible, and ∇r is twice continuously diﬀerentiable by Assumption (B3). By the
implicit function theorem for C2 class (Krantz and Parks 2012, Theorem 3.3.1), u∗(z) is also twice

24

continuously diﬀerentiable. By Eq. (39), R(z) is three times countinuously diﬀrentiable. Because
the domain D is compact by Assumption (B1), ∇3R(z) is uniformly bounded in projI(D).

Finally, the third statement of the lemma regarding the Lipschitz continuity of x∗(z) is straight-
forward, because the domain projI(D) is compact and we have shown that x∗(z) = (z, u∗(z)) is
continuously diﬀerentiable in z. (cid:3)

6.2 Stopping Time with Bounded Expectation

τ }T

Recall that {ξr
of the re-solving heuristic policy πr. For any τ , deﬁne ¯ξr
T −1 + · · · +
mink∈I ∂R(xT (I))/∂xT (k). Note that r0 > 0 by Assumption (C1). Deﬁne T (cid:93) as

τ =1 are the stochastic demand noise vectors at each time period on the path
. Let r0 :=

→τ := ξr

ξr
τ +1
τ

T

T (cid:93) := max (cid:8)τ ≥ 1 : (cid:107) ¯ξr

→τ −1(cid:107) > min (cid:0)δ0, r0/(cid:107)∇2R(xT (I))(cid:107)2

(cid:1)(cid:9) ∨ 2,

(40)

where δ0 > 0 is the constant parameter in Assumption (C1). Because ¯ξr
→t−1 is measurable with
respect to Ft, the event {T (cid:93) = t} is adaptive to the ﬁltration {Ft} and therefore T (cid:93) is a stop-
ping time. We remark that (cid:107) ¯ξr
→τ −1(cid:107) ≤ r0/(cid:107)∇2R(xT (I))(cid:107)2 implies the inequality ∇R(xT (I)) −
∇2R(xT (I)) ¯ξr

→τ −1 ≥ 0. We will use this fact later in the proof of Theorem 5.

Recall that xr
lemma gives characterization of xr
to Lemma 1.

τ is the normalized inventory vector when τ time periods are remaining. The following
→τ . It also gives an upper bound on E[T (cid:93)], similar

τ in terms of ¯ξr

Lemma 5. Under Assumptions (B1)-(B5) and (C1), the following holds for all τ ≥ T (cid:93) − 1:

xr
τ (I) = xr
τ (U) ≥ xr
xr

T (I) − ¯ξr
T (U) − ¯ξr

→τ (I);

→τ (U),

(41)

where I = I(xT ), U = U(xT ) as deﬁned in Assumption (C1). For τ ≥ T (cid:93), we have xr
Furthermore, the stopping time is bounded by E[T (cid:93)] = O(1).

τ ∈ SI.

Proof. Proof of Lemma 5. We ﬁrst prove Eq. (41) by induction. The base case of τ = T clearly

holds because xτ = xT , which belongs to SI by Assumption (C1). Suppose Eq. (41) holds at
period τ . Because τ ≥ T (cid:93), it holds that (cid:107)¯ξr
τ ∈ SI by Assumption (C1)
and Lemma 3. Let xc
τ } be the demand rate chosen by the re-
τ (I) and xc
solving heuristic at period τ . Since xr
τ (U).

τ = arg maxx∈D{r(x), s.t. x ≤ xr

→τ (cid:107) ≤ δ0 and therefore xr

τ ∈ SI, we know that xc

τ (U) < xr

τ (I) = xr

25

Subsequently,

τ −1(I) = xr
xr

τ (I) −

τ −1(U) = xr
xr

τ (U) −

τ (I) − xr
xc

τ (U) − xr
xc

τ (I)

τ (I) + ξr
τ − 1

τ (U) + ξr
τ − 1

τ (U)

= xr

τ (I) −

= xT (I) − ¯ξr

→τ −1(I);

≥ xr

τ (U) −

≥ xT (U) − ¯ξr

→τ −1(U).

ξr
τ (I)
τ − 1
ξr
τ (U)
τ − 1

→τ (cid:107)2} is a submartingale and
τ (cid:107) ≤ Bξ a.s. Using the identical proof by Doob’s martingale inequality in Lemma 1, we have

Next, we prove the upper bound on E[T (cid:93)]. By Assumption (B4), {(cid:107) ¯ξr
(cid:107)ξr
E[T (cid:93)] = O(1). (cid:3)

6.3 Complete Proof of Theorem 5

Given the initial inventory level xT ∈ SI, we ﬁrst upper bound the value function of the optimal DP
policy by considering a relaxed problem where the inventory of the products in I is x(I) but the
inventory of the products in U is unbounded. Let {x∗
τ =1 be the path of inventory level process for
this relaxed problem. Deﬁne z∗
τ (I). By Eq. (35), the value function of this relaxed problem
is given by

τ := x∗

τ }T

Φ∗

τ (z∗

τ ) = R(z∗

τ + ∆τ (I)) + E

(cid:20)

Φ∗

τ −1

(cid:18)

z∗
τ −1 −

∆τ (I) + ξ∗
τ − 1

τ (I)

(cid:19)(cid:21)

∀τ = T, · · · , 1.

Clearly, we have φ∗

T (xT ) ≤ Φ∗

T (zT ).

Below, we slightly abuse the notation and denote ∆τ (I), ξ∗
it holds that z∗
By adapting Eq. (11) to the multi-product setting, we have

→τ , where ¯∆→τ = ∆T

τ = zT − ¯∆→τ − ¯ξ∗

τ (I), ξr

τ (I) simply by ∆τ , ξ∗

T −1 + · · · + ∆τ +1

τ

and ¯ξ∗

→τ = ξ∗

τ , ξr
T −1 + · · · +

τ . Then,
ξ∗
τ +1
.
τ

T

T (xT ) ≤ Φ∗
φ∗

T (zT ) ≤ E

where

(cid:104)(cid:80)T

τ =T (cid:93) R(z∗

τ + ∆τ ) + (T (cid:93) − 1)R(z(cid:48)

T (cid:93)−1)

(cid:105)

,

(42)

z(cid:48)
T (cid:93)−1 := arg max

z∈projI (D)

{R(z) | z ≤ z∗

T (cid:93)−1}.

τ := xr

Next, we analyze the inventory process under the re-solving heuristic (for the original problem).
→τ for all τ ≥ T (cid:93) − 1. In addition, for all
Let zr
τ ≥ T (cid:93), it holds that r(xc
τ is the solution of the ﬂuid model
given the right-hand side xr

τ (I). By Lemma 5, it holds that zr
τ ) = R(zr

τ ). We adapt Eq. (12) to the multi-product setting and get

τ ) by Lemma 4 (recall that xc

τ = zT − ¯ξr

T (xT ) ≥ E
φr

(cid:104)(cid:80)T

(cid:105)
τ =T (cid:93) r(xc
τ )

= E

(cid:104)(cid:80)T

τ =T (cid:93) R(zr
τ )

(cid:105)

.

(43)

26

Generalizing the arguments from Eqs. (28,29) and using the second property of Lemma 4, we obtain

τ + ∆τ ) − R(zr

(cid:105)
τ ))

(cid:104)(cid:80)T

E

(cid:20) T

(cid:88)

≤ E

τ =T (cid:93) (R(z∗
(cid:18)

(cid:10)∇R(zT ), ∆τ − ¯∆→τ + ¯ξδ

→τ − ξδ
τ

(cid:11) − (¯ξr

→τ )(cid:62)∇2R(zT )[∆τ − ¯∆→τ ]

τ =T (cid:93)

+ (¯ξr

→τ )(cid:62)∇2R(zT )[ξδ

τ − ¯ξδ

→τ ] +

M
2

(cid:107)¯ξr

→τ (cid:107)2(cid:107)∆τ − ¯∆→τ + ¯ξδ

→τ (cid:107) −

m
2

(cid:107)∆τ − ¯∆→τ + ¯ξδ

→τ (cid:107)2
2

(cid:19)(cid:21)
,

(44)

where ξδ

τ := ξr

τ − ξ∗

τ and ¯ξδ

T

T −1 + · · · +

→τ := ξδ
T (cid:93)−1)+, ηr = ([∇2R(zT )]−1∇R(zT ) − ¯ξr

ξδ
τ +1
τ

.

Deﬁne η∗ = −(z∗
(z)+ denotes the element-wise positive part of z. Eq. (15) can be generalized to

T (cid:93)−1 − z(cid:48)

→T (cid:93)−1)+ and η = η∗ + ηr, where

R(z(cid:48)

T (cid:93)−1) − R(zr

T (cid:93)−1 − ηr) = R(z∗

T (cid:93)−1 + η∗) − R(zr

T (cid:93)−1 − ηr)

≤ (cid:104)∇R(zT ), η − ¯∆→T (cid:93)−1 + ¯ξδ

→T (cid:93)−1(cid:105) − (¯ξr

→T (cid:93)−1 + ηr)(cid:62)∇2R(zT )[η − ¯∆→T (cid:93)−1 + ¯ξδ

→T (cid:93)−1] +

M 2
8m

(cid:107)¯ξr

→T (cid:93)−1(cid:107)4.

(45)

Let ◦ denote the element-wise product. Subtracting Eq. (43) from Eq. (42) and then combining

Eq. (45) with Eq. (44), we obtain

T (xT ) − φr
φ∗

T (xT ) ≤ E (cid:2)(cid:104)∇R(zT ), A(cid:105) − ∇2R(ZT ) ◦ B + ∇2R(ZT ) ◦ C + D(cid:3) + O(E[(T (cid:93) − 1)]), (46)

where

τ ] − (T (cid:93) − 1)( ¯∆→T (cid:93)−1 − ¯ξδ

→T (cid:93)−1) + (T (cid:93) − 1)η,

A = (cid:80)T
B = (cid:80)T
C = (cid:80)T
D = (cid:80)T

→τ − ξδ

τ =T (cid:93)[∆τ − ¯∆→τ + ¯ξδ
→τ [∆τ − ¯∆→τ ](cid:62) − (T (cid:93) − 1)¯ξr
τ =T (cid:93) ¯ξr
→τ ](cid:62) − (T (cid:93) − 1)(¯ξr
τ − ¯ξδ
τ =T (cid:93) ¯ξr
→τ [ξδ
(cid:16) M
→τ (cid:107)2(cid:107)∆τ − ¯∆→τ + ¯ξδ
2 (cid:107)¯ξr

τ =T (cid:93)

¯∆(cid:62)
→T (cid:93)−1
→T (cid:93)−1 + ηr)[¯ξδ
→τ (cid:107) − m

→T (cid:93)−1 + (T (cid:93) − 1)(¯ξr
→T (cid:93)−1](cid:62),
2 (cid:107)∆τ − ¯∆→τ + ¯ξδ

→τ (cid:107)2(cid:17)

→T (cid:93)−1 + ηr)η(cid:62),

+ (T (cid:93) − 1) M 2

8m (cid:107)¯ξr

→T (cid:93)−1(cid:107)4.

Recall that in the deﬁnitions of A, B, C, D, all vectors ∆τ , ¯∆→τ , ξδ
→τ , η, ηr are restricted
to I. A is an |I|-dimensional vector, B, C are |I| × |I|-dimensional matrices and D is a scalar.

→τ , ¯ξr

τ , ¯ξδ

27

Using the same calculations as in Sec. 4, A, B, C, D can be reduced to

E[A] = E[(T (cid:93) − 1)η],
E[B] = E[(T (cid:93) − 1)(¯ξr
(cid:34)

T
(cid:88)

E[C] = E

−

→T (cid:93)−1 + ηr)η(cid:62)],
t [ξδ
ξr
t ](cid:62)
t − 1

(cid:35)

− E(cid:2)(T (cid:93) − 1)ηr[¯ξδ

→T (cid:93)−1](cid:62)(cid:3).

Generalizing Eq. (19), it holds that

t=T (cid:93)

(cid:13)
(cid:13)
(cid:13)
(cid:13)
(cid:13)

E

(cid:34)

−

T
(cid:88)

t=T (cid:93)

t [ξδ
ξr
t ](cid:62)
t − 1

(cid:35)(cid:13)
(cid:13)
(cid:13)
(cid:13)
(cid:13)2

≤ BξE

≤ BξE

≤ BξE

(cid:34) T

(cid:88)

t=2
(cid:34) T

(cid:88)

t=2
(cid:34) T

(cid:88)

t=2

1{T (cid:93) ≤ t}

(cid:112)E[(cid:107)ξr

t − ξ∗
t − 1

t (cid:107)2 | Ft+1]

(cid:35)

1{T (cid:93) ≤ t}

L(cid:107)x∗

t + ∆t − xr
t (cid:107)
t − 1

(cid:35)

1{T (cid:93) ≤ t}

L(cid:48)(cid:107)z∗

t + ∆t(I) − zr
t (cid:107)
t − 1

(cid:35)

,

(47)

(48)

(49)

(50)

where the second inequality uses Assumption (B5) and the third inequality uses the third property
in Lemma 4 with L(cid:48) = LzL. As a result, (cid:107)E[C](cid:107)2 can be upper bounded as

(cid:107)E[C](cid:107)2 ≤ L(cid:48)BξE

(cid:34) T

(cid:88)

τ =T (cid:93)

(cid:107)∆ − ¯∆→τ + ¯ξδ

→τ (cid:107)

(cid:35)

τ − 1

+ E

(cid:104)
(T (cid:93) − 1)(cid:107)ηr(cid:107)(cid:107)¯ξδ

→T (cid:93)−1(cid:107)

(cid:105)

.

(51)

Because ∇R(xT (I))−∇2R(xT (I)) ¯ξr
→T (cid:93) ≥ 0 by the deﬁnition of T (cid:93), we have (cid:107)ηr(cid:107) ≤ Bξ/(T (cid:93)−1) a.s.
Combining Eq. (46) with Eqs. (47,48,51) and using the same derivation that leads to Eq. (22), we

have

(cid:20)
E (cid:2)(cid:104)∇R(zT ), A(cid:105) − ∇2R(ZT ) ◦ B + ∇2R(ZT ) ◦ C + D(cid:3) ≤ E

Bξ(cid:107)∇2R(zT )(cid:107)2(cid:107)¯ξδ

→T (cid:93)−1(cid:107)

+ (T (cid:93) − 1)

M 2
8m

(cid:107)¯ξr

→T (cid:93)−1(cid:107)4 +

T
(cid:88)

τ =T (cid:93)

1
m

(cid:18)
(cid:0)(cid:107)∇2R(zT )(cid:107)2

L(cid:48)Bξ
τ − 1

(cid:1)2 +

M 2
4

(cid:107)¯ξr

→τ (cid:107)4

(cid:19) (cid:21)
.

(52)

To complete the proof, we upper bound each term in Eq. (52). First it is easy to verify that

T
(cid:88)

τ =T (cid:93)

(cid:18) (cid:107)∇2R(zT )(cid:107)2L(cid:48)Bξ
τ − 1

(cid:19)2

≤ ((cid:107)∇2R(zT )(cid:107)2LBξ)2

T −1
(cid:88)

j=1

1
j2 ≤ 2((cid:107)∇2R(zT )(cid:107)2LBξ)2 a.s.

(53)

We next focus on the terms involving (cid:107)¯ξr
the ﬁltration {Fτ }T

τ =1. Let St = (cid:80)T

→τ (cid:107)4. Note that {(cid:107) ¯ξr

τ =t(t−1)((cid:107) ¯ξr

→τ −1(cid:107)4 −(cid:107) ¯ξr

→τ −1(cid:107)4} is a submartingale adapted to
→τ (cid:107)4), then {St} is also a submartingale.

28

Since T (cid:93) is stopping time, we have

(cid:34)

E

(T (cid:93) − 1)(cid:107)¯ξr

→T (cid:93)−1(cid:107)4 +

(cid:35)

(cid:107)¯ξr

→τ (cid:107)4

T
(cid:88)

τ =T (cid:93)

= E[ST (cid:93)] ≤ E[S2] = E

(cid:35)

.

(cid:107)¯ξr

→τ (cid:107)4

(cid:34) T

(cid:88)

τ =1

It is easy to verify that

E[(cid:107)¯ξr

→t(cid:107)4] ≤

(cid:88)

j,k>t

Subsequently,

j (cid:107)2(cid:107)ξr

E[(cid:107)ξr
k(cid:107)2]
(j − 1)2(k − 1)2 ≤ B4

ξ





(cid:88)

j>t

1
(j − 1)2


2



≤

4B4
ξ
t2 .

(cid:34)

E

M 2
8m

(T (cid:93) − 1)(cid:107)¯ξr

→T (cid:93)−1(cid:107)4 +

(cid:35)

(cid:107)¯ξr

→τ (cid:107)4

M 2
4m

T
(cid:88)

τ =T (cid:93)

≤

M 2
4m

(cid:88)T

τ =1

4B4
ξ
τ 2 ≤

M 2B4
ξ
2m

.

(54)

Since the Eucliean norm is convex, by Assumption (B4), (cid:107)¯ξδ
tation of (cid:107)¯ξδ

→T (cid:93)−1(cid:107) can be upper bounded by

→τ −1(cid:107) is a submartingale. The expec-

E(cid:2)(cid:107)¯ξδ

→T (cid:93)−1(cid:107)(cid:3) ≤ E(cid:2)(cid:107)¯ξδ

1(cid:107)(cid:3) ≤

(cid:113)

E(cid:2)(cid:107)¯ξδ

1(cid:107)2(cid:3) ≤ 2Bξ

(cid:118)
(cid:117)
(cid:117)
(cid:116)

T −1
(cid:88)

j=1

1
j2 ≤ 3Bξ.

(55)

Finally, combining Eqs. (44,46,52,54,55) and using Lemma 5, we obtain

T (xT ) − φr
φ∗

T (xT ) ≤

M 2B4
ξ
2m

+

2((cid:107)∇2R(zT )(cid:107)2L(cid:48)Bξ)2
m

+ 3(cid:107)∇2R(zT )(cid:107)2B2

ξ + O(E[T (cid:93) − 1]) = O(1),

which completes the proof of Theorem 5.

7 Conclusion

In this paper, we analyze a natural re-solving heuristic for the classic price-based revenue manage-

ment problem with either a single product or multiple products. The heuristic re-solves the ﬂuid

model in each period to reset the prices.

We establish two complementary theoretical results. First, the re-solving heuristic attains O(1)

regret compared against the value of the optimal policy. The O(1) regret depends on the shape of

the demand function as well as how close the initial inventory level is to certain “boundaries.” Going

forward, an obvious question is whether the boundary condition can be removed. Our numerical

experiment shows that the natural re-solving heuristic may not have O(1) regret when the initial

inventory is on the boundary, so the pricing algorithm needs to be modiﬁed for that case.

29

Second, we show that there exists an Ω(ln T ) gap between the value of the optimal policy and the

value of the ﬂuid model. For that reason, our regret analysis does not use the ﬂuid model as a

benchmark; the proof directly compares the value of the optimal policy and that of the heuristic.

An interesting future direction is to ﬁnd a diﬀerent benchmark that is within O(1) of optimal value,

which may help simplify our proof.

Appendix: The Hindsight-Optimum (HO) Benchmark.

The HO benchmark has been used to analyze re-solving algorithms for quantity-based network

revenue management (Reiman and Wang 2008, Bumpensanti and Wang 2020). Since in quantity-

based network revenue management the demand rates are not aﬀected by the (adaptively chosen)

prices, the formulation in Bumpensanti and Wang (2020) is not directly applicable to our setting.

Instead, we formulate an HO benchmark following the strategy in Vera et al. (2019) which also

considered price-based revenue management with a ﬁnite subset of pries.

Deﬁnition 1 (The HO benchmark). For any p deﬁne random variable DT (p) := (cid:80)T
t=1 dt as the
total realized demand with ﬁxed price pt ≡ p. A policy π is HO-admissible if at time t, the price
decision pt depends only on {pt(cid:48), xt(cid:48), dt(cid:48)}t(cid:48)<t and {DT (p)}p∈[p,p]. The HO-benchmark RHO(T, x0) is
deﬁned as the expected revenue of the optimal HO-admissible policy π.

At a higher level, the HO-benchmark equips a policy with the knowledge of the total realized

demand for each hypothetical ﬁxed price p ∈ [p, p] in hindsight. Clearly, such policies are more

powerful than an ordinary admissible policy which only knows the expected demand but not the

realized demand for a speciﬁc price p.

Our next proposition shows that the HO-benchmark RHO(T, xT ) has a constant gap compared
against the T p∗f (p∗) oracle in the single-product setting. Hence, it also has an Ω(ln T ) gap from
the re-solving heuristic and the optimal DP solution. The conclusion in Theorem 4 then holds with
T r(xT ) replaced by RHO(T, xT ).

Proposition 2. For any xT ∈ (d, xu), it holds that RHO(T, xT ) ≥ T r(xT ) − O(1) where y0 = xT T .

Proof. Proof of Proposition 2. Consider a setting where ξ1, · · · , ξT are i.i.d. It is clear that knowing
(cid:80)T
{DT (p)}p∈[p,p] is equivalent to knowing ¯ξ = 1
t=1 ξt, since DT (p) = T (f (p) + ¯ξ) for all p. Now
T
consider the policy of ﬁxed prices pt ≡ g(xT + ¯ξ). Since E[ ¯ξ] = 0 and E[ ¯ξ2] = O(1/T ), the expected
regret of such a policy can be bounded as

T E ¯ξ

(cid:2)(xT + ¯ξ)f −1(xT + ¯ξ)(cid:3) − T xT f −1(xT ) = T E ¯ξ[r(xT + ¯ξ) − r(xT )] ≥ T E ¯ξ

(cid:104)
r(cid:48)(xT ) ¯ξ −

¯ξ2(cid:105)

m
2

× O(1) = −O(1),

= −

m
2

T E[ ¯ξ2] = −

m
2

30

which is to be demonstrated. (cid:3)

References

Arlotto, Alessandro, Itai Gurvich. 2019. Uniformly bounded regret in the multisecretary problem. Stochastic

Systems 9(3) 231–260.

Aviv, Yossi, Amit Pazgal. 2005. Dynamic pricing of short life-cycle products through active learning. Working

Paper, Olin School Business, Washington University, St. Louis, MO.

Besbes, Omar, Assaf Zeevi. 2009. Dynamic pricing without knowing the demand function: Risk bounds and

near-optimal algorithms. Operations Research 57(6) 1407–1420.

Besbes, Omar, Assaf Zeevi. 2012. Blind network revenue management. Operations Research 60(6) 1537–1550.

Broder, Josef, Paat Rusmevichientong. 2012. Dynamic pricing under a general parametric choice model.

Operations Research 60(4) 965–980.

Bumpensanti, Pornpawee, He Wang. 2020. A re-solving heuristic with uniformly bounded loss for network

revenue management. Management Science 66(7) 2801–3294.

Chen, Yiwei, Vivek F Farias. 2013. Simple policies for dynamic pricing with imperfect forecasts. Operations

Research 61(3) 612–624.

Cooper, William L. 2002. Asymptotic behavior of an allocation policy for revenue management. Operations

Research 50(4) 720–727.

den Boer, Arnoud V, Bert Zwart. 2015. Dynamic pricing and learning with ﬁnite inventories. Operations

Research 63(4) 965–978.

Ferreira, Kris Johnson, David Simchi-Levi, He Wang. 2018. Online network revenue management using

Thompson sampling. Operations Research 66(6) 1586–1602.

Gallego, Guillermo, Garrett Van Ryzin. 1994. Optimal dynamic pricing of inventories with stochastic demand

over ﬁnite horizons. Management Science 40(8) 999–1020.

Gallego, Guillermo, Garrett Van Ryzin. 1997. A multiproduct dynamic pricing problem and its applications

to network yield management. Operations Research 45(1) 24–41.

Jasin, Stefanus. 2014. Reoptimization and self-adjusting price control for network revenue management.

Operations Research 62(5) 1168–1178.

Jasin, Stefanus. 2015. Performance of an lp-based control for revenue management with unknown demand

parameters. Operations Research 63(4) 909–915.

Jasin, Stefanus, Sunil Kumar. 2012. A re-solving heuristic with bounded revenue loss for network revenue

management with customer choice. Mathematics of Operations Research 37(2) 313–345.

Jasin, Stefanus, Sunil Kumar. 2013. Analysis of deterministic lp-based booking limit and bid price controls

for revenue management. Operations Research 61(6) 1312–1320.

Krantz, Steven G, Harold R Parks. 2012. The implicit function theorem: history, theory, and applications.

Springer Science & Business Media.

Lei, Yanzhe Murray, Stefanus Jasin, Amitabh Sinha. 2014. Near-optimal bisection search for nonparametric

dynamic pricing with inventory constraint. Working Paper, Ross School of Business, University of

Michigan.

31

Ma, Will, David Simchi-Levi. 2020. Algorithms for online matching, assortment, and pricing with tight

weight-dependent competitive ratios. Operations Research .

Ma, Yuhang, Paat Rusmevichientong, Mika Sumida, Huseyin Topaloglu. 2020. An approximation algorithm

for network revenue management under nonstationary arrivals. Operations Research 68(3) 834–855.

Maglaras, Constantinos, Joern Meissner. 2006. Dynamic pricing strategies for multiproduct revenue man-

agement problems. Manufacturing & Service Operations Management 8(2) 136–148.

Milgrom, Paul, Ilya Segal. 2002. Envelope theorems for arbitrary choice sets. Econometrica 70(2) 583–601.

Reiman, Martin I, Qiong Wang. 2008. An asymptotically optimal policy for a quantity-based network revenue

management problem. Mathematics of Operations Research 33(2) 257–282.

Secomandi, Nicola. 2008. An analysis of the control-algorithm re-solving issue in inventory and revenue

management. Manufacturing & Service Operations Management 10(3) 468–483.

Vera, Alberto, Siddhartha Banerjee. 2020. The bayesian prophet: A low-regret framework for online decision

making. Management Science .

Vera, Alberto, Siddhartha Banerjee, Itai Gurvich. 2019. Online allocation and pricing: Constant regret via

bellman inequalities. arXiv preprint arXiv:1906.06361 .

Wang, Yining, Boxiao Chen, David Simchi-Levi. 2020. Multi-modal dynamic pricing. Management Science

(to appear) .

Wang, Zizhuo, Shiming Deng, Yinyu Ye. 2014. Close the gaps: A learning-while-doing algorithm for single-

product revenue management problems. Operations Research 62(2) 318–331.

Zhang, Fuzhen. 2005. The Schur complement and its applications. Springer Science & Business Media.

32

