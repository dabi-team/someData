0
2
0
2

c
e
D
9
2

]

C
O
.
h
t
a
m

[

2
v
1
6
8
2
0
.
9
0
0
2
:
v
i
X
r
a

Constant Regret Re-solving Heuristics for Price-based Revenue

Management

Yining Wang1 and He Wang2

1Warrington College of Business, University of Florida
2School of Industrial and Systems Engineering, Georgia Institute of Technology

January 1, 2021

Abstract

Price-based revenue management is an important problem in operations management with

many practical applications. The problem considers a retailer who sells a product (or multiple

products) over T consecutive time periods and is subject to constraints on the initial inventory

levels. While the optimal pricing policy could be obtained via dynamic programming, such an

approach is sometimes undesirable because of high computational costs. Approximate policies,

such as the re-solving heuristics, are often applied as computationally tractable alternatives. In

this paper, we show the following two results. First, we prove that a natural re-solving heuristic

attains O(1) regret compared to the value of the optimal policy. This improves the O(ln T )

regret upper bound established in the prior work of Jasin (2014). Second, we prove that there

is an â„¦(ln T ) gap between the value of the optimal policy and that of the ï¬‚uid model. This

complements our upper bound result by showing that the ï¬‚uid is not an adequate information-

relaxed benchmark when analyzing price-based revenue management algorithms.

Keywords: re-solving, self-adjusting controls, price-based revenue management, dynamic

pricing

1 Introduction

We study a classic price-based revenue management problem where a retailer sells either a single

product or a group of products over a ï¬nite horizon given ï¬xed initial inventory (Gallego and

Van Ryzin 1994, 1997). More speciï¬cally, consider n products and T consecutive selling periods
+. At time t, the retailer posts a price vector pt âˆˆ P âŠ‚ Rn
with an initial inventory level y0 âˆˆ Rn
+.
Suppose f : P â†’ Rn
t=1, Pr) be a ï¬ltered probability
space. The realized demand dt, realized revenue rt, and remaining inventory level yt at the end of
period t are governed by

+ is a ï¬xed demand function. Let (â„¦, F, {Ft}T

dt = f (pt) + Î¾t,

rt = p(cid:62)

t min{dt, ytâˆ’1}, yt = max{0, ytâˆ’1 âˆ’ dt},

(1)

1

 
 
 
 
 
 
where {Î¾t}T
detailed assumptions.)

t=1 is a martingale diï¬€erence sequence adapted to the ï¬ltration {Ft}T

t=1 (see Sec. 3 for

The retailerâ€™s objective is to design an admissible pricing policy Ï€ to maximize the expected revenue

over the T periods. A pricing policy Ï€ can be represented by Ï€ = (Ï€1, Â· Â· Â· , Ï€T ), where Ï€t is a
mapping from the inventory level ytâˆ’1 to the price pt âˆˆ P. A pricing policy Ï€ is admissible or
non-anticipating if the posted price pt only depends on the history up to the end of period t âˆ’ 1,
namely, pt is measurable with respect to Ftâˆ’1. Given the initial inventory level xT := y0/T , the
expected revenue of an admissible policy Ï€ is denoted by

RÏ€(T, xT ) := E

(cid:34) T

(cid:88)

t=1

(cid:12)
(cid:12)
(cid:12)
(cid:12)

rt

pt = Ï€t(ytâˆ’1), âˆ€t = 1, Â· Â· Â· , T

.

(2)

(cid:35)

1.1 Existing Results on the Fluid Model and the Re-solving Heuristic

An optimal policy Ï€âˆ— maximizing RÏ€(T, xT ) deï¬ned in Eq. (2) can be in principle obtained via
dynamic programming (DP). However, it is well known that the exact DP algorithm suï¬€ers from

the curse of dimensionality, as the (discretized) state space grows exponentially in size with the

number of products.

The seminal work of Gallego and Van Ryzin (1994) proposed a ï¬‚uid approximation model of

the optimal dynamic pricing problem. To deï¬ne the ï¬‚uid model, suppose there exists an inverse
function f âˆ’1 of the demand rate function of f . Let r(x) := x(cid:62)f âˆ’1(x) be the mean revenue in one
period given the price vector f âˆ’1(x). We assume r(x) is strictly concave and smooth on its domain
D âŠ‚ Rn
+ (see Sec. 3 and Sec. 6 for the statements of these assumptions). The ï¬‚uid model for the
dynamic pricing problem is

max
xâˆˆD

r(x)

s.t. 0 â‰¤ x â‰¤ xT .

(3)

Let rF and xF denote the optimal value and the (unique) optimal solution of the ï¬‚uid model,
respectively. The optimization problem (3) chooses a demand rate xF (or equivalently, setting
the price to f âˆ’1(xF)) such that the revenue function is maximized subject to the initial inventory
constraint. Intuitively, the ï¬‚uid approximation model ignores the randomness caused by demand

noises and replaces the stochastic inventory constraint with a deterministic constraint.

The following results are established by Gallego and Van Ryzin (1994, 1997).

Theorem 1 (Gallego and Van Ryzin (1994, 1997)). For any admissible policy Ï€ and the initial
inventory level y0 = xT T , the expected revenue is upper bounded by RÏ€(T, xT ) â‰¤ T rF. Furthermore,
for a static pricing policy Ï€s such that pt = f âˆ’1(xF) (âˆ€t = 1, Â· Â· Â· , T ), the expected revenue is lower

2

âˆš

Figure 1: An illustration of existing results (blue) compared to our results (red).

bounded by RÏ€s(T, xT ) â‰¥ T rF âˆ’ O(

âˆš

T ).

However, the main drawback of the static pricing policy is that it is not adaptive to demand

randomness. Researchers have proposed various approaches to modify the static pricing policy,

aiming to improve the O(

T ) gap in Theorem 1 (see Sec. 2 for a survey). One intuitive approach

is to re-solve the ï¬‚uid model in every period using the current inventory level:

max
xâˆˆD

r(x)

s.t. 0 â‰¤ x â‰¤ xt,

where xt := ytâˆ’1/(T âˆ’ t + 1) is the normalized inventory level realized at the beginning of period t.
Let the solution to the above problem be xc
t (the superscript c stands for â€œconstrainedâ€). The price
is then reset to pt = f âˆ’1(xc
t ) at the start of period t. We will refer to this policy as the re-solving
heuristic. In the work of Jasin (2014), the gap is reduced from O(
T ) to O(ln T ) by using the

âˆš

re-solving heuristic, as shown by the following result.

Theorem 2 (Jasin (2014)). Let Ï€r = (Ï€r
pt = f âˆ’1(xc
expected revenue is bounded by RÏ€r (T, xT ) â‰¥ T rF âˆ’ O(ln T ), where xT = y0/T .

T ) be the re-solving heuristic policy deï¬ned as
t ). Assume the optimal dual variables of the ï¬‚uid model (3) are strictly positive. The

1, Â· Â· Â· , Ï€r

1.2 Our Results: Constant Regret and Logarithmic Gaps

In this paper we establish two main results: constant regret for the re-solving heuristic, and a

logarithmic regret lower bound on the gap between the value of the optimal pricing policy and the

ï¬‚uid model. Figure 1 summarizes results established in this paper and compares them with existing

results in the prior literature.

Our ï¬rst main result, as stated in Theorems 3 and 5 later in the paper, asserts that for any initial

inventory level (except for certain boundary cases), the cumulative regret of the re-solving heuristic
Ï€r is upper bounded by a constant that is independent of T , compared against the expected reward

3

Optimal policyFluid modelRe-solvingStatic pricingğ‘‚(lnğ‘‡), Jasin(2014)ğ‘‚(ğ‘‡), Gallego & van Ryzin(1994).ğ‘‚(1), this paperÎ©(lnğ‘‡), this paperâˆš

of the optimal dynamic pricing policy Ï€âˆ—. Apart from the obvious improvement from O(ln T ) to
O(1) in regret bound, our proof technique is quite diï¬€erent from existing work that compares the

expected reward of the re-solving policy to a certain information relaxed benchmark, such as the
ï¬‚uid model or the hindsight optimum benchmark. Instead, we compare the value of Ï€r directly
with the value of the optimal DP policy Ï€âˆ— by carefully analyzing the stochastic inventory levels
under the two policies.

Our second main result, as stated in Theorem 4 later in this paper, shows that there is an â„¦(ln T )
lower bound on the gap between the expected revenue of the re-solving heuristics Ï€r and the optimal
objective of the ï¬‚uid model T rF. Coupled with the O(1) regret upper bound established in Theorem
3, this shows that there is an â„¦(ln T ) lower bound on the gap between the value of the optimal
policy Ï€âˆ— and the ï¬‚uid model as well. This demonstrates a fundamental limitation of using the
ï¬‚uid model as a benchmark to analyze the regret for the price-based revenue management problem.

2 Related Work

The idea of using simple, easy-to-compute pricing policies to approximate optimal dynamic pricing

policies originates from Gallego and Van Ryzin (1994, 1997), who proposed a static price policy

using ï¬‚uid models and established O(

T ) regret. Later, Maglaras and Meissner (2006) showed

that the re-solving heuristic has o(T ) regret in the single resource case. The most relevant prior

research to our paper is the work by Jasin (2014), who studied a price-based network revenue

management problem and showed that re-solving heuristics attain O(ln T ) asymptotic regret upper

bound under mild conditions. Jasin (2014) also showed that infrequent re-solving has similar

theoretical performance guarantees and is much more computationally eï¬ƒcient. In this paper, we

improve the regret of the re-solving heuristic to an O(1) constant bound that is independent of T .

Our analysis is diï¬€erent from the one in Jasin (2014) in the sense that we directly compare the

expected revenue of re-solving with the value of the optimal DP policy, instead of the ï¬‚uid model.

Additionally, we complement the result in Jasin (2014) by establishing an â„¦(ln T ) lower bound

between the expected revenue of the optimal DP policy and the ï¬‚uid model.

Re-solving heuristics have also been studied in quantity-based revenue management (Cooper 2002,

Reiman and Wang 2008, Secomandi 2008, Jasin and Kumar 2013, Bumpensanti and Wang 2020).

The decisions involved in a quantity-based revenue management problem are the opening and clos-

ing of available products, so the feasible decisions form a discrete set. In contrast, the price-based

revenue management model studied in this paper assumes continuous prices in an inï¬nite set. When

the decision set is discrete, re-solving the ï¬‚uid model will lead to fractional solutions that require

rounding; it is shown that the design of the rounding procedures (e.g. by randomization, thresh-

olding, etc.) plays a critical role in the performance of re-solving heuristics (Arlotto and Gurvich

2019, Bumpensanti and Wang 2020, Vera and Banerjee 2020). When the decision set is continuous,

4

re-solving algorithms must precisely track the updated inventory level in the ï¬‚uid model without

using any rounding. As such, analysis for the (continuous) price-based revenue management prob-

lem is much diï¬€erent from the previous proofs for quantity-based revenue management. Moreover,

existing proofs of constant regret in the quantity-based model often use an information relaxation

bound called hindsight-optimum benchmark (see Appendix for a detailed discussion). However, the

hindsight-optimum benchmark does not readily translate to the price-based revenue management

setting, and our analysis does not rely on such a benchmark.

It is worth mentioning that Vera et al.

(2019) proposed a constant regret algorithm that works for both quantity-based and price-based

revenue management problems. However, the price-based revenue management model considered

in Vera et al. (2019) assumes a single product and a ï¬nite set of candidate prices. Because a ï¬nite

set of prices implies that the feasible decision set has a discrete structure, the pricing setting studied

in Vera et al. (2019) is signiï¬cantly diï¬€erent from this paper. In fact, Maglaras and Meissner (2006)

showed that a single-resource revenue management problem with discrete prices is equivalent to a

quantity-based revenue management problem.

In this paper, we restrict our attention to stationary demand. Several other papers studied revenue

management problems with non-stationary, time-correlated, or arbitrary demand sequences (e.g.

Chen and Farias 2013, Ma et al. 2020, Ma and Simchi-Levi 2020). Revenue management problems

with non-stationary demand are harder and therefore these papers consider diï¬€erent performance

metrics such as approximation ratios or competitive ratios rather than regret. Chen and Farias

(2013) studied a dynamic pricing problem under a general non-stationary demand setting. They

showed that re-solving heuristics can achieve constant competitive ratios, whereas static pricing

policies have asymptotically diminishing competitive ratios. Due to diï¬€erent model assumptions,

the results in Chen and Farias (2013) are not directly comparable to ours.

Another stream of related literature studies dynamic pricing with demand learning, where the un-

derlying demand function is unknown and needs to be learned on the ï¬‚y from sales data. Many

papers consider demand learning settings using the price-based ï¬nite-inventory revenue manage-

ment model from Gallego and Van Ryzin (1994) as the ground truth model (e.g., Aviv and Pazgal

2005, Besbes and Zeevi 2009, 2012, Wang et al. 2014, Lei et al. 2014, den Boer and Zwart 2015,

Ferreira et al. 2018). Re-solving heuristics have also been applied to demand learning algorithms

(Jasin 2015, Ferreira et al. 2018). In contrast, our paper assumes that the retailer has full infor-

mation about the demand curve and demand distributions, so we are able to show O(1) regret,

which is tighter than typical regret bounds in the learning literature. Also, the lower bound result

in this paper (Theorem 4) is proved using diï¬€erent techniques from lower bound proofs in the

learning setting (e.g. Broder and Rusmevichientong 2012, Wang et al. 2020), as the latter relies on

information-theoretical lower bounds.

5

3 Main Results

In this section, we consider a price-based revenue management problem with a single product. The

extension to multiple products is deferred to Sec. 6. Although some of the results in this section are

special cases of those in Sec. 6, presenting the single-product model helps illustrate the key insight

of our analysis. We make the following assumptions on the single-product demand model.

A1. (Monotonicity) The demand rate function f : [p, p] â†’ R+ is strictly decreasing with f (p) =
d, f (p) = d. (We allow the case p = +âˆ or d = 0.) Note that this implies the existence of
the inverse function f âˆ’1 on [d, d].

A2. (Strict Concavity) The expected revenue r(d) = df âˆ’1(d) as a function of the demand rate
d is strictly concave. There exists a positive constant m > 0 such that r(cid:48)(cid:48)(d) â‰¤ âˆ’m for all
d âˆˆ [d, d]. The maximizer of r(d) is in the interior of the domain, i.e., arg maxd r(d) âˆˆ (d, d).

A3. (Smoothness) The third derivative of r(d) exists and satisï¬es |r(cid:48)(cid:48)(cid:48)(d)| â‰¤ M for all d âˆˆ [d, d].
Furthermore, there exists a constant C > 0 such that |r(d) âˆ’ r(d(cid:48))| â‰¤ C|d âˆ’ d(cid:48)| for all
d, d(cid:48) âˆˆ [d, d].

A4. (Martingale Diï¬€erence Sequence) Conditional on the price pt (âˆ€t = 1, . . . , T ), the de-
mand noise Î¾t is independent of {Î¾1, . . . , Î¾tâˆ’1} and satisï¬es E[Î¾t | Ftâˆ’1] = E[Î¾t | pt] = 0 a.s.
The conditional distribution of Î¾t given pt is denoted by Î¾t âˆ¼ Q(pt). In addition, |Î¾t| â‰¤ BÎ¾ a.s.
for some constant BÎ¾ < âˆ.

A5. (Wasserstein Distance) There exists a constant L > 0 such that for any p, p(cid:48) âˆˆ [p, p], it
(cid:112)EÎ¾,Î¾(cid:48)âˆ¼Î[|Î¾ âˆ’ Î¾(cid:48)|2] is
holds that W2(Q(p), Q(p(cid:48))) â‰¤ L|f (p) âˆ’ f (p(cid:48))|, where W2(Q, Q(cid:48)) := inf Î
the L2-Wasserstein distance between Q, Q(cid:48), with Î being an arbitrary joint distribution with
marginal distributions being Q and Q(cid:48), respectively.

Assumptions (A1)â€“(A3) are standard assumptions for the price-based revenue management problem

(Gallego and Van Ryzin 1994, Jasin 2014). In particular, the strict concavity of r(d) stems from the

economic principle of diminishing marginal returns. Assumption (A4) allows demand noise to have

general dependence on the price. Assumption (A5) states that if two prices are close to each other,

then the demand noises given these prices should also have similar distributions. This assumption

is satisï¬ed when the demand distribution is modeled by a parametric family of distributions (e.g.,

Bernoulli, binomial, truncated normal) whose parameters depend continuously on price.

3.1 Constant Regret of the Re-solving Heuristic

Let ru := maxxâ‰¥0 r(x) and xu := arg maxxâ‰¥0 r(x) be the unconstrained optimal revenue rate and
its maximizer, respectively. Because r(x) is strictly concave, in the case of a single product, it is
easily veriï¬ed that the unique optimal solution to the ï¬‚uid model is equal to xF = min{xT , xu}
and hence the ï¬‚uid optimal price is f âˆ’1(min{xT , xu}).

6

When the normalized initial inventory level xT exceeds the (unconstrained) optimal demand rate
xu, it is easy to verify that both the static policy Ï€s : pt â‰¡ f âˆ’1(xu) and the re-solving heuristic Ï€r
have constant regret.

Proposition 1. Suppose xT > xu. Let Ï€s : pt â‰¡ f âˆ’1(xu) be the static pricing policy. Then
RÏ€s(T, xT ) â‰¥ T r(xu) âˆ’ O(1) â‰¥ RÏ€âˆ—(T, xT ) âˆ’ O(1).
In addition, the re-solving heuristic satisï¬es
RÏ€r (T, xT ) â‰¥ T r(xu) âˆ’ O(1) â‰¥ RÏ€âˆ—(T, xT ) âˆ’ O(1).

Proof. Proof of Proposition 1. For any 1 â‰¤ t â‰¤ T , let xt = ytâˆ’1/t be the normalized inventory
level in period t. The static pricing policy commits to the price f âˆ’1(xu). If xt > xu, the re-solving
heuristic also selects the price f âˆ’1(xu). Let Ï€ denote either the static pricing policy Ï€s or the re-
solving heuristic Ï€r. Let Et = {sup1â‰¤t(cid:48)â‰¤tâˆ’1
Ï„ =1 Î¾Ï„ â‰¤ T (xT âˆ’ xu)} be the event that the inventory
level never drops below xu from the start to the beginning of period t. Then, we have

(cid:80)t(cid:48)

RÏ€(T, xT ) â‰¥ E

(cid:34) T

(cid:88)

(cid:35)
(r(xu) + Î¾t)1{Et}

= E

t=1

(cid:35)

(cid:32)

r(xu)1{Et}

= r(xu)

T âˆ’

(cid:34) T

(cid:88)

t=1

(cid:33)

Pr[E c
t ]

,

T
(cid:88)

t=1

where the ï¬rst equality uses the fact that {Î¾t} is a martingale diï¬€erence sequence and Et âˆˆ Ftâˆ’1.
By Doobâ€™s martingale inequality, for any 1 â‰¤ t â‰¤ T , we have

(cid:34)

Pr[E c

t ] = Pr

sup
1â‰¤t(cid:48)â‰¤tâˆ’1

t(cid:48)
(cid:88)

Ï„ =1

(cid:35)
Î¾Ï„ > T (xT âˆ’ xu)

â‰¤

(cid:80)t
E[Î¾2
Ï„ ]
T 2(xT âˆ’ xu)2 â‰¤

Ï„ =1

tB2
Î¾
T 2(xT âˆ’ xu)2 .

Thus, RÏ€(T, xT ) â‰¥ T r(xu) âˆ’ (B2
that T r(xu) â‰¥ RÏ€âˆ—(T, xT ) using Theorem 1. (cid:3)

Î¾ )/(xT âˆ’ xu)2 = T r(xu) âˆ’ O(1). The proof is complete by noting

However, analysis for the limited inventory case (xT < xu) is much more complicated. The static
price policy Ï€s â‰¡ f âˆ’1(xT ) typically suï¬€ers â„¦(
T ) regret in this case. The work by Jasin (2014)
established that the regret of the re-solving heuristic Ï€r when measured against the ï¬‚uid benchmark
(Note that the â€œpositive dual variableâ€ assumption in Jasin (2014) (see
T r(xT ) is at most O(ln T ).
Theorem 2) is equivalent to the condition xT < xu in the single product case.) Our next theorem
improves the regret of Ï€r to a constant.

âˆš

Theorem 3. Suppose xT âˆˆ (d, xu). Let Ï€r be the re-solving heuristic and Ï€âˆ— be the optimal policy.
For T â‰¥ 2, it holds that RÏ€r (T, xT ) â‰¥ RÏ€âˆ—(T, xT ) âˆ’ O(1).

Theorem 3 is the main result of this section and its proof is given in Sec. 4. Unlike the previous

results by Gallego and Van Ryzin (1994) and Jasin (2014), Theorem 3 compares the expected
revenue of Ï€r directly with the optimal DP pricing policy Ï€âˆ—, rather than comparing it with the
ï¬‚uid approximation value T r(xT ). This allows for tighter regret bounds. In fact, it is impossible
to obtain O(1) regret using the ï¬‚uid model as a benchmark, as we shall establish in the next

subsection.

7

In light of Proposition 1 and Theorem 3, we know that the re-solving heuristic Ï€r has constant
regret either in the suï¬ƒcient inventory case (xT > xu) or in the limited inventory case (xT < xu).
The only remaining scenario is the boundary case (xT = xu). We will investigate this scenario using
numerical experiments in Sec. 5. Our numerical result indicates that Ï€r does not have constant
regret in the boundary case. This observation is analogous to the situation for the quantity-based

revenue management problem, where the re-solving heuristic has constant regret when the ï¬‚uid

model (a linear program) has non-degenerate solutions but does not have constant regret in certain

boundary cases when the ï¬‚uid model has degenerate solutions (Jasin and Kumar 2012, Bumpensanti

and Wang 2020).

3.2 Logarithmic Gap of the Fluid Model Benchmark

In this section, we show that in the limited inventory case (xT < xu), the regret of the re-solving
policy Ï€r measured against the ï¬‚uid approximation value T r(xT ) can be at least â„¦(ln T ).

Theorem 4. Suppose xT âˆˆ (d, xu) and let Ï€r be the re-solving policy deï¬ned in Theorem 2. Sup-
pose there exists Ïƒ > 0 such that EÎ¾âˆ¼Q(p)[Î¾2] â‰¥ Ïƒ2 for any p âˆˆ [p, p]. For suï¬ƒciently large T , it
holds that RÏ€r (T, xT ) â‰¤ T r(xT ) âˆ’ â„¦(ln T ).

Theorem 4 is proved in Sec. 4. It implies that the logarithmic regret by Jasin (2014) (see Theo-

rem 2 above), which uses the ï¬‚uid model benchmark, is tight and cannot be improved. Because
RÏ€âˆ—(T, xT ) âˆ’ RÏ€r (T, xT ) = O(1) by Theorem 3, Theorem 4 also shows that there is an logarithmic
gap â„¦(ln T ) between the value of the optimal DP pricing policy and the ï¬‚uid approximation value.

This is why our constant regret analysis does not use the ï¬‚uid model as the benchmark.

Prior work on the quantity-based revenue management problem (Reiman and Wang 2008, Bumpen-

santi and Wang 2020, Vera et al. 2019) also considered diï¬€erent regret benchmarks that are tighter

than the ï¬‚uid model, including various versions of the â€œhindsight optimumâ€ benchmark. The â€œhind-

sight optimumâ€ model assumes a clairvoyant who knows the aggregate realized demands for the

entire horizon at the start. In the Appendix of this paper, we show that one version of the hindsight

optimum benchmark proposed by Vera et al. (2019) has O(1) regret when measured against the

ï¬‚uid approximation benchmark. By Theorem 4, this hindsight optimum benchmark is also â„¦(ln T )

away from the value of the optimal DP policy.

4 Proofs

Before presenting our proof, we ï¬rst deï¬ne some notations.

For convenience, throughout this

section, time indices are counted backwards: time index t occurs when there are t periods until the
t (x) = RÏ€r (t, x) be the expected cumulative
end of the selling horizon. Let Ï†âˆ—
revenue of the optimal DP pricing policy Ï€âˆ— and the re-solving policy Ï€r, respectively, when there
are t remaining periods and xt units of remaining inventory. For 1 â‰¤ Ï„ â‰¤ T , let xâˆ—
Ï„ be

t (x) = RÏ€âˆ—(t, x) and Ï†r

Ï„ and xr

8

Table 1: Notations used in the proof.

Notation Deï¬nition
xu
Ï†âˆ—
t (x)
Ï†r
t (x)
Ft
xâˆ—
Ï„ , xr
Ï„
âˆ†Ï„
Â¯âˆ†â†’t
Î¾âˆ—
Ï„ , Î¾r
Ï„
Â¯Î¾âˆ—
â†’t, Â¯Î¾r
â†’t
Â¯Î¾Î´
â†’t
ÎÏ„
T (cid:93)

xu = arg maxxâˆˆ[d,d] r(x)
t (x) = RÏ€âˆ—(t, x)
Ï†âˆ—
t (x) = RÏ€r (t, x)
Ï†r
Ïƒ-algebra of {Î¾Ï„ }Ï„ â‰¥t
remaining inventory divide by Ï„
see Eq. (4)
T âˆ’1 + âˆ†T âˆ’1
âˆ†T
Î¾âˆ—
Ï„ âˆ¼ Q(f âˆ’1(xâˆ—
T âˆ’1 + Î¾T âˆ’1
Î¾T
â†’t âˆ’ Â¯Î¾âˆ—
Â¯Î¾r
â†’t
joint distribution over (Î¾âˆ—
see Eq. (7)

T âˆ’2 + Â· Â· Â· + âˆ†t+1
Ï„ + âˆ†Ï„ )), Î¾r

T âˆ’2 + Â· Â· Â· + Î¾t+1

Ï„ , Î¾r
Ï„ )

t

t

Ï„ âˆ¼ Q(f âˆ’1(xr

Ï„ ))

Meaning
the optimal demand rate without inventory constraints
reward of Ï€âˆ— with t periods and xt inventory
reward of re-solving with t periods and xt inventory
all the events known at the end of period t
normalized inventory levels under policy Ï€âˆ— and Ï€r
the optimal demand correction with Ï„ periods remaining
harmonic series of demand corrections up to t
the stochastic demand noises at time Ï„ under Ï€âˆ—, Ï€r
demand noises up to t, under Ï€âˆ— and Ï€r
diï¬€erence in harmonic demand noise series
the joint distribution that minimizes (cid:112)EÎÏ„ [|Î¾âˆ—
stopping time such that {xr

Ï„ }Ï„ â‰¤T (cid:93) is well-behaved

Ï„ âˆ’ Î¾r

Ï„ |2]

the normalized inventory levels under policy Ï€âˆ— and Ï€r, when there are Ï„ time periods remaining.
These notations are summarized in Table 1, with some additional notations being deï¬ned later in

the proof.

The rest of this section is organized as follows. In the ï¬rst subsection we establish some properties
of the optimal policy Ï€âˆ— and the re-solving policy Ï€r. More speciï¬cally, we establish upper and
t (Â·) using the key quantities of { Â¯âˆ†â†’t} (harmonic
lower bounds of the expected rewards Ï†âˆ—
series of optimal demand corrections), { Â¯Î¾âˆ—
â†’t} (harmonic series of stochastic noise variables)
and T (cid:93) (a stopping time until which the demand noise process is well-behaved). We then proceed
with the proofs of Theorems 3, 4 by carefully analyzing the diï¬€erences in the Taylor expansions of
t (Â·), Ï†r
Ï†âˆ—

t (Â·), Ï†r
â†’t, Â¯Î¾r

t (Â·).

4.1 Properties of the Optimal Policy and the Re-solving Heuristic

For any Ï„ â‰¥ 1, let the random variable xâˆ—
Ï„ be the normalized inventory level (i.e., remaining
inventory divided by remaining time) at period Ï„ under policy Ï€âˆ—.
Ï„ Ï„ and yÏ„ âˆ’1 =
xâˆ—
Ï„ âˆ’1(Ï„ âˆ’ 1) be the actual inventory levels when Ï„ and (Ï„ âˆ’ 1) time periods are remaining. If the
policy selects the demand rate xâˆ—
Ï„ + âˆ† + Î¾Ï„ ), which implies
Ï„ âˆ’ (âˆ† + Î¾Ï„ )/(Ï„ âˆ’ 1). Therefore, the value of the optimal policy Ï€âˆ— is given
Ï„ âˆ’1 = yÏ„ âˆ’1/(Ï„ âˆ’ 1) = xâˆ—
xâˆ—
by the following Bellman equation:

Ï„ + âˆ† âˆˆ [d, d], we have yÏ„ âˆ’1 = yÏ„ âˆ’ (xâˆ—

Let yÏ„ = xâˆ—

Ï„ (xâˆ—
Ï†âˆ—

Ï„ ) =

max

âˆ†âˆˆ[dâˆ’xâˆ—

Ï„ ,dâˆ’xâˆ—
Ï„ ]

r(xâˆ—

Ï„ + âˆ†) + EÎ¾Ï„ âˆ¼Q(f âˆ’1(xâˆ—

Ï„ +âˆ†))

(cid:20)

Ï†âˆ—
Ï„ âˆ’1

(cid:18)

xâˆ—
Ï„ âˆ’

âˆ† + Î¾Ï„
Ï„ âˆ’ 1

(cid:19)(cid:21)

.

Let âˆ†Ï„ denote the maximizer of the above equation. Let Î¾âˆ—
is drawn from the distribution Q(f âˆ’1(xâˆ—
level in the next period is xâˆ—

Ï„ be the realized demand noise, which
Ï„ + âˆ†Ï„ )) (by Assumption (A4)). The normalized inventory
Ï„ )/(Ï„ âˆ’ 1). The Bellman equation can be rewritten

Ï„ âˆ’ (âˆ†Ï„ + Î¾âˆ—

Ï„ âˆ’1 = xâˆ—

9

as

Ï„ (xâˆ—
Ï†âˆ—

Ï„ ) = r(xâˆ—

Ï„ + âˆ†Ï„ ) + E

(cid:20)

Ï†âˆ—
Ï„ âˆ’1

(cid:18)

xâˆ—
Ï„ âˆ’

(cid:19)(cid:21)

âˆ†Ï„ + Î¾âˆ—
Ï„
Ï„ âˆ’ 1

âˆ€ 2 â‰¤ Ï„ â‰¤ T, xâˆ—

Ï„ â‰¥ 0.

(4)

The above equation implies d âˆ’ xâˆ—
be in the domain [d, d].

Ï„ â‰¤ âˆ†Ï„ â‰¤ d âˆ’ xâˆ—

Ï„ , but we remark that it does not required xâˆ—

Ï„ to

Î¾âˆ—
For any t < T , let Â¯âˆ†â†’t := âˆ†T
t+1
t be the
harmonic series of demand noises up to time t under the optimal policy. For t = T , we also deï¬ne
Â¯âˆ†â†’t = Â¯Î¾âˆ—

T âˆ’2 + Â· Â· Â· + âˆ†t+1

â†’t = 0. It then holds that

Î¾âˆ—
T âˆ’1
T âˆ’2 + Â· Â· Â· +

T âˆ’1 + âˆ†T âˆ’1

â†’t := Î¾T

and Â¯Î¾âˆ—

T âˆ’1 +

t

Ï„ = xT âˆ’ Â¯âˆ†â†’Ï„ âˆ’ Â¯Î¾âˆ—
xâˆ—

â†’Ï„ ,

âˆ€ 1 â‰¤ Ï„ â‰¤ T.

(5)

Next, we consider the re-solving heuristic Ï€r. For any Ï„ â‰¥ 1, let the random variable xr
normalized inventory level under the re-solving heuristic. If xr
selects the price f âˆ’1(xr
from the distribution Q(f âˆ’1(xr
Ï„ âˆ’1 = (xÏ„ Ï„ âˆ’ xÏ„ âˆ’ Î¾r
xr
be written as

Ï„ be the
Ï„ âˆˆ [d, xu], the re-solving heuristic
Ï„ be the realized demand noise under this price, which is drawn
Ï„ )). The normalized inventory level in the next period is equal to
Ï„ /(Ï„ âˆ’ 1). Thus, the value of the re-solving policy Ï€r can

Ï„ )/(Ï„ âˆ’ 1) = xr

Ï„ ). Let Î¾r

Ï„ âˆ’ Î¾r

t (xr
Ï†r

Ï„ ) = r(xr

(cid:20)
Ï†r
Ï„ ) + E
tâˆ’1

(cid:18)

xr
Ï„ âˆ’

Î¾r
Ï„
Ï„ âˆ’ 1

(cid:19)(cid:21)

âˆ€ 2 â‰¤ Ï„ â‰¤ T, d â‰¤ xr

Ï„ â‰¤ xu.

(6)

Note that Eq. (6) does not hold for xr
Ï„ > xu, in which case the re-solving policy Ï€r would commit to
the unconstrained optimal demand rate xu instead of xr
Ï„ . This motivates the deï¬nition of a certain
stopping time T (cid:93) in Eq. (7) below, which ensures that Eq. (6) holds for all Ï„ â‰¥ T (cid:93). Comparing
Eq. (6) with Eq. (4), we remark that the re-solving heuristics Ï€r can be viewed a special case of
the dynamic programming policy with the decision rule restricted to âˆ†Ï„ â‰¡ 0 for all xr

Ï„ âˆˆ [d, xu].

Deï¬ne a time index T (cid:93) as

(cid:26)

T (cid:93) := max

Ï„ â‰¥ 1 :

(cid:12)
(cid:12) Â¯Î¾r

â†’Ï„ âˆ’1

(cid:12)
(cid:12) > min

(cid:18)

xT âˆ’ d, xu âˆ’ xT , âˆ’

(cid:19)(cid:27)

r(cid:48)(xT )
r(cid:48)(cid:48)(xT )

âˆ¨ 2,

(7)

Î¾r
Ï„ +1
Ï„

â†’Ï„ = Î¾r

T

T âˆ’1 + Â· Â· Â· +

where Â¯Î¾r
is the harmonic series of demand noises under the re-solving policy.
Note that Â¯Î¾r
t=Ï„ and measurable with respect to FÏ„ , so T (cid:93) is indeed a
stopping time. Because of the bound | Â¯Î¾â†’Ï„ | â‰¤ min{xT âˆ’ d, xu âˆ’ xT } holds for all Ï„ â‰¥ T (cid:93) âˆ’ 1, we
have

â†’Ï„ âˆ’1 is a function of {Î¾r

t }T

Ï„ = xT âˆ’ Â¯Î¾r
xr

â†’Ï„ ,

âˆ€Ï„ â‰¥ T (cid:93) âˆ’ 1.

(8)

Intuitively, T (cid:93) is the ï¬rst time that the inventory level in the next period xr
Ï„ âˆ’1 falls outside of the
interval [d, xu]. In other words, the inventory levels of the re-solving heuristic xr
Ï„ satisï¬es Eq. (6)
up to time T (cid:93). The additional term âˆ’r(cid:48)(xT )/r(cid:48)(cid:48)(xT ) in Eq. (7) is needed for technical reasons in

10

the proof (this term is equal to xu âˆ’ xT when r(d) is a quadratic function).

Lemma 1. For xT âˆˆ (d, xu) and any T â‰¥ 1, it holds that

E[T (cid:93)] â‰¤ 2 +

4B4
Î¾
min{xT âˆ’ d, xu âˆ’ xT , âˆ’r(cid:48)(xT )/r(cid:48)(cid:48)(xT )}4 .

(9)

Proof. Proof of Lemma 1. Let Î³ := min{xT âˆ’ d, xu âˆ’ xT , âˆ’r(cid:48)(xT )/r(cid:48)(cid:48)(xT )}. By the deï¬nition from
Eq. (7), for Ï„ > 2, we have

Pr[T (cid:93) â‰¥ Ï„ ] = Pr

(cid:34)

(cid:35)

sup
Ï„ âˆ’1â‰¤tâ‰¤T

| Â¯Î¾r

â†’t| > Î³

â‰¤

E[| Â¯Î¾r

â†’Ï„ âˆ’1|4]
Î³4

,

which follows from Doobâ€™s martingale inequality by noting that {Î¾Ï„ /Ï„ } is a martingale diï¬€erence
â†’t = Î¾r
sequence (see Assumption (A4)). Recall that Â¯Î¾r
t | â‰¤ BÎ¾ a.s. For Ï„ > 2,
it is easily veriï¬ed that

Î¾r
t with |Î¾r
t+1

T âˆ’1 + Â· Â· Â· +

T

E[| Â¯Î¾r

â†’Ï„ âˆ’1|4] =

(cid:88)

Ï„ â‰¤j,kâ‰¤T

E[|Î¾r

j |2|Î¾r
(j âˆ’ 1)2(k âˆ’ 1)2 â‰¤

k|2]

ï£«

ï£­

(cid:88)

Ï„ â‰¤jâ‰¤T

B2
Î¾
(j âˆ’ 1)2

ï£¶

ï£«

ï£¸

ï£­

(cid:88)

Ï„ â‰¤kâ‰¤T

B2
Î¾
(k âˆ’ 1)2

ï£¶

ï£¸ â‰¤

4B4
Î¾
(Ï„ âˆ’ 1)2 .

Using the equality E[T (cid:93)] = (cid:80)T

Ï„ =1 Pr[T (cid:93) â‰¥ Ï„ ], we have

E[T (cid:93)] â‰¤

T
(cid:88)

Ï„ =1

E[| Â¯Î¾r

â†’Ï„ âˆ’1|4]
Î³4

â‰¤ 2 +

T
(cid:88)

Ï„ =3

4B4
Î¾

Î³4(Ï„ âˆ’ 1)2 â‰¤ 2 +

4B4
Î¾
Î³4 .

(cid:3)

Lemma 2. Let xT âˆˆ (d, xu). Let T (cid:93) be the stopping time deï¬ned in Eq. (7). Then, it holds that

(cid:34) T

(cid:88)

E

Ï„ =T (cid:93)

(cid:35)

r(xâˆ—

Ï„ + âˆ†Ï„ )

â‰¤ Ï†âˆ—

T (xT ) â‰¤ E

(cid:34) T

(cid:88)

E

Ï„ =T (cid:93)

(cid:35)

r(xr
Ï„ )

â‰¤ Ï†r

T (xT ) â‰¤ E

(cid:34) T

(cid:88)

Ï„ =T (cid:93)

(cid:34) T

(cid:88)

Ï„ =T (cid:93)

r(xâˆ—

Ï„ + âˆ†Ï„ ) + (T (cid:93) âˆ’ 1)r(min{xâˆ—

T (cid:93)âˆ’1, xu})

(cid:35)

,

r(xr

Ï„ ) + (T (cid:93) âˆ’ 1)r(min{xr

(cid:35)
T (cid:93)âˆ’1, xu})

.

(10)

Proof. Proof of Lemma 2. For the optimal DP policy, the revenue collected in periods T, T âˆ’
1, Â· Â· Â· , T (cid:93) is (cid:80)T
Ï„ ]. At the beginning of period T (cid:93) âˆ’ 1, the remaining

Ï„ + âˆ†Ï„ ) + f âˆ’1(xâˆ—

Ï„ + âˆ†Ï„ )Î¾âˆ—

Ï„ =T (cid:93)[r(xâˆ—

11

inventory level is xâˆ—

T (cid:93)âˆ’1(T (cid:93) âˆ’ 1). Therefore,

Ï†âˆ—
T (xT ) = E

= E

(cid:34) T

(cid:88)

Ï„ =T (cid:93)

(cid:34) T

(cid:88)

Ï„ =T (cid:93)

[r(xâˆ—

Ï„ + âˆ†Ï„ ) + f âˆ’1(xâˆ—

Ï„ + âˆ†Ï„ )Î¾âˆ—

Ï„ ] + Ï†âˆ—

T (cid:93)âˆ’1(xâˆ—

T (cid:93)âˆ’1)

(cid:35)

r(xâˆ—

Ï„ + âˆ†Ï„ ) + Ï†âˆ—

T (cid:93)âˆ’1(xâˆ—

(cid:35)
T (cid:93)âˆ’1)

,

where the second equality holds because E[(cid:80)T
Ï„ =T (cid:93) f âˆ’1(xâˆ—
Ï„ ] = 0 by applying Doobâ€™s optional
stopping theorem. Similarly, for the re-solving policy, because the revenue collected in periods
T, T âˆ’ 1, Â· Â· Â· , T (cid:93) is (cid:80)T
Ï„ ], we have

Ï„ ) + f âˆ’1(xr

Ï„ +âˆ†Ï„ )Î¾âˆ—

Ï„ =T (cid:93)[r(xr

Ï„ )Î¾r

T (xr
Ï†r

T ) = E

= E

(cid:34) T

(cid:88)

Ï„ =T (cid:93)

(cid:34) T

(cid:88)

Ï„ =T (cid:93)

[r(xr

Ï„ ) + f âˆ’1(xr

Ï„ )Î¾r

Ï„ ] + Ï†r

T (cid:93)âˆ’1(xr

(cid:35)
T (cid:93)âˆ’1)

r(xr

Ï„ ) + Ï†r

T (cid:93)âˆ’1(xr

(cid:35)
T (cid:93)âˆ’1)

.

To complete the proof, note that for any admissible policy Ï€, we have 0 â‰¤ Ï†Ï€
1)r(xc

T (cid:93)âˆ’1) = (T (cid:93) âˆ’ 1)r(min{xT (cid:93)âˆ’1, xu}) by Theorem 1. (cid:3)

T (cid:93)âˆ’1(xT (cid:93)âˆ’1) â‰¤ (T (cid:93) âˆ’

4.2 Proof of Theorem 3

In this section we prove Theorem 3. By Lemma 2, for any xT âˆˆ (d, xu), it holds that

Ï†âˆ—
T (xT ) â‰¤ E

Ï„ =T (cid:93) r(xâˆ—

Ï„ + âˆ†Ï„ ) + (T (cid:93) âˆ’ 1)r(min{xâˆ—

(cid:104)(cid:80)T

(cid:105)
T (cid:93)âˆ’1, xu})

Ï†r
T (xT ) â‰¥ E

(cid:104)(cid:80)T

(cid:105)
Ï„ =T (cid:93) r(xr
Ï„ )

.

,

(11)

(12)

Recall that T (cid:93) is the stopping time deï¬ned in Eq. (7). For any Ï„ â‰¥ T (cid:93) âˆ’1, we have xâˆ—
â†’Ï„ := Â¯Î¾r
Â¯Î¾âˆ—
â†’Ï„ by Eq. (5), xr

â†’Ï„ by Eq. (8). For notational simplicity, deï¬ne Â¯Î¾Î´

Ï„ = xT âˆ’ Â¯Î¾r

Ï„ = xT âˆ’ Â¯âˆ†â†’Ï„ âˆ’
â†’Ï„ âˆ’ Â¯Î¾âˆ—
â†’Ï„ . So,

r(xâˆ—

Ï„ + âˆ†Ï„ ) âˆ’ r(xr

Ï„ ) â‰¤ r(cid:48)(xT âˆ’ Â¯Î¾r

â†’Ï„ )[âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â‰¤ r(cid:48)(xT )[âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

+

M
2

â†’Ï„ |2|âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´
| Â¯Î¾r

â†’Ï„ ] âˆ’

|âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

m
2
â†’Ï„ [âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´
â†’Ï„ ] âˆ’ r(cid:48)(cid:48)(xT ) Â¯Î¾r
m
2

|âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ | âˆ’

â†’Ï„ |2,

â†’Ï„ |2

â†’Ï„ ]

(13)

where the ï¬rst inequality uses the strict concavity condition (A2) and the second inequality uses

the smoothness condition (A3) of r(d).

Ï„ := Î¾r

Deï¬ne Î¾Î´
dexed backwards). By Doobâ€™s optional stopping theorem, E[(cid:80)T

â†’Ï„ is measurable with respect to FÏ„ +1 (note: FÏ„ +1 âŠ‚ FÏ„ as time are in-
Ï„ ] =

Ï„ ] = 0 and E[(cid:80)T

Ï„ âˆ’Î¾âˆ—

â†’Ï„ Î¾Î´

Ï„ =T (cid:93) Â¯Î¾r

Ï„ =T (cid:93) Î¾Î´

Ï„ . Also, Â¯Î¾Î´

12

0. Taking expectations on both sides of Eq. (13) and summing over Ï„ = T, T âˆ’ 1, Â· Â· Â· , T (cid:93), we have

(cid:20) T

(cid:88)

E

(cid:0)r(xâˆ—

Ï„ + âˆ†Ï„ ) âˆ’ r(xr

Ï„ )(cid:1)

(cid:21)

(cid:20) T

(cid:88)

â‰¤ E

(cid:18)

r(cid:48)(xT )[âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ âˆ’ Î¾Î´

Ï„ ] âˆ’ r(cid:48)(cid:48)(xT ) Â¯Î¾r

â†’Ï„ [âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ ]

Ï„ =T (cid:93)

+r(cid:48)(cid:48)(xT ) Â¯Î¾r

â†’Ï„ [Î¾Î´

Ï„ âˆ’ Â¯Î¾Î´

â†’Ï„ ] +

Ï„ =T (cid:93)
M
2

â†’Ï„ |2|âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´
| Â¯Î¾r

â†’Ï„ | âˆ’

|âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ |2

(cid:19)(cid:21)

. (14)

m
2

Deï¬ne Î·âˆ— = âˆ’(xâˆ—
Eq. (13) to period Ï„ = T (cid:93) âˆ’ 1, we have

T (cid:93)âˆ’1 âˆ’ xu)+, Î·r = (r(cid:48)(xT )/r(cid:48)(cid:48)(xT ) âˆ’ Â¯Î¾r

â†’T (cid:93)âˆ’1)+ and Î· = Î·âˆ— + Î·r. By applying

r(min{xâˆ—

T (cid:93)âˆ’1, xu}) âˆ’ r(xr
â‰¤ r(cid:48)(xT )[Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

T (cid:93)âˆ’1 âˆ’ Î·r) = r(xâˆ—
â†’T (cid:93)âˆ’1] âˆ’ r(cid:48)(cid:48)(xT )( Â¯Î¾r

+

M
2

| Â¯Î¾r
â†’T (cid:93)âˆ’1 + Î·r|2|Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

â†’T (cid:93)âˆ’1| âˆ’

T (cid:93)âˆ’1 âˆ’ Î·r)

T (cid:93)âˆ’1 + Î·âˆ—) âˆ’ r(xr
â†’T (cid:93)âˆ’1 + Î·r)[Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´
|Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

â†’T (cid:93)âˆ’1|2

m
2

â†’T (cid:93)âˆ’1]

â‰¤ r(cid:48)(xT )[Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

â†’T (cid:93)âˆ’1] âˆ’ r(cid:48)(cid:48)(xT )( Â¯Î¾r

â†’T (cid:93)âˆ’1 + Î·r)[Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

â†’T (cid:93)âˆ’1] +

| Â¯Î¾r
â†’T (cid:93)âˆ’1|4

âˆ’

M 2
8m

| Â¯Î¾r
â†’T (cid:93)âˆ’1|4 +

M
2

â†’T (cid:93)âˆ’1|2|Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´
| Â¯Î¾r

â†’T (cid:93)âˆ’1| âˆ’

m
2

|Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

â‰¤ r(cid:48)(xT )[Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

â†’T (cid:93)âˆ’1] âˆ’ r(cid:48)(cid:48)(xT )( Â¯Î¾r

â†’T (cid:93)âˆ’1 + Î·r)[Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

â†’T (cid:93)âˆ’1] +

M 2
8m
â†’T (cid:93)âˆ’1|2
M 2
8m

| Â¯Î¾r
â†’T (cid:93)âˆ’1|4,
(15)

where the second inequality holds because | Â¯Î¾r
inequality follows by completing the square, because âˆ’ M 2
Â¯Î¾Î´
â†’T (cid:93)âˆ’1| âˆ’ m
surely.

8m | Â¯Î¾r
2 (|Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

2 |Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

â†’T (cid:93)âˆ’1|2 = âˆ’ m

â†’T (cid:93)âˆ’1 + Î·r| â‰¤ | Â¯Î¾r

â†’T (cid:93)âˆ’1| by deï¬nition and the last
â†’T (cid:93)âˆ’1|2|Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 +
â†’T (cid:93)âˆ’1|2)2 â‰¤ 0 almost

â†’T (cid:93)âˆ’1|4 + M
â†’T (cid:93)âˆ’1| âˆ’ M

2 | Â¯Î¾r
2m | Â¯Î¾r

Subtracting (12) from (11), we obtain

T (xT )

T (xT ) âˆ’ Ï†r
Ï†âˆ—
(cid:34) T

(cid:88)

â‰¤ E

â‰¤ E

Ï„ =T (cid:93)

(cid:34) T

(cid:88)

Ï„ =T (cid:93)

(cid:0)r(xâˆ—

Ï„ + âˆ†Ï„ ) âˆ’ r(xr

Ï„ )(cid:1) + (T (cid:93) âˆ’ 1)r(min{xâˆ—

T (cid:93)âˆ’1, xu})

(cid:35)

(cid:0)r(xâˆ—

Ï„ + âˆ†Ï„ ) âˆ’ r(xr

Ï„ )(cid:1) + (T (cid:93) âˆ’ 1)(cid:0)r(xâˆ—

T (cid:93)âˆ’1 + Î·âˆ—) âˆ’ r(xr

T (cid:93)âˆ’1 âˆ’ Î·r)(cid:1)

(cid:35)

(cid:104)

+ E

(T (cid:93) âˆ’ 1)r(xu)

(cid:105)

â‰¤ E(cid:2)r(cid:48)(xT )A âˆ’ r(cid:48)(cid:48)(xT )B + r(cid:48)(cid:48)(xT )C + D(cid:3) + E

(cid:105)
(cid:104)
(T (cid:93) âˆ’ 1)r(xu)

,

(16)

where the second inequality holds because xT (cid:93)âˆ’1 + Î·âˆ— = min{xâˆ—

T (cid:93)âˆ’1, xu} by deï¬nition, and xu is

13

the maximizer of r(Â·). The last inequality uses (14) (15) and the terms A, B, C, D are deï¬ned as

A = (cid:80)T
B = (cid:80)T
C = (cid:80)T
D = (cid:80)T

â†’Ï„ âˆ’ Î¾Î´

Ï„ =T (cid:93)[âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´
â†’Ï„ [âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ ] âˆ’ (T (cid:93) âˆ’ 1) Â¯Î¾r
Ï„ =T (cid:93) Â¯Î¾r
â†’Ï„ ] âˆ’ (T (cid:93) âˆ’ 1)( Â¯Î¾r
Ï„ =T (cid:93) Â¯Î¾r
â†’Ï„ [Î¾Î´
(cid:0) M
2 | Â¯Î¾r

Ï„ âˆ’ Â¯Î¾Î´
â†’Ï„ |2|âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

Ï„ =T (cid:93)

Ï„ ] âˆ’ (T (cid:93) âˆ’ 1)( Â¯âˆ†â†’T (cid:93)âˆ’1 âˆ’ Â¯Î¾Î´

â†’T (cid:93)âˆ’1) + (T (cid:93) âˆ’ 1)Î·,

â†’T (cid:93)âˆ’1

Â¯âˆ†â†’T (cid:93)âˆ’1 + (T (cid:93) âˆ’ 1)( Â¯Î¾r
â†’T (cid:93)âˆ’1,

â†’T (cid:93)âˆ’1 + Î·r) Â¯Î¾Î´

â†’T (cid:93)âˆ’1 + Î·r)Î·,

â†’Ï„ | âˆ’ m

2 |âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ |2(cid:1) + (T (cid:93) âˆ’ 1) M 2

8m | Â¯Î¾r

â†’T (cid:93)âˆ’1|4.

Next, we analyze the four terms A, B, C, D separately. Recall the deï¬nition Â¯âˆ†â†’Ï„ = âˆ†T
â†’Ï„ = Î¾Î´
Î´
Î¾

. For the term A, with elementary algebra, it can be veriï¬ed that

T âˆ’1 + Â· Â· Â· +

Î¾Î´
Ï„ +1
Ï„

T

T âˆ’1 +Â· Â· Â·+ âˆ†Ï„ +1

Ï„

,

(cid:80)T

Ï„ =T (cid:93)[âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ âˆ’ Î¾Î´

Ï„ ] âˆ’ (T (cid:93) âˆ’ 1)( Â¯âˆ†â†’T (cid:93)âˆ’1 âˆ’ Â¯Î¾Î´

â†’T (cid:93)âˆ’1) = 0,

(17)

which implies that E[A] = E[(T (cid:93) âˆ’ 1)Î·].

Re-organizing all terms in B by Î¾t (âˆ€t â‰¥ T (cid:93)), we obtain

(cid:80)T

t=T (cid:93)

â†’Ï„ [âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ ] âˆ’ (T (cid:93) âˆ’ 1) Â¯Î¾r
Ï„ =T (cid:93) Â¯Î¾r
Î¾r
t
tâˆ’1
Î¾r
t
tâˆ’1
t=T (cid:93) Î¾r
t

(cid:80)tâˆ’1
Ï„ =T (cid:93)(âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ ) âˆ’ (T (cid:93) âˆ’ 1) Â¯Î¾r
(cid:2)âˆ’(t âˆ’ 1) Â¯âˆ†â†’tâˆ’1 + (T (cid:93) âˆ’ 1) Â¯âˆ†â†’T (cid:93)âˆ’1
Â¯âˆ†â†’tâˆ’1,

= (cid:80)T
= (cid:80)T
t=T (cid:93)
= âˆ’ (cid:80)T

â†’T (cid:93)âˆ’1

Â¯âˆ†â†’T (cid:93)âˆ’1

â†’T (cid:93)âˆ’1

Â¯âˆ†â†’T (cid:93)âˆ’1
(cid:3) âˆ’ (T (cid:93) âˆ’ 1) Â¯Î¾r

Â¯âˆ†â†’T (cid:93)âˆ’1

â†’T (cid:93)âˆ’1

where the last equality uses Î¾
âˆ†T
T âˆ’1 + Â· Â· Â· + âˆ†Ï„
Doobâ€™s optional stopping theorem, we have E[âˆ’ (cid:80)T

Î¾Î´
T (cid:93)âˆ’1 . Note that the random variable Â¯âˆ†â†’Ï„ âˆ’1 =
T (cid:93)
Ï„ âˆ’1 is measurable with respect to FÏ„ +1, since the DP policy is non-anticipating. By
Ï„ =T (cid:93) Î¾r
Ï„

Â¯âˆ†â†’Ï„ âˆ’1] = 0 and thus

â†’T (cid:93)âˆ’1 = Î¾Î´

T âˆ’1 + Â· Â· Â· +

Î´

T

E[B] = E

(cid:104)
âˆ’ (cid:80)T

Ï„ =T (cid:93) Î¾r
Ï„

Â¯âˆ†â†’Ï„ âˆ’1

(cid:105)

+ E

(cid:104)
(T (cid:93) âˆ’ 1)( Â¯Î¾r

â†’T (cid:93)âˆ’1 + Î·r)Î·

(cid:105)

= E

(cid:104)
(T (cid:93) âˆ’ 1)( Â¯Î¾r

â†’T (cid:93)âˆ’1 + Î·r)Î·

(cid:105)

. (18)

Next we analyze the term C. Note that C has a similar structure as B; therefore

(cid:34)

E[C] = E

âˆ’

T
(cid:88)

t=T (cid:93)

(cid:35)

(cid:104)

âˆ’ E

Î¾r
t

Â¯Î¾Î´
â†’tâˆ’1

(T (cid:93) âˆ’ 1)Î·r Â¯Î¾Î´

â†’T (cid:93)âˆ’1

(cid:105)

(cid:34)

= E

âˆ’

T
(cid:88)

t=T (cid:93)

Î¾r
t (

Î¾Î´
T
T âˆ’ 1

+ Â· Â· Â· +

(cid:35)

Î¾Î´
t+1
t

+

Î¾Î´
t
t âˆ’ 1

)

âˆ’ E

(cid:104)
(T (cid:93) âˆ’ 1)Î·r Â¯Î¾Î´

â†’T (cid:93)âˆ’1

(cid:105)

(cid:34)

= E

âˆ’

(cid:35)

Î¾r
t Î¾Î´
t
t âˆ’ 1

T
(cid:88)

t=T (cid:93)

âˆ’ E

(cid:104)
(T (cid:93) âˆ’ 1)Î·r Â¯Î¾Î´

â†’T (cid:93)âˆ’1

(cid:105)

,

14

where the last equality uses Doobâ€™s optional stopping theorem. Because |Î¾r

t | â‰¤ BÎ¾ a.s., we have

(cid:12)
(cid:12)
E
(cid:12)
(cid:12)
(cid:12)

(cid:34)

âˆ’

T
(cid:88)

t=T (cid:93)

Î¾r
t Î¾Î´
t
t âˆ’ 1

(cid:35)(cid:12)
(cid:12)
(cid:12)
(cid:12)
(cid:12)

(cid:34) T

(cid:88)

â‰¤ E

|Î¾r

t ||Î¾r

t âˆ’ Î¾âˆ—
t |

t âˆ’ 1

(cid:35)

â‰¤ BÎ¾E

(cid:34) T

(cid:88)

t=T (cid:93)

(cid:35)

|Î¾r

t âˆ’ Î¾âˆ—
t |
t âˆ’ 1

= BÎ¾E

(cid:34) T

(cid:88)

t=2

1{T (cid:93) â‰¤ t}

(cid:35)

|Î¾r

t âˆ’ Î¾âˆ—
t |
t âˆ’ 1

= BÎ¾E

(cid:34) T

(cid:88)

t=2

1{T (cid:93) â‰¤ t}

E[|Î¾r

t | | Ft+1]

t=T (cid:93)
t âˆ’ Î¾âˆ—
t âˆ’ 1

(cid:35)

â‰¤ BÎ¾E

(cid:34) T

(cid:88)

t=2

1{T (cid:93) â‰¤ t}

(cid:112)E[|Î¾r

t |2 | Ft+1]

t âˆ’ Î¾âˆ—
t âˆ’ 1

(cid:35)

,

(19)

where the last equality holds because the event {T (cid:93) â‰¤ t} = {T (cid:93) â‰¥ t + 1}c âˆˆ Ft+1.

Because the regret is deï¬ned as the diï¬€erence between the expected revenues under the optimal
DP policy and the re-solving heuristic, we can choose the joint distribution of (Î¾âˆ—
t ) freely, as long
as their marginal distributions remain the same. We choose the joint distributions as follows. At
each time period t with posted prices pâˆ—
t , let
(Î¾âˆ—

t and corresponding demand rates xâˆ—
t ), Qt(pr

t ) âˆ¼ Ît such that the marginal distributions are Qt(pâˆ—

t ) and furthermore

t + âˆ†t and xr

t , Î¾r

t , Î¾r

t , pr

(cid:113)

E [|Î¾âˆ—

t âˆ’ Î¾r

t |2|Ft+1] =

(cid:113)

E(Î¾âˆ—

t )âˆ¼Ît [|Î¾âˆ—

t ,Î¾r

t âˆ’ Î¾r

t |2] â‰¤ L|f (pâˆ—

t ) âˆ’ f (pr

t )| = L|xâˆ—

t + âˆ†t âˆ’ xr

t | a.s.

The existence of such a joint distribution Ît is implied by W2(Q(pâˆ—
Assumption (A5)). As a result, Eq. (19) can be simpliï¬ed to

t ), Q(pr

t )) â‰¤ L|f (pâˆ—

t ) âˆ’ f (pr

t )| (see

(cid:12)E[C](cid:12)
(cid:12)

(cid:12) â‰¤ LBÎ¾E

(cid:34) T

(cid:88)

Ï„ =T (cid:93)

|âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´
Ï„ âˆ’ 1

â†’Ï„ |

(cid:35)

+ E

Combining Eq. (16) with Eqs. (17,18,20), we have

(cid:104)
(T (cid:93) âˆ’ 1)Î·r(cid:12)

(cid:12) Â¯Î¾Î´

â†’T (cid:93)âˆ’1

(cid:105)

(cid:12)
(cid:12)

.

(20)

E(cid:2)r(cid:48)(xT )A âˆ’ r(cid:48)(cid:48)(xT )B + r(cid:48)(cid:48)(xT )C + D(cid:3)
(cid:20)
â‰¤ E

r(cid:48)(xT )Î· âˆ’ r(cid:48)(cid:48)(xT )( Â¯Î¾r

(T (cid:93) âˆ’ 1)

(cid:18)

â†’T (cid:93)âˆ’1 + Î·r)Î· âˆ’ r(cid:48)(cid:48)(xT )Î·r(cid:12)
(cid:12) Â¯Î¾Î´

â†’T (cid:93)âˆ’1

(cid:12)
(cid:12) +

M 2
8m

(cid:19)

| Â¯Î¾r
â†’T (cid:93)âˆ’1|4

T
(cid:88)

(cid:18)(cid:18)

+

|r(cid:48)(cid:48)(xT )|

LBÎ¾
Ï„ âˆ’ 1

+

M
2

(cid:19)

| Â¯Î¾r

â†’Ï„ |2

|âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ | âˆ’

m
2

|âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ |2

(cid:19) (cid:21)

Ï„ =T (cid:93)
(cid:20)

(T (cid:93) âˆ’ 1)

â‰¤ E

(cid:18)

T
(cid:88)

+

Ï„ =T (cid:93)
(cid:20)

(cid:18)

r(cid:48)(xT )Î· âˆ’ r(cid:48)(cid:48)(xT )( Â¯Î¾r

â†’T (cid:93)âˆ’1 + Î·r)Î· âˆ’ r(cid:48)(cid:48)(xT )Î·r(cid:12)
(cid:12) Â¯Î¾Î´

â†’T (cid:93)âˆ’1

(cid:18)

1
2m

|r(cid:48)(cid:48)(xT )|

LBÎ¾
Ï„ âˆ’ 1

+

M
2

| Â¯Î¾r

â†’Ï„ |2

(cid:19)2 (cid:21)

â‰¤ E

(T (cid:93) âˆ’ 1)

r(cid:48)(xT )Î· âˆ’ r(cid:48)(cid:48)(xT )( Â¯Î¾r

â†’T (cid:93)âˆ’1 + Î·r)Î· âˆ’ r(cid:48)(cid:48)(xT )Î·r(cid:12)
(cid:12) Â¯Î¾Î´

â†’T (cid:93)âˆ’1

+

T
(cid:88)

Ï„ =T (cid:93)

1
m

(cid:18)
(cid:0)|r(cid:48)(cid:48)(xT )|

LBÎ¾
Ï„ âˆ’ 1

(cid:1)2 +

M 2
4

(cid:19) (cid:21)
.

| Â¯Î¾r

â†’Ï„ |4

(cid:12)
(cid:12) +

M 2
8m

| Â¯Î¾r
â†’T (cid:93)âˆ’1|4

(cid:12)
(cid:12) +

M 2
8m

| Â¯Î¾r
â†’T (cid:93)âˆ’1|4

(cid:19)

(cid:19)

(21)

In the second inequality above, we use the fact that âˆ’ m

2 u2 + bu = âˆ’ m

2 (u âˆ’ b

m )2 + b2

2m â‰¤ b2

2m for

15

any b, u âˆˆ R and m > 0. In the third inequality, we use the fact that (a + b)2 â‰¤ 2(a2 + b2) for any
a, b âˆˆ R.

â†’T (cid:93)âˆ’1)+, so r(cid:48)(xT ) âˆ’ r(cid:48)(cid:48)(xT )( Â¯Î¾r

Recall that Î·r = (r(cid:48)(xT )/r(cid:48)(cid:48)(xT ) âˆ’ Â¯Î¾r
r(cid:48)(cid:48)(xT )( Â¯Î¾r
â†’T (cid:93)âˆ’1 + Î·r)]Î·r = 0. Recall that Î·âˆ— = âˆ’(xâˆ—
Î·r)]Î·âˆ— â‰¤ 0. In sum, as Î· = Î·âˆ— + Î·r, we have [r(cid:48)(xT ) âˆ’ r(cid:48)(cid:48)(xT )( Â¯Î¾r

T (cid:93)âˆ’1 âˆ’ xu)+ â‰¤ 0, so [r(cid:48)(xT ) âˆ’ r(cid:48)(cid:48)(xT )( Â¯Î¾r
â†’T (cid:93)âˆ’1 + Î·r)]Î· â‰¤ 0.
â†’T (cid:93)âˆ’1| = | Â¯Î¾r
Furthermore, by the deï¬nition of the stopping time T (cid:93), we have | Â¯Î¾r
r(cid:48)(xT )/|r(cid:48)(cid:48)(xT )| + BÎ¾/(T (cid:93) âˆ’ 1), so Î·r â‰¤ BÎ¾/(T (cid:93) âˆ’ 1) a.s. By Eq. (21), we get

â†’T (cid:93)âˆ’1 + Î·r) â‰¥ 0 and [r(cid:48)(xT ) âˆ’
â†’T (cid:93)âˆ’1 +

T (cid:93)/(T (cid:93) âˆ’ 1)| â‰¤

â†’T (cid:93) + Î¾r

E(cid:2)r(cid:48)(xT )A âˆ’ r(cid:48)(cid:48)(xT )B + r(cid:48)(cid:48)(xT )C + D(cid:3)
(cid:20)
â‰¤E

(cid:12)
(cid:12) + (T (cid:93) âˆ’ 1)

|r(cid:48)(cid:48)(xT )|BÎ¾

(cid:12)
(cid:12) Â¯Î¾Î´

â†’T (cid:93)âˆ’1

M 2
8m

| Â¯Î¾r
â†’T (cid:93)âˆ’1|4 +

T
(cid:88)

Ï„ =T (cid:93)

(cid:18)

1
m

(cid:0)|r(cid:48)(cid:48)(xT )|

LBÎ¾
Ï„ âˆ’ 1

(cid:1)2 +

M 2
4

(cid:19) (cid:21)
.

| Â¯Î¾r

â†’Ï„ |4

To complete the proof, we upper bound each term in Eq. (22). First it is easy to verify that

T
(cid:88)

Ï„ =T (cid:93)

(cid:18) |r(cid:48)(cid:48)(xT )|LBÎ¾
Ï„ âˆ’ 1

(cid:19)2

â‰¤ (|r(cid:48)(cid:48)(xT )|LBÎ¾)2

T âˆ’1
(cid:88)

j=1

1
j2 â‰¤ 2(|r(cid:48)(cid:48)(xT )|LBÎ¾)2 a.s.

(22)

(23)

â†’Ï„ |4. Recall the deï¬nition that Â¯Î¾r
â†’tâˆ’1. Then {zt} is a martingale adapted to the ï¬ltration {Ft}T

We next focus on the terms involving | Â¯Î¾r
Let zt := Â¯Î¾r
which implies that {|zt|4} is a submartingale. Let St = (cid:80)T
also a submartingale. Since T (cid:93) is stopping time, we have

â†’t = Î¾r
T âˆ’1 + Â· Â· Â· +
.
t=1 by Assumption (A4),
Ï„ =t(t âˆ’ 1)(|zÏ„ |4 âˆ’ |zÏ„ +1|4), then {St} is

Î¾r
t+1
t

T

(cid:34)

E

(T (cid:93) âˆ’ 1)| Â¯Î¾r

â†’T (cid:93)âˆ’1|4 +

T
(cid:88)

Ï„ =T (cid:93)

(cid:35)

| Â¯Î¾r

â†’Ï„ |4

= E[ST (cid:93)] â‰¤ E[S1] = E

(cid:34) T

(cid:88)

Ï„ =2

(cid:35)

|zÏ„ |4

= E

(cid:35)

| Â¯Î¾r

â†’Ï„ |4

.

(cid:34) T

(cid:88)

Ï„ =1

It is easy to verify that

E[| Â¯Î¾r

â†’t|4] =

(cid:88)

j,k>t

Subsequently,

j |2|Î¾r

E[|Î¾r
k|2]
(j âˆ’ 1)2(k âˆ’ 1)2 â‰¤ B4

Î¾

ï£«

(cid:88)

ï£­

j>t

1
(j âˆ’ 1)2

ï£¶

2

ï£¸

â‰¤

4B4
Î¾
t2 .

(cid:34)

E

M 2
8m

(T (cid:93) âˆ’ 1)| Â¯Î¾r

â†’T (cid:93)âˆ’1|4 +

(cid:35)

(cid:12)
(cid:12) Â¯Î¾r

â†’Ï„

4

(cid:12)
(cid:12)

M 2
4m

T
(cid:88)

Ï„ =T (cid:93)

â‰¤

M 2
4m

(cid:88)T

Ï„ =1

4B4
Î¾
Ï„ 2 â‰¤

M 2B4
Î¾
2m

.

(24)

To analyze the term |Î¾

Î´
â†’T (cid:93)âˆ’1|, let Î¶t := Â¯Î¾Î´

tâˆ’1. As before, {Î¶t} is martingale and thus {|Î¶t|} is a

16

submartingale. Since Î¾

Î´

â†’Ï„ = Î¾Î´

T

T âˆ’1 + Â· Â· Â· +

Î¾Î´
Ï„ +1
Ï„

and |Î¾Î´

Ï„ | = |Î¾r

Ï„ âˆ’ Î¾âˆ—

Ï„ | â‰¤ 2BÎ¾ a.s., we have

E(cid:2)(cid:12)

(cid:12) Â¯Î¾Î´

â†’T (cid:93)âˆ’1

(cid:3) = E[|Î¶T (cid:93)|] â‰¤ [|Î¶2|] = E(cid:2)(cid:12)
(cid:12)
(cid:12)

(cid:12) Â¯Î¾Î´

â†’1

(cid:12)
(cid:3) â‰¤
(cid:12)

(cid:113)

E(cid:2)(cid:12)

(cid:12) Â¯Î¾Î´

â†’1

(cid:12)
2(cid:3) â‰¤ 2BÎ¾
(cid:12)

(cid:118)
(cid:117)
(cid:117)
(cid:116)

T âˆ’1
(cid:88)

j=1

1
j2 â‰¤ 3BÎ¾.

(25)

Combining Eqs. (16,22,23,24,25) we have

T (xT ) âˆ’ Ï†r
Ï†âˆ—

T (xT ) â‰¤

M 2B4
Î¾
2m

+

2(|r(cid:48)(cid:48)(xT )|LBÎ¾)2
m

+ 3|r(cid:48)(cid:48)(xT )|B2

Î¾ + r(xu)E[T (cid:93) âˆ’ 1] = O(1),

(26)

where the last equality holds by applying Lemma 1. This completes the proof of Theorem 3.

4.3 Proof of Theorem 4

Ï„ = xT âˆ’ Â¯Î¾r

â†’Ï„ for all Ï„ â‰¥ T (cid:93) âˆ’ 1, where T (cid:93) is the stopping time deï¬ned in Eq. (7).
Recall that xr
Because this proof only concerns the re-solving policy, for convenience we will drop the superscript
r and denote Î¾r

â†’Ï„ by Î¾Ï„ , Â¯Î¾â†’Ï„ .

Ï„ , Â¯Î¾r

Invoking Lemma 2, we have

T r(xT ) âˆ’ Ï†r

T (xT ) â‰¥ E

= E

(cid:104)(cid:80)T

(cid:104)(cid:80)T

Ï„ =T (cid:93)(r(xT ) âˆ’ r(xr

T (cid:93)âˆ’1, xu})
Ï„ )) + (T (cid:93) âˆ’ 1)(r(xT ) âˆ’ r(min{xr
(cid:105)

Ï„ =T (cid:93)(r(xT ) âˆ’ r(xr

Ï„ )) + (T (cid:93) âˆ’ 1)(r(xT ) âˆ’ r(xr

T (cid:93)âˆ’1)

(cid:105)

(cid:104)

+ E

(T (cid:93) âˆ’ 1)(r(xr

T (cid:93)âˆ’1) âˆ’ r(min{xr

T (cid:93)âˆ’1, xu})

(cid:105)

.

(27)

By the smoothness of r(d) (Assumption (A3)) and the fact that xr
term in Eq. (27) is bounded by

T (cid:93) â‰¤ xu (see Eq. (7)), the second

(cid:104)
(T (cid:93) âˆ’ 1)(r(xr

E

T (cid:93)âˆ’1) âˆ’ r(min{xr

(cid:105)
T (cid:93)âˆ’1, xu})

â‰¥ âˆ’ CE

â‰¥ âˆ’ CE

= âˆ’ CE

(cid:104)
(T (cid:93) âˆ’ 1)(xr
(cid:104)
(T (cid:93) âˆ’ 1)|xr
(cid:104)
(T (cid:93) âˆ’ 1)

T (cid:93)âˆ’1 âˆ’ xu)+(cid:105)
(cid:105)
T (cid:93)âˆ’1 âˆ’ xr
T (cid:93)|
(cid:12)
(cid:105)
Î¾T (cid:93)
(cid:12)
(cid:12)
T (cid:93)âˆ’1

(cid:12)
(cid:12)
(cid:12)

â‰¥ âˆ’CBÎ¾,

where the last inequality holds since |Î¾Ï„ | â‰¤ BÎ¾ a.s for all Ï„ .

In the rest of the proof, we will bound the ï¬rst term in Eq. (27).
r(xr

Ï„ ) âˆ’ r(xT ) at xT and using the strict concavity of r(d) (Assumption (A2)), we have

Expanding the diï¬€erence

r(xT ) âˆ’ r(xr

Ï„ ) = r(xT ) âˆ’ r(xT âˆ’ Â¯Î¾â†’Ï„ ) â‰¥ r(cid:48)(xT ) Â¯Î¾â†’Ï„ +

m
2

| Â¯Î¾â†’Ï„ |2,

âˆ€Ï„ â‰¥ T (cid:93) âˆ’ 1.

17

Therefore,

(cid:104)(cid:80)T

E

Ï„ =T (cid:93)(r(xT ) âˆ’ r(xr

Ï„ )) + (T (cid:93) âˆ’ 1)(r(xT ) âˆ’ r(xr

â‰¥ r(cid:48)(xT )E

(cid:104)(cid:80)T

Ï„ =T (cid:93) Â¯Î¾â†’Ï„ + (T (cid:93) âˆ’ 1) Â¯Î¾â†’T (cid:93)âˆ’1

(cid:105)

+

E

m
2

(cid:105)
T (cid:93)âˆ’1))
(cid:104)(cid:80)T
Ï„ =T (cid:93) | Â¯Î¾â†’Ï„ |2 + (T (cid:93) âˆ’ 1)| Â¯Î¾â†’T (cid:93)âˆ’1|2(cid:105)

For the ï¬rst term in Eq. (28), because Â¯Î¾Ï„ = (cid:80)T

t=Ï„ +1 Î¾t/(t âˆ’ 1), it holds that

E[(cid:80)T

Ï„ =T (cid:93) Â¯Î¾â†’Ï„ + (T (cid:93) âˆ’ 1) Â¯Î¾â†’T (cid:93)âˆ’1] = E[(cid:80)T

t=T (cid:93) Î¾t] = 0

(28)

(29)

by Doobâ€™s optional stopping theorem (recall that T (cid:93) is a stopping time). For the second term in
Eq. (28), using Â¯Î¾Ï„ = Î¾T

, we have

T âˆ’1 + Â· Â· Â· + Î¾Ï„ +1

Ï„

(cid:34) T

(cid:88)

E

(cid:35)

| Â¯Î¾â†’Ï„ |2

âˆ’ E

| Â¯Î¾â†’Ï„ |2 + (T (cid:93) âˆ’ 1)| Â¯Î¾â†’T (cid:93)âˆ’1|2

= E

(cid:35)

(cid:34) T

(cid:88)

Ï„ =T (cid:93)

Ï„ =1
ï£®

ï£°

T (cid:93)âˆ’2
(cid:88)

= 2E

= 2E

( Â¯Î¾â†’Ï„ âˆ’ Â¯Î¾â†’T (cid:93)âˆ’1) Â¯Î¾â†’T (cid:93)âˆ’1

ï£¹
ï£» + E

ï£®

ï£°

T (cid:93)âˆ’2
(cid:88)

( Â¯Î¾â†’Ï„ âˆ’ Â¯Î¾â†’T (cid:93)âˆ’1)2

ï£»

Ï„ =1

ï£®
ï£° Â¯Î¾T (cid:93)âˆ’1

T (cid:93)âˆ’2
(cid:88)

T (cid:93)âˆ’1
(cid:88)

Ï„ =1

j=Ï„ +1

ï£¹
ï£» + E

Î¾j
j âˆ’ 1

Ï„ =1
ï£«

T (cid:93)âˆ’1
(cid:88)

T (cid:93)âˆ’2
(cid:88)

ï£®

ï£°

ï£­

Ï„ =1

j=Ï„ +1

ï£¶

2ï£¹

ï£¸

ï£» .

Î¾j
j âˆ’ 1

T (cid:93)âˆ’2
(cid:88)

ï£®

ï£°

Ï„ =1
ï£¹

(cid:0) Â¯Î¾2

â†’Ï„ âˆ’ Â¯Î¾2

â†’T (cid:93)âˆ’1

ï£¹

ï£»

(cid:1)

(30)

Because T (cid:93) is a stopping time and {Î¾Ï„ } is a martingale diï¬€erence sequence, we have E[Î¾j | j <
T (cid:93)] = 0 and E[Î¾jÎ¾k | j < k < T (cid:93)] = 0. So we have

Eq.(30) = 0+E

ï£®

ï£°

T (cid:93)âˆ’2
(cid:88)

T (cid:93)âˆ’1
(cid:88)

(cid:18) Î¾j

(cid:19)2

Ï„ =1

j=Ï„ +1

j âˆ’ 1

ï£¹
ï£» = E

ï£®

ï£°

T (cid:93)âˆ’1
(cid:88)

(j âˆ’ 1)

(cid:18) Î¾j

(cid:19)2

j âˆ’ 1

ï£¹
ï£» â‰¤ E

T (cid:93)âˆ’1
(cid:88)

ï£®

ï£°

ï£¹
ï£» â‰¤ B2
Î¾

Î¾2
jâˆ’1

E[T (cid:93)âˆ’2].

j=2

Moreover, E[(cid:80)T
equation and Eq. (30), we have

â†’Ï„ ] = E[(cid:80)T
Â¯Î¾2

Ï„ =1

j=2

1

jâˆ’1 â‰¥ Ïƒ2 (cid:82) T

1 udu = Ïƒ2 ln T , so by the above

j=2

Î¾2
jâˆ’1 ] â‰¥ Ïƒ2 (cid:80)T
j

j=2

(cid:35)

| Â¯Î¾â†’Ï„ |2 + (T (cid:93) âˆ’ 1)| Â¯Î¾â†’T (cid:93)âˆ’1|2

â‰¥ Ïƒ2 ln T âˆ’ B2
Î¾

E[T (cid:93) âˆ’ 2] = Ïƒ2 ln T âˆ’ O(1),

(31)

(cid:34) T

(cid:88)

E

Ï„ =T (cid:93)

where the last equality holds by Lemma 1.

Combining Eqs. (27,28,29,31), we get T r(xT )âˆ’Ï†r
is complete.

T (xT ) â‰¥ mÏƒ2

2

ln T âˆ’O(1) and the proof of Theorem 4

18

5 Numerical Results

We corroborate the theoretical ï¬ndings in this paper with a few simple numerical experiments.

In the simulation we assume a linear demand curve with Bernoulli demand distribution: Pr[dt =
1|pt] = Î± âˆ’ Î²pt, Pr[dt = 0|pt] = 1 âˆ’ Pr[dt = 1|pt] with p âˆˆ [0, 1], Î± = 3/4 and Î² = 1/2. The
(normalized) initial inventory level is xT = 5/16, meaning that for problem instances with T time
periods the initial inventory level is xT T = 5T /16. It is easy to verify that the optimal demand
rate xu without inventory constraints is xu = 3/8 > xT , and the ï¬‚uid approximation suggests a
T r(xT ) = (19/32)T = .59375T expected revenue. We select the Bernoulli demand distribution
because the states of inventory levels are discrete and therefore the optimal dynamic programming

pricing policy can be exactly obtained.

Table 2: Regret for the ï¬‚uid model, the optimal static policy Ï€s and the re-solving heuristics Ï€r
compared against the value of the optimal DP pricing policy.
log2 T
Fluid Model
Static policy Ï€s
Resolving heuristics Ï€r

13
-2.78
11.81
0.24

14
-3.08
17.55
0.24

10
-1.91
3.27
0.23

11
-2.19
5.13
0.23

6
-0.90
0.38
0.11

7
-1.13
0.70
0.15

12
-2.48
7.84
0.24

8
-1.37
1.22
0.18

9
-1.63
2.03
0.21

15
-3.37
25.84
0.25

In Table 2 we report the regret of the ï¬‚uid approximation, the static policy Ï€s : pt â‰¡ f âˆ’1(xT ) = 7/8
and the re-solving heuristics Ï€r. All regret is deï¬ned with respect to the value (expected reward)
of the optimal DP pricing policy, and the regret for the ï¬‚uid approximation benchmark is negative
since the ï¬‚uid model always upper bounds the value of any policy. Both the static policy Ï€s and the
re-solving heuristics Ï€r are run for each value of T ranging from T = 26 = 64 to T = 215 = 32, 768
to obtain an accurate estimation of their expected rewards. We also plot the regret in Figure 2 to

make the regret growth of each policy more intuitive.

As we can see from Table 2, the gap between the value of the optimal policy and the value of

the ï¬‚uid model grows nearly linearly as the number of time periods T grows geometrically, which

veriï¬es the â„¦(ln T ) growth rate established in Theorem 4. On the other hand, the growth of regret
of the re-solving heuristics Ï€r stagnated at T â‰¥ 210 and is nearly the same for T ranging from
210 = 1024 to 215 = 32768. This shows the asymptotic growth of regret of Ï€r is far slower than
O(ln T ) and is compatible with the O(1) regret upper bound we proved in Theorem 3.

We report additional sets of numerical results in Figure 5, in which we only report the cumulative

regret of the re-solving heuristic compared against the benchmark of the optimal DP policy.

On the left panel of Figure 5, we report the regret of the re-solving heuristic with T ranging from
24 = 16 to 220 â‰ˆ 1, 000, 000 and diï¬€erent xu âˆ’ xT gap values. More speciï¬cally, all four curves
are reported under the demand model d = .75 âˆ’ .5p, with unconstrained optimum xu = .375 and
(normalized) initial inventory levels xT âˆˆ {.3, .325, .35, .375}. Figure 5 clearly shows that the regret
of the re-solving heuristic increases as the gap between xu and xT narrows, and furthermore in the

19

Figure 2: Plots of regret of the ï¬‚uid model, the static policy Ï€s and the re-solving heuristics Ï€r
compared against the value of the optimal DP pricing policy.

boundary case (i.e., xT = xu) the regret seems to grow logarithmically in T . It is an interesting
direction of future research to formally establish the logarithmic regret for the boundary case and
explore alternative policies that attain constant regret with xT = xu.

On the right panel of Figure 5, we report the regret of the re-solving heuristic with diï¬€erent a, b

values in the demand model d = a âˆ’ bp, with a = b âˆˆ {0.3, 0.5, 0.7, 0.9}. The normalized initial

inventory level is ï¬xed at xT = 0.1. With diï¬€erent values of the slopes, the demand and revenue
models exhibit diï¬€erent strong concavity parameter values, with r(cid:48)(cid:48)(p) = âˆ’b/2 and r(cid:48)(cid:48)(d) = âˆ’1/(2b).
Unlike the gap xu âˆ’ xT , the results reported in the right panel of Figure 5 do not paint a clear
picture of the role the strong concavity parameters played in the regret. Overall, intermediate
values (b = 0.5, r(cid:48)(cid:48)(p) = âˆ’.25, r(cid:48)(cid:48)(d) = âˆ’1) seem to result in the lowest regret of the re-solving
heuristic.

6 Extension to Multiple Products

In this section, we extend our constant regret result to the case when there are n â‰¥ 2 products

with correlated demand. We follow the convention in Section 4 and count time indices backwards.
The seller starts with an initial inventory vector xT T , where xT = (xT (1), Â· Â· Â· , xT (n)) âˆˆ Rn
+ is the
normalized initial inventory vector. When there are t periods remaining, the seller posts a price
vector pt = (pt(1), Â· Â· Â· , pt(n)) âˆˆ P âŠ‚ Rn
+ and observes a realized demand vector dt = f (pt) + Î¾t,
where f : P â†’ D is the demand curve and Î¾t âˆ¼ Q(pt) is a centered noise vector. The realized
revenue at period t is rt = (cid:104)pt, dt(cid:105), which in expectation equals to E[rt | pt] = (cid:104)pt, f (pt)(cid:105). When
the inventory level of a speciï¬c product k âˆˆ [n] dips below zero ([n] := {1, 2, Â· Â· Â· , n}), the seller is

20

46810121416log2 T-50510Regret vs. log2 TStatic LP relaxationStationary policyResolving policyFigure 3: Cumulative regret of the resolving heuristic (compared with the optimal DP value) under
diï¬€erent xu âˆ’ xT and m settings.

forced to set pt(k) = +âˆ for all remaining time periods, resulting in dt(k) = 0 almost surely.

Throughout this section, we use (cid:107)x(cid:107) to denote the Euclidean norm of any vector x, and (cid:107)A(cid:107)2 to
denote the spectral norm of any matrix A. We extend the assumptions (A1)â€“(A5) to the multiple-

product setting as follows:

B1. (Invertibility) The demand rate function f : P â†’ D is a bijection, where P âŠ‚ Rn

+, D âŠ‚ Rn
+.
Let f âˆ’1 : D â†’ P denote its inverse function. Assume D is convex, compact, has nonempty
interior, and satisï¬es 0 âˆˆ D.

B2. (Strict Concavity) The expected revenue r(d) = (cid:104)d, f âˆ’1(d)(cid:105) as a function of the demand
rate vector d is strictly concave. That is, there exists a positive constant m(cid:48) > 0 such that
âˆ‡2r(d) (cid:22) âˆ’m(cid:48)In for all d âˆˆ D. The maximizer of r(d) is in the interior of the domain D.

B3. (Smoothness) r(d) is three times continuously diï¬€erentiable in the interior of D.

B4. (Martingale Diï¬€erence Sequence) Conditional on any price vector pt âˆˆ P (âˆ€t = 1, . . . , T ),
the demand noise Î¾t is independent of {Î¾T , . . . , Î¾t+1} and satisï¬es E[Î¾t | Ft+1] = E[Î¾t | pt] =
0 a.s. The conditional distribution of Î¾t given pt is denoted by Î¾t âˆ¼ Q(pt).
In addition,
(cid:107)Î¾t(cid:107) â‰¤ BÎ¾ a.s. for some constant BÎ¾ < âˆ.

B5. (Wasserstein Distance) There exists a constant L > 0 such that for any p, p(cid:48) âˆˆ P, it
E
Î¾,Î¾(cid:48)âˆ¼Î[(cid:107)Î¾ âˆ’ Î¾(cid:48)(cid:107)2]
holds that W2(Q(p), Q(p(cid:48))) â‰¤ L(cid:107)f (p) âˆ’ f (p(cid:48))(cid:107), where W2(Q, Q(cid:48)) := inf Î
is the L2-Wasserstein distance between Q, Q(cid:48), with Î being an arbitrary joint distribution
with marginal distributions being Q and Q(cid:48), respectively.

(cid:113)

Recall that xT âˆˆ Rn

+ is the normalized inventory level vector at the beginning of the T time periods

21

5101520log2 T00.10.20.30.40.50.60.7Regret vs. log2 T with different xu-xTxu-xT=0xu-xT=.025xu-xT=.05xu-xT=.0755101520log2 T0.010.020.030.040.050.060.07Regret vs. log2 T with different m valuesa=b=.9a=b=.7a=b=.5a=b=.3(i.e., the total inventory is xT T ). The ï¬‚uid approximation model is formulated as

At the beginning of each period t = T, Â· Â· Â· , 1, the re-solving heuristic solves

max
xâˆˆD

{r(x), s.t. 0 â‰¤ x â‰¤ xT } .

max
xâˆˆD

{r(x), s.t. 0 â‰¤ x â‰¤ xt},

(32)

where xt is the normalized inventory level at the beginning of period t. Since 0 âˆˆ D by Assumption
(B1), Eq. (32) always has feasible solutions. Let the optimal solution to (32) be xc
t (the superscript
c stands for â€œconstrainedâ€). The re-solving policy sets the price vector to pt = f âˆ’1(xc
t ) for period
t.

In (32), for any given xt âˆˆ Rn
the inventory constraints are active at the point xc
inventory-unconstrained product set U, deï¬ned as

+, the n products are partitioned into two disjoint sets based whether
t . The inventory-constrained product I and the

I := {k âˆˆ [n] : xc

t (k) = xt(k)},

U := {k âˆˆ [n] : xc

t (k) < xt(k)}.

(33)

As a special case, in the single-product setting (n = 1), we have I = âˆ…, U = {1} if xt > xu =
arg maxxâˆˆ[d,d] r(x), and I = {1}, U = âˆ… if xt â‰¤ xu.

From the deï¬nitions in Eqs. (32, 33), it is clear that the sets I and U are determined by the

inventory vector xt, which serves as the right-hand side of the ï¬‚uid problem. We may thus write
I(xt), U(xt) to emphasize such dependency. This leads to a partition of Rn
+ into 2n sub-regions
{SI, âˆ€I âŠ‚ [n]}, where

SI = {x âˆˆ Rn

+ : I(x) = I}.

(34)

We specify an additional assumption on the initial inventory level xT for the multi-product setting:

C1. The initial inventory level xT is in the interior of SI for some I âŠ‚ [n]. That is, given xT âˆˆ SI,

there exists a neighborhood BÎ´0(xT ) = {x(cid:48) âˆˆ Rn

+ : (cid:107)x(cid:48) âˆ’ x(cid:107) â‰¤ Î´0} such that BÎ´0(xT ) âŠ‚ SI.

Intuitively, Assumption (C1) asserts that when the constrained inventory level xt ï¬‚uctuates in
a close neighborhood of xT , the set of active constraints in the ï¬‚uid problem Eq. (32) remains
unchanged. In the single-product case (n = 1), Assumption (C1) reduces to the condition xT (cid:54)= xu.

We now characterize the expected value of the optimal DP policy Ï€âˆ— and the re-solving heuristic Ï€r
Ï„ ) be the expected revenue of the optimal policy Ï€âˆ—
for the multi-product pricing problem. Let Ï†âˆ—
when there are Ï„ time periods left with the inventory level being xâˆ—
+. We have the following
Bellman equation:

Ï„ âˆˆ Rn

Ï„ (xâˆ—

Ï„ (xâˆ—
Ï†âˆ—

Ï„ ) = max
âˆ†:xâˆ—

Ï„ +âˆ†âˆˆD

r(xâˆ—

Ï„ + âˆ†) + EÎ¾Ï„ âˆ¼Q(f âˆ’1(xâˆ—

Ï„ +âˆ†))

(cid:20)
Ï†âˆ—
Ï„ âˆ’1

(cid:18)

xâˆ—

Ï„ âˆ’

(cid:19)(cid:21)

âˆ† + Î¾Ï„
Ï„ âˆ’ 1

âˆ€Ï„ = T, Â· Â· Â· , 1. (35)

22

We denote the maximizer of Eq. (35) by âˆ†Ï„ . The DP policy selects the price vector pÏ„ = f âˆ’1(xâˆ—
âˆ†Ï„ ). Let Î¾âˆ—

Ï„ be the realized demand noise under this price.

Ï„ +

The re-solving heuristic Ï€r and its expected revenue Ï†r
recursive equation

Ï„ (xr

Ï„ ), on the other hand, satisï¬es the following

Ï„ (xr
Ï†r

Ï„ ) = r(xc

Ï„ ) + EÎ¾Ï„ âˆ¼Q(f âˆ’1(xc
Ï„ ))

(cid:18)

(cid:20)

Ï†r
Ï„ âˆ’1

xr

Ï„ âˆ’

Ï„ âˆ’ xr
xc

Ï„ + Î¾Ï„

(cid:19)(cid:21)

Ï„ âˆ’ 1

âˆ€Ï„ = T, Â· Â· Â· , 1,

(36)

Ï„ = arg maxxâˆˆD{r(x), s.t. 0 â‰¤ x â‰¤ xr

where xc
Ï„ being
the right-hand side. The following theorem extends the constant regret result in Sec. 3 to the

Ï„ } is the solution to the ï¬‚uid model with xr

multi-product setting.

Theorem 5. Given a demand function f and an initial inventory level xT âˆˆ SI satisfying Assump-
tions (B1)â€“(B5) and (C1), for all T â‰¥ 2, we have

T (xT ) â‰¥ Ï†âˆ—
Ï†r

T (xT ) âˆ’ O(1).

In the rest of this section we prove Theorem 5.

6.1 Partial Optimization on a Subset of Products

For any vector x âˆˆ Rn and subset S âŠ‚ [n], denote x(S) = (x(k) : k âˆˆ S) as the |S|-dimensional
sub-vector of x whose coordinates are restricted to the subset S. The following observation follows

immediately from the deï¬nition of SI and the proof is omitted.

Lemma 3. Suppose x âˆˆ SI for some I âŠ‚ [n]. Let U = [n] \ I. For any inventory vector x(cid:48) âˆˆ Rn
+
with x(cid:48)(I) = x(I) and x(U)(cid:48) â‰¥ x(U), we have x(cid:48) âˆˆ SI.

Given a ï¬xed xT âˆˆ SI with I âŠ‚ [n], let projI(D) be the projection of the domain D onto the
dimensions in I. For every z âˆˆ projI(D), deï¬ne R(z) as the value of partial optimization of r(x)
by changing the variables in U = [n] \ I while ï¬xing the variables in I:

R(z) := max
xâˆˆD

{r(x), s.t. x(I) = z}.

(37)

The motivation for Eq. (37) is that in the region SI, the solution of the re-solving heuristic is only
aï¬€ected by the inventory levels of the constrained products in I. The following lemma establishes

some useful properties of the function R.

Lemma 4. The function R has the following properties:

1. For any xt âˆˆ SI, let zt = x(I). It holds that R(zt) = maxxâˆˆD{r(x), s.t. 0 â‰¤ x â‰¤ xt} = r(xc

t ).

2. R(z) is strictly concave and three times continuously diï¬€erentiable for all z âˆˆ projI(D) and

23

satisï¬es âˆ‡2R(z) (cid:22) âˆ’mI, (cid:107)âˆ‡3R(z)(cid:107)op â‰¤ M with some constants m > 0, M > 0.

3. Given z, z(cid:48) âˆˆ projI(D), let x, x(cid:48) be the optimal solutions in (37). Then (cid:107)x âˆ’ x(cid:48)(cid:107) â‰¤ Lz(cid:107)z âˆ’ z(cid:48)(cid:107)

for some constant Lz > 0 uniformly on projI(D).

Proof. Proof of Lemma 4. The ï¬rst property follows immediately from the deï¬nition of R(z) in

Eq. (37) and the deï¬nition of SI in Eq. (34).

To prove the second property, consider the Lagrangian L(x, Î», z) := r(x) + Î»(cid:62)(z âˆ’ x(I)) of (37).
Since r(x) is concave, D is a convex set with nonempty interior, and the optimization problem (37)
satisï¬es Slaterâ€™s condition, L has a saddle point (xâˆ—(z), Î»âˆ—(z)) satisfying

R(z) = max
xâˆˆD

min
Î»âˆˆR|I|

L(x, Î», z) = min
Î»âˆˆR|I|

max
xâˆˆD

L(x, Î», z) = L(xâˆ—(z), Î»âˆ—(z), z).

Note that the saddle point (xâˆ—(z), Î»âˆ—(z)) is unique because r(x) is strictly convex. By the envelop
theorem for saddle point problems (Milgrom and Segal 2002, Theorem 5), when the saddle point is
unique for every z, the function R(z) is diï¬€erentiable in the interior of projI(D) with âˆ‡R(z) = Î»âˆ—(z).
By the KKT conditions, âˆ‡Ir(xâˆ—(z)) = Î»âˆ—(z), so

âˆ‡R(z) = âˆ‡Ir(xâˆ—(z)).

(38)

(Here âˆ‡Sr(x) denotes the restriction of âˆ‡r(x) to a subset S âˆˆ [n].)

Denote the Hessian of r(x) at the point xâˆ—(z) by

âˆ‡2r(xâˆ—(z)) = H =

(cid:34)

(cid:35)

HIÃ—I HIÃ—U
HUÃ—I HUÃ—U .

Let xâˆ—(z) = (z, uâˆ—(z)). By the KKT conditions again, we have âˆ‡U r(z, uâˆ—(z)) = 0. By the
implicit function theorem, uâˆ—(z) is continuously diï¬€erentiable and the Jacobian matrix of uâˆ—(z) is
Ju(z) = âˆ’Hâˆ’1
UÃ—U HUÃ—I. Note that HUÃ—U is invertible because H is negative deï¬nite by Assumption
(B2). Using Eq. (38) and the chain rule, we have

âˆ‡2R(z) = âˆ‡2

IÃ—Ir(z, uâˆ—(z)) + âˆ‡2

IÃ—U r(z, uâˆ—(z)) Â· Ju(z) = HIÃ—I âˆ’ HIÃ—U Hâˆ’1

UÃ—U HUÃ—I.

(39)

The right-hand side of Eq. (39) is the Schur complement of the block HUÃ—U in the matrix H. Since
H is negative deï¬nite by Assumption (B2), the Schur complement is also negative deï¬nite (Zhang

2005, Theorem 1.12), which implies that R(z) is strictly concave.

Next, we establish the smoothness condition of R(z). Recall that âˆ‡U r(z, uâˆ—(z)) = 0, the Jacobian
matrix Ju(z) is invertible, and âˆ‡r is twice continuously diï¬€erentiable by Assumption (B3). By the
implicit function theorem for C2 class (Krantz and Parks 2012, Theorem 3.3.1), uâˆ—(z) is also twice

24

continuously diï¬€erentiable. By Eq. (39), R(z) is three times countinuously diï¬€rentiable. Because
the domain D is compact by Assumption (B1), âˆ‡3R(z) is uniformly bounded in projI(D).

Finally, the third statement of the lemma regarding the Lipschitz continuity of xâˆ—(z) is straight-
forward, because the domain projI(D) is compact and we have shown that xâˆ—(z) = (z, uâˆ—(z)) is
continuously diï¬€erentiable in z. (cid:3)

6.2 Stopping Time with Bounded Expectation

Ï„ }T

Recall that {Î¾r
of the re-solving heuristic policy Ï€r. For any Ï„ , deï¬ne Â¯Î¾r
T âˆ’1 + Â· Â· Â· +
minkâˆˆI âˆ‚R(xT (I))/âˆ‚xT (k). Note that r0 > 0 by Assumption (C1). Deï¬ne T (cid:93) as

Ï„ =1 are the stochastic demand noise vectors at each time period on the path
. Let r0 :=

â†’Ï„ := Î¾r

Î¾r
Ï„ +1
Ï„

T

T (cid:93) := max (cid:8)Ï„ â‰¥ 1 : (cid:107) Â¯Î¾r

â†’Ï„ âˆ’1(cid:107) > min (cid:0)Î´0, r0/(cid:107)âˆ‡2R(xT (I))(cid:107)2

(cid:1)(cid:9) âˆ¨ 2,

(40)

where Î´0 > 0 is the constant parameter in Assumption (C1). Because Â¯Î¾r
â†’tâˆ’1 is measurable with
respect to Ft, the event {T (cid:93) = t} is adaptive to the ï¬ltration {Ft} and therefore T (cid:93) is a stop-
ping time. We remark that (cid:107) Â¯Î¾r
â†’Ï„ âˆ’1(cid:107) â‰¤ r0/(cid:107)âˆ‡2R(xT (I))(cid:107)2 implies the inequality âˆ‡R(xT (I)) âˆ’
âˆ‡2R(xT (I)) Â¯Î¾r

â†’Ï„ âˆ’1 â‰¥ 0. We will use this fact later in the proof of Theorem 5.

Recall that xr
lemma gives characterization of xr
to Lemma 1.

Ï„ is the normalized inventory vector when Ï„ time periods are remaining. The following
â†’Ï„ . It also gives an upper bound on E[T (cid:93)], similar

Ï„ in terms of Â¯Î¾r

Lemma 5. Under Assumptions (B1)-(B5) and (C1), the following holds for all Ï„ â‰¥ T (cid:93) âˆ’ 1:

xr
Ï„ (I) = xr
Ï„ (U) â‰¥ xr
xr

T (I) âˆ’ Â¯Î¾r
T (U) âˆ’ Â¯Î¾r

â†’Ï„ (I);

â†’Ï„ (U),

(41)

where I = I(xT ), U = U(xT ) as deï¬ned in Assumption (C1). For Ï„ â‰¥ T (cid:93), we have xr
Furthermore, the stopping time is bounded by E[T (cid:93)] = O(1).

Ï„ âˆˆ SI.

Proof. Proof of Lemma 5. We ï¬rst prove Eq. (41) by induction. The base case of Ï„ = T clearly

holds because xÏ„ = xT , which belongs to SI by Assumption (C1). Suppose Eq. (41) holds at
period Ï„ . Because Ï„ â‰¥ T (cid:93), it holds that (cid:107)Â¯Î¾r
Ï„ âˆˆ SI by Assumption (C1)
and Lemma 3. Let xc
Ï„ } be the demand rate chosen by the re-
Ï„ (I) and xc
solving heuristic at period Ï„ . Since xr
Ï„ (U).

Ï„ = arg maxxâˆˆD{r(x), s.t. x â‰¤ xr

â†’Ï„ (cid:107) â‰¤ Î´0 and therefore xr

Ï„ âˆˆ SI, we know that xc

Ï„ (U) < xr

Ï„ (I) = xr

25

Subsequently,

Ï„ âˆ’1(I) = xr
xr

Ï„ (I) âˆ’

Ï„ âˆ’1(U) = xr
xr

Ï„ (U) âˆ’

Ï„ (I) âˆ’ xr
xc

Ï„ (U) âˆ’ xr
xc

Ï„ (I)

Ï„ (I) + Î¾r
Ï„ âˆ’ 1

Ï„ (U) + Î¾r
Ï„ âˆ’ 1

Ï„ (U)

= xr

Ï„ (I) âˆ’

= xT (I) âˆ’ Â¯Î¾r

â†’Ï„ âˆ’1(I);

â‰¥ xr

Ï„ (U) âˆ’

â‰¥ xT (U) âˆ’ Â¯Î¾r

â†’Ï„ âˆ’1(U).

Î¾r
Ï„ (I)
Ï„ âˆ’ 1
Î¾r
Ï„ (U)
Ï„ âˆ’ 1

â†’Ï„ (cid:107)2} is a submartingale and
Ï„ (cid:107) â‰¤ BÎ¾ a.s. Using the identical proof by Doobâ€™s martingale inequality in Lemma 1, we have

Next, we prove the upper bound on E[T (cid:93)]. By Assumption (B4), {(cid:107) Â¯Î¾r
(cid:107)Î¾r
E[T (cid:93)] = O(1). (cid:3)

6.3 Complete Proof of Theorem 5

Given the initial inventory level xT âˆˆ SI, we ï¬rst upper bound the value function of the optimal DP
policy by considering a relaxed problem where the inventory of the products in I is x(I) but the
inventory of the products in U is unbounded. Let {xâˆ—
Ï„ =1 be the path of inventory level process for
this relaxed problem. Deï¬ne zâˆ—
Ï„ (I). By Eq. (35), the value function of this relaxed problem
is given by

Ï„ := xâˆ—

Ï„ }T

Î¦âˆ—

Ï„ (zâˆ—

Ï„ ) = R(zâˆ—

Ï„ + âˆ†Ï„ (I)) + E

(cid:20)

Î¦âˆ—

Ï„ âˆ’1

(cid:18)

zâˆ—
Ï„ âˆ’1 âˆ’

âˆ†Ï„ (I) + Î¾âˆ—
Ï„ âˆ’ 1

Ï„ (I)

(cid:19)(cid:21)

âˆ€Ï„ = T, Â· Â· Â· , 1.

Clearly, we have Ï†âˆ—

T (xT ) â‰¤ Î¦âˆ—

T (zT ).

Below, we slightly abuse the notation and denote âˆ†Ï„ (I), Î¾âˆ—
it holds that zâˆ—
By adapting Eq. (11) to the multi-product setting, we have

â†’Ï„ , where Â¯âˆ†â†’Ï„ = âˆ†T

Ï„ = zT âˆ’ Â¯âˆ†â†’Ï„ âˆ’ Â¯Î¾âˆ—

Ï„ (I), Î¾r

Ï„ (I) simply by âˆ†Ï„ , Î¾âˆ—

T âˆ’1 + Â· Â· Â· + âˆ†Ï„ +1

Ï„

and Â¯Î¾âˆ—

â†’Ï„ = Î¾âˆ—

Ï„ , Î¾r
T âˆ’1 + Â· Â· Â· +

Ï„ . Then,
Î¾âˆ—
Ï„ +1
.
Ï„

T

T (xT ) â‰¤ Î¦âˆ—
Ï†âˆ—

T (zT ) â‰¤ E

where

(cid:104)(cid:80)T

Ï„ =T (cid:93) R(zâˆ—

Ï„ + âˆ†Ï„ ) + (T (cid:93) âˆ’ 1)R(z(cid:48)

T (cid:93)âˆ’1)

(cid:105)

,

(42)

z(cid:48)
T (cid:93)âˆ’1 := arg max

zâˆˆprojI (D)

{R(z) | z â‰¤ zâˆ—

T (cid:93)âˆ’1}.

Ï„ := xr

Next, we analyze the inventory process under the re-solving heuristic (for the original problem).
â†’Ï„ for all Ï„ â‰¥ T (cid:93) âˆ’ 1. In addition, for all
Let zr
Ï„ â‰¥ T (cid:93), it holds that r(xc
Ï„ is the solution of the ï¬‚uid model
given the right-hand side xr

Ï„ (I). By Lemma 5, it holds that zr
Ï„ ) = R(zr

Ï„ ). We adapt Eq. (12) to the multi-product setting and get

Ï„ ) by Lemma 4 (recall that xc

Ï„ = zT âˆ’ Â¯Î¾r

T (xT ) â‰¥ E
Ï†r

(cid:104)(cid:80)T

(cid:105)
Ï„ =T (cid:93) r(xc
Ï„ )

= E

(cid:104)(cid:80)T

Ï„ =T (cid:93) R(zr
Ï„ )

(cid:105)

.

(43)

26

Generalizing the arguments from Eqs. (28,29) and using the second property of Lemma 4, we obtain

Ï„ + âˆ†Ï„ ) âˆ’ R(zr

(cid:105)
Ï„ ))

(cid:104)(cid:80)T

E

(cid:20) T

(cid:88)

â‰¤ E

Ï„ =T (cid:93) (R(zâˆ—
(cid:18)

(cid:10)âˆ‡R(zT ), âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ âˆ’ Î¾Î´
Ï„

(cid:11) âˆ’ (Â¯Î¾r

â†’Ï„ )(cid:62)âˆ‡2R(zT )[âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ ]

Ï„ =T (cid:93)

+ (Â¯Î¾r

â†’Ï„ )(cid:62)âˆ‡2R(zT )[Î¾Î´

Ï„ âˆ’ Â¯Î¾Î´

â†’Ï„ ] +

M
2

(cid:107)Â¯Î¾r

â†’Ï„ (cid:107)2(cid:107)âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ (cid:107) âˆ’

m
2

(cid:107)âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ (cid:107)2
2

(cid:19)(cid:21)
,

(44)

where Î¾Î´

Ï„ := Î¾r

Ï„ âˆ’ Î¾âˆ—

Ï„ and Â¯Î¾Î´

T

T âˆ’1 + Â· Â· Â· +

â†’Ï„ := Î¾Î´
T (cid:93)âˆ’1)+, Î·r = ([âˆ‡2R(zT )]âˆ’1âˆ‡R(zT ) âˆ’ Â¯Î¾r

Î¾Î´
Ï„ +1
Ï„

.

Deï¬ne Î·âˆ— = âˆ’(zâˆ—
(z)+ denotes the element-wise positive part of z. Eq. (15) can be generalized to

T (cid:93)âˆ’1 âˆ’ z(cid:48)

â†’T (cid:93)âˆ’1)+ and Î· = Î·âˆ— + Î·r, where

R(z(cid:48)

T (cid:93)âˆ’1) âˆ’ R(zr

T (cid:93)âˆ’1 âˆ’ Î·r) = R(zâˆ—

T (cid:93)âˆ’1 + Î·âˆ—) âˆ’ R(zr

T (cid:93)âˆ’1 âˆ’ Î·r)

â‰¤ (cid:104)âˆ‡R(zT ), Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

â†’T (cid:93)âˆ’1(cid:105) âˆ’ (Â¯Î¾r

â†’T (cid:93)âˆ’1 + Î·r)(cid:62)âˆ‡2R(zT )[Î· âˆ’ Â¯âˆ†â†’T (cid:93)âˆ’1 + Â¯Î¾Î´

â†’T (cid:93)âˆ’1] +

M 2
8m

(cid:107)Â¯Î¾r

â†’T (cid:93)âˆ’1(cid:107)4.

(45)

Let â—¦ denote the element-wise product. Subtracting Eq. (43) from Eq. (42) and then combining

Eq. (45) with Eq. (44), we obtain

T (xT ) âˆ’ Ï†r
Ï†âˆ—

T (xT ) â‰¤ E (cid:2)(cid:104)âˆ‡R(zT ), A(cid:105) âˆ’ âˆ‡2R(ZT ) â—¦ B + âˆ‡2R(ZT ) â—¦ C + D(cid:3) + O(E[(T (cid:93) âˆ’ 1)]), (46)

where

Ï„ ] âˆ’ (T (cid:93) âˆ’ 1)( Â¯âˆ†â†’T (cid:93)âˆ’1 âˆ’ Â¯Î¾Î´

â†’T (cid:93)âˆ’1) + (T (cid:93) âˆ’ 1)Î·,

A = (cid:80)T
B = (cid:80)T
C = (cid:80)T
D = (cid:80)T

â†’Ï„ âˆ’ Î¾Î´

Ï„ =T (cid:93)[âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´
â†’Ï„ [âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ ](cid:62) âˆ’ (T (cid:93) âˆ’ 1)Â¯Î¾r
Ï„ =T (cid:93) Â¯Î¾r
â†’Ï„ ](cid:62) âˆ’ (T (cid:93) âˆ’ 1)(Â¯Î¾r
Ï„ âˆ’ Â¯Î¾Î´
Ï„ =T (cid:93) Â¯Î¾r
â†’Ï„ [Î¾Î´
(cid:16) M
â†’Ï„ (cid:107)2(cid:107)âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´
2 (cid:107)Â¯Î¾r

Ï„ =T (cid:93)

Â¯âˆ†(cid:62)
â†’T (cid:93)âˆ’1
â†’T (cid:93)âˆ’1 + Î·r)[Â¯Î¾Î´
â†’Ï„ (cid:107) âˆ’ m

â†’T (cid:93)âˆ’1 + (T (cid:93) âˆ’ 1)(Â¯Î¾r
â†’T (cid:93)âˆ’1](cid:62),
2 (cid:107)âˆ†Ï„ âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ (cid:107)2(cid:17)

â†’T (cid:93)âˆ’1 + Î·r)Î·(cid:62),

+ (T (cid:93) âˆ’ 1) M 2

8m (cid:107)Â¯Î¾r

â†’T (cid:93)âˆ’1(cid:107)4.

Recall that in the deï¬nitions of A, B, C, D, all vectors âˆ†Ï„ , Â¯âˆ†â†’Ï„ , Î¾Î´
â†’Ï„ , Î·, Î·r are restricted
to I. A is an |I|-dimensional vector, B, C are |I| Ã— |I|-dimensional matrices and D is a scalar.

â†’Ï„ , Â¯Î¾r

Ï„ , Â¯Î¾Î´

27

Using the same calculations as in Sec. 4, A, B, C, D can be reduced to

E[A] = E[(T (cid:93) âˆ’ 1)Î·],
E[B] = E[(T (cid:93) âˆ’ 1)(Â¯Î¾r
(cid:34)

T
(cid:88)

E[C] = E

âˆ’

â†’T (cid:93)âˆ’1 + Î·r)Î·(cid:62)],
t [Î¾Î´
Î¾r
t ](cid:62)
t âˆ’ 1

(cid:35)

âˆ’ E(cid:2)(T (cid:93) âˆ’ 1)Î·r[Â¯Î¾Î´

â†’T (cid:93)âˆ’1](cid:62)(cid:3).

Generalizing Eq. (19), it holds that

t=T (cid:93)

(cid:13)
(cid:13)
(cid:13)
(cid:13)
(cid:13)

E

(cid:34)

âˆ’

T
(cid:88)

t=T (cid:93)

t [Î¾Î´
Î¾r
t ](cid:62)
t âˆ’ 1

(cid:35)(cid:13)
(cid:13)
(cid:13)
(cid:13)
(cid:13)2

â‰¤ BÎ¾E

â‰¤ BÎ¾E

â‰¤ BÎ¾E

(cid:34) T

(cid:88)

t=2
(cid:34) T

(cid:88)

t=2
(cid:34) T

(cid:88)

t=2

1{T (cid:93) â‰¤ t}

(cid:112)E[(cid:107)Î¾r

t âˆ’ Î¾âˆ—
t âˆ’ 1

t (cid:107)2 | Ft+1]

(cid:35)

1{T (cid:93) â‰¤ t}

L(cid:107)xâˆ—

t + âˆ†t âˆ’ xr
t (cid:107)
t âˆ’ 1

(cid:35)

1{T (cid:93) â‰¤ t}

L(cid:48)(cid:107)zâˆ—

t + âˆ†t(I) âˆ’ zr
t (cid:107)
t âˆ’ 1

(cid:35)

,

(47)

(48)

(49)

(50)

where the second inequality uses Assumption (B5) and the third inequality uses the third property
in Lemma 4 with L(cid:48) = LzL. As a result, (cid:107)E[C](cid:107)2 can be upper bounded as

(cid:107)E[C](cid:107)2 â‰¤ L(cid:48)BÎ¾E

(cid:34) T

(cid:88)

Ï„ =T (cid:93)

(cid:107)âˆ† âˆ’ Â¯âˆ†â†’Ï„ + Â¯Î¾Î´

â†’Ï„ (cid:107)

(cid:35)

Ï„ âˆ’ 1

+ E

(cid:104)
(T (cid:93) âˆ’ 1)(cid:107)Î·r(cid:107)(cid:107)Â¯Î¾Î´

â†’T (cid:93)âˆ’1(cid:107)

(cid:105)

.

(51)

Because âˆ‡R(xT (I))âˆ’âˆ‡2R(xT (I)) Â¯Î¾r
â†’T (cid:93) â‰¥ 0 by the deï¬nition of T (cid:93), we have (cid:107)Î·r(cid:107) â‰¤ BÎ¾/(T (cid:93)âˆ’1) a.s.
Combining Eq. (46) with Eqs. (47,48,51) and using the same derivation that leads to Eq. (22), we

have

(cid:20)
E (cid:2)(cid:104)âˆ‡R(zT ), A(cid:105) âˆ’ âˆ‡2R(ZT ) â—¦ B + âˆ‡2R(ZT ) â—¦ C + D(cid:3) â‰¤ E

BÎ¾(cid:107)âˆ‡2R(zT )(cid:107)2(cid:107)Â¯Î¾Î´

â†’T (cid:93)âˆ’1(cid:107)

+ (T (cid:93) âˆ’ 1)

M 2
8m

(cid:107)Â¯Î¾r

â†’T (cid:93)âˆ’1(cid:107)4 +

T
(cid:88)

Ï„ =T (cid:93)

1
m

(cid:18)
(cid:0)(cid:107)âˆ‡2R(zT )(cid:107)2

L(cid:48)BÎ¾
Ï„ âˆ’ 1

(cid:1)2 +

M 2
4

(cid:107)Â¯Î¾r

â†’Ï„ (cid:107)4

(cid:19) (cid:21)
.

(52)

To complete the proof, we upper bound each term in Eq. (52). First it is easy to verify that

T
(cid:88)

Ï„ =T (cid:93)

(cid:18) (cid:107)âˆ‡2R(zT )(cid:107)2L(cid:48)BÎ¾
Ï„ âˆ’ 1

(cid:19)2

â‰¤ ((cid:107)âˆ‡2R(zT )(cid:107)2LBÎ¾)2

T âˆ’1
(cid:88)

j=1

1
j2 â‰¤ 2((cid:107)âˆ‡2R(zT )(cid:107)2LBÎ¾)2 a.s.

(53)

We next focus on the terms involving (cid:107)Â¯Î¾r
the ï¬ltration {FÏ„ }T

Ï„ =1. Let St = (cid:80)T

â†’Ï„ (cid:107)4. Note that {(cid:107) Â¯Î¾r

Ï„ =t(tâˆ’1)((cid:107) Â¯Î¾r

â†’Ï„ âˆ’1(cid:107)4 âˆ’(cid:107) Â¯Î¾r

â†’Ï„ âˆ’1(cid:107)4} is a submartingale adapted to
â†’Ï„ (cid:107)4), then {St} is also a submartingale.

28

Since T (cid:93) is stopping time, we have

(cid:34)

E

(T (cid:93) âˆ’ 1)(cid:107)Â¯Î¾r

â†’T (cid:93)âˆ’1(cid:107)4 +

(cid:35)

(cid:107)Â¯Î¾r

â†’Ï„ (cid:107)4

T
(cid:88)

Ï„ =T (cid:93)

= E[ST (cid:93)] â‰¤ E[S2] = E

(cid:35)

.

(cid:107)Â¯Î¾r

â†’Ï„ (cid:107)4

(cid:34) T

(cid:88)

Ï„ =1

It is easy to verify that

E[(cid:107)Â¯Î¾r

â†’t(cid:107)4] â‰¤

(cid:88)

j,k>t

Subsequently,

j (cid:107)2(cid:107)Î¾r

E[(cid:107)Î¾r
k(cid:107)2]
(j âˆ’ 1)2(k âˆ’ 1)2 â‰¤ B4

Î¾

ï£«

ï£­

(cid:88)

j>t

1
(j âˆ’ 1)2

ï£¶
2

ï£¸

â‰¤

4B4
Î¾
t2 .

(cid:34)

E

M 2
8m

(T (cid:93) âˆ’ 1)(cid:107)Â¯Î¾r

â†’T (cid:93)âˆ’1(cid:107)4 +

(cid:35)

(cid:107)Â¯Î¾r

â†’Ï„ (cid:107)4

M 2
4m

T
(cid:88)

Ï„ =T (cid:93)

â‰¤

M 2
4m

(cid:88)T

Ï„ =1

4B4
Î¾
Ï„ 2 â‰¤

M 2B4
Î¾
2m

.

(54)

Since the Eucliean norm is convex, by Assumption (B4), (cid:107)Â¯Î¾Î´
tation of (cid:107)Â¯Î¾Î´

â†’T (cid:93)âˆ’1(cid:107) can be upper bounded by

â†’Ï„ âˆ’1(cid:107) is a submartingale. The expec-

E(cid:2)(cid:107)Â¯Î¾Î´

â†’T (cid:93)âˆ’1(cid:107)(cid:3) â‰¤ E(cid:2)(cid:107)Â¯Î¾Î´

1(cid:107)(cid:3) â‰¤

(cid:113)

E(cid:2)(cid:107)Â¯Î¾Î´

1(cid:107)2(cid:3) â‰¤ 2BÎ¾

(cid:118)
(cid:117)
(cid:117)
(cid:116)

T âˆ’1
(cid:88)

j=1

1
j2 â‰¤ 3BÎ¾.

(55)

Finally, combining Eqs. (44,46,52,54,55) and using Lemma 5, we obtain

T (xT ) âˆ’ Ï†r
Ï†âˆ—

T (xT ) â‰¤

M 2B4
Î¾
2m

+

2((cid:107)âˆ‡2R(zT )(cid:107)2L(cid:48)BÎ¾)2
m

+ 3(cid:107)âˆ‡2R(zT )(cid:107)2B2

Î¾ + O(E[T (cid:93) âˆ’ 1]) = O(1),

which completes the proof of Theorem 5.

7 Conclusion

In this paper, we analyze a natural re-solving heuristic for the classic price-based revenue manage-

ment problem with either a single product or multiple products. The heuristic re-solves the ï¬‚uid

model in each period to reset the prices.

We establish two complementary theoretical results. First, the re-solving heuristic attains O(1)

regret compared against the value of the optimal policy. The O(1) regret depends on the shape of

the demand function as well as how close the initial inventory level is to certain â€œboundaries.â€ Going

forward, an obvious question is whether the boundary condition can be removed. Our numerical

experiment shows that the natural re-solving heuristic may not have O(1) regret when the initial

inventory is on the boundary, so the pricing algorithm needs to be modiï¬ed for that case.

29

Second, we show that there exists an â„¦(ln T ) gap between the value of the optimal policy and the

value of the ï¬‚uid model. For that reason, our regret analysis does not use the ï¬‚uid model as a

benchmark; the proof directly compares the value of the optimal policy and that of the heuristic.

An interesting future direction is to ï¬nd a diï¬€erent benchmark that is within O(1) of optimal value,

which may help simplify our proof.

Appendix: The Hindsight-Optimum (HO) Benchmark.

The HO benchmark has been used to analyze re-solving algorithms for quantity-based network

revenue management (Reiman and Wang 2008, Bumpensanti and Wang 2020). Since in quantity-

based network revenue management the demand rates are not aï¬€ected by the (adaptively chosen)

prices, the formulation in Bumpensanti and Wang (2020) is not directly applicable to our setting.

Instead, we formulate an HO benchmark following the strategy in Vera et al. (2019) which also

considered price-based revenue management with a ï¬nite subset of pries.

Deï¬nition 1 (The HO benchmark). For any p deï¬ne random variable DT (p) := (cid:80)T
t=1 dt as the
total realized demand with ï¬xed price pt â‰¡ p. A policy Ï€ is HO-admissible if at time t, the price
decision pt depends only on {pt(cid:48), xt(cid:48), dt(cid:48)}t(cid:48)<t and {DT (p)}pâˆˆ[p,p]. The HO-benchmark RHO(T, x0) is
deï¬ned as the expected revenue of the optimal HO-admissible policy Ï€.

At a higher level, the HO-benchmark equips a policy with the knowledge of the total realized

demand for each hypothetical ï¬xed price p âˆˆ [p, p] in hindsight. Clearly, such policies are more

powerful than an ordinary admissible policy which only knows the expected demand but not the

realized demand for a speciï¬c price p.

Our next proposition shows that the HO-benchmark RHO(T, xT ) has a constant gap compared
against the T pâˆ—f (pâˆ—) oracle in the single-product setting. Hence, it also has an â„¦(ln T ) gap from
the re-solving heuristic and the optimal DP solution. The conclusion in Theorem 4 then holds with
T r(xT ) replaced by RHO(T, xT ).

Proposition 2. For any xT âˆˆ (d, xu), it holds that RHO(T, xT ) â‰¥ T r(xT ) âˆ’ O(1) where y0 = xT T .

Proof. Proof of Proposition 2. Consider a setting where Î¾1, Â· Â· Â· , Î¾T are i.i.d. It is clear that knowing
(cid:80)T
{DT (p)}pâˆˆ[p,p] is equivalent to knowing Â¯Î¾ = 1
t=1 Î¾t, since DT (p) = T (f (p) + Â¯Î¾) for all p. Now
T
consider the policy of ï¬xed prices pt â‰¡ g(xT + Â¯Î¾). Since E[ Â¯Î¾] = 0 and E[ Â¯Î¾2] = O(1/T ), the expected
regret of such a policy can be bounded as

T E Â¯Î¾

(cid:2)(xT + Â¯Î¾)f âˆ’1(xT + Â¯Î¾)(cid:3) âˆ’ T xT f âˆ’1(xT ) = T E Â¯Î¾[r(xT + Â¯Î¾) âˆ’ r(xT )] â‰¥ T E Â¯Î¾

(cid:104)
r(cid:48)(xT ) Â¯Î¾ âˆ’

Â¯Î¾2(cid:105)

m
2

Ã— O(1) = âˆ’O(1),

= âˆ’

m
2

T E[ Â¯Î¾2] = âˆ’

m
2

30

which is to be demonstrated. (cid:3)

References

Arlotto, Alessandro, Itai Gurvich. 2019. Uniformly bounded regret in the multisecretary problem. Stochastic

Systems 9(3) 231â€“260.

Aviv, Yossi, Amit Pazgal. 2005. Dynamic pricing of short life-cycle products through active learning. Working

Paper, Olin School Business, Washington University, St. Louis, MO.

Besbes, Omar, Assaf Zeevi. 2009. Dynamic pricing without knowing the demand function: Risk bounds and

near-optimal algorithms. Operations Research 57(6) 1407â€“1420.

Besbes, Omar, Assaf Zeevi. 2012. Blind network revenue management. Operations Research 60(6) 1537â€“1550.

Broder, Josef, Paat Rusmevichientong. 2012. Dynamic pricing under a general parametric choice model.

Operations Research 60(4) 965â€“980.

Bumpensanti, Pornpawee, He Wang. 2020. A re-solving heuristic with uniformly bounded loss for network

revenue management. Management Science 66(7) 2801â€“3294.

Chen, Yiwei, Vivek F Farias. 2013. Simple policies for dynamic pricing with imperfect forecasts. Operations

Research 61(3) 612â€“624.

Cooper, William L. 2002. Asymptotic behavior of an allocation policy for revenue management. Operations

Research 50(4) 720â€“727.

den Boer, Arnoud V, Bert Zwart. 2015. Dynamic pricing and learning with ï¬nite inventories. Operations

Research 63(4) 965â€“978.

Ferreira, Kris Johnson, David Simchi-Levi, He Wang. 2018. Online network revenue management using

Thompson sampling. Operations Research 66(6) 1586â€“1602.

Gallego, Guillermo, Garrett Van Ryzin. 1994. Optimal dynamic pricing of inventories with stochastic demand

over ï¬nite horizons. Management Science 40(8) 999â€“1020.

Gallego, Guillermo, Garrett Van Ryzin. 1997. A multiproduct dynamic pricing problem and its applications

to network yield management. Operations Research 45(1) 24â€“41.

Jasin, Stefanus. 2014. Reoptimization and self-adjusting price control for network revenue management.

Operations Research 62(5) 1168â€“1178.

Jasin, Stefanus. 2015. Performance of an lp-based control for revenue management with unknown demand

parameters. Operations Research 63(4) 909â€“915.

Jasin, Stefanus, Sunil Kumar. 2012. A re-solving heuristic with bounded revenue loss for network revenue

management with customer choice. Mathematics of Operations Research 37(2) 313â€“345.

Jasin, Stefanus, Sunil Kumar. 2013. Analysis of deterministic lp-based booking limit and bid price controls

for revenue management. Operations Research 61(6) 1312â€“1320.

Krantz, Steven G, Harold R Parks. 2012. The implicit function theorem: history, theory, and applications.

Springer Science & Business Media.

Lei, Yanzhe Murray, Stefanus Jasin, Amitabh Sinha. 2014. Near-optimal bisection search for nonparametric

dynamic pricing with inventory constraint. Working Paper, Ross School of Business, University of

Michigan.

31

Ma, Will, David Simchi-Levi. 2020. Algorithms for online matching, assortment, and pricing with tight

weight-dependent competitive ratios. Operations Research .

Ma, Yuhang, Paat Rusmevichientong, Mika Sumida, Huseyin Topaloglu. 2020. An approximation algorithm

for network revenue management under nonstationary arrivals. Operations Research 68(3) 834â€“855.

Maglaras, Constantinos, Joern Meissner. 2006. Dynamic pricing strategies for multiproduct revenue man-

agement problems. Manufacturing & Service Operations Management 8(2) 136â€“148.

Milgrom, Paul, Ilya Segal. 2002. Envelope theorems for arbitrary choice sets. Econometrica 70(2) 583â€“601.

Reiman, Martin I, Qiong Wang. 2008. An asymptotically optimal policy for a quantity-based network revenue

management problem. Mathematics of Operations Research 33(2) 257â€“282.

Secomandi, Nicola. 2008. An analysis of the control-algorithm re-solving issue in inventory and revenue

management. Manufacturing & Service Operations Management 10(3) 468â€“483.

Vera, Alberto, Siddhartha Banerjee. 2020. The bayesian prophet: A low-regret framework for online decision

making. Management Science .

Vera, Alberto, Siddhartha Banerjee, Itai Gurvich. 2019. Online allocation and pricing: Constant regret via

bellman inequalities. arXiv preprint arXiv:1906.06361 .

Wang, Yining, Boxiao Chen, David Simchi-Levi. 2020. Multi-modal dynamic pricing. Management Science

(to appear) .

Wang, Zizhuo, Shiming Deng, Yinyu Ye. 2014. Close the gaps: A learning-while-doing algorithm for single-

product revenue management problems. Operations Research 62(2) 318â€“331.

Zhang, Fuzhen. 2005. The Schur complement and its applications. Springer Science & Business Media.

32

