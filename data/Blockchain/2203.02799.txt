Accelerated carrier invoice factoring using
predictive freight transport events

Krishnasuri Narayanam
IBM Research, India
knaraya3@in.ibm.com

Pankaj Dayama
IBM Research, India
pankajdayama@in.ibm.com

Sandeep Nishad
IBM Research, India
sandeep.nishad1@ibm.com

2
2
0
2

r
a

M
5

]

Y
C
.
s
c
[

1
v
9
9
7
2
0
.
3
0
2
2
:
v
i
X
r
a

Abstract—Invoice factoring is an invoice ﬁnancing process
where business organizations sell their invoices to banks or
ﬁnancial institutions at a discount to gain faster access to the
invoice amount. In global trade, ocean and land carriers exercise
invoice factoring to gain quick access to the money they get
paid for the shipment of consignments by shippers. Shippers
typically clear the invoice payment within 60-90 days of goods
getting delivered. In order to get early access to capital, carriers
initiate invoice factoring after the completion of goods delivery
to the shipper. In this work, we provide an approach to enable
accelerated carrier invoice factoring even before the delivery of
goods. Carrier invoice value for a given shipment depends on the
actual values of shipment tracking events. We predict the carrier
invoice value at different freight transport milestone events as the
goods transportation progresses from supplier to shipper using
smart contracts on a blockchain network that is operated by
the global trade logistics participants. The prediction at a given
stage is based on past shipment tracking events and predicted
future shipment tracking events. Accurate prediction of invoice
value for ongoing shipment enables the carrier organization to
initiate invoice factoring on the trade ﬁnance network before the
completion of goods delivery to the shipper. Further, based on the
past accuracy of prediction models, the ﬁnancial institutions may
choose to release the invoice amount in installments at different
freight transportation milestone events.

Index Terms—Global trade, event prediction, invoice compu-
tation, invoice factoring, smart contract, blockchain interoper-
ability.

I. INTRODUCTION

Global trade is a supply chain transaction in which shippers
buy goods from suppliers with goods transportation across
international boundaries provided by the carriers. A single
trade transaction involves the execution of processes like
freight transportation, invoice generation, receiving of goods,
invoice processing, and payment processing [1]. One or more
carrier organizations may be responsible for the freight trans-
port (e.g., origin land carrier, ocean carrier, destination land
carrier) across country boundaries in global trade. Shippers
are issued invoices from suppliers for the goods provided and
from carrier organizations for the goods transportation. The
accounts payable team of the shipper veriﬁes the invoices
and carries out payment processing to the supplier and all
the carriers.

Payment processing involves executing a payment method
as per the terms captured in the service contracts between
trade participants (i.e., shippers, suppliers, and carriers). One
of the payment methods is invoice ﬁnancing that is facilitated

by banks or ﬁnancial institutions. Invoice factoring [2] is used
to ﬁnance the carrier invoices and letter of credit [3] is used
to ﬁnance the supplier invoices in global trade.

An alternate payment method is open account [4] where
payment processing takes place typically in 30, 60, or 90
days after the completion of the goods delivery by the carrier.
Carrier organizations obtain cash soon after goods delivery
completion using invoice factoring against the many days of
delay in the open account method.

With invoice factoring, the factoring organization pays the
invoice amount with a discount to the carrier, typically within
a day post goods shipment and delivery completion to the
shipper. The factoring company collects its fee as a discount
in the invoice amount. The shipper pays the invoice amount
to the factoring company, typically within 60 days after goods
delivery. This beneﬁts each party involved in as follows:
• Carrier: gains quicker access to money it owed soon after

goods delivery

• Shipper: can get more time from the factoring company to

pay off the invoice amount

• Factoring organization: earns by invoice discount

In this paper, we propose accelerating the carrier invoice
factoring such that
the carrier organizations obtain cash
even before goods delivery completion to the destination.
We achieve this by predicting the carrier invoices at differ-
ent freight transport milestones as the goods transportation
progresses from the origin to the destination and initiating
the invoice factoring based on the predicted invoices before
goods delivery completion. Our proposal further increases
the beneﬁts of invoice factoring for both the carrier and
factoring organizations, while the shipper doesn’t experience
any changes from the existing invoice factoring behavior. In
particular, carriers get access to the invoice amount soon after
the goods dispatch and much before goods delivery to the
destination, and factoring organizations can get higher invoice
discounts.

A. Illustrative example

We illustrate the advantages to the carriers and the factoring
organizations due to the payment processing method that we
propose, namely accelerated invoice factoring, using a simple
example that considers various payment processing methods.
Assume that the goods transportation from the origin to
the destination takes 30 days for the carrier and the invoice

 
 
 
 
 
 
II. RELATED WORK

Study on the use of blockchain for supply chain optimiza-
tion is an evolving research domain. There exist blockchain-
based trade logistic networks like TradeLens [5] that help
in real-time shipment tracking. There exist blockchain-based
platforms that generate carrier e-invoices in real-time using
the shipment tracking details and service contract agreements
[6]. Similarly, there exist blockchain-based accounts payable
systems [1], [7], [8] that help in invoice processing. And
there are blockchain-based trade ﬁnance systems [9]–[13] that
help in payment processing to the suppliers and carriers. Not
all trade ﬁnance systems use the same payment processing
method, and there are many different
types of them. All
these solutions use blockchain technology to address various
process inefﬁciencies at different stages of the global trade
supply chain process. We propose to leverage this suite of
blockchain-based systems to enhance the gains of the supply
chain participants via our payment processing method called
accelerated invoice factoring.

III. BACKGROUND

In this section, we provide a summary of auto-generation
of blockchain-based carrier invoices [6] and carrier invoice
factoring in global trade.

A. Carrier e-invoice generation

A carrier invoice is a set of charges involved in the goods
transportation process. The shipper and the carrier agree on
various freight transport charges that can be part of the carrier
invoice and the rate at which these charges add to the invoice.
It’s called the service contract agreement and stored on a
blockchain-based trade logistics network in which both shipper
and carrier are the network peers.

A charge can be planned (applicable to all the shipments)
or unplanned (applied if the required container tracking events
occur). Moreover, a charge can be ﬁxed (computed directly
using a ﬁxed service contract rate) or variable (computed using
the service contract rates and the container tracking events).
For example,
the demurrage charge [14] is an unplanned
variable charge component of an ocean carrier invoice that
uses container tracking events to determine the waiting time
of the container in a port terminal.

Packed goods are loaded into a container and the car-
rier ships the container from the origin to the destination.
Container tracking events (also known as shipping milestone
events) track the progress of the freight transport. These ship-
ping milestone events are also recorded on the trade logistics
network, such that it provides visibility into the current state
of the container movement to all the trade participants.

Smart contracts on blockchain generate the carrier invoices
(also known as e-invoices) using the real-time shipping mile-
stone events and the service contract agreements available on
the blockchain ledger. Smart contracts compute the carrier
e-invoices iteratively on the occurrence of various shipment
milestone events. An e-invoice may be partial and may not
contain all the charges until the last milestone event. Examples

Fig. 1. Payment processing methods

amount is 100 USD. Below are sample payment settlement
details under different payment processing methods.

i Open Account method: Carrier receives the invoice amount
of $100 directly from the shipper, after 60 days of the goods
delivery to the destination (i.e., on 90th day after goods
dispatch by the supplier).

ii Invoice Factoring method: Carrier receives the invoice
amount after 1 day of goods delivery to the destination
(i.e., on 31st day of goods dispatch). However, the carrier
only receives a discounted invoice amount of $94 from the
factoring organization. The shipper pays the invoice amount
of $100 to the factoring organization after 60 days of the
goods delivery (i.e., on 90th day after goods dispatch by
the supplier).

iii Accelerated Invoice Factoring method: Carrier receives the
invoice amount after 4 days of goods dispatch by the
supplier and before the completion of goods transportation
to the destination. However,
the carrier only receives a
discounted invoice amount of $92 from the factoring or-
ganization. The shipper pays the invoice amount of $100
to the factoring organization after 60 days of good delivery
(i.e., on 90th day after goods dispatch by the supplier).

the invoice discount amount

Please note that
is more in
our proposed method. The factoring organization gains an
additional $2 (i.e., the difference between $94 as per invoice
factoring method minus $92 as per our proposed method that
it pays to the carrier). The trade-off here is that the factoring
organization needs to release the discounted invoice amount 27
days early (i.e., on 31st day after goods dispatch as per invoice
factoring method minus on 4th day after goods dispatch as per
our proposed method).

We organize the rest of the paper as follows. In Section-II,
we provide the related work and references to blockchain-
based solutions related to supply chain optimization that
helps realize our contributions. In Section-III, we present
details about blockchain-based carrier invoice generation and
information on carrier invoice factoring. In Section-IV, we
describe the details of our proposed blockchain-based payment
settlement method. In Section-V, we discuss an approach to re-
alize the proposed accelerated invoice factoring method using
state-of-art blockchain-based supply chain networks. Section
VI presents the details on how we have implemented an AI
model for event occurrence prediction and some guidelines on
the same. Section VII summarizes our contributions.

of shipment milestone events of an ocean carrier are container
loaded on the vessel, vessel departure at origin port, vessel
arrival at the destination port, or container discharge from
vessel. The ocean carrier invoices include both export port-
speciﬁc charges and import port-speciﬁc charges.

B. Carrier invoice factoring

Carrier invoice factoring allows freight transportation orga-
nizations (e.g., trucks or ocean carriers [15]–[17]) to receive
cash from unpaid invoices immediately. Carrier organizations
need to complete the freight delivery and submit the invoice
(sometimes along with the bill of lading) to the bank/factoring
company. Bank veriﬁes the invoices and releases the invoice
amount minus factoring fee (also known as invoice discount
amount) within 24 hours. Invoice factoring speeds up the
operating cash ﬂow for carriers that helps grow their business.
Without invoice factoring, the carrier organizations need to
wait up to 90 days for the shippers to settle the full invoice
amount (without invoice discount). Note that the bill of lading
(BOL) is a document that consists of details about the parties
involved in a trade transaction. Carriers use BOL to generate
the invoice and issue it to the shipper.

IV. SYSTEM DESIGN

This section describes the design of our blockchain system

that supports accelerated invoice factoring.

A. Predicted carrier e-invoice generation

In the carrier e-invoice computation, as described in section
III-A, only the actual shipment milestone events are used
and the future shipping milestone events are not considered.
However, we observe that the estimates of future shipping
milestone events might be available from different trade partic-
ipants, or it may be possible to estimate future milestone events
afresh. Thus, we can compute the carrier e-invoices using a
combination of the actual values of already occurred milestone
events and the predicted values of milestone events that are
yet to occur. We call these carrier e-invoices as predicted e-
invoices.

Please note that these predicted carrier e-invoices may be
the last
partial and may not contain all the charges until
milestone event occurs, as it may not be possible to predict all
the future milestone events. For those future events for which
prediction of their occurrence time is possible, the prediction
activity can be carried out anytime before the actual occurrence
time of the event, say on the actual occurrence of a prior
shipment milestone event as the freight transport progresses.
Prediction in the current iteration for a milestone event may
use all the previously predicted occurrence time values for that
milestone event.

We propose to use an AI model to ﬁnd the aggregate esti-
mated occurrence of a container tracking event. For example,
using all the container tracking events till the current milestone
event “vessel departure at the origin port”, the AI model can
estimate the immediate future milestone event “vessel arrival
at the destination port”. The AI model also takes care of the

inconsistencies between the estimated values of the milestone
events if estimates are available from more than one supply
chain participant.

Please note that the same future milestone event, vessel
arrival at
the destination port, would have got predicted
previously by the AI model for this same shipment on the
occurrence of the past milestone event container loaded on
the vessel. Essentially the estimation of a shipment tracking
event by the AI model can happen multiple times till the
actual occurrence of that event. Each time there is a change in
the estimated occurrence of a container event, the blockchain
smart contract can update the carrier e-invoice by considering
all the actual past milestone events, the latest estimated future
milestone events, and the service contract agreements.

B. Factoring the predicted carrier e-invoices

The ﬁrst predicted carrier e-invoice is available for the goods
shipped (consignment) soon after the dispatch of the goods
by the supplier. It may be a partial e-invoice and only contain
actual values of planned-ﬁxed charges and predicted values
for invoice charges of type planned-variable, unplanned-ﬁxed,
and unplanned-variable (refer to III-A).

In our proposed solution, the carrier can present the pre-
dicted e-invoice to the factoring organization immediately once
it is generated. The factoring organization releases part of
the e-invoice predicted amount (ﬁrst chunk of the invoice
amount after discount) soon to the carrier. Whenever the e-
invoice predicted amount is updated on the occurrence of
a subsequent shipping milestone event as the freight trans-
portation progresses, it is presented again to the factoring
organization by the carrier such that an additional chunk of
the carrier invoice amount might be released. This process
iterates till the occurrence of the last shipping milestone event.
After the goods are delivered to the shipper, the blockchain
smart contract generates the actual carrier invoice. Carrier
presents the actual invoice to the factoring organization for
the last time, and the factoring organization releases the ﬁnal
chunk of the discounted invoice amount (if any) within 24
hours. This factoring process is different from the traditional
invoice factoring, where the factoring organization releases the
discounted invoice amount in one chunk when the last shipping
milestone event occurs.

Please note that if the accuracy of the model used for
predicting e-invoice is good, then the factoring organization
might choose bigger chunks of the discounted invoice amount
in the initial iterations itself.

The computation of the predicted e-invoice happens on the
trade logistics network, and the factoring organization carries
out payment settlement to the carrier on the trade ﬁnance
network. Supply chain participants like suppliers, carrier orga-
nizations, and shippers are part of the trade logistics network
and ﬁnancial organizations and carriers are part of the trade
ﬁnance network.

C. AI model overview

The AI model used to predict the occurrence time of future
milestone events can be an independent service provided

by third-party outside the trade logistics network or it can
be an independent party of the trade logistics network that
provides predicted future milestone events for all (or part
of) the shipments tracked on the logistics network. Carrier
organizations can pay to the party providing the AI prediction
service since the carrier beneﬁts from the proposed accelerated
invoice factoring payment processing method.

Please note that the accuracy of the AI model prediction
may vary from one global trade shipping lane to other lane.
The accuracy of a milestone event prediction depends on the
quality of the input data used by the model. The input data
includes external factors like the capacity of shipping ports
(number of terminals at a port), the number of transshipment
ports on the shipping lane, trafﬁc at different shipping ports
on the shipping lane, sea tide, weather conditions, vessel type,
etc. Section VI captures more details on the AI model training.

D. Workﬂow of Accelerated Invoice Factoring

Here we describe the invoice ﬁnancing process workﬂow
as per our proposed accelerated invoice factoring method.
In Figure 2, we illustrate the different steps involved in our

the goods using the milestone events (actual & predicted)
and the service contract agreements previously loaded on
the blockchain ledger.

• Smart contract on the trade ﬁnance blockchain platform
determines the planned/unplanned charges to be included
in the current iteration of the accelerated invoice factoring
(refer Section IV-F). For the current iteration of the invoice
ﬁnancing, banks consider the actual charges not paid in the
previous iterations; and the predicted charges not settled
in the iterations until then and that have high prediction
accuracy. If the prediction accuracy of an invoice charge is
less, then the banks either wait for a better prediction of
the charge amount or wait until the addition of the actual
charge value to the partial e-invoice.

• Bank initiates payment of one more invoice amount chunks
to carrier organization if invoice ﬁnancing in the current
iteration includes one or more charges (actual or predicted).
• The global trade participants iterate over the above steps at
the occurrence of each milestone event until the goods are
delivered.

• After the goods delivery completion, the bank checks if the
sum of the chunks of partial invoice amounts paid across
all the iterations is less than the actual invoice amount after
discount. If so, the bank computes the remaining amount to
be paid and releases the ﬁnal chunk of the invoice amount to
the carrier organization. If the bank has already transferred
more than it’s entitled to pay, it adjusts the surplus paid
against the future shipments from the same carrier.

• After the goods are delivered, the carrier rewards the AI
service provider since the carrier organization now got early
access to the invoice amount by following our proposed
approach.

E. AI service for aggregate estimate computation

Fig. 2.

Invoice ﬁnance workﬂow as per accelerated invoice factoring

approach. Below are the details of each step:
• The workﬂow starts when the shipper places a purchase

order of goods that the supplier dispatches.

• The trade logistics blockchain network tracks the occurred
shipping milestone events as the carrier transports the goods
from the origin to the destination. Trade logistics blockchain
platform also tracks the estimates on future milestone events
submitted by various supply chain participants. These es-
timates on future milestone events help the downstream
supply chain participants plan their activities accordingly.
• AI service produces an aggregate estimate (refer Section
IV-E) of future milestone events using the inputs described
in the previous step.

• Smart contract on the trade logistics blockchain platform
computes the partial carrier e-invoice for the shipment of

Fig. 3. Approach for aggregate estimate computation by AI service

Here we describe the approach to generate aggregate event
occurrence time estimate by the AI service for any milestone
event. Note that there could be zero or more estimates from
different sources for a given future milestone event (i.e.,
an event
that has not yet happened). Training of the AI
model should ideally take place speciﬁcally for a given global
shipping lane to achieve better prediction accuracy. Figure 3
captures the steps involved in the proposed approach. Training
data includes the historical estimated and actual events data.
training.
Section VI captures more details on the model

Note that the training happens outside of the trade logistics
blockchain platform. Testing and scoring of AI model happens
on the trade logistics blockchain platform.

F. Decision on charges for factoring consideration

Fig. 4. Approach for charge inclusion for accelerated invoice factoring

We describe here the approach to decide on the charges con-
sidered for accelerated invoice factoring. Note that a charge
included for accelerated invoice factoring on one shipping lane
may not be considered for accelerated invoice factoring on
a different lane. Figure 4 captures the steps involved in the
proposed approach. Smart contracts referred to here typically
are part of the trade ﬁnance blockchain platform. Factors like
charge type (planned or unplanned), computation type (ﬁxed
or variable), shipping lane, bank, carrier organization, and
accuracy of the charge amount prediction impact this decision-
making. Only a fraction of the predicted charge amount may
be considered for factoring by the bank. Note that the carriers
ideally want to include all the charges that are part of the
invoice for accelerated invoice factoring. However, banks may
not consider the charges like carrier-speciﬁc / lane-speciﬁc
surcharges for factoring. The banks and carriers come together
to decide the charges they want to include for factoring, the
fraction of the charge amount considered for factoring, invoice
discount/factoring fee, etc. and record the same on the trade
ﬁnance blockchain platform. Banks might also directly interact
with the AI service provider to evaluate the accuracy of the
estimates and reward the AI service provider too.

G. Final settlement of actual invoice amount

At the end of the goods delivery by the carrier, the invoice
amount in actuals is computed on the trade logistics network
and shared with the banks on the trade ﬁnance network.
The factoring company computes the sum of the installment
amounts it paid to the carrier. If that amount is less than the
amount to be paid against the invoice amount actuals (after
subtracting the discounted amount from the actual invoice
amount), then the factoring company processes the payment
of the balance amount to the carrier. On the other hand, if that
amount is more than the amount to be paid against the invoice
amount actuals (after subtracting the discounted amount from
the actual invoice amount), then the factoring company adjusts

the excess amount paid against the future invoices for the same
carrier.

V. IMPLEMENTATION DETAILS

In this section, we describe the implementation details of
our proposed accelerated invoice factoring method for payment
processing by considering sample independent blockchain
consortium networks, TradeLens(TL) [5] and We.Trade(WT)
[9] that interoperate [18] with each other. The sample WT
(SWT) network helps banks facilitate invoice ﬁnancing using
our accelerated invoice factoring method. For simplicity, we
assume that the sample TL (STL) connects suppliers, carriers,
and shippers, while the sample WT connects banks and
the carriers. We make use of the blockchain interoperability
protocol [19] for trusted data transfer between these desperate
blockchain networks STL and SWT. Interoperability is the
ability of blockchain networks to communicate for the transfer
or exchange of data or value with assurances of validity.
In particular, we propose to fetch the predicted carrier e-
invoices from the trade logistics network, STL, using the
trusted data transfer protocol [19] and load them into the
trade ﬁnance network, SWT, before triggering the accelerated
invoice factoring process.

We consider a shipping lane with a transshipment port
between the source and the destination ports. Moreover, we
only consider the ocean carrier leg of the journey and no land
carriers during freight transport for simplicity.

Figure 5 illustrates the communication between STL and
SWT, and we describe below the steps involved to realize our
proposed invoice ﬁnance method.

Fig. 5. Steps in payment settlement using accelerated invoice factoring

1) Shipper initiates goods transfer by submitting a PO (pur-

chase order).

2) Supplier creates the consignment.
3) Carrier emits milestone event container loaded on Vessel,
after the bill of lading generation that conveys receipt of
shipment.

4) Smart Contract on STL generates a partial carrier e-invoice

with actual values of planned charges.

5) Carrier fetches partial e-invoice using the inter-blockchain

trusted data transfer protocol from STL into SWT.

6) Bank initiates the ﬁrst chunk of invoice payment to the

carrier organization.

7) Carrier emits milestone event departure from origin port

after dispatch of the consignment.

8) AI service estimates and emits milestone event arrival at

destination port.

9) Smart contract on STL updates partial carrier e-invoice
to include actual values of planned charges and estimated
values of unplanned charges.

10) Carrier fetches updated partial e-invoice using the inter-
blockchain trusted data transfer protocol from STL into
SWT.

11) Bank initiates one more chunk of invoice payment to the
carrier organization for the estimated unplanned charges if
it decides to pay additional invoice amount.

12) Carrier emits milestone event departure from transshipment
port at a transshipment location on the way to the destina-
tion port.

13) AI service updates occurrence estimate of milestone event

arrival at destination port.

14) Smart contract on STL updates partial carrier e-invoice
to include actual and estimated values of planned and
unplanned charges.

15) Carrier fetches updated partial e-invoice using the inter-
blockchain trusted data transfer protocol from STL into
SWT.

16) Bank initiates one more chunk of invoice payment

to
carrier organization if the bank decides to pay more invoice
amount.

17) Carrier emits milestone event arrival at destination port

and completes goods delivery to the shipper.

18) Smart contract on STL generates ﬁnal carrier e-invoice
to include actual values of all the eligible planned and
unplanned charges.

19) Carrier fetches ﬁnal e-invoice using the inter-blockchain

trusted data transfer protocol from STL into SWT.

20) Bank initiates ﬁnal chunk of invoice payment to carrier
organization if the sum of the chunks of invoice amounts
paid until then is less than the discounted invoice amount.

21) Carrier initiates reward for the AI service.
The reward to the AI service can be off-blockchain processing.
Similarly, the shipper pays the exact amount as in the e-invoice
to the bank after 60 days of goods delivery which can be
another transaction on SWT with the shipper also being a
network participant.

VI. AI MODEL TRAINING

In this section, we discuss options for AI model training.
The examples that we provide here are just for illustrative
purposes. The actual model training depends on the structure
of the charges component of the speciﬁc carrier invoice and
the type of shipping milestone events used to compute those
charges. We implemented the AI models in Python (version
3) and using IBM Watson Studio AutoAI service [20].

We illustrate implementing the AI model by considering
anonymized shipment details obtained from a trade logistics

blockchain platform for few shipping lanes for two months,
with a transshipment port between the export and import ports
on a subset of these lanes. Hence, there will be only one leg
of journey if there is no transshipment port between the origin
and destination port or there will be two legs of journey with
the ﬁrst leg from the origin port to the transshipment port and
the second leg from the transshipment port to the destination
port. We consider the Dwell Excess Fee [21]–[23] as one of
the charge component of the carrier invoice for these shipping
lanes. Dwell time is the time elapsed from the time a container
arrives in a port to the time the container leaves the port (i.e.,
container waiting time at a given port). Let us say, there is
charge of $100 per container on the ﬁrst day past the set
dwelling limit for a port terminal. Further, let us say that the
charges increases by $100 for each passing day (i.e., $200 for
the day 2, $300 for the day 3, and so on). So, if the terminal
dwelling limit is 1 day for ocean carriers and the actual dwell
time for a container is 3 days, then the carrier invoice charge
Dwell Excess Fee would be $300 ($100 for the day 2 + $200
for the day 3).

For the shipping lanes we consider, we need to compute
the dwell time for the transshipment ports that are between
the origin and destination ports. Figure 6 captures the sample
container tracking events during the freight transport from
origin to the destination port. We predict the charge dwell
excess fee ﬁrst at the occurrence of the milestone event Vessel
Departure at Origin Port. We again predict this same charge
at the occurrence of the milestone event Vessel Arrival at
Transshipment Port.

Fig. 6. Sample container tracking milestone events

A. Data characteristics

We consider different types of data features for the model.

• Vessel characteristics: age, length, tonnage, capacity
• Port operations: number of berths, expected vessels, vessels

in port

• Container milestone events (Planned & Actual)
• Transport data: Scheduled transport plan of a consignment
The planned event data becomes available after the consign-
ment creation. Later, the estimated events get emitted as the
shipment progresses from the export to the import location.
Finally, the actual event data is available at the occurrence
of each milestone event. These events (planned or estimated
or actuals) may get generated by different sources (e.g.,
carriers, drayage providers, port authorities, or origin-cargo-
management teams). Moreover, any of these events may be
emitted more than once by a given source on the occurrence
of a milestone (e.g., drayage provider emits an estimated
event and soon emits the same event again with an updated

occurrence time), and we consider the latest reported event in
that case.

One could consider external data like weather (geostrophic
wind speeds, signiﬁcant wave height, spectral peak wave
period, vector mean wave direction), vessel position, and
deviations/disruptions if such data is available.

B. RNN architecture for end-to-end prediction

• Estimated delay for next port: The difference between the
planned and estimated arrival times at the destination port
of current leg of journey.

Our RNN model classiﬁes the predicted dwell times into class-
1 or class-0 as below:
• class-1: if dwell time > 24 hours
• class-0: otherwise

Fig. 7. RNN classiﬁcation model after departure from origin port

We use a recurrent neural network (RNN) [24], [25] classi-
ﬁer to predict the dwell time. As the container moves from the
origin port A to the destination port C via the transshipment
port B, we carry out the following tasks:
• after departure from origin: predict the delay in arrival at
B, predict the voyage time (time from A to B), predict the
dwell time at B, and predict the delay in arrival time at C
• after arrival at transshipment: predict the delay in departure
at B, predict the dwell time at B, and predict the delay in
arrival time at C

• after departure from transshipment: predict the delay in
arrival at C and predict the voyage time (time from B to C)

Figure 7 captures the RNN classiﬁcation model with a few
sample features. And Figure 8 captures the RNN classiﬁcation
model with similar set of features but the feature Actual Delay
in Arrival replacing the feature Predicted Delay in Arrival in
Figure 7. The features that we have captured in the Figures
7 & 8 are only subset of the actual list of features that we
have used and represent the important features used by the
prediction model. Here is a brief description of these features:
• Origin port: vector representation of the origin port for the
current leg of journey (e.g., origin port is A if the leg of
journey is from port A to port B)

• Destination port: vector representation of the destination
port (e.g., destination port is B if the leg of journey is from
port A to port B)

• Event

type: either 0 representing Departure event or 1

representing Arrival event.

• Planned voyage time / Dwell time: it will be the Planned
voyage time for the departure events and dwell time for the
arrival events.

• Estimated delay in ﬁnal arrival: Difference between the

planned and estimated ﬁnal arrival times.

Fig. 8. RNN classiﬁcation model after arrival at transshipment port

Though we have predicted the different tasks listed above,
we only present the results for the dwell time prediction task
in Table I. Please note that we report the balanced accuracy, as
there is class imbalance in the dataset. The balanced accuracy
[26] in binary classiﬁcation problems is used to deal with
imbalanced datasets. It is deﬁned as the average of true positive
rate and true negative rate.

TABLE I
RESULTS FOR DWELL TIME PREDICTION WITH ATMOST 1
TRANSSHIPMENT PORT

Model
Deﬁnition

Binary
Classiﬁcation
( <24 hrs)
Binary
Classiﬁcation
( <24 hrs)

Prediction on
Milestone Event

Model Type

Balanced
Accuracy (%)

Departure from
Origin Port

Arrival at
Transshipment Port

Dwell Time

70.27

Dwell Time

70.53

Please note that it is easy to train a different model to
classify if the dwell time is >48 hours or >72 hours. Using
these models, one can predict if the dwell time for a given
shipment is less than 1 day, or 2 days, or 3 days, or more than
3 days. And accordingly, the expected Dwell Excess Fee can
be computed for that shipment using the predicted dwell time.

C. Decision making by factoring organization

the
By referring to the prediction accuracy in Table I,
factoring organization can decide if a predicted charge amount
can be considered for accelerated factoring at a given shipping
milestone or wait for the occurrence of a subsequent milestone
and decide based on the updated predicted charge value at
that milestone. Prediction accuracy can be imported into the
trade ﬁnance network from the trade logistics network as part
of the trusted data transfer along with the predicted carrier

time is 2 days. Then,

invoice in Steps 5, 10, 15 and 19 of Section V. For instance,
consider that our RNN model predicts the dwell time of a
shipment to be more than 24-hours (and to be less than 48-
hours using another RNN model). In other words, the predicted
value of dwell
the smart contracts
on the trade logistics blockchain generate the partial carrier
invoice that includes the dwell excess fee with predicted charge
amount $100. As the accuracy of our RNN model is almost
the same at both the milestone events, departure at origin
and arrival at transshipment (refer to Table I), the factoring
organization could decide to release a chunk of the invoice
amount corresponding to the predicted dwell excess fee at
the occurrence of the milestone event departure at origin
itself. It helps the carrier organization have access to the dwell
excess fee component even before the occurrence of arrival at
transshipment port milestone event.

D. Prediction with Multiple Transshipment Ports

The same RNN model that we have presented in Figure 8
can also be used to predict the dwell time task at multiple
transshipment ports, if there are more than one transshipment
port on the shipping lane from origin port to the destination
port. We present the results for dwell time prediction task in
Table II for those lanes with two transshipment ports.

TABLE II
RNN CLASSIFICATION MODEL: RESULTS FOR DWELL TIME PREDICTION
WITH 2 TRANSSHIPMENT PORTS

Model
Deﬁnition

Binary
Classiﬁcation
( <24 hrs)
Binary
Classiﬁcation
( <24 hrs)
Binary
Classiﬁcation
( <24 hrs)

Prediction on
Milestone Event

Model Type

Balanced
Accuracy (%)

Departure from
Origin Port

Arrival at 1st
Transshipment Port

Arrival at 2nd
Transshipment Port

Dwell Time

75.19

Dwell Time

75.69

Dwell Time

77.10

As we can see in the table II, that the Dwell Time prediction
transportation progresses from

is improving as the freight
origin port to the destination port for these lanes.

E. Miscellaneous recommendations

Instead of using single RNN model for all shipping lane,
one may want to train an independent RNN model for each
shipping lane. Additionally, one would be required to train
different models for each milestone event corresponding to
one or more charges of a carrier invoice. Also, all the AI
models need to be re-trained periodically so that it can capture
the changes in operating conditions and external factors. In
this paper, we have looked at classiﬁcation models for dwell
time prediction as dwell excess fee computation only required
whether dwell time will be above certain threshold (24 hours)
or not. If exact dwell
time value is required for invoice
computation then one can train a regression model instead
of classiﬁcation model.

VII. CONCLUSION

We have provided the details of a blockchain-based trade
trade that computes predicted
logistics system for global
carrier invoices in real-time as the freight transport progresses
from origin to destination. Predicted carrier invoice at differ-
ent shipping milestone events represents the accrued freight
charges till that time plus the freight charges based on the
predicted freight transport milestone events. The milestone
event prediction service can be a third-party service exter-
nal to the trade logistics blockchain network or part of it.
Carrier organization presents the predicted carrier invoice to
the factoring organization (bank or ﬁnancial institution) to
trigger invoice ﬁnance processing before the goods delivery
completion. Factoring organizations may choose to release a
chunk of the invoice amount at each freight transport milestone
event based on the predicted carrier invoice as the freight
transportation progresses from the origin to the destination.
Thus, the carrier may access the invoice amount before the
shipment of the goods is completed. It also beneﬁts the factor-
ing organization to earn more by higher invoice discounts. The
accelerated invoice factoring method introduced also applies
to land carriers (truck and rail) and air carriers in addition to
ocean carriers.

REFERENCES

[1] K. Narayanam, S. Goel, A. Singh, Y. Shrinivasan, and P. Selvam,
“Blockchain based accounts payable platform for goods trade,” in IEEE
International Conference on Blockchain and Cryptocurrency, (ICBC),
2021.
[2] “Invoice

[Online]. Available:

factoring,” Accessed 10-Dec-2021.
https://en.wikipedia.org/wiki/Factoring (ﬁnance)

[3] “UN Trade Facilitation Implementation Guide. Letter of credit.”
2019, Accessed 10-Dec-2021. [Online]. Available: https://tﬁg.unece.
org/contents/letters-of-credit.htm

[4] “UN Trade Facilitation Implementation Guide. Open Account.”
2019, Accessed 10-Dec-2021. [Online]. Available: https://tﬁg.unece.
org/contents/open-accounts.htm

[5] “TradeLens: Digitizing The Global Supply Chain,” Accessed on

10-Dec-2021. [Online]. Available: https://www.tradelens.com

[6] K. Narayanam, S. Goel, A. Singh, Y. Shrinivasan, S. Chakraborty, P. Sel-
vam, V. Choudhary, and M. Verma, “Blockchain based e-invoicing plat-
form for global trade,” in IEEE International Conference on Blockchain
(Blockchain’20), 2020.

for
[Online].

[7] “Blockchain
2021.
blockchain-for-accounts-payable-an-introduction/
Receivable,”

Accounts
Available:

[8] “Blockchain

Payable,”

Accounts

in

Accessed
10-Dec-
https://cporising.com/2017/05/25/

on
Accessed
https://netsend.com/blog/

10-Dec-2021.
blockchain-accounts-receivable/

[Online].

Available:

[9] “We.Trade,” 2019, Accessed on 10-Dec-2021.

[Online]. Available:

https://we-trade.com/

[10] “Marco Polo Network,” Accessed 10-Dec-2021. [Online]. Available:

https://www.marcopolonetwork.com/

[11] S. E. Chang, H. L. Luo, and Y. Chen, “Blockchain-enabled trade
ﬁnance innovation: A potential paradigm shift on using letter of credit,”
Sustainability, vol. 12, no. 1, p. 188, 2020.

[12] J. Chiu and T. V. Koeppl, “Blockchain-based settlement for asset
trading,” The Review of Financial Studies, vol. 32, no. 5, pp. 1716–
1753, 2019.

[13] A. Bogucharskov, I. Pokamestov, K. Adamova, and Z. N. Tropina,
“Adoption of blockchain technology in trade ﬁnance process,” Journal
of Reviews on Global Economics, vol. 7, pp. 510–515, 2018.

[14] “Ocean carrier invoice: Demurrage charge,” Accessed 10-Dec-2021.
[Online]. Available: https://www.maersk.com/local-information/europe/
norway/import

[15] “See freight transportation factoring,” Accessed 10-Dec-2021. [Online].
Available: https://www.1sttruckingfactoring.com/sea freight factoring.
htm
[16] “Freight

factoring for marine
cargo carriers,” Accessed 10-Dec-2021.
//cfgbusiness.net/marinefactoring-oceanfunding.htm

transportation and ocean frieght
[Online]. Available: https:

[17] “Freight

Factoring
10-Dec-2021.

For
Transportation
[Online]. Available:

Companies,”

Ac-
http://www.fnyo.com/

cessed
transportation-factoring-company.htm

[18] R. Belchior, A. Vasconcelos, S. Guerreiro, and M. Correia, “A survey
on blockchain interoperability: Past, present, and future trends,” ACM
Comput. Surv., vol. 54, no. 8, pp. 168:1–168:41, 2022. [Online].
Available: https://doi.org/10.1145/3471140

[19] E. Abebe, D. Behl, C. Govindarajan, Y. Hu, D. Karunamoorthy,
P. Novotn´y, V. Pandit, V. Ramakrishna, and C. Vecchiola, “Enabling
enterprise blockchain interoperability with trusted data transfer (industry
track),” in Proceedings of the 20th International Middleware Conference
Industrial Track. ACM, 2019, pp. 29–35.

[20] “Ibm watson studio autoai,” Accessed 10-Dec-2021. [Online]. Available:

https://www.ibm.com/in-en/cloud/watson-studio/autoai

[21] “Container Dwell Fee set to begin — Pegasus,” Accessed 10-Dec-
[Online]. Available: https://www.pegasusmaritime.com/news/

2021.
container-dwell-fees-nov-2021

[22] “Ocean carrier charge: Container Dwell Fee,” Accessed 10-Dec-2021.
[Online]. Available: https://www.maersk.com/news/articles/2021/10/28/
psw-emergency-fee-surcharge

and Long Beach Dwell Time Fees,”
[23] “Port of Los Angeles
Accessed 10-Dec-2021.
[Online]. Available: https://gcaptain.com/
port-of-los-angeles-and-long-beach-dwell-time-fees-start-ﬂying-today/
[24] K. Cho, B. van Merrienboer, C¸ . G¨ulc¸ehre, D. Bahdanau, F. Bougares,
H. Schwenk, and Y. Bengio, “Learning phrase representations using
RNN encoder-decoder for statistical machine translation,” in Proceed-
ings of the 2014 Conference on Empirical Methods in Natural Language
Processing, EMNLP 2014, October 25-29, 2014, Doha, Qatar, A meeting
of SIGDAT, a Special Interest Group of the ACL. ACL, 2014, pp. 1724–
1734.

[25] I. Sutskever, O. Vinyals, and Q. V. Le, “Sequence to sequence learning
with neural networks,” in Advances in Neural Information Processing
Systems 27: Annual Conference on Neural Information Processing
Systems 2014, December 8-13 2014, Montreal, Quebec, Canada, 2014,
pp. 3104–3112.
[Online]. Available: https://proceedings.neurips.cc/
paper/2014/hash/a14ac55a4f27472c5d894ec1c3c743d2-Abstract.html

[26] “What

is

balanced

[On-
accuracy?” Accessed
line]. Available: https://statisticaloddsandends.wordpress.com/2020/01/
23/what-is-balanced-accuracy/

10-Dec-2021.

