1

A Smart Contract based Crowdfunding Mechanism
for Hierarchical Federated Learning

Hongze Liu1, Jie Li∗,2, Senior Member, IEEE, Shijing Yuan2, Wenqi Cao1, and Bowen Li2
1 UM-SJTU JI, Shanghai Jiao Tong University, Shanghai, China
2 Department of Computer Science and Engineering, Shanghai Jiao Tong University, Shanghai, China
seniordriver233@sjtu.edu.cn, lijiecs@sjtu.edu.cn, 2019ysj@sjtu.edu.cn, davidcwq@sjtu.edu.cn,
li-bowen@sjtu.edu.cn ,

2
2
0
2

y
a
M
2
1

]

C
D
.
s
c
[

1
v
1
0
1
6
0
.
5
0
2
2
:
v
i
X
r
a

Abstract—Hierarchical Federated Learning (HFL) is intro-
duced as a promising technique that allows model owners to
fully exploit computational resources and bandwidth resources
to train the global model. However, due to the high training
cost, a single model owner may not be able to deploy HFL.
To address this issue, we develop a smart contract based
trust crowdfunding mechanism for HFL, which enables multiple
model owners to obtain a crowdfunding model with high social
utility for multiple crowdfunding participants. To ensure the
authenticity of the crowdfunding mechanism, we implemented
the Vickey-Clark-Croves (VCG) mechanism to encourage all
crowdfunding participants and clients to provide realistic bids
and offers. At the same time, in order to ensure guaranteed
trustworthiness of crowdfunding and automatic distribution of
funds, we develop and implement a smart contract to record
the crowdfunding process and training results in the blockchain.
We prove that the proposed scheme satisﬁes the budget balance
and participant constraint. Finally, we implement a prototype
of this smart contract on an Ethereoum private chain and
evaluate the proposed VCG mechanism. The experimental results
demonstrate that the proposed scheme can effectively improve
social utility while ensuring the authenticity and trustworthiness
of the crowdfunding process.

Index Terms—Federated learning, VCG Mechanism, Crowd-

funding, Truthfulness, Smart contract.

I. INTRODUCTION

Currently, Federated Learning (FL) has been widely applied
in industry as a promising distributed learning solution [1].
However, the bandwidth bottleneck between the client and
the central parameter server limits the development of FL
[2]. To overcome this shortcoming, hierarchical federation
learning (HFL) is proposed, aiming to alleviate the bandwidth
constraint by reducing the number of communications between
the client and the central parameter server [3]. A typical hierar-
chical federation learning consists of three entities, including
model owners, aggregators, and clients. But a single model
owner may not be be able to implement the training for a
particular model due to lack of resources or proﬁt, e.g., model
owners who are limited with capability cannot deploy a global
model independently [4].

To bridge this gap, an intuitive approach to assist these
to establish a mechanism of model

model owners

is

* Jie Li is the corresponding author.
This work has been submitted to the IEEE for possible publication.
Copyright may be transferred without notice, after which this version may
no longer be accessible.

to
crowdfunding, which enable multiple model owners
cooperate and train a shared global model
in HFL by
aggregating resources and apportioning cost. Developing a
model crowdfunding mechanism for multiple model owners
faces two main problems. The ﬁrst problem stems from the
fairness of the model bidder and the tenderer. Furthermore,
due to the difference in demand of model among all model
owners, the second problem is how to determine a model
that can maximize the overall utility. Therefore, a mechanism
that can obtain the true evaluation from participants, both
owners and clients, is needed in order to assess the value
of a particular model by comparing the margin between the
individual expected utility and cost.

The fairness problem of

the model crowdfunding has
been discussed in previous worsk. Lyu et al., [5] propose
a framework of FPPDL to achieve the fairness by sharing
gradient among the model owners. However,
this method
assumes the model is pre-determined. To our best known,
this is the ﬁrst paper discussing the selection of model in FL.
On the other hand, as far as the truthfulness is concerned,
many existed works mainly focus on the honesty of the
clients by implementing contract [6], auction [7] and game
theory [8]. However, these approaches will cause monopoly
and dishonesty between the model owner and the client due
to the unilateral exposure of the information of the client(e.g.
the cost, data quality). Consequently, the model owner can
exploit all margin utility from FL training by only allocating
the payment that can just compensate the cost instead of their
true utility. Therefore, the foundation of the truthfulness is
based on the equal status of information that no participants
have extra knowledge of others’ evaluation of the model,
capability of training and so forth.

In this article, we propose a smart contract based
crowdfunding FL architecture to address the above two
the target model will be
problems. As Fig. 1 shown,
selected from model owners model proposals based on other
participants’ assessment to it. The architecture leverage the
advantage of the Block chain which protects the privacy and
neutrally operate with resources based on the delicate smart
contract. The smart contract will blind the privacy among the
participants. The smart contract compares the margin utility
among all the proposed models according to the claim of
value from model owners and the claim of the cost from
clients. Furthermore, as a neutral operator, the smart contract

 
 
 
 
 
 
2

Fig. 1. The System Framework of HCFL.

can enforce the payment and other procedure during the
training. In terms of truthfulness, the application of VCG
mechanism enable the system to select the model that can
obtain the maximum social utility in this common goods
auction scenario. Considering the complexity of the VCG
mechanism, the deployment of Hierarchy Federated Learning
structure will not only lightens the communication and
non-i.i.d problems which previous works have discussed, but
also validates the VCG mechanism by limiting the number
of the participants from numerous edge devices to countable
base stations which signiﬁcantly reduces the complexity. By
combining the advantage of VCG mechanism, smart contract
and HFL, the proposed mechanism can achieve the greatest
social well-being in this particular circumstance.

Our contribution are summarized as follows:

1 We propose a smart contract-based novel trustful mecha-
nism in model crowdfunding FL scenario where multiple
model owners and clients participates the common model
training.

2 We design a feasible structure of HFL for the proposed
VCG-mechanism which reduce the complexity, preserve
privacy and lighten the drawback of VCG mechanism.
3 We demonstrate the feasibility of this proposed frame-

work in truthfulness and efﬁciency.

4 We implement the framework on CIFAR-10 and verify
the encouragement of cooperation of the VCG-HFL ar-
chitecture.

To our best knowledge, this article the ﬁrst work discussing

the truthful crowdfunding mechanism in FL.

II. RELATED WORK
Original Federated Learning framework may suffer from
the bottleneck of communication inefﬁciency such as node
failures and device dropouts in dynamic process. Bryaan Lim
et al. proposed a decentralized learning based system model
inspired by the Hierarchy Federated Learning with stable two-
level resource allocation and incentive design framework in
order to lighten the communication inefﬁciency with the help
of cluster head[1].

Vickey-Clarke-Croves mechanism is frequently applied in
Public Economics as an approach to conduct truthful common
goods auction. Thi et al. [9] illustrates the implementation of
VCG machanism in FL is a NP-hard problem and provides a
approximation algorithm for it. Zhang et al. also implement
a approximation of this mechanism to construct a faithful
edge federated learning with the tradeoff among privacy,
convergence and payment accuracy loss [10]. In this article, the
concept of cluster is implemented as the method to approach
the VCG mechanism due to the complexity of K + 1 of this
mechanism where K denotes to the number of the participants.
Note the idea of cluster in FL is similar to HFL which also
clustering the edge devices. Therefore, HFL is a potentially
ideal framework to implement the VCG mechanism. However,
the VCG mechanism applied in this work emphasizes more on
the incentive and faith in training rather than the truthfulness
in public auction.

Smart contract is crucial in coordination of a group of par-
ticipants connected through a block chain. Wu et al. proposed

S M A R T    C O N T R A C TLEVEL 2: VCG  MechanismLEVEL 1: AggregationGLOBALMODELModel Owner 1Model Owner 2Model Owner 3Model Owner 4Local ModelLocal ModelLocal ModelLocal ModelAggregator 1Aggregator 2Aggregator 3Aggregator 4ClientClientClientClient    Uploading Model Updates Downloading Global Model   Local Training  Global Model      Updatea Block-chain based trusted collaborative services framework,
BlockEdge [11]. This work leverage the smart contract which
enable the BlockEdge to achieve trustworthiness of the collab-
oration process. Shi et al. [12] implements a blockchain smart
contract for the FTIM to solve the problem of untruthfulness
and difﬁculty in enforcing payment in MPCS systems.

Most of the work related in FL incentive mechanism men-
tioned are discussed the framework applying during the train-
ing process and assume the model to be trained is determined
previously. However, the problem about how to decide the
training model fairly among all participants’ expectation in
crowdfunding scenario is remained to be explored.

III. TRUTHFUL MECHANISM DESIGN

In this section, we ﬁrst introduce the challenges in the
crowdfunding scenario in FL and the VCG mechanism which
is designed for this circumstance. Then, The details of the
framework of the FL architecture powered by a delicate
smart contract which is compatible with the proposed VCG
mechanism.

A. Crowdfunding challenges

In this article, we assume all participants are cooperative but
selﬁsh, which means their individual utility is prior to the col-
lective interests. This will lead to dishonest and irresponsible
behaviour during the crowdfunding process.

1) Dishonesty and Unfairness of

the Participants: The
supply of public goods usually can reach the maximum
efﬁciency due to the difference between the individual margin
utility and the overall margin utility. For instance, free-rider
problem describes a circumstance where an individual tend to
behave sluggishly and beneﬁt from the public goods if others
contribute considerably to this goods.

Furthermore, if one side of participants owns an unequal
position and forms a monopoly, it can exploit all margin utility
which usually will cause inefﬁciency and unfairness. The
unequal positive usually appears when the information(e.g.
the knowledge of others’ cost, evaluation and so forth), the
market power(i.e. the number of competitors) and so forth. A
traditional FL framework is a typical monopoly example due
to the fact that the model owner stands on the unequal positive
to the clients. The model owner only need to pay for the cost
of the clients rather than the true assess to the model.

2) Irresponsible Behaviour: Without punishment, the self-
ishness will encourage the participants have irresponsible
behaviours since these behaviour usually will reduce the
individual cost and increase its utility in public goods deci-
sion. In the crowdfunding scenario, the model to be trained
is selected from all the proposes from the model owners.
Technically, it is hard to evaluate all proposed models with
little cost because of the communication bottleneck, the model
assessment
technique and the unknown training condition.
Therefore, distrust will appear among the model owner if they
do not take responsibility to their proposed model which may
not be able reach the expected performance.

3

B. VCG Mechanism Design

As previously discussed, dishonesty behaviour will impede
the acquire of the maximum social utility. Therefore, To
solve the dishonesty problem, a Vickrey-Clarke-Groves(VCG)
mechanism is designed which proved to be effective in similar
public goods auction [13].
In this scenario, the social utility can be deﬁned as the margin
between the sum of the value that the training model can
yield for each individual and the cost and consumption needed
during the training process.

1) Clarke Tax: VCG mechanism is a group of mechanisms
which can provide incentive for participants to tell the truth
in auction. Based on the particular situation we are facing, a
feasible approach is to use Clarke Tax from VCG to guarantee
the authenticity of the ﬁnal result [14].

In Clarke Tax mechanism, the participants are divided into
two groups depending on whether they are the pilot. The
pilot is the participant whose participation changes the ﬁnal
outcome (e.g. by claiming a comparatively high or low bid)
and, therefore, will be required to pay the tax to compensate
the loss of others due to its participants. Meanwhile, everyone
including the pilots should pay for the cost which is indepen-
dent to their bid. Therefore, due to the independence between
the bid and the payment and the potential connection between
the bid and the tax, truth telling become the weak dominant
strategy for the participants.

Some assumption is useful in this particular condition.
1. The participants are risk neutral and rational.
2. Quasi-linear for the monetary utility.
2) Clarke Tax mechanism design:

In this particular
situation, for each proposed model m, the participant i from
the group of I owns its estimated true value vm
i , claims the
value as b(may be equal to v due to dishonesty) and receives
a ﬁnal payment c. I can be either the model owner group O
or the base station group B.

let m(cid:48) = arg max(| (cid:80)
I/i

Note that v, b, c can be positive or negative depending on
whether it is an owner or a base station. For model owner the
v and b is positive as utility and c is negative as the payment
to rewarding pool. On the contrary, for base station, the v
and b is negative as contribution and c is positive as rewards.
i − (cid:80)
cm
bm
i |) represents the most
valued model without the inﬂuence from the claim of the
participant i. Note the VCG auction will be held in both
model owner side and base station side independently.
In this scenario,
the ﬁnal
model will be different if it does not join the union. we
design the Clarke Tax as following:

is the participant

the pilot

that

I/i

1.

2.

if i is not the pilot, which indicates m = m(cid:48), it should
pay cm
if the model is chosen otherwise the payment is
i
0.
if there is a model eventually being chosen(e.g. the claim
of the value excesses the claim of the cost) and i is the
pilot, it should pay a tax of |((cid:80)
bm(cid:48)
j +
I/i
cm(cid:48)
j )|, where j ∈ I/i indicates the group of I except

j ) − ((cid:80)
cm

j + (cid:80)
bm

(cid:80)

I/i

I/i

I/i

TABLE I
THE COMMON NOTATION USED IN MODEL OWNER AND BASE STATION.

c
b
v
Cm
p
I(Group notation)

Model owner
Cost(-)
Claimed value(+)
True value(+)
Total cost for m
Capability
O

Base station
Reward(+)
Claimed cost(-)
True cost(-)
Total reward for m
Contribution
B

4

3.

i.
if ﬁnally all models’ value can not afford the cost and i
is the pilot, it should pay a tax of | (cid:80)
I/i

j + (cid:80)
cm

bm
j |.

I/i

we will use T ax(bi, b−i, c) to denote the enforced tax
payment according to this rule in the latter part of the article.
The payment c, determined by the smart contract and being
independent
to the claim, can be assigned in many ways
depending on the belief of fairness or incentive (e.g. equally
allocation ci = Cm
N or allocating by capability or contribution
ci = Cmpi
(cid:80) p ).

Although VCG mechanism can guarantee the truthfulness
there are also some obstacle of this mechanism such as
the budget balance problem and so forth.
the complexity,
Therefore, to implement this mechanism in FL, a compatible
system framework is needed which will be introduced in the
next section.

C. Hierarchy Chained Federated Learning

To implement

the VCG mechanism and solve the irre-
sponsible problem, we design a Hierarchy Chained Federated
Learning(HCFL) which can enforce the payment by a smart
contract with punishment mechanism.

1) The HCFL Architecture: Hierarchy Federated Learn-
ing(HFL) is proposed to solve the communication inefﬁciency
existing in the normal FL. Instead of cooperate with numerous
edge devices. HFL establishes countable base stations which
are aimed to cluster edge devices. The updates from edge
devices are ﬁrst aggregated to their corresponding base station
and ,then, the base stations process the obtained data and up-
load the local model to the model owner for ﬁnal aggregation.
In the scenario of crowdfunding, the model owners are also
not unique. Therefore, a block chain with a delicately designed
smart contract can collaborate the model owners and the base
stations. The block chain can record all behaviour from the
participants and implement punishment based on that when
facing malicious action.

2) Smart Contract: The smart contract can enforce the
payment and execute the training procedures. Therefore, to
implement the VCG mechanism a delicate smart contract is
needed. Particularly, the missions for the smart contract are

1 Blind direct information from each participant.
2 Announce necessary and privacy-free information to ei-

ther side.

3 Collect the Clarke Tax and recycle it.
4 Reward and Punish the participant according to their

behaviour.

Fig. 2. The Smart Contract in HCFL

5 Gather the payment from owners and allocate it to clients.

The design of the smart contract is shown in Fig.2 and the
working ﬂow for the whole procedure of HCFL is detailed
below.

3) Working Flowing: All participants should inject capital

to smart contract before the training start.

First, Model owners propose their ideal models’ and their
descriptions m(ω, M, acc, t, y) which should contain the train-
able parameters ω, the model characteristics M , the expected
accuracy acc, the training round t and the target set y. Via the
smart contract, other model owners will obtain the claim of
acc and y to determine their utility {vi
m(acc, y), i ∈ O} and
the base station will get the parameters of ω,t,M to estimate
the cost {vB
m(ω, t, M ), i ∈ B}. Note that the v are determined
by participants based on individual rationality whose criterion
may vary among them.

Then, the smart contract collect the claim of cost {bi

m, i ∈
B} from BS and the bid of price {bi
m, i ∈ O} from MO
for each proposed model. Based on VCG mechanism, the
smart contract selects the model which owns the largest margin
between the sum of the cost and the bid.

After the selection of the model, the smart contract an-
nounce the winner from the model owners whose proposed
is selected eventually. The particular model owner
model
deliver the model to the base station and start the HFL training.
At the end of the training, the winner evaluate the contri-
bution from each base station and share the global model to
other model owners. The rest of model owners will determine
whether to punish the winner based on the performance of the
shared model(e.g. Actual accuracy) and report their assessment
to the smart contract which will be recorded in the block.

Then, the smart contract selects a total amount of payment
Cm randomly but with budget balance(e.g. within the interval
of the sum of the cost and the bid (cid:80)
bm
i ),
i∈O
determines the tax, punishment and reward proportion based
on those information and executes all payments {ci
m, i ∈
{O, B}} from the down payment from all participants.

i ≥ Cm ≥ (cid:80)
bm

i∈B

SmartContract Fund Pool ProposedModelSet Block  i Block i-1 Blocki+1 ... #1 Inject Capital #2 Value Claim #2 Cost Claim #3 Training  #4 Payment  Record Manage #2 Select Model  Owner 1 Model  Owner 2 Aggregator 1 Aggregator 2 Model  Owner 3 IV. ANALYSIS OF THE SYSTEM PERFORMANCE

A. Truthfulness and Efﬁciency

1) Truth telling in auction: Clarke has provided the prove
for the Clarke Tax mechanism enable telling the truth to
become the weak dominant strategy [14].

let Ui(bi, b−i) denotes the eventual utility function for
participant i ∈ I where bi indicates the bid giving from i
and b−i means others biding and vi denotes the true value for
i.

Ui(bi, b−i) = vm

i − cm

i − T ax(bi, b−i, c)

(1)

Theorem 1 (Truth telling). Telling the true value is the

weak dominant strategy under the proposed Clarke Tax.

Ui(vi, b−i) ≥ Ui(b(cid:48)

i, b−i)

(2)

The prove for Theorem 1 is presented in Appendix A.

Intuitively, the dishonest participant will pay the tax at least
equal to the extra acquirement from lying due to the Clarke
tax mechanism.

2) Responsibility of the model: In order to encourage the
model owner to be responsible to the model its proposed,
a mechanism of punishment
is needed in case the actual
accuracy doesn’t agree with the expected one after t rounds
of training. An practicable method is to let the rest of model
owner to vote for whether to punish the winner. This approach
is established based on the assumption that all participants are
honest and are not in the competitive relation which make
no incentive to give a malicious vote. More sophisticated
approach is implement reputation mechanism which has been
discussed in previous work.

3) Tax recycle: In Clarke Tax mechanism, a potential draw-
back is the waste of the tax. To leverage the tax revenue, the
smart contract can offer a discount or price rising depending
on the side of the tax payer for the payment in the next training
round.

B. Feasibility

1) Budget Balance: The total

revenue is the sum of
payment from the owners and the tax obtained from both
side of participants and the expenditure is the rewards for the
client. Due to the fact that a model will not be trained unless
its sum of the payment exceed the total rewards, the smart
contract can therefore easily decide a payment Cm which
independent to the claim and budget balance.

Theorem 2 (Budget Balance). The proposed VCG-based

crowdfunding mechanism is budget balance.

Proof The total revenue R in round from the model owners

can be written as:

R =

(cid:88)

cm
i +

(cid:88)

T ax(bi, b−i, c) ≥ Cm

(3)

Therefore, the budget is balanced.

5

2) Participation constraint: Although the participants
are not aware of the actual payment before its execution,
the overall social utility will be positive. That means the
expectation of the utility for the participants are positive.

Deﬁnition 1 (Risk Neutral). The expected utility for risk
to the utility under expected

neutral participants is equal
crowdfunding outcome.

EU = U (E(m))

(4)

where m denotes the crowdfunding model and its connected
properties(e.g. cost, tax).
Note that,
scenario.

the average utility is positive in crowdfunding

Avg(U (m)) =

Avg(U (m)) =

1
|O|

1
|B|

(cid:88)
(

vm
i − Cm) ≥ 0, i ∈ O

(cid:88)

(Cm −

vm
i ) ≥ 0, i ∈ B

(5)

(6)

For the risk neutral participants, they can estimate their
expectation of utility before joining the crowdfunding. There-
fore, the participant will take part in the crowdfunding if it
could reach the average level(e.g. common target, capability,
contribution).

E(m), ci

Furthermore, the determination of the ﬁnal payment is a
matter of the belief of fairness and all participants are aware
of it (i.e. vi
E(m)) before join the crowdfunding. It not
only can be equally divide to everyone but also can be allo-
cated depending on the capability or contribution which can
provide incentive in FL training. Therefore, the individual who
participate in the crowdfunding all owns a positive expected
utility.

E(m) ≥ ci
vi
ci
E(m) ≥ vi

E(m), i ∈ O

E(m), i ∈ B

(7)

(8)

C. Clients’ Payment and Incentive

Note that the reward pool for client is settle before the
training process. To provide incentive for client in training,
the smart contract can allocate the reward by the contribution
of the client. The contribution can be quantiﬁed as the margin
accuracy of the local model. Due to the fact that the accuracy
owns a close connection to the data quality, the clients can
assess the expectation of the reward based on their data quality
in order to determine whether to join in the cooperation.
Furthermore, consequently, the client have the incentive to
improve the data quality and reduce their cost, which virtually
rises the efﬁciency of the HCFL.

V. EXPERIMENTAL

In this section, we ﬁrst implement the the HCFL framework
and exam the effectiveness of the smart contract. Then, we
demonstrate the proposed VCG mechanism enable truth telling
to become the weak dominate strategy. Finally, we verify the
model selected and trained in HCFL can achieve the maximum

6

Fig. 3. The accumulated utility comparison between truthfulness and dishonesty under
VCG auction.

Fig. 4. The expected accuracy for commonly interested target in Cifa10.

Fig. 5. The accumulated social utility under three different strategies.

Fig. 6. The performance of the proposed smart contract.

social utility.

In the experiment, we simulate 10 model owners and 10
base stations. For simplicity, the model is ﬁxed as Resnet50
but the target of the model is to be determined by auction.
The whole system is deployed on an Intel Core CPU Xeon
Gold 5222 with a clock rate 3.80 GHz with 16 cores and two
threads per core. The FL model is written in Python 3.8.10
and Pytorch 1.10.1. The execution operates on the Geforce
RTX 2080Ti GPU.

A. Participants’ Utility

In this section, we demonstrate the truthfulness of the VCG
mechanism by comparing the different utility between truth-
telling and dishonesty. The dishonesty is illustrated by the
possibility of the participant claiming a fake value. We set the
mean value of the model owner to be 100 Gwei(the current
unit in Ethereum) and 50 Gwei for base sation. Then, we
randomly choose a group of true value for each of them as the
proposed model assessments. The model auction is conducted
under the rule of the proposed VCG mechanism and repeated
for 100 round. The utility of participant in each round can be
calculated as the margin between the true value and the ﬁnal
payment. Fig.3 shows the accumulated utility for a random
model owner in two strategies(i.e. honesty or dishonesty).

It is apparent that the utility from truth telling is greater
than dishonesty in any stage. Furthermore, it is important
to note that the utility can be negative in a single round
and causing ﬂuctuation in the plot. However, negative utility
denotes that the commonly support model is not proﬁtable
for the particular participant. If the cooperation union is

effective, the expectation of the utility will be positive which
has discussed in Section 4.

B. Cooperation Performance

This section exams the selected model that can perform well

in commonly interested target.

we simulate 10 model owners with an random intersection
from all labels in Cifa10 to denote the common interests. Then,
we randomly expand the label set as the individual valued
target and, consequently, the proposed model target. Then, we
implement the VCG auction and select the model that can
maximize the over all utility. The base line is randomly chosen
model target. To equalize the cost between the VCG group and
the base line and simulate the resource-limited scenario, we
assume the training cost is closely related to the scale of the
data set and set the scale of the training data set to be 10000
graphs in Cifa10. The average accuracy is present in Fig.4
after 50 global epochs with 2 local epochs in each round.

Shown in Fig.4, the accuracy on the intersection is no-
ticeable greater than that on the base line. These indicates
that proposed mechanism in this article can leverage limited
resource to maximize the most valued utility, which is suitable
for those participants whose targets are similar but limited with
resource.

C. Social Utility

This section, we illustrate the proposed VCG mechanism
can lead to the efﬁcient social utility. we assign a target set
from the labels in Cifa10 to each model owner. For each
participant, each label in the target set, the value and cost

020406080100Auction Round-20002004006008001000120014001600GweiHonest30% Dishonest50% Dishonest01020304050Epoch0%20%40%60%80%100%AccuracyVCGRandom12345678910Round0200400600800100012001400GweiVCGSelfishRandom12345Transaction generation speed (Transactions/Second)051015Number of Transactions per Blockis randomly selected with mean value of 10 Gwei for model
owner and 5 Gwei for base station. The smart contract will
determine the model under by three strategies: 1) Random
selection 2)Selﬁsh 3)VCG auction. The selﬁsh strategy is to
ﬁnd the intersection among the model owners. The social
utility is quantiﬁed as the margin between the total value and
the cost multiply by the average accuracy of the model after
training. After 10 rounds of training, the accumulated social
utility is shown in Fig.5. In the experiment, we guarantee the
existence of the intersection in order to conduct the selﬁsh
strategy in each round, which may overrate the capability of
the selﬁsh strategy.

Note that the accumulated social utility of the VCG auction
is always larger than the other two strategies. This veriﬁes
that the VCG mechanism is able to select the model that can
achieve the maximum social utility from all model proposals.

D. Smart Contract Performance

This section is aimed to validate the feasibility of deploying
the VCG mechanism based on smart contract considering the
transaction efﬁciency.

Fig.6 shows the performance of the proposed smart contract.
As can be seen from Fig.6, the number of transactions con-
tained in the block increases with the rate of task generation
and subsequently reaches saturation when the transaction
generation speed is around 2 transactions per second. This
the proposed framework is able to operate
indicates that
under a acceptable transaction speed, which validates the
effectiveness of the proposed scheme.

VI. FUTURE WORK

A. Model Evaluation

In this article, we assume the participants can rationally
evaluate the value and the cost of each proposed model.
However, for the clients and base station, the cost for each
model is complicated. On the another hand, for the model
owner, how to select a desirable model that can fulﬁll the
expectation is remain to explore.

B. Incentive

Although many works have discussed the incentive mecha-
nism in FL, the situation in this scenario has a little difference
that the total rewarding pool is pre-determined before the
training. That means no matter how the eventual performance
of the model is, the total payment for the clients is the same
which may cause failure if a considerable amount of clients
dawdle. We have discussed the incentive and punishment in the
Discussion section, but the details of the particular mechanism
is remained to be reﬁned.

C. Feasibility in other scenario

The scenario in this article is limited in cooperation among
the participants who owns similar target, which means it is
more suitable for horizontal federated learning. The feasibility

7

in vertical federated learning is remained to be veriﬁed. Fur-
thermore, crowdfunding with VCG mechanism may be poten-
tially practicable in other scenario where individual needs but
lacks resource. For instance, in mobile cloud computing, the
individual device is resource-hungry but resource-constrained
[15].

VII. CONCLUSION
In this article, we introduce a smart contract based hi-
erarchy federated learning architecture(HCFL) which enable
capability-limited model owners to cooperate truthfully and
efﬁciently in a crowdfunding scenario. A smart contract is
deployed in HCFL to enforce the procedure and preserve
the equal statue between the model owners and the base
stations. Leveraging the VCG mechanism, the smart contract
of HCFL can obtain the honest claim of assessment from both
model owner and the base station and, consequently, is able
to determine the model that could bring the greatest social
utility. We conduct a thorough discussion of the properties
of HCFL and implement several simulations to demonstrate
the effectiveness of the mechanism which indicates that the
HCFL can beneﬁt the participants who are cooperative in this
crowdfunding scenario.

A. Demonstration for Theorem 1

VIII. APPENDIX

Here, we offer the demonstration of the validity of the
Clarke Tax mechanism(i.e. the truth telling is at least weak
dominant strategy). The model owner side will the sample of
this demonstration and that of device side is similar. We start
from the true telling situation and show that lying will lead to
worse-off.

Case 1: (cid:80) bm

i ≥ cm, ((cid:80)

i − (cid:80)
bm

and (vm

i + (cid:80)

j − cm) ≥ (vm(cid:48)
bm

i + (cid:80)

I/i

I/i

j ) ≥ ((cid:80)
cm
I/i
bm(cid:48)
j − cm(cid:48))

I/i

I/i

j − (cid:80)
bm(cid:48)

cm(cid:48)
j )

I/i

i giving a bid bm(cid:48)

Here, the participant i is not the pilot for it does not affect
the ﬁnal decision. Therefore, the payment is cm
i . The utility
for i is ui = vm
i − cm
i . If i try to vary its bid to change the
i = vm
i < vm
i > bm
outcome(i.e. when cm
i
i − cm
it will remain to be not the pilot and pay is still vm
i .
i and it bids a price bm(cid:48)
However, if cm
i and
eventually change the decision, it becomes the pilot and pays
i − (cid:80)
(| (cid:80)
bm(cid:48)
I/i
I/i
we then need prove:
i −cm
vm

i | − | (cid:80)
C m

i − (cid:80)
bm

i ≥ vm(cid:48)

i −cm(cid:48)

i < bm

i = vm

i > vm

cm
j )−(

bm(cid:48)
j −

i −((

bm
j −

C m(cid:48)
i

(cid:88)

(cid:88)

(cid:88)

(cid:88)

I/i

I/i

|)

cm(cid:48)
j )),

I/i

I/i

I/i

I/i

i ≥ vm(cid:48)
vm
i + (cid:80)

i + Cm − Cm(cid:48) − (cid:80)
j − Cm) ≥ (vm(cid:48)
bm

i + (cid:80)

bm(cid:48)
j

j + (cid:80)
bm
bm(cid:48)
j − Cm(cid:48))

I/i

I/i

(vm

I/i

I/i

(9)

(10)

Therefore, for i,
i = bm
i ).

honest(e.g. vm

the weak dominant strategy is to be

Case 2: (cid:80) bm(cid:48)

(cid:80)

C m(cid:48)

j ) and (vm

i ≥ cm(cid:48), ((cid:80)
i + (cid:80)

j − (cid:80)
bm
j − Cm) ≥ (vm(cid:48)
bm

bm(cid:48)
j −

j ) ≤ ((cid:80)
cm
I/i
bm(cid:48)
j − Cm(cid:48)):

i + (cid:80)

I/i

I/i

I/i
In this situation, i is the pilot if it is honest. The utility for it
is

I/i

I/i

ui = vm

i −cm

i +(

(cid:88)

I/i

bm
j −

(cid:88)

I/i

(cid:88)

cm
j )−(

(cid:88)

bm(cid:48)
j −

cm(cid:48)
j ) (11)

I/i

I/i

Then, by rearranging the order, we have

8

Case 5: max

((cid:80) bm
i is ui = 0. if it rises its price(e.g. bm
pilot

i − cm) < 0 : Apparently, the utility for
i > vm
i ) and become the

M

i = vm
u(cid:48)

i − cm

i −

cm
i +

(cid:88)

I/i

(cid:88)

I/i

i = vm
bm

i +

(cid:88)

I/i

bm
i − Cm < 0

(19)

Therefore, the weak dominant strategy for i is still to be

honest.

In conclusion, this Clarke Tax mechanism can guarantee the

ui = vm

i − Cm +

bm
j −

(cid:88)

I/i

(cid:88)

I/i

bm(cid:48)
i + Cm(cid:48) ≥ vm(cid:48)

i − cm(cid:48)

i

truthful biding.

(12)

If it bids a higher price than vm

i , the utility remains the
same. And is it bids a lower price and cause the variation of the
ﬁnal decision, the current model will fail from the selection.
According to Eq.(3), this is not a rational strategy.

Therefore, the weak dominant strategy for i is still to be

honest.

Case 3: (cid:80) bm

and (vm

i + (cid:80)

I/i

j − (cid:80)
bm

i ≥ cm, ((cid:80)
j − Cm) ≤ (vm(cid:48)
bm

I/i

I/i

i + (cid:80)

j − (cid:80)
bm(cid:48)

j ) ≥ ((cid:80)
cm
bm(cid:48)
j − Cm(cid:48)) : In this

cm(cid:48)
j )

I/i

I/i

I/i

situation the participant i is also the pilot. However, the model
fails in the selection which leads to pure tax for i. Its utility
is:
ui = vm(cid:48)

cm(cid:48)
j ) (13)

i −cm(cid:48)

cm
j )+(

bm(cid:48)
j −

bm
j −

i −(

(cid:88)

(cid:88)

(cid:88)

(cid:88)

I/i

I/i

I/i

I/i

If it continually lower its bid, the utility won’t change. On
the contrary, if it rises its bid and change the outcome(e.g. m
wins in the selection). The utility for it is:

i = vm
u(cid:48)

i − cm
i

(14)

ui −u(cid:48)

i = Cm +

(cid:88)

I/i

bm(cid:48)
j −

(cid:88)

I/i

j −Cm(cid:48) +vm(cid:48)
bm

i −vm

i ≥ 0 (15)

Therefore, the weak dominant strategy for i is still to be

honest.

Case 4: (cid:80) bm(cid:48)

and (vm

i + (cid:80)
to Case 1, the utility is

I/i

i ≥ cm(cid:48), ((cid:80)
j − Cm) ≤ (vm(cid:48)
bm

j −(cid:80)
bm
i + (cid:80)

j −(cid:80)
bm(cid:48)

j ) ≤ ((cid:80)
cm
bm(cid:48)
j − Cm(cid:48)) : Similar

cm(cid:48)
j )

I/i

I/i

I/i

I/i

I/i

ui = vm(cid:48)

i − cm(cid:48)

i

(16)

If i rises its price and become the pilot, its utility is
(cid:88)

(cid:88)

(cid:88)

(cid:88)

i = vm
u(cid:48)

i −cm

i +(

bm
j −

cm
j )−(

bm(cid:48)
j −

cm(cid:48)
j ) (17)

I/i

I/i

I/i

I/i

ui −u(cid:48)

i = vm(cid:48)

i −vm

i +Cm −Cm(cid:48) −

(cid:88)

I/i

bm
j +

(cid:88)

I/i

bm(cid:48)
j ≥ 0 (18)

Therefore, the weak dominant strategy for i is still to be

honest.

REFERENCES

[1] P. Kairouz, H. B. McMahan, B. Avent, A. Bellet, M. Bennis, A. N.
Bhagoji, K. Bonawitz, Z. Charles, G. Cormode, R. Cummings et al.,
“Advances and open problems in federated learning,” Found. Trends
Mach. Learn., vol. 14, no. 1–2, pp. 1–210, 2021.

[2] S. Luo, X. Chen, Q. Wu, Z. Zhou, and S. Yu, “Hfel: Joint edge asso-
ciation and resource allocation for cost-efﬁcient hierarchical federated
edge learning,” IEEE Transactions on Wireless Communications, vol. 19,
no. 10, pp. 6535–6548, 2020.

[3] J. Ren, Y. He, D. Wen, G. Yu, K. Huang, and D. Guo, “Scheduling
for cellular federated edge learning with importance and channel aware-
ness,” IEEE Transactions on Wireless Communications, vol. 19, no. 11,
pp. 7690–7703, 2020.

[4] W. Wen, Z. Chen, H. H. Yang, W. Xia, and T. Q. Quek, “Joint scheduling
and resource allocation for hierarchical federated edge learning,” IEEE
Transactions on Wireless Communications, 2022.

[5] L. Lyu, J. Yu, K. Nandakumar, Y. Li, X. Ma, J. Jin, H. Yu, and K. S.
Ng, “Towards fair and privacy-preserving federated deep models,” IEEE
Transactions on Parallel and Distributed Systems, vol. 31, pp. 2524–
2541, 11 2020.

[6] N. Ding, Z. Fang, and J. Huang, “Optimal contract design for efﬁcient
federated learning with multi-dimensional private information,” IEEE
Journal on Selected Areas in Communications, vol. 39, pp. 186–200, 1
2021.

[7] Y. Jiao, P. Wang, D. Niyato, B. Lin, and D. I. Kim, “Toward an
automated auction framework for wireless federated learning services
market,” IEEE Transactions on Mobile Computing, vol. 20, pp. 3034–
3048, 10 2021.

[8] W. Y. B. Lim, J. S. Ng, Z. Xiong, J. Jin, Y. Zhang, D. Niyato,
C. Leung, and C. Miao, “Decentralized edge intelligence: A dynamic
resource allocation framework for hierarchical federated learning,” IEEE
Transactions on Parallel and Distributed Systems, vol. 33, pp. 536–550,
3 2022.

[9] T. H. T. Le, N. H. Tran, Y. K. Tun, M. N. H. Nguyen, S. R. Pandey,
Z. Han, and C. S. Hong, “An incentive mechanism for federated learning
in wireless cellular networks: An auction approach,” IEEE Transactions
on Wireless Communications, vol. 20, pp. 4874–4887, 8 2021.

[10] M. Zhang, E. Wei, and R. Berry, “Faithful edge federated learning:
Scalability and privacy,” IEEE Journal on Selected Areas in Communi-
cations, vol. 39, pp. 3790–3804, 12 2021.

[11] B. Wu, K. Xu, Q. Li, S. Ren, Z. Liu, and Z. Zhang, “Toward blockchain-
powered trusted collaborative services for edge-centric networks,” IEEE
Network, vol. 34, pp. 30–36, 3 2020.

[12] F. Shi, Z. Qin, D. Wu, and J. McCann, “Mpcstoken: Smart contract
enabled fault-tolerant incentivisation for mobile p2p crowd services.”
IEEE, 7 2018, pp. 961–971.

[13] H. R. Varian, Intermediate Microeconomics: A Modern Approach,

9th ed. New York : W.W. Norton, 2014.

[14] E. H. Clarke, “Multipart pricing of public goods,” 1971.
[15] X. Chen, L. Jiao, W. Li, and X. Fu, “Efﬁcient multi-user computation

ofﬂoading for mobile-edge cloud computing,” 10 2015.

