Optimal Transmission of Multi-Quality Tiled 360
VR Video by Exploiting Multicast Opportunities

Kaixuan Long, Ying Cui, Chencheng Ye
Shanghai Jiao Tong University, China

Zhi Liu
Shizuoka University, Japan

0
2
0
2

n
a
J

7

]
T
I
.
s
c
[

1
v
6
0
9
1
0
.
1
0
0
2
:
v
i
X
r
a

Abstract—In this paper, we would like to investigate funda-
mental
impacts of multicast opportunities on efﬁcient trans-
mission of a 360 VR video to multiple users in the cases
with and without transcoding at each user. We establish a
novel mathematical model that reﬂects the impacts of multicast
opportunities on the average transmission energy in both cases
and the transcoding energy in the case with user transcoding,
and facilitates the optimal exploitation of transcoding-enabled
multicast opportunities. In the case without user transcoding,
we optimize the transmission resource allocation to minimize
the average transmission energy by exploiting natural multicast
opportunities. The problem is nonconvex. We transform it to
an equivalent convex problem and obtain an optimal solution
using standard convex optimization techniques. In the case
with user transcoding, we optimize the transmission resource
allocation and the transmission quality level selection to minimize
the weighted sum of the average transmission energy and the
transcoding energy by exploiting both natural and transcoding-
enabled multicast opportunities. The problem is a challenging
mixed discrete-continuous optimization problem. We transform it
to a Difference of Convex (DC) programming problem and obtain
a suboptimal solution using a DC algorithm. Finally, numerical
results demonstrate the importance of effective exploitation of
transcoding-enabled multicast opportunities in the case with user
transcoding.

Index Terms—virtual reality, 360 video, multi-quality, convex

optimization, DC programming.

I. INTRODUCTION

A Virtual Reality (VR) video is generated by capturing a
scene of interest in every direction at the same time using
omnidirectional cameras. A captured video is stitched and
warped onto a 3D sphere, and then projected to a 2D map
using projection methods. The resulting video is referred to as
a 360 VR video. The most commonly used projection method
is equirectangular projection which projects a 3D sphere onto
a rectangle [1]. A user wearing a VR headset or Head Mounted
Display (HMD) can freely watch the scene of interest in
any viewing direction at any time, hence enjoying immersive
viewing experience. VR has vast applications in entertainment,
education, medicine, etc. It is predicted that the VR market
will reach 30 billion USD by 2020 [2].

Increasing effort has been devoted to wireless transmission
of 360 VR videos. A 360 VR video is of a much larger
size than a traditional video. Thus, transmitting an entire 360
VR video brings a heavy burden to wireless networks. In
addition, at any moment a user watching a 360 VR video is
interested in only one viewing direction. Thus, transmitting
an entire 360 VR video is also unnecessary. To improve

transmission efﬁciency for 360 VR videos, tiling technique
is widely adopted. Speciﬁcally, a 360 VR video is divided
into smaller rectangular segments of the same size, referred
to as tiles. Suppose future ﬁeld-of-views (FoVs) of a user
can be successfully predicted. Then, transmitting the set of
tiles covering each predicted FoV can save communications
resource without degrading the user’s quality of experience
(QoE). A VR user may change viewing directions from time to
time. To tolerate the inaccuracy of viewing direction prediction
and avoid view switch delay, the set of tiles covering the FoVs
that may be watched shortly are transmitted. In this paper, we
focus on the transmission of a 360 VR video to multiple users
instead of viewing direction prediction, assuming that the set
of tiles to be transmitted to each user have been determined.
In our previous work [3], [4], we consider optimal transmis-
sion of a single-quality tiled 360 VR video in a TDMA system
and an OFDMA system, respectively, by exploiting multicast
opportunities. In [5]–[7], the authors consider transmission
of a multi-quality tiled 360 VR video in singer-user wireless
networks and focus on the optimal quality level selection for
each tile to be transmitted. The proposed solutions in [5]–
[7] may not imply efﬁcient multicast of a multi-quality tiled
360 VR video, as optimal resource sharing among users
with heterogeneous channel conditions is not considered and
multicast opportunities are ignored. In [8], [9], the scenario
of transmitting a multi-quality tiled 360 VR video to multiple
users is considered, and multicast opportunities are utilized to
improve transmission efﬁciency. Speciﬁcally, [8] optimizes the
quality level selection for each tile to be transmitted to maxi-
mize the total utility of all users under some communications
resource constraints. The size of the optimization problem is
unnecessarily large, as tiles are considered separately. In our
previous work [9], we study the optimal quality level selection
to maximize the total utility of all users under communications
resource constraints and quality smoothness constraints for
adjacent tiles. In contrast with [8], in [9] we partition the set
of tiles to be transmitted into subsets with different subsets
for different user groups, and consider the optimization with
respect to the subsets of tiles to effectively reduce compu-
tational complexity. Note that [8], [9] neglect the fact that
channel conditions of users change much faster than their
FoVs. Hence, the proposed single timescale solutions in [8],
[9] may not yield desired performance in practical systems. In
addition, [8], [9] exploit only natural multicast opportunities
and do not consider transcoding (converting a representation

 
 
 
 
 
 
of a tile at a certain quality level to a representation at a lower
quality level using transcoding tools such as FFmpeg) at the
user side. On one hand, user transcoding can create multicast
opportunities, and hence save communications resource. On
the other hand, transcoding at the user side consumes compu-
tation resource. How to optimally create transcoding-enabled
multicast opportunities for saving overall system resources
remains an open problem.

In this paper, we would like to investigate fundamental
impacts of multicast opportunities on efﬁcient transmission
of a multi-quality tiled 360 VR video to multiple users in the
cases with and without transcoding at each user. In contrast
with [8], [9], we ensure that all tiles in a user’s FoV are
played at the same quality, and we consider the practical
scenario where users’ channel conditions and FoVs change at
two timescales. First, we introduce an elegant notation system
for partitioning all tiles into subsets, each for a particular
group of users, and specifying the relation between a subset
of tiles and their target user group. Then, we establish a novel
mathematical model that reﬂects the impacts of multicast
opportunities on the average transmission energy in both cases
and the transcoding energy in the case with user transcoding,
and facilitates the optimal exploitation of transcoding-enabled
multicast opportunities. In the case without user transcoding,
we optimize the transmission resource allocation to minimize
the average transmission energy by exploiting natural multi-
cast opportunities. The problem is nonconvex. We transform
it to an equivalent convex problem and obtain an optimal
solution using standard convex optimization techniques. In
the case with user transcoding, we optimize the transmission
resource allocation and the transmission quality level selection
to minimize the weighted sum of the average transmission
energy and the transcoding energy by exploiting both natural
and transcoding-enabled multicast opportunities. The prob-
lem is a challenging mixed discrete-continuous optimization
problem. We transform it to a Difference of Convex (DC)
programming problem and obtain a suboptimal solution using
a DC algorithm. To the best of our knowledge, this is the ﬁrst
work exploiting transcoding-enabled multicast opportunities
for efﬁcient transmission of a multi-quality tiled VR video
to multiple users. Finally, numerical results demonstrate the
importance of effective exploitation of transcoding-enabled
multicast opportunities in the case with user transcoding.

II. SYSTEM MODEL

As illustrated in Fig. 1, we consider downlink transmission
of a multi-quality tiled 360 VR video from a single-antenna
server (e.g., base station or access point) to K (≥ 1) single-
antenna users each wearing a VR headset in a TDMA system.
Let K , {1, ..., K} denote the set of user indices. A user may
be interested in one viewing direction at sometime, and freely
switch to another viewing direction after a while.

We consider tiling to enable ﬂexible transmission of nec-
essary FoVs so as to improve transmission efﬁciency of the
360 VR video. Speciﬁcally, the 360 VR video is divided into
M × N rectangular segments of the same size, referred to as

2

tiles, where M and N represent the numbers of segments in
each column and row, respectively. Deﬁne M , {1, ..., M }
and N , {1, ..., N }. The (m, n)-th tile refers to the tile in the
m-th row and the n-th column, for all m ∈ M and n ∈ N .
Considering user heterogeneity (e.g., in cellular usage costs,
display resolutions of devices, channel conditions, etc.), we
pre-encode each tile into L representations corresponding to L
quality levels using HEVC or H.264, as in Dynamic Adaptive
Streaming over HTTP (DASH). Let L , {1, ..., L} denote
the set of quality levels. For all l ∈ L, the l-th representation
of each tile corresponds to the l-th lowest quality. For ease
of exposition, assume that tiles with the same quality level
have the same encoding rate. The encoding rate of the l-th
representation of a tile is denoted by Dl (in bits/s). Note that
D1 < D2 < ... < DL.

We study the system for the duration of the playback time
of multiple groups of pictures (GOPs),1 over which the FoV
of each user does not change. Let rk denote the quality
requirement for user k ∈ K, where

(1)
Note that due to the video coding structure, r , (rk)k∈K is
ﬁxed during the considered time duration.

rk ∈ L,

k ∈ K.

To avoid view switch delay, for each user, the set of tiles
that cover the FoVs that may be watched shortly will be
delivered. Let Gk denote the set of indices of the tiles that
need to be transmitted to user k, and let G ,
k∈K Gk denote
the set of indices of the tiles that need to be transmitted
considering all K users. For all S ⊆ K, S 6= ∅, let PS ,
denote the set of indices of
(cid:17)
(cid:0)T
the tiles that are needed by all users in S and are not needed by
the users in K\S.2 Then P , {PS | PS 6= ∅, S ⊆ K, S 6= ∅}
forms a partition of G and I , {S | PS 6= ∅, S ⊆ K, S 6= ∅}
speciﬁes the user sets corresponding to the partition. In
contrast with [8], for all S ∈ I, we jointly consider the tiles
in PS instead of treating them separately.

k∈K\S Gk

k∈S Gk

(cid:1) T (cid:16)

G −

S

S

=

3,
{(2, 4),(3, 4),(2, 5),(3, 5),(2, 6),(3, 6)},

Example 1 (Illustration of P and I): As illustrated
in Fig. 1, we consider K = 3, M = 4, N = 8,
G1={(1, 3),(2, 3),(1, 4),(2, 4),(1, 5),(2, 5)},
L
G3=
G2=
{(3, 5),(4, 5),(3, 6),(4, 6),(3, 7),(4, 7)}. Then, we
have
P{1} = {(1, 3), (2, 3), (1, 4), (1, 5)}, P{2} = {(3, 4), (2, 6)},
P{3} = {(4, 5), (4, 6), (3, 7), (4, 7)}, P{1,2} = {(2, 4), (2, 5)},
P{2,3} = {(3, 5), (3, 6)}, P{1,3} = ∅, P{1,2,3} = ∅,
and
P
I = {{1}, {2}, {3}, {1, 2}, {2, 3}}.

P{1}, P{2}, P{3}, P{1,2}, P{2,3}

=

(cid:8)

(cid:9)

We consider a discrete narrowband system of bandwidth
B (in Hz). For an arbitrary time frame of duration T (in
seconds),3 let Hk ∈ H denote the random channel state of
user k, representing the power of the channel between user k
and the server, where H denotes the ﬁnite channel state space.
Let H , (Hk)k∈K ∈ HK denote the random system channel

1The duration of the playback time of one GOP is usually 0.5-1 seconds.
2Note that for all S ⊆ K, S 6= ∅ such that PS 6= ∅, the quality levels

for the tiles in PS needed by the users in S may be different.

3Note that T is about 0.005 second.

(cid:23449)(cid:23468)(cid:23463)(cid:23464)(cid:23474)(cid:23395)(cid:23478)(cid:23479)(cid:23468)(cid:23479)(cid:23462)(cid:23467)(cid:23468)(cid:23473)(cid:23466)
(cid:23432)(cid:23463)(cid:23468)(cid:23479)(cid:23468)(cid:23473)(cid:23466)
(cid:23432)(cid:23473)(cid:23462)(cid:23474)(cid:23463)(cid:23468)(cid:23473)(cid:23466)

(cid:23449)(cid:23445)(cid:23395)(cid:23462)(cid:23460)(cid:23475)(cid:23479)(cid:23480)(cid:23477)(cid:23464)(cid:23395)
(cid:23478)(cid:23484)(cid:23478)(cid:23479)(cid:23464)(cid:23472)

(cid:23447)(cid:23468)(cid:23471)(cid:23464)(cid:23463)(cid:23395)(cid:23475)(cid:23477)(cid:23474)(cid:23469)(cid:23464)(cid:23462)(cid:23479)(cid:23464)(cid:23463)(cid:23395)(cid:23414)(cid:23417)(cid:23411)(cid:23395)
(cid:23481)(cid:23468)(cid:23463)(cid:23464)(cid:23474)(cid:23395)(cid:23468)(cid:23473)(cid:23395)(cid:23463)(cid:23468)(cid:23465)(cid:23465)(cid:23464)(cid:23477)(cid:23464)(cid:23473)(cid:23479)(cid:23395)
(cid:23476)(cid:23480)(cid:23460)(cid:23471)(cid:23468)(cid:23479)(cid:23468)(cid:23464)(cid:23478)

l=3

l=2

l=1

3

(cid:23446)(cid:23464)(cid:23477)(cid:23481)(cid:23464)(cid:23477)

n

   1     2     3     4     5     6      7     8

1

2

3

4

m

(cid:23448)(cid:23478)(cid:23464)(cid:23477)(cid:23412)

(cid:23448)(cid:23478)(cid:23464)(cid:23477)(cid:23413)

(cid:23448)(cid:23478)(cid:23464)(cid:23477)(cid:23414)

Fig. 1: System model. K = 3, M = 4, N = 8, L = 3, G1={(1, 3),(2, 3),(1, 4),(2, 4),(1, 5),(2, 5)}, G2=
{(2, 4),(3, 4),(2, 5),(3, 5),(2, 6),(3, 6)}, G3= {(3, 5),(4, 5),(3, 6),(4, 6),(3, 7),(4, 7)}, r1 = 1, r2 = 2 and r3 = 2.

state in an arbitrary time frame, where HK represents the
ﬁnite system channel state space. We assume that the server
is aware of the system channel state H at each time frame.
Suppose the random system channel states over time frames
are i.i.d. The probability of the random system channel state
H at each time frame being h , (hk)k∈K ∈ HK is given by
qH(h) , Pr[H = h].

We consider TDMA.4 Consider an arbitrary time frame.
We consider multicast. That is, one representation of each
tile is transmitted at most once to serve possibly multiple
users simultaneously. The time allocated to transmit the l-th
representations of the tiles in PS under h, denoted by th,S,l,
satisﬁes:

th,S,l ≥ 0, h ∈ HK, S ∈ I, l ∈ L.

(2)
time allocation

In addition, we have the following total
constraint under h:

l∈L

P

P

S∈I

(cid:2)P

XS∈I X

th,S,l ≤ T, h ∈ HK.

l∈L tH,S,lpH,S,l

(3)
The power allocated to transmit the l-th representations of the
tiles in PS under h, denoted by ph,S,l, satisﬁes:
ph,S,l ≥ 0, h ∈ HK, S ∈ I, l ∈ L.
(4)
The transmission energy per time frame under h at the server
l∈L th,S,lph,S,l, and the average transmission en-
is
ergy per time frame is E
, where
S∈I
the expectation is taken over H ∈ HK. Considering joint
coding over time, for all S ∈ I, the maximum transmission
rate of the l-th representations of the tiles in PS to user
k ∈ S is given by B
(in bits/s),
T
where n0 is the power of the complex additive white Gaussian
channel noise at each receiver. To guarantee that there is no
stalls during the video playback for the l-th representations of
the tiles in PS at user k ∈ S, we have the following successful
transmission constraint:
|PS|Dl ≤

pH,S,lHk
n0
(cid:20)
where |PS| denotes the number of tiles in PS.

tH,S,l log2
h

tH,S,l log2 (cid:18)

1 + pH,S,lHk

B
T

1 +

(cid:19)(cid:21)

(5)

(cid:17)i

P

E

E

(cid:16)

n0

(cid:3)

,

In Section III, we consider the case where the users cannot
transcode the received tiles. In Section IV, we consider the
case where all users can transcode the received tiles using

4TDMA is more analytically tractable and has applications in WiFi
systems. In addition, the multicast transmission schemes and the optimization
frameworks for TDMA systems can be extended to OFDMA systems, multi-
user MIMO systems, etc.

transcoding tools such as FFmpeg. That is, each user can
convert a representation of a tile at a certain quality level
to a representation at a lower quality level. Speciﬁcally, in
Section III, without considering transcoding at users, we
study optimal transmission of the multi-quality tiled 360 VR
video by exploiting natural multicast opportunities; and in
Section IV, allowing transcoding at users, we study opti-
mal transmission of the multi-quality tiled 360 VR video
by exploiting both natural and transcoding-enabled multicast
opportunities.

III. OPTIMAL TRANSMISSION WITHOUT USER
TRANSCODING

In this section, we consider the case without user transcod-
ing and minimize the average transmission energy under given
quality requirements of all users. In this case, for all k ∈ K,
the rk-th representations of the tiles in Gk must be successfully
transmitted to user k. For some S ∈ I, if there exist k, k′ ∈ S
such that rk = rk′ , then the server can multicast the rk-th (i.e.,
rk′ -th) representations of the tiles in PS to simultaneously
serve user k and user k′. We refer to this type of multicast
opportunities as natural multicast opportunities.

Example 2 (Illustration of Natural Multicast Opportunities):
Consider the same setup as in Example 1. The server can
unicast the ﬁrst representations of the tiles in P{1} and P{1,2}
to user 1, the second representations of the tiles in P{1,2}
and P{2} to user 2, and the second representations of the
tiles in P{3} to user 3, separately. In addition, in the case
without user transcoding, the server can multicast the second
representations of the tiles in P{2,3} to user 2 and user 3, by
exploiting natural multicast opportunities.

When user transcoding is not considered, the server has to
transmit the rk-th representations of the tiles in Gk to user k,
so that user k’s FoV can be played at quality level rk. Thus,
the successful transmission constraints in (5) become:
tH,S,rk log2 (cid:18)

pH,S,rk Hk
n0

|PS|Drk ≤

B
T

1 +

E

(cid:20)

,

(6)
For given quality requirements of all users r, we would
like to optimize the transmission time t , (th)h∈HK and
power p , (ph)h∈HK allocation to minimize the average
transmission energy subject to the transmission time allocation

(cid:19)(cid:21)
S ∈ I, k ∈ S.

constraints in (2), (3), transmission power constraints in (4),
and successful transmission constraints in (6). Speciﬁcally, for
given r, we have the following problem.

Problem 1 (Energy Minimization without User Transcod-

ing):

E⋆ , min
t,p
s.t.

E

hXS∈I X
(2), (3), (4), (6).

l∈L

tH,S,lpH,S,l

i

Let (t⋆, p⋆) denote an optimal solution of Problem 1.

Problem 1 is nonconvex. By a change of variables, i.e.,
using eh,S,l , th,S,lph,S,l (representing the transmission
energy for the l-th representations of the tiles in PS under
h) instead of ph,S,l for all h ∈ HK, S ∈ I, l ∈ L, we can
equivalently convert Problem 1 to the following problem that
is convex.

Problem 2 (Convex Formulation of Problem 1):

E

E⋆ , min
t,e
(2), (3),
eh,S,l ≥ 0, h ∈ HK, S ∈ I, l ∈ L,

hXS∈I X

eH,S,l

l∈L

i

s.t.

(7)

|PS|Drk ≤

E

B
T

tH,S,rk log2 (cid:18)

1 +

(cid:20)

eH,S,rkHk
tH,S,rkn0 (cid:19)(cid:21)

,

Let (t⋆, e⋆) denote an optimal solution of Problem 2.

Then, we can obtain an optimal solution of Problem 2 using

standard convex optimization techniques.

S ∈ I, k ∈ S.

(8)

IV. OPTIMAL TRANSMISSION WITH USER TRANSCODING
In this section, we consider the case with user transcoding
and minimize the weighted sum of the average transmission
energy and the transcoding energy under given quality require-
ments of all users. In this case, for all k ∈ K, a representation
of a tile in Gk of a quality level no smaller than rk must
be successfully transmitted to user k. For some S ∈ I, if
there exist k, k′ ∈ S such that rk > rk′ , then the server
can multicast the rk-th representations of the tiles in PS to
simultaneously serve user k and user k′, with user k directly
playing the received rk-th representations of the tiles, and
user k′ ﬁrst converting the rk-th representations to the rk′ -th
representations and then playing them. We refer to this type
of multicast opportunities as transcoding-enabled multicast
opportunities.

Example 3: (Illustration of Transcoding-Enabled Multicast
Opportunities): Consider the same setup as in Example 1. The
server can unicast the ﬁrst representations of the tiles in P{1}
to user 1, the second representations of the tiles in P{2} to user
2, and the second representations of the tiles in P{3} to user
3, separately. As in Example 2, the server can multicast the
second representations of the tiles in P{2,3} to user 2 and user
3, by exploiting natural multicast opportunities. Besides, the
server can multicast the second representations of the tiles in
P{1,2} to user 1 and user 2, by exploiting transcoding-enabled
multicast opportunities. User 2 directly plays the received
second representations of the tiles, and user 1 ﬁrst converts
the second representations to the ﬁrst representations and then
plays the ﬁrst representations of the tiles in P{1,2}. It is

(cid:19)(cid:21)
S ∈ I, k ∈ S, l ∈ L.

4

clear that user transcoding can create multicast opportunities,
enabling more efﬁcient transmission.

First, we establish a mathematical model to characterize
the impacts of natural and transcoding-enabled multicast op-
portunities. We introduce transmission quality level selection
variables y , (yS,k,l)S∈I,k∈S,l∈L, where

yS,k,l ∈ {0, 1}, S ∈ I, k ∈ S, l ∈ L,

(9)

l∈L

X

yS,k,l = 1, S ∈ I, k ∈ S.

(10)
Here, yS,k,l = 1 indicates that the server will transmit the
l-th representation of each tile in PS to user k ∈ S, and
yS,k,l = 0 otherwise. (10) ensures that the server transmits
only one representation of each tile in PS to user k ∈ S.
The quality level of the representation of each tile in PS
to be transmitted to user k is given by
l∈L lyS,k,l. With
transcoding, to guarantee that user k’ FoV can be played at
quality level rk, it is sufﬁcient to require:

P

lyS,k,l ≥ rk, S ∈ I, k ∈ S,

(11)

l∈L

X

and the successful transmission constraints in (5) become:
tH,S,l log2 (cid:18)

pH,S,lHk
n0

|PS|DlyS,k,l ≤

B
T

1 +

E

(cid:20)

,

(12)
Besides view transmission, user transcoding also consumes
energy. For ease of exposition, we assume that at each user,
the transcoding energy (per time frame) for reducing the
tiles by one are the same. Let Ek
quality levels of all
denote the transcoding energy (per time frame) at user k
for reducing the quality level of the representation of a
tile by one. Considering heterogeneous hardware conditions
at different users, we allow Ek, k ∈ K to be different.
Then, the weighted sum of the average transmission energy
and the transcoding energy per time frame at all users
. The weighted
is
sum of the average transmission energy and the transcoding
energy per time frame is E
+
, where β ≥ 1 is
β
the corresponding weight factor. Note that β > 1 means
(cid:1)
imposing a higher cost on the energy consumption for user
devices due to their limited battery powers.

S∈I
l∈L lyS,k,l − rk
P

l∈L tH,S,lpH,S,l

l∈L lyS,k,l − rk

k∈S |PS|Ek

k∈S |PS|Ek

(cid:0)P

(cid:0)P

(cid:2)P

S∈I

S∈I

P

P

P

P

(cid:1)

(cid:3)

For given quality requirements of all users r, we would like
to optimize the transmission quality level selection y, trans-
mission time allocation t and transmission power allocation
p to minimize the weighted sum of the average transmission
energy and the transcoding energy subject to the transmission
time allocation constraints in (2), (3), transmission power con-
straints in (4), transmission quality level selection constraints
in (9), (10), (11), and successful transmission constraints in
(12). Speciﬁcally, for given r, we have the following problem.
Problem 3 (Energy Minimization with User Transcoding):
⋆ , min

tH,S,lpH,S,l

E

E

y,t,p

i

hXS∈I X
+ β

l∈L

XS∈I X

|PS|Ek

k∈S

lyS,k,l − rk

l∈L

(cid:17)

(cid:16)X

s.t.
⋆
Let (y⋆, t

(2), (3), (4), (9), (10), (11), (12).

, p⋆) denote an optimal solution of Problem 3.

By comparing Problem 1 and Problem 3, we can easily

show the advantage of user transcoding in energy reduction,
as summarized in the following lemma.

Lemma 1 (Comparison between Problem 1 and Problem 3):
⋆
⋆
are the optimal values of

≤ E⋆, where E⋆ and E

E
Problem 1 and Problem 3, respectively.

Problem 3 is a challenging mixed discrete-continuous
optimization problem. In the following, we obtain a low-
complexity suboptimal solution of Problem 3 using DC pro-
gramming.

First, we convert Problem 3 to a penalized DC problem.
Speciﬁcally, by a change of variables, we use e instead of p.
In addition, we equivalently convert the discrete constraints in
(9) to the following continuous constraints:

0 ≤ yS,k,l ≤ 1, S ∈ I, k ∈ S, l ∈ L,
yS,k,l(1 − yS,k,l) ≤ 0, S ∈ I, k ∈ S, l ∈ L.

(14)
By disregarding the constraints in (14) and adding to the
objective function a penalty for violating them, we can convert
Problem 3 to the following problem.

(13)

Problem 4 (Penalized DC Problem of Problem 3):
min
y,t,e

+ ρP (y)

eH,S,l

E

l∈L

hXS∈I X
+ β

i
|PS|Ek

XS∈I X

k∈S

s.t.

(2), (3), (7), (10), (11), (13),

l∈L

(cid:16)X

lyS,k,l − rk

(cid:17)

,

(cid:20)

E

P

P

P

S∈I

1 +

B
T

|PS|DlyS,k,l ≤

tH,S,l log2 (cid:18)

S ∈ I, k ∈ S, l ∈ L,

l∈L yS,k,l(1 − yS,k,l).

eH,S,lHk
tH,S,ln0 (cid:19)(cid:21)
(15)
where the penalty parameter ρ > 0 and the penalty function
is given by P (y) ,

k∈S
Note that the objective function of Problem 4 can be viewed
as a difference of two convex functions and the feasible set
of Problem 4 is convex. Thus, Problem 4 can be viewed as
a penalized DC problem of Problem 3. When the feasible
set of Problem 3 is nonempty, there exists ρ0 > 0 such that
for all ρ > ρ0, Problem 4 is equivalent to Problem 3, in the
sense that they share the same optimal value. We can obtain
a stationary point of Problem 4 using a DC algorithm [10].
The main idea is to iteratively solve a sequence of convex
approximations of Problem 4, each of which is obtained by
linearizing the penalty function P (y) in the objective function
of Problem 4. We can run the DC algorithm multiple times,
each with a random initial feasible point of Problem 4, and
select the stationary point with the minimum weighted sum
energy among those with zero penalty as the suboptimal
solution of Problem 3. The details are omitted due to page
limitation.

5

n0 = BkBT0, where kB = 1.38 × 10−23 Joule/Kelvin is the
Boltzmann constant and T0 = 300 Kelvin is the temperature.
For ease of simulation, we consider two channel states for each
user, i.e., a good channel state and a bad channel state, and
set H = {d, 2d}, Pr[Hk = d] = 0.5, and Pr[Hk = 2d] = 0.5
for all k ∈ K, where d = 10−6 reﬂects the path loss.
For comparison, we set β = 1 and evaluate the average
transmission energy in the case without user transcoding and
the sum of the average transmission energy and transcoding
energy in the case with user transcoding. We use Kvazaar
as the 360 VR video encoder and video sequence Reframe
Iran from YouTube as the video source. We set horizontal
and vertical angular spans of each FoV as 100◦ × 100◦. To
avoid view switch delay in the presence of view changes,
besides each requested FoV we transmit an extra 10◦ in every
direction. We set M = 18, N = 36 and L = 5. The
encoding rates per tile and quantization parameters for the
quality levels are shown in TABLE I. In addition, for ease
of exposition, we consider 5 possible viewing directions as
shown in Fig. 2, and assume that K users randomly choose
their viewing directions in an i.i.d. manner. To capture the
impact of the concentration of the viewing directions, assume
requested viewing directions follow a Zipf distribution. In
particular, the c-th popular viewing direction is chosen with
Pc∈{1,...,5} c−γ , where c ∈ {1, ..., 5} and γ is the
probability
Zipf exponent.6 Note that a smaller γ indicates a longer tail.
We consider 100 random choices for viewing directions of
K users, and evaluate the average performance over these
realizations. We assume a requested quality level follows
the uniform distribution in {rlb, rlb + 1, ..., rub} with mean
r = rlb+rub

, where rlb, rub ∈ L and rlb < rub.

c−γ

2

TABLE I: Per tile encoding rates and quantization parameters
for different quality levels.

Quality level
Quantization parameter
Encoding rate (×105)

1
42
6.66

2
35
16.18

3
28
24.29

4
21
32.01

5
14
40.23

(cid:23449)(cid:23431)(cid:23395)(cid:23414)

(cid:23449)(cid:23431)(cid:23395)(cid:23416)

(cid:23449)(cid:23431)(cid:23395)(cid:23412)

(cid:23449)(cid:23431)(cid:23395)(cid:23413)

(cid:23449)(cid:23431)(cid:23395)(cid:23415)

Fig. 2: 5 possible viewing directions (VDs).

V. NUMERICAL RESULTS

In this section, we consider the cases with (w) and without
(w/o) user transcoding and compare the proposed solutions
in Section III and Section IV, referred to as Proposed-w/o
and Proposed-w with two baseline schemes. In the simulation,
we set Ek = 10−6 Joule, B = 150 MHz,5 T = 50ms and

5We consider a multi-carrier TDMA with 150 channels, each with band-

width 1 MHz.

For comparison, we consider two baseline schemes for the
cases with (w) and without (w/o) user transcoding, respec-
tively. In Baseline-w/o, all users are served separately using
unicast no matter whether Gk, k ∈ K are disjoint or not,
and the corresponding optimal power and time allocation is
obtained by solving a convex problem similar to Problem 2.

6Note that Zipf distributions are widely used to model content popularity in
Internet and wireless networks. In addition, the proposed solutions are valid
for arbitrary distributions of viewing directions.

Proposed-w/o
Proposed-w
Baseline-w/o
Baseline-w

)

3
-

0
1
(

y
g
r
e
n
e
m
u
s
/
n
o
i
s
s
i
m
s
n
a
r
T

160

120

80

40

0

)

3
-

0
1
(

y
g
r
e
n
e
m
u
s
/
n
o
i
s
s
i
m
s
n
a
r
T

10

8

6

4

2

0

Proposed-w/o
Proposed-w
Baseline-w/o
Baseline-w

1

2

3
Number of users K
(a) Number of users K at γ = 0, rlb = 1
and rub = 5.

5

4

0

0.5

1
Zipf exponent 
(b) Zipf exponent γ at K = 3, rlb = 1 and
rub = 5.

1.5

2

6

Proposed-w/o
Proposed-w
Baseline-w/o
Baseline-w

)

3
-

0
1
(

y
g
r
e
n
e
m
u
s
/
n
o
i
s
s
i
m
s
n
a
r
T

25

20

15

10

5

0

2

3

4

(c) Mean quality level r at γ = 0, K = 3
and rub = rlb + 2.

Fig. 3: Transmission/sum energy versus number of users K, Zipf exponent γ and mean quality level r.

In Baseline-w, the rS,max-th representations of the tiles in
PS are transmitted to all users in S using multicast, where
rS,max , maxk∈S rk. Any user k ∈ S with rk = rS,max
directly plays the received rS,max-th representations of the
tiles in S, and any user k ∈ S with rk < rS,max ﬁrst
converts the rS,max-th representations of the tiles in S to
the rk-th representations, and then plays the rk-th represen-
tations of the tiles in S. In Baseline-w, the corresponding
optimal power and time allocation is obtained by solving
Problem 3 with yS,k,rS,max = 1, S ∈ I, k ∈ S and
yS,k,l = 0, l 6= rS,max, S ∈ I, k ∈ S. Note that Baseline-
w/o does not utilize any multicast opportunities; Baseline-w
utilize natural multicast opportunities and transcoding-enabled
multicast opportunities without allowing optimal exploitation
of transcoding-enabled multicast opportunities.

Fig. 3 illustrates the average transmission energy for the
case without user transcoding and the sum of the average
transmission energy and transcoding energy for the case with
user transcoding versus the number of users K, Zipf exponent
γ and the mean quality level r. Both measurement metrics
are also referred to as energy for short. From Fig. 3 (a)
and Fig. 3 (c), we can see that the energy of each scheme
increases with K and with r, as the trafﬁc load increases
with K and with r. From Fig. 3 (b), we can see that
the energies of Proposed-w/o, Proposed-w and Baseline-w
decrease with γ, as these schemes exploit natural multicast
opportunities that increase with γ; the energy of Baseline-
w/o does not change with γ, as Baseline-w/o does not utilize
natural multicast opportunities. From Fig. 3, we can see that
Proposed-w/o outperforms Baseline-w/o, revealing the impor-
tance of exploiting natural multicast opportunities; Proposed-
w and Baseline-w outperform Proposed-w/o, demonstrating
the importance of exploiting transcoding-enabled multicast
opportunities; Proposed-w outperforms Baseline-w, showing
the importance of optimally exploiting transcoding-enabled
multicast opportunities.

VI. CONCLUSIONS

In this paper, we consider optimal transmission of a 360
VR video to multiple users in the cases with and without

transcoding at each user in a TDMA system. In the case
without user transcoding, we optimize the transmission re-
source allocation to minimize the average transmission energy
by exploiting natural multicast opportunities, and obtain an
optimal solution using convex optimization techniques. In
the case with user transcoding, we optimize the transmission
resource allocation and the transmission quality level selection
to minimize the weighted sum of the average transmission
energy and the transcoding energy by exploiting both natural
and transcoding-enabled multicast opportunities, and obtain
a suboptimal solution using a DC algorithm. To the best of
our knowledge, this is the ﬁrst work exploiting transcoding-
enabled multicast opportunities for efﬁcient transmission of a
multi-quality tiled VR video to multiple users. The proposed
mechanisms and frameworks for TDMA systems can be
extended to OFDMA systems, multi-user MIMO systems, etc.

REFERENCES

[1] M. Zink, R. Sitaraman, and K. Nahrstedt, “Scalable 360 video stream
delivery: Challenges, solutions, and opportunities,” Proc. IEEE, 2019.
[2] “Augmented virtual reality revenue forecast revised to hit 120 billion

by 2020,” https://goo.gl/nw9mtP, 2016.

[3] C. Guo, Y. Cui, and Z. Liu, “Optimal multicast of tiled 360 vr video,”
IEEE Wireless Commun. Lett., vol. 8, no. 1, pp. 145–148, Aug. 2019.
[4] ——, “Optimal multicast of tiled 360 VR video in OFDMA systems,”
Optimal multicast of tiled 360 VR video in OFDMA systems, vol. 22,
no. 12, pp. 2563–2566, Dec. 2018.

[5] L. Xie, Z. Xu, Y. Ban, X. Zhang, and Z. Guo, “360probDASH: Im-
proving QoE: of 360 video streaming using tile-based HTTP: Adaptive
streaming,” in Proceedings of the 2017 ACM on Multimedia Conference.
ACM, Oct. 2017, pp. 315–323.

[6] M. Xiao, C. Zhou, V. Swaminathan, Y. Liu, and S. Chen, “Bas-360:
Exploring spatial and temporal adaptability in 360-degree videos over
http/2,” in Proc. IEEE INFOCOM, 2018, pp. 953–961.

[7] Z. Liu, S. Ishihara, Y. Cui, Y. Ji, and Y. Tanaka, “Jet: Joint source
and channel coding for error resilient virtual reality video wireless
transmission,” Signal Processing, vol. 147, pp. 154–162, 2018.

[8] H. Ahmadi, O. Eltobgy, and M. Hefeeda, “Adaptive multicast streaming
of virtual reality content to mobile users,” in Proceedings of the on
Thematic Workshops of ACM Multimedia 2017. ACM, Oct. 2017, pp.
170–178.

[9] K. Long, C. Ye, Y. Cui, and Z. Liu, “Optimal multi-quality multicast
for 360 virtual reality video,” in Proc. IEEE GLOBECOM, Dec. 2018,
pp. 1–6.

[10] T. Lipp and S. Boyd, “Variations and extension of the convex–concave
procedure,” Optimization and Engineering, vol. 17, no. 2, pp. 263–287,
Jun. 2016.

 
 
 
 
 
 
