Two beams are better than one: Towards Reliable and High
Throughput mmWave Links

Ish Kumar Jain, Raghav Subbaraman, Dinesh Bharadia
University of California San Diego
La Jolla, CA, USA
{ikjain,rsubbaraman,dineshb}@eng.ucsd.edu

2
2
0
2

p
e
S
7

]
P
S
.
s
s
e
e
[

2
v
9
4
2
4
0
.
1
0
1
2
:
v
i
X
r
a

Abstract
Millimeter-wave communication with high throughput and high re-
liability is poised to be a gamechanger for V2X and VR applications.
However, mmWave links are notorious for low reliability since they
suffer from frequent outages due to blockage and user mobility.
We build mmReliable, a reliable mmWave system that implements
multi-beamforming and user tracking to handle environmental
vulnerabilities. It creates constructive multi-beam patterns and op-
timizes their angle, phase, and amplitude to maximize the signal
strength at the receiver. Multi-beam links are reliable since they
are resilient to occasional blockages of few constituent beams com-
pared to a single-beam system. We implement mmReliable on a 28
GHz testbed with 400 MHz bandwidth, and a 64 element phased
array supporting 5G NR waveforms. Rigorous indoor and outdoor
experiments demonstrate that mmReliable achieves close to 100%
reliability providing 2.3x improvement in the throughput-reliability
product than single-beam systems.1

CCS Concepts
‚Ä¢ Hardware ‚Üí Wireless devices; ‚Ä¢ Networks ‚Üí Physical links;
Wireless access points, base stations and infrastructure.

Keywords
Millimeter-wave, Reliability, Throughput, Analog beamforming,
Phased arrays, 5G NR, Multi-beam, Tracking, Blockage, Mobility.

ACM Reference Format:
Ish Kumar Jain, Raghav Subbaraman, Dinesh Bharadia. 2021. Two beams
are better than one: Towards Reliable and High Throughput mmWave Links.
In ACM SIGCOMM 2021 Conference (SIGCOMM ‚Äô21), August 23‚Äì27, 2021,
Virtual Event, USA. ACM, New York, NY, USA, 17 pages. https://doi.org/10.
1145/3452296.3472924

1 Introduction
5G New Radio (NR) is expected to support cutting-edge applications
such as vehicular (V2X), factory automation, autonomous driving,
and remote surgery [1, 2]. A key requirement for such applications
beyond the high data rate is exceptionally high reliability, defined
as the fraction of time during which the link does not suffer an

1This is an extended version of a paper published in Sigcomm‚Äô21

Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for profit or commercial advantage and that copies bear this notice and the full citation
on the first page. Copyrights for components of this work owned by others than ACM
must be honored. Abstracting with credit is permitted. To copy otherwise, or republish,
to post on servers or to redistribute to lists, requires prior specific permission and/or a
fee. Request permissions from permissions@acm.org.
SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA
¬© 2021 Association for Computing Machinery.
ACM ISBN 978-1-4503-8383-7/21/08. . . $15.00
https://doi.org/10.1145/3452296.3472924

Figure 1: mmReliable utilizes beams with multiple lobes (Multi
Beam) to provide high reliability compared to a single-lobe beams.

outage [3, 4]. As such, 5G NR utilizes millimeter-wave (mmWave,
FR2) frequencies due to abundant bandwidth (400MHz-2GHz) that
can provide the high-data-rate compared to traditional sub-6 GHz
FR1 (20-100MHz bandwidth) bands [5]. However, unlike its sub-6
GHz counterparts, mmWave uses directional beams to reduce the
impact of higher path loss at mmWave frequencies and is highly
susceptible to blockage and user movement. For instance, a mea-
surement study of 28 GHz network deployment in Chicago [6]
shows that blockage by humans always causes link outage, which
is detrimental to applications requiring high-reliability [3].

A large fraction of existing work focuses on improving mmWave
link establishment [7‚Äì11], throughput [12‚Äì15] and coverage [16,
17]; while the link reliability requirement takes the backseat. The
prevailing methods aim to reduce link outages by performing beam-
training, a process where the mmWave base station and client te-
diously scan multiple beams to establish a directional link. Reducing
beam-training time does not prevent outages as the process is usu-
ally reactive [7‚Äì11, 18‚Äì20] and kicks in only after a significant
degradation in link quality. To improve reliability, some authors
propose proactive approaches that constantly track the client using
side-channel information from out-of-band LTE/WiFi [21, 22] or
external sensors like GPS, radar or lidar [23‚Äì26]. These solutions
are not self-reliant, have limited accuracy, and possibly require
sensitive information like user location [24, 25]; making the system
dependant on external information and difficult to deploy with
existing standards. In contrast, we aim to create the ideal mmWave
link: one that can be created and maintained with high reliability
(no link outage), supports high data rates, and is easy to integrate
into current standards.

In this paper, we introduce mmReliable, a system that achieves
both reliable and high-data-rate mmWave links while being proto-
col compliant. Inspired by sub-6 GHz communication, mmReliable
delivers on reliability and throughput by exploiting the multipath
diversity in environmental reflections. These reflections are typi-
cally strong for mmWave and can sustain the link even if the direct
path is occluded or unavailable to establish an independent link.

(a) Conventional(b) mmReliableHigh ThroughputLow ReliabilityHigh ThroughputHigh Reliability 
 
 
 
 
 
SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

IK Jain, R.Subbaraman, D.Bharadia

We observe that conventional single-beam links which utilize the
reflectors are still unreliable because they are prone to outage due to
blockage or misalignment. mmReliable uses single radio frequency
(RF) chain and phased array to create custom beam patterns with
multiple directional beams (multi-beam) that are each aligned to-
wards direct and reflected paths as shown in Fig. 1(b). The idea
here is that the probability of multiple beams simultaneously fac-
ing a blockage is low, reducing the possibility of link outage and
increasing reliability.

An obvious implication of splitting a single beam into a multi-
beam is reduced power radiated per beam to conserve the Total
Radiated Power (TRP) for FCC compliance [27]. The reduction in
per-beam power could reduce the received signal strength and lead
to throughput loss at the receiver, i.e., trading off throughput for
reliability. It turns out we can break this trade-off: we observe that
the received signal is the sum of multiple copies of the transmitted
signal, one from every beam in a multi-beam as shown in Fig. 1(b).
If we ensure constructive addition of these copies at the receiver
(Section 3), the received power and throughput can be increased
to a value higher than that of a single beam while keeping TRP
constant.

=

‚àö

ùëé
‚àö
2

ùëé
‚àö
2

+ ùëé
‚àö
2

ùëé2
2 on each beam, i.e., amplitude

Let‚Äôs take an intuitive example of how multi-beam improves
throughput. Consider a mmWave channel consisting of two paths,
and two beams are aligned along those two-channel paths. For
simplicity, assume the path loss is unity for each path, and the
signal traveled along each path incurs the same phase. mmReli-
able‚Äôs transmitter splits the total power of ùëé2 equally into two
beams with power
on each
beam, which propagates through the channel and is received at the
Omni-receiver. Since the phase align for both paths, the received
signal adds in signal domain, i.e. total amplitude of the received
2ùëé. The received signal upon converting to
signal
SNR (signal-to-noise ratio) is proportional to 2ùëé2. In contrast, a
traditional mmWave single-beam link does not exploit the second
path and would provide an SNR proportional to ùëé2, which is 3
dB lower compared to the multi-beam case. Higher SNR results
in lower bit error rates and allows higher modulation and coding
schemes, leading to higher throughput for multi-beam. In Section 3,
we go beyond this simple example to consider practical channels
and show that, if the beam directions, phase, and power per beam
of multi-beam are chosen optimally, then multi-beam will always
achieve SNR higher than single beam even in wireless channels with
weak multipath, while using the exact total radiated power. A multi-
beam created using optimal parameters is hereafter referred to as
constructive multi-beam.

As a first, we develop an algorithm to establish a constructive
multi-beam link with low-overhead and protocol compliance. To
achieve constructive multi-beam, one needs to estimate the optimal
beam directions, beam-phase, and power per beam. Our key insight
here is to decouple this problem into two: finding beam directions
and estimating the per beam power and phase. mmReliable first
learns the directions of strong paths in the environment (i.e., paths
viable for communication) during the mandatory beam-training
phase. This could be done using exhaustive beam-scanning or any
other improved algorithm [7, 8, 28, 29]. Then, with just two addi-
tional channel probes per viable beam, it learns the optimal power

and phase to be applied to each beam in the multi-beam. Only
two-to-three viable beams exist in typical environments due to the
sparse nature of reflection clusters at mmWave [18, 30]; therefore,
mmReliable‚Äôs algorithmic overhead remain fixed and independent
of the number of elements in the antenna array.

Once the constructive multi-beam is established, the challenge is
in continuously maintaining it, as the wireless channel changes due
to blockages and mobility. Link blockages could completely occlude
one or more beams of a multi-beam. Mobility adversely affects the
established links by causing misalignment between transmit and
receive beams, degrading both throughput and reliability. Multi-
beam management design has to address some uniquely challenging
aspects. In contrast to a single-beam system where only one beam
is misaligned, in a multi-beam system, all the beams get misaligned
simultaneously due to mobility. In addition, using a phased array
system with a single RF chain means that signals from multiple
beam-directions are always superposed into one. The superposition
makes it difficult to assess the effects of blockage and misalignment.
We develop a beam-maintenance algorithm, which proactively
re-aligns each of the beam parameters (direction, phase, and ampli-
tude) in a multi-beam and continuously maintains its constructive
nature. First, mmReliable uses a super-resolution algorithm to tease
apart the properties of individual beams from their sum. Next, it uses
the estimated per beam properties to measure power loss and infer
the underlying cause, i.e., blockage or mobility. Instead of waiting
for beams to degrade, mmReliable proactively makes this inference
and optimizes per-beam properties, and maintains constructive
multi-beam. mmReliable uses low-overhead standard-compliant
channel probes that are embedded in the communication waveform
to achieve the elusive goal of creating and maintaining reliable high
throughput mmWave links, free from sporadic outages.

We build a first-of-its-kind software-defined 5G NR testbed on 28
GHz mmWave bands with 64 elements phased array that supports
channels of up to 400 MHz [31]. We implement mmReliable using
5G NR compliant reference signals. We perform experiments at
28 GHz in our university area by deploying mmReliable in vari-
ous indoor and outdoor scenarios with link distances of up to 80
m. Through empirical measurements, we find that indoor walls
and large outdoor buildings are powerful reflectors; the median
attenuation of the reflected path with respect to the direct path in
outdoor scenarios is only 5 dB. Our evaluation shows that in scenar-
ios where user movement and blockage co-occur, mmReliable has
reliability close to 100% while maintaining an average throughput
of 1.5 bits/sec/Hz as compared to the single-beam reactive baseline,
which has a reliability of 65% and on-average throughput of 1 bit-
s/sec/Hz. The throughput-reliability product is improved by 2.3√ó
compared to the best reactive baseline. The artifacts for mmReliable
are available online2.

2 Background and Motivation
Directional beamforming in mmWave creates the need for beam-
management schemes for link creation and maintenance. Beam-
management can be divided into two broad functions: the first is
beam-training, and involves the search and creation of a beam [7‚Äì
11, 18‚Äì20]. The second is beam-maintenance and involves the
upkeep of the beam despite environmental factors such as blockages,

2Artifacts link: https://wcsng.ucsd.edu/mmreliable

Towards Reliable and High Throughput mmWave Links

SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

mobility, and fading. Even if multi-beam is resilient to blockages, it
is not practical unless it can be efficiently created and maintained
under the constraints of existing standards. The efficacy of the
beam-maintenance function is especially critical to enabling reliable
mmWave links with low overhead. Protocols such as 5G-NR and
IEEE 802.11ad contain exclusive signaling and control provisions
for such beam-management [1, 32, 33].

2.1 mmReliable: Making Multi-beam Practical

While single-beams have been the default choice for communica-
tion, there are some recent interest in using multi-beams to enable
auxiliary mmWave capabilities. Multi-beams have been shown to
aid with the beam-training process [11, 34‚Äì36]. In [11], the authors
employ multi-beams for fast beam-training, but use them to set
up single-beam links for communication. In [34], the authors pro-
pose a beam-training method to create multi-beams for blockage
resilience. However, they do not derive or discuss that a multi-beam
link is better than a single-beam link for throughput. In addition,
all of [11, 34‚Äì36] depend on repeated reactive beam-training to
re-establish the link when it is blocked or misaligned, leading to in-
termittent outages. In contrast, we propose multi-beam as the new
standard for beamforming in mmWave communication systems.
We show that multi-beams are reliable while providing superior
throughput to single-beams in all scenarios. As a first, we develop
an efficient algorithm to estimate parameters and create multi-
beams in state-of-the-art phased arrays. Our algorithm is protocol
compatible and can be deployed over any beam-training scheme.

2.2 Beam Maintenance for Reliable mmWave

Beam maintenance is important to reduce the frequency and over-
head of repeated beam-training as shown in Fig. 2. For instance,
in the context of 5G-NR, a beam-training phase could take up to 5
ms to probe 64 beam directions with a default periodicity of 20 ms,
leading to a 25% overhead [33]. Even if a more efficient training
algorithm from [11, 34‚Äì37] is used, the overhead will make beam-
management solely based on beam-training intractable. The high
overhead of beam-training can be avoided by carefully utilizing
intrinsic features of mmWave protocols. They use known reference
signals interspersed with data communication to perform beam-
maintenance and refinement (See Fig. 2). These reference signals
provide channel measurements with an option to set any desired
beam. Due to the sparsity of these reference signals, they cannot be
used for a full-fledged beam-training, and only minor changes to
the beamforming vector can be made using few channel estimates.
A low-overhead beam-maintenance scheme is, therefore, a must
for reliable mmWave links.

While beam-maintenance for single beam links have been stud-
ied by some authors [31, 38, 39], there is no work that addresses
multi-beam links. Due to this gap, the utility of multi-beam for
communication is lessened despite its benefits. We are the first to
propose a low overhead beam-maintenance scheme using multi-
beam. Our approach periodically updates the per-beam angle, phase,
and amplitude with negligible overhead, requiring only three chan-
nel estimates for a 2-beam multi-beam and five estimates for a
3-beam multi-beam. The entire process is completed within 0.6 ms
for the latter, making multi-beam maintenance possible with low

Figure 2: Building blocks of mmReliable beam management that
leverages initial beam training for angle estimation and reference
signaling for multi-beam establishment and maintenance.
overhead. With this, our work makes a compelling case for multi-
beam and addresses the end-to-end challenges in their creation and
maintenance.

3 Design of Multi-beam system
This section describes how mmReliable creates and leverages multi-
beam for reliable, high-throughput mmWave communication. We
first show how links can be made reliable to blockage by using
multiple beams at once. Then, we derive mathematically optimal
beamforming weights to maximize the signal-to-noise ratio (SNR)
at the receiver. We show that optimal beamforming is nothing but
constructive multi-beam for most typical mmWave channels.

We make an interesting observation that constructive multi-
beam is channel-dependent and depends on the number of paths,
their angles, relative phase, and attenuation. Naturally, to imple-
ment constructive multi-beam, we need to estimate these parame-
ters. We propose a two-step procedure to estimate these parameters
using the beam-management framework shown in Fig. 2. We lever-
age any standard beam-training procedure to calculate the angle of
each path [28, 29]. Then, we design a low-overhead method using
reference signals to estimate the per-path phase and attenuation.
Finally, we use these estimates to set up and maintain the optimal
constructive multi-beam despite the adversity of blockage and user
mobility.
3.1 Multi-beam links are more reliable
To compare various techniques on equal footing, we formally define
link reliability as the fraction of time when the link is available for
communication within a large observation interval. Link outage
(due to natural effects) or procedures like beam-training reduce
the reliability as they temporarily render the link unavailable for
communication. Therefore, we can express reliability as:

Reliability = 1 ‚àí Prob(Outage)
(1)
We empirically compute the probability of outage as the fraction
of duration where the SNR is below a minimum threshold. The
directional nature of single-beam mmWave links makes them sus-
ceptible to link outages since blockage & user mobility effects can
reduce SNR by up to 30 dB [40] (Fig. 16). Multi-beams prevent these
outages by avoiding a single point of failure.

Multi-beam links are reliable even under the impact of blockage
events. Consider a blockage probability ùõΩ (0 ‚â§ ùõΩ ‚â§ 1), which
represents the fraction of time the link is in outage during the
observation interval. For simplicity, we assume the beams in our

Beam 1Beam XBeam 2   Data       Data       Data     DataData Beam-Maintenance and Data Transmission TrainDataTrainDataTrainDataBeam TrainingBeam scanprocedureEstimate angle ofeach channel pathEstimate per-path phaseand attenuationEstablish and refinemulti-beam link TrainingSignalReferenceSignalSIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

IK Jain, R.Subbaraman, D.Bharadia

multi-beam are blocked independently. Thus, the probability that
ùëò beams simultaneously experience an outage is ùõΩùëò . By definition,
the reliability would be 1 ‚àí ùõΩ for the single-beam case and 1 ‚àí
ùõΩùëò, ùëò ‚â• 2 for the multi-beam case. Multi-beam provides higher
reliability because it prevents the link from suffering an outage
due to blockage, unlike its single-beam counterparts [12, 40]. In
practice, blockages may be correlated, and scenarios could arise
where two or more paths are blocked simultaneously. While no
solution can prevent link outage if all paths are blocked (e.g., the
user inadvertently blocks all antennas with their body), multi-beam
links can be sustained as long as there is at least one unblocked
path to the receiver. Simultaneous blockage of multiple paths is
always less probable than blockage of a single path [12]; therefore,
multi-beam links are always more reliable than single-beam links.

3.2 Multi-beam Throughput Model
While multi-beams are intuitively resilient to blockage by virtue
of having multiple beams separated in angle, each beam‚Äôs power
is reduced since the total power is split amongst multiple beams.
One may wonder whether this leads to reduced throughput since it
could mean less power is incident on the receiver. But this is not the
case, and it can be shown that a multi-beam link with optimal con-
structive combining and power-control can, in fact, provide higher
throughput than a single-beam link. To prove this, we introduce
a model for a multi-antenna base station transmitting to the user
device using a mmWave link and derive the optimal beamforming
solution that maximizes the received SNR. We make two important
observations. First, we show that a single-beam system is optimal
only when the wireless channel consists of a single path from the
transmitter to the receiver. A single-beam system is sub-optimal for
a multipath channel, which is generally the case even for mmWave
links [41]. We then show that a multi-beam with two beams is
optimal for a two-path channel and maximizes the received SNR.
We conclude with a note on generalizing our formulation to an
arbitrary number of beams in multi-beam.
‚ñ† Primer on optimal beamforming: We derive an expression
for optimal beamforming weights at a multi-antenna base-station
(gNB phased array) communicating with a single antenna receiver
using mmWave (Multi-antenna receiver discussed in Section 4.4).
The gNB uses a uniform linear phased array with ùëÅ antenna el-
ements. Beamforming is implemented by applying a ùëÅ √ó 1 beam
weights vector w at each antenna using a combination of phase
shifters and attenuators (Fig. 3(a)). Our goal is to determine the
optimal w that maximizes the received SNR.

Let ùë† be the transmit signal from the gNB, the received signal ùë¶

is expressed as:

ùëá
ùë¶ = h

wùë† + ùúÇ,

(2)
where h is ùëÅ √ó 1 channel from ùëÅ transmit antennas to one receive
antenna and ùúÇ is white Gaussian noise at the receiver. The capacity
or maximum throughput of a wireless link is evaluated in term of
SNR (the ratio of signal power to noise power) as:

ùëá
SNR = ||h

w||2ùëÉùë† /ùëÉùúÇ,

(3)
where ùëÉùë† is the average transmit power (without transmit array
gain) and ùëÉùúÇ is the noise power3.

3To derive the expression for SNR: ùê∏ [ùë¶ùë¶ùêª ] = ùê∏ [ (hùêª wùë† + ùëõ) (hùêª wùë† + ùëõ)ùêª ] ] =
‚à•hùêª w ‚à•2ùê∏ [ùë†ùë†ùêª ] + ùê∏ [ùëõùëõùêª ] and we denote ùëÉùë† = ùê∏ [ùë†ùë†ùêª ] and ùëÉùúÇ = ùê∏ [ùëõùëõùêª ].

Our goal is to estimate beamforming weights w, that maximizes
the SNR. Using Cauchy-Schwartz inequality, it follows that ||hùëá w||
is maximized when h‚àó (complex conjugate of h) and w align in
vector space [42]. Therefore, the optimal weight vector is channel-
dependent. Intuitively, the weight vector cancels the phases in the
channel and creates an inner-product form that maximizes the
absolute value of their product. Additionally, the weights need to
be unitary to keep the power constant, i.e., ‚à•w‚à• = 1. This way, we
get the optimal weights wopt as:

wopt = h‚àó/||h||,

(4)

| |h| |2ùëÉùë†
ùëÉùúÇ

The optimal beamforming provides the highest SNR of
. The
practical wireless channel‚Äîeven mmWave channel‚Äîconsists of
multiple paths (direct or reflected paths). Since the optimal beam-
forming vector depends on the channel h, it is affected by the nature
of these paths.
‚ñ† Single-beam is optimal for a single-path channel: Extend-
ing our discussion, it is natural to wonder how to provide a structure
to the general nature of optimal beamforming vectors (wopt). Con-
sider the simplest of wireless channels with a single path from the
transmitter to the receiver. It turns out that the single beam used by
conventional mmWave systems is optimal for such a channel. To
see this, we represent the single-path channel vector by hsingle and
derive the optimal weights. A single-path channel is entirely de-
fined by two parameters: the direction of departure ùúô1 and complex
attenuation ‚Ñé:

hsingle [ùëõ] = ‚Ñéùëí‚àíùëó2ùúã ùëë

ùúÜ (ùëõ‚àí1) sin(ùúô1),

(5)
where ùëõ is the transmit-antenna index, ùëë is the antenna spacing,
and ùúÜ is the wavelength of carrier frequency (ùëë = ùúÜ
2 in our phased
array). Using (4) and (5), we obtain the optimal weights for this
= hsingle‚àó
channel as wùúô1
‚à•hsingle ‚à• which can be simplified to:
1
ùúÜ sin(ùúô1), . . . , ùëí ùëó2ùúã (ùëÅ ‚àí1) ùëë
[1, ùëí ùëó2ùúã ùëë
‚àö
ùëÅ

ùúÜ sin(ùúô1) ]ùëá ,

wùúô1

(6)

=

which is the familiar single-beam weight vector [9, 12, 13, 43].
‚ñ† Constructive multi-beam is optimal for multipath chan-
nel: Since the optimal beam is channel dependent, let us observe
how it changes when we introduce a reflector into the channel as
shown in Fig. 3(b). We continue to use ‚Ñé for the complex attenua-
tion of the first path. The second path‚Äôs attenuation is expressed as
‚Ñéùõøùëí ùëóùúé , where ùõø ‚àà R+ and ùúé ‚àà [0, 2ùúã] are respectively the relative
attenuation and phase shift of the second path with respect to the
first. Now, we can write the expression of two-path channel as:

hmulti [ùëõ] = ‚Ñéùëí‚àíùëó2ùúã ùëë

ùúÜ (ùëõ‚àí1) sin(ùúô1) + ‚Ñéùõøùëí ùëóùúéùëí‚àíùëó2ùúã ùëë

(7)
where ùúô1 and ùúô2 are the respective directions of departure of the
two paths. If we naively use the single-beam weights from (6) here,
it ignores the second path and severely attenuates power along ùúô2
(Fig. 3(c)) resulting in an approximate SNR of:

ùúÜ (ùëõ‚àí1) sin(ùúô2)

SNRsingle = ||(hsingle)ùëá

||2ùëÉùë† /ùëÉùúÇ ‚âà |‚Ñé|2ùëÉùë† /ùëÉùúÇ .

wùúô1
(8)
In contrast, the optimal weights for the multipath channel are
obtained from (4) as wmulti = hmulti‚àó
/‚à•hmulti ‚à• which is visualized
in Fig. 3(d). From Eq. (3), the SNR of the optimal weights wmulti is:
SNRmulti = ‚à•‚Ñémulti ‚à•2ùëÉùë† /ùëÉùúÇ ‚âà (1 + ùõø 2)|‚Ñé|2ùëÉùë† /ùëÉùúÇ .
(9)
In comparison to the naive single-beam approach, the optimal SNR
is higher by a factor of 1 + ùõø 2, which provides 2x gain (3dB higher

Towards Reliable and High Throughput mmWave Links

SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

Figure 3: Constructive multi-beam enhances the throughput & reliability of mmWave link. (a) System with a single-path channel, (b) With
multipath (2-path) channel. (c) The optimal beamforming technique for a single-path channel is a single beam with all the energy directed
along that channel path. (d) A constructive multi-beam with two lobes is more reliable and provides higher SNR compared to a single beam.
array with many antennas. Performing channel estimations for
each antenna element is intractable in practical mmWave systems.
The intuition behind constructive multi-beam is that it opti-
mally uses the available multipath. We make the key observation
that in mmWave, the number of multipath reflections is usually
sparse [18, 30]; therefore, there must be a simpler way to mea-
sure ‚Ñé[ùëõ]. Indeed, from (7), we see that the channel can be linearly
decomposed into its constituent single-beam directions. Said dif-
ferently: we can reconstruct ‚Ñé[ùëõ] using channel measurements on
individual multipath directions in the environment. Once we have
‚Ñé[ùëõ], the optimal weights follow using (4).

Figure 4: (a) CDF of the relative attenuation of the strongest re-
flected path compared to the direct path at over various locations.
(b) A heatmap of strong paths in the environment while the UE
moves, strong reflectors appear at different points in time.
SNR) for two equally strong paths (ùõø = 1) as we have seen in
Section 1. In general, wmulti is the optimal constructive multi-beam
weights that split the transmit signal along both the paths such that
they maximally combine at the receiver. We discuss in Appendix A
how this result can be generalized to show that a k-multi-beam is
the optimal solution for a general k-path channel.
‚ñ† Strength of mmWave multipath: At this point, one may ask
if multiple paths exist in practical mmWave channels, and if so,
how strong are they? There are numerous measurement studies
that indicate the presence of strong multipath at both 28 GHz and
60 GHz [5, 18, 30, 44‚Äì46]. These studies show that in a typical de-
ployment, reflectors like metals, concrete walls, and tinted glass
strongly reflect signals while attenuating them by about 5-6 dB
(ùõø ‚âà 0.5). In addition, we perform a measurement study of reflector
strengths at various indoor (5m-10m link) and outdoor (10m-80m
link) locations (Overall 10K data points). At each location, we per-
form a full 120o scan to identify the distribution of signal strength
across space. Shown in Fig. 4(a), common reflectors cause 1-10 dB
attenuation (relative to the direct path) with a median attenuation
of 7.2 dB indoors and 5 dB outdoors. Fig. 4(b) shows a particular
data point where signal strengths along all angles are evaluated
during user motion. Sometimes, reflectors as strong as the direct
path exist and can be utilized to establish a multi-beam link.

3.3 Creating constructive multi-beam
So far, we have established that constructive multi-beam is the
optimal beamforming technique for a typical mmWave channel. To
achieve optimal beamforming, we need to estimate the channel h[ùëõ]
at each antenna at the gNB, the complexity of which scales with
the total number of antennas. In sub-6 GHz communication, the
channel at each antenna is readily measured as each antenna could
be connected to a separate RF chain. In contrast, mmWave hardware
usually consists of a single RF chain attached to a large phased

Consider our example from the previous sub-section, where
two paths were present in the environment at angles ùúô1, ùúô2. If the
relative attenuation ùõø and the relative phase ùúé between each path
is measured, we can create the constructive multi-beam weights by
simple addition:

,

)

)‚à•

(10)

+ ùõøùëí‚àíùëóùúé wùúô2
+ ùõøùëí‚àíùëóùúé wùúô2

w(ùúô1, ùúô2, ùõø, ùúé) =

(wùúô1
‚à•(wùúô1
The denominator ensures that the TRP is conserved by enforcing
‚à•w‚à• = 1. We then appropriately quantize the beamforming vector
phases & amplitudes to be compatible with our phased array. In [34],
a sub-optimal multi-beam is created by splitting the array into
sub-arrays, each responsible for a particular component beam. In
contrast, mmReliable utilizes phase and amplitude control to create
the optimal channel-dependent multi-beam.
‚ñ† Estimating parameters for constructive multi-beam: Reli-
ably estimating the parameters to establish a multi-beam is integral
to maintaining its constructive nature. In the two-beam case, we
need to estimate ùõø (relative attenuation, ùõø ‚àà R+) and ùúé (relative
phase shift, 0 < ùúé ‚â§ 2ùúã) of the reflected path w.r.t. the direct path.
We already know the directions ùúô1, ùúô2 of the two paths from the
beam-training phase. We denote the narrow-band complex wireless
channel along each path as ‚Ñé1 and ‚Ñé2, respectively. If the gNB mea-
sures both ‚Ñé1 and ‚Ñé2, then it can estimate the relative amplitude
and phase shift using their ratio. A simple method would be to
measure each beam‚Äôs channel one-by-one by setting the beam to
ùúô1 and then ùúô2, as suggested in [34]. However, hardware offsets
such as Carrier Frequency Offset (CFO) and Sampling Frequency
Offset (SFO) cause time-varying and sometimes unpredictable chan-
nel phases, making these channel estimates unreliable [14, 47, 48].
The channel magnitude is the one thing that remains fixed despite
these offsets. Therefore, we develop an estimation method using
channel magnitude alone. First, we observe that only the relative
channel between the two beams is of interest to us, which means
that we can treat ‚Ñé1 as a reference and assume ‚Ñé1 ‚àà R+ without
loss of generality. Then, we observe that the magnitudes ùëù1 = |‚Ñé1|2

(a) Single-path channel(b) Multi-path channel (2-paths)Phased arrayRFRFUEgnBReflectorPhased arrayRFRFUEgnB(d) Multi-beam (2 lobes) is optimal for 2-path channel(c) Single beam is optimal for single-path channelReliability ‚âà(1‚àíùõΩ)SNR ‚àù|‚Ñé|2ùõΩ=Blockage probability‚ÑéUEgNBBlockerùõΩReliability ‚âà(1‚àíùõΩ2)SNR ‚àù(1+ùõø2)|‚Ñé|2‚Ñé‚ÑéùõøùëíùëóùúéUEgNBBlockerùõΩùúô1ùúô2ùúô1-10-8-6-4-20Reflector Attenuation (dB)00.20.40.60.81CDFMedian: -5.0 dBMedian: -7.2 dBIndoorOutdoor(a)(b)2468101214Time (s)-60-40-200204060Angle (degrees)253035404550SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

IK Jain, R.Subbaraman, D.Bharadia

Figure 5: Channel probing procedure to obtain parameters (ùõø, ùúé) for
multi-beam constructive combining that‚Äôs robust to CFO/SFO im-
pairments.

and ùëù2 = |‚Ñé2|2 are already available from the initial beam-training
phase. Now, we develop a method to estimate their ratio using just
two extra channel probes. Shown in Fig. 5, the gNB uses two RS
to probe two 2-beam patterns: first it sets the beam ùë§ (ùúô1, ùúô2, 1, 0),
and then ùë§ (ùúô1, ùúô2, 1, ùúã
2 ). For each of the two probes, it estimates
the channel magnitudes ùëù3 and ùëù4 as:

ùëù3 = |‚Ñé1 + ùëí ùëó0‚Ñé2|2 = |‚Ñé1|2 + |‚Ñé2|2 + 2‚Ñé1 Re(‚Ñé2)
ùëù4 = |‚Ñé1 + ùëí ùëó ùúã
2 ‚Ñé2|2 = |‚Ñé1|2 + |‚Ñé2|2 ‚àí 2‚Ñé1 Im(‚Ñé2)
‚àö
‚àí1. Using Eq. (11), we can estimate h1 and h2 individu-

(11)

where ùëó =
ally, and express their ratio as:

,

2

2

+ ùëó

(12)

‚Ñé2
‚Ñé1

= ÀÜùõøùëí ùëó ÀÜùúé =

ùëù1 + ùëù2 ‚àí ùëù4
‚àöùëù1

ùëù3 ‚àí ùëù1 ‚àí ùëù2
‚àöùëù1
where { ÀÜùõø, ÀÜùúé } are the estimates of the relative amplitude and phase
respectively between the two multi-beam paths. Thus, our algo-
rithm estimates the required parameters using only two consecutive
RS probes for the two-beam case. The algorithm can be generalized
to any ùêæ multi-beam by performing two probes for each additional
beam and solving Eq. (12) to yield ùêæ ‚àí 1 relative channels w.r.t ‚Ñé1.
In [14], the authors develop a similar technique, albeit for mea-
suring the per-element channel in a phased array. The channel
probing overhead in [14] is proportional to the number of anten-
nas ùëÅ (‚âà 5ùëÅ ). In contrast, our solution to measure the per-beam
channel requires 2(ùêæ ‚àí 1) + ùêæ probes for ùêæ beams (including the
ùêæ estimates from the beam-training phase) and is independent of
the number of antenna elements in the phased array; making it
tractable for large arrays.
‚ñ† Handling wideband channels: Typically, the Channel State
Information (CSI) is measured across multiple frequency subcarriers
over a wide bandwidth. The CSI is readily available for the 5G NR
system from the reference signal [1]. Even for 802.11ad commercial
routers, the CSI can be extracted in the firmware [2, 14, 49]. The
prior analysis can easily be extended to multiple subcarriers by
simply treating each subcarrier‚Äôs channel independently. We denote
h1 (ùëì ) and h2 (ùëì ) as the wideband CSI across frequency index ùëì . We
first estimate h1 (ùëì ), h2 (ùëì ) using Eq.(12). Then, we formulate an
optimization problem that maximizes the average received signal
strength overall frequencies to jointly estimate { ÀÜùõø, ÀÜùúé } as:

{ ÀÜùõø, ÀÜùúé } = arg max

ùõø,ùúé

(cid:13)
(cid:13)h2 (ùëì ) ‚àí ùõøùëí ùëóùúé
(cid:13)

h1 (ùëì )

(cid:13)
2
(cid:13)
(cid:13)

.

(13)

We solve the above to obtain a closed form solution (‚ü®¬∑, ¬∑‚ü© is the

inner product over the frequency dimension):

ÀÜùõøùëí ùëó ÀÜùúé = ‚ü®h1 (ùëì ), h2 (ùëì )‚ü©/(cid:13)

(cid:13)h1 (ùëì )(cid:13)
(cid:13)

2

(14)

Figure 6: Proposed architecture for delay phased array multi-
beamforming to handle wideband transmission. Note that this ar-
chitecture can solve wideband issue due to multi-path channel.
which reduces, as expected, to ÀÜùõøùëí ùëó ÀÜùúé = ‚Ñé2/‚Ñé1 for a narrowband chan-
nel (e.g. in IEEE 802.11ad 60 GHz standard [32]). The optimal phase,
amplitude, & angle will change over time as the user moves. We pe-
riodically estimate these parameters using our tracking algorithm
discussed in the next section.

3.4 Delay phased array beamforming for

wideband (channel bandwidth) operation

Here we explore a new architecture called delay phased array, which
uses two phased arrays connected with a network of delay lines
and then to a single RF chain. Each phased array creates a single
beam in a different direction such that they coherently add to a
single receiver. Such architecture can handle multi-path channel
bandwidth, providing flat frequency response.

We first show that a single beam system does not require the
new architecture because there is only one path that causes the
same delay at each antenna.

Let us reconsider the single path channel from ùëÅ antenna Base
station to a single antenna user. Assume the signal direction of
departure is ùúô1. At the far away location of receiver, the signal
travels a different distance from each of the transmit antenna which
causes a delay in signal arrival given by ùúè1 Considering this delay,
we rewrite the expression for single path channel from (5) to the
following expression of hsingle (ùë°, ùëõ):

ùúÜ sin(ùúô1)ùõø (ùë° ‚àí ùúè1)

hsingle (ùë°, ùëõ) = ‚Ñé1ùëí ùëó2ùúã (ùëõ‚àí1) ùëë

(15)
Here the delay ùúè1 is constant for all antennas and can be handled by
baseband processing. Therefore, the optimal beamformer for such
a single path channel remains a single beam pattern given by (6).
Multi-beamforming with new delay phased array archi-
tecture Next, we show that the traditional phased arrays optimal
for a single-beam system don‚Äôt work well for a wideband multi-
beam system. Then we propose a new architecture called delay
phased array based on delays and phase shifters that achieves opti-
mal multi-beam performance despite a large delay spread of multi-
paths.

The multi-path channel with two paths consists of delays ùúè1 and

ùúè2 as:
‚Ñé(ùë°, ùëõ) = ‚Ñé1ùëí ùëó2ùúã (ùëõ‚àí1) ùëë

ùúÜ sin(ùúô1)ùõø (ùë° ‚àíùúè1)+‚Ñé2ùëí ùëó2ùúã (ùëõ‚àí1) ùëë

ùúÜ sin(ùúô2)ùõø (ùë° ‚àíùúè2)
(16)

111ùëó11ùëù1=|‚Ñé1|2ùëù2=|‚Ñé2|2ùëù3=|‚Ñé1+‚Ñé2|2ùëù4=|‚Ñé1+ùëó‚Ñé2|2‚Ñé2‚Ñé1=ùõøùëíùëóùúé=ùëù3‚àíùëù1‚àíùëù22ùëù1+ùëóùëù1+ùëù2‚àíùëù42ùëù11‚Ñé1=Path-1 channel‚Ñé2=Path-2 channelMeasurementsCalculationsTraining SignalReference SignalPhased arraysRFùúèùúèùúô1ùúô2Variable Delay linesTowards Reliable and High Throughput mmWave Links

SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

Figure 7: Illustration of the advantages of our delay compensation
with delay phased array architecture. We achieve a flat frequency
response despite the presence of multi-path delays by compensat-
ing for the additional delays caused by the multi-path.

Here due to different delays of the two paths, the multi-beam beam-
former will suffer from wideband issues. That‚Äôs when two copies of
the same signal delayed by a different amount when adds up at the
receiver, creates an ineterference pattern at different frequencies.
Some frequencies has constructive addition while others may have
a destructive interference over a wideband scenario. To solve this
wideband issue due to multi-path delays, we propose a new delay
phased array architecture shown in Figure 6. Here we divide the
phased array into two or more groups, each for one beam in multi-
beam. We then create additional delays for each sub-phased-arrays
that cancel the difference in delays caused by the channel multi-
path. To create a two-beam beamformer in this case, we divide the
antennas in two groups of ùëÅ /2 antenna each and connect them
with a variable delay line. The expression of two-beam beamformer
is:

Ô£±Ô£¥Ô£¥Ô£≤
Ô£¥Ô£¥
Ô£≥

wùúô1,ùúô2

(ùëõ)

ùëí‚àíùëó2ùúã (ùëõ‚àí1) ùëë
ùëí‚àíùëó2ùúã (ùëõ‚àí1) ùëë

ùúÜ sin(ùúô1)ùõø (ùë° ‚àí Œîùúè1),
ùúÜ sin(ùúô2)ùõø (ùë°),

if ùëõ ‚â§ ùëÅ /2
if ùëÅ /2 < ùëõ ‚â§ ùëÅ

(17)
where we apply a delay shift of Œîùúè1 at the first sub-phased-array to
compensate for the multi-path delay difference in two paths.

Such a two-beam beamformer is better than the one in (10)
because it will work for a wide range of frequencies as shown in
Fig. 7. Here, we show that a single path channel has a flat frequency
response, but a two path channel suffers from imperfect frequency
response where some frequency bands are severely attenuated.
We also show that by compensating for the multi-path delays, we
achieve frequency flat response, while providing 2x gain compared
to a single beam system.

In Fig. 8, we show through simulation that the optimal mmReli-
able beamformer created using our delay phased array architecture
has a flat response across the entire frequency band, while a multi-
beam without the proposed delay phased array architecture suffers
from low SNR for certain frequencies. We plot two baselines with
natural multipath delay spread of 5 ns and 10 ns respectively. While

Figure 8: SNR with range of frequencies. The delay-optimized mm-
Reliable response is flat across all frequency irrespective of any
channel delay spread. It also shows for two different delay spread
of 5 ns and 10 ns, the SNR suffers at certain frequencies if we do not
consider the proposed delay phased array architecture.

non-optimized mmReliable suffer from signal degradation, delay-
optimized mmReliable can compensate for this delay spread and
achieve optimal flat performance.

4 Proactive multi-beam tracking
Once a constructive multi-beam is established, mmReliable main-
tains it over time to honor the goal of reliable mmWave commu-
nication. The purpose of beam maintenance is to keep a high-
throughput link even when the user is mobile or sees a random
blockage. One choice for beam maintenance could be to period-
ically repeat the set of procedures in Section 3.3 to re-establish
constructive multi-beam with a mobile user. However, it will re-
quire repeating the beam-training phase, which incurs significant
delays and probing overhead (Section 2.2). We observe that the ef-
fect of blockage and mobility is embedded naturally in the form of
variations in the wireless channel. Thus, our approach is to leverage
OFDM channel estimate and reference signaling to maintain a multi-
beam link and avoid impending blockage and mobility events while
the communication link is active. We show the overall functioning
of mmReliable using a flow-chart in Fig. 9. mmReliable continu-
ously monitors the OFDM channel to identify blockage or mobility
on a per-beam basis. User mobility is tracked in the background,
and the multi-beam is refined periodically with a low-overhead.
When the beam is no longer recoverable by tracking alone (due to
accumulated errors in tracking over time), mmReliable re-calibrates
the system using the beam training phase.

4.1 Proactive Blockage Mitigation
Mobile blockers interact with the multi-beam system by suddenly
occluding one or more active beams. mmReliable analyzes the rate
of change of amplitude per beam to detect such events. Empiri-
cal evaluation shows that typical blockage events cause per-beam
amplitude to degrade by 10 dB in just 10 OFDM symbols. Once a
blockage event is detected, mmReliable responds by re-purposing
the power on the blocked beam to other unblocked ones. Since
there are always multiple beams active, there is no significant im-
pact on link reliability, even if one is blocked. Said differently, the
transceiver reduces the number of beams whenever blockage is

FrequencyFrequencyFrequencyFrequency DomainBand of interestSNR 7.8 dBSNR 13.8 dBSNR 10 dBDelayùúè1‚ÑéDelayùúè2‚Ñé‚ÑéùõøDelay Domainùúè1‚Ä≤Delayùúè1‚Ñéùúè2‚ÑéùõøùëíùëóùúéOriginal single-path channelConstructive two-path channel with delay-phasedarrayUnoptimized two-path channel-50-40-30-20-1001020304050Frequency (MHz)4567891011SNR (dB)Delay 5nsDelay 10nsOptimal mmReliableSIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

IK Jain, R.Subbaraman, D.Bharadia

Figure 9: Overview of mmReliable‚Äôs proactive response against
blockage and user mobility.

detected along some paths. It is rare that all paths are blocked si-
multaneously; nonetheless, in case of a complete outage, the radio
can initiate a new beam training phase to search for other alternate
paths or perform a handover [24].

4.2 Proactive User-Mobility Management
When the user is mobile, the initial multi-beam may no longer be
supported. A mere angular movement of 14o would cause a 20dB
loss in signal strength leading to outage. A natural solution is to re-
quest a new beam training to locate the new user position, but beam
training causes high overhead in tedious scanning. We propose to
proactively track the user mobility using channel measurements
and refine the beam periodically. Traditional in-band tracking based
on single-beam is not applicable to mmReliable since each beam
in multi-beam may undergo different angular deviation making it
challenging for tracking as shown in Figure 10.

Our insight is that we can track each beam by observing the
gradual changes in per-beam power. We propose a model driven
approach to estimate per-beam angular deviation from the per-
beam power measurements, ùëÉùëò (ùë°) given by

ùëÉùëò (ùë°) = ùê∫ùëá (ùúôùëò + ùúëùëò (ùë°)) + ùê∫ùëÖ + ùëÉùëá ‚àí ùëÉ‚Ñé (in dB).
(18)
where ùê∫ùëá (ùúôùëò + ùúëùëò (ùë°)) and ùê∫ùëÖ are transmit and receive gain re-
spectively, where initial angle ùúôùëò changes by ùúëùëò (ùë°) over time, ùëÉùëá is
transmit power, and ùëÉ‚Ñé is power decay due to channel impairments.
We take the difference ùëÉùëò (ùë°0) ‚àí ùëÉùëò (0) to find the relative change in
the per-beam power as:

ùëÉùëò (ùë°0) ‚àí ùëÉùëò (0) = ùê∫ùëá (ùúôùëò + ùúëùëò (ùë°0)) ‚àí ùê∫ùëá (ùúôùëò )
(19)
where we assume that the channel loss ùëÉ‚Ñé (due to path loss or
reflection loss) and receiver gain ùê∫ùëÖ of omni-user is static for the
small duration of user motion. Now, to estimate ùúëùëò (ùë°0), our insight
is that the direct path power correlates with the beam pattern at
the gNB, which is a function of spatial angle:

ùê∫ùëá (ùúÉ ) =

sin(ùëÅùúÉ /2)
ùëÅ sin(ùúÉ )

(20)

where ùëÅ is the number of antennas in a uniform linear array and ùúÉ is
spatial angle. Therefore, we can use an inverse function to estimate
the angle from the measured per-beam power. However, the beam
pattern is usually symmetric, and two possible values ùúë (ùë°0) and
‚àíùúë (ùë°0) could have caused the observed change in ùê∫ùëá . To deal with
the ambiguity of the direction of motion, mmReliable tries one of
the two possibilities using reference signal probing in the hope that
it improves the SNR. If the probe doesn‚Äôt improve SNR, possibly
the other angle is correct, and thus, mmReliable refines the beam to
that angle. The refinement adds an overhead of only one additional

Figure 10: User mobility causes beams in multi-beam misalign with
the user. Each beam may undergo a different angular deviation.

Figure 11: Efficiency of superresolution algorithm: (a) Simulation:
Superresolution provides low MSE of per-beam power estimate
even when the relative ToF is less than system resolution of 2.5 ns.
(b) Hardware measurement: shows two sincs can be recovered from
measured combined CIR.
probe in addition to 2(ùêæ ‚àí 1) probes required for constructive multi-
beam for the K-beam case. mmReliable periodically estimates the
value of the per-beam angle, phase, and amplitude and updates the
beam pattern at the gNB to realign towards the user.

4.3 Superresolution: Per-Beam Tracking
Here we describe how mmReliable estimates the per-beam power
required for the tracking algorithm. A simple solution would be
to scan single-beams in all ùêæ directions and observe the corre-
sponding signal strengths. But, such scanning is intractable due
to high overhead in acquiring fine-grained power estimates for
efficient tracking. Our idea is to estimate per-beam power using
the channel impulse response (CIR) of the current multi-beam in
the background without any tedious scanning. When receiving a
multi-beam transmission, it can be shown that the signal at the
receiver consists of a superposition of a delayed and attenuated ver-
sion of each individual transmit beam. If we consider the delay and
attenuation experienced by beam-index ùëò as ùõøùëò and ùõºùëò respectively,
then the effective multi-beam channel can be expressed as:
‚àëÔ∏Å

‚Ñéeff =

ùõºùëòùõø (ùë° ‚àí ùúèùëò ),

ùëò

where ùõºùëò is a function of the transmitter and receiver beam pattern,
while ùõøùëò relates to the Time of Flight (ToF) of each multi-beam
channel path. Recall that our goal is to estimate the individual ùõºùëò
for each beam (ùëò = 1, . . . , ùêæ).

For a frequency-selective wideband system the received signal
is sampled at sampling rate and sinc interpolated due to limited
bandwidth as follows:

‚Ñéeff [ùëõ] =

ùõºùëò sinc (cid:0)ùêµ(ùëõùëáùë† ‚àí ùúèùëò )(cid:1)

‚àëÔ∏Å

ùëò

(21)

(22)

Estimate per-beamamplitude/power(super-resolution)OFDM ChannelGet CIRHas power changed?BlockageMitigationMobilityManagementProactive responseMulti-beam RefinementBlockage vs MobilityNoYesInitial beam scanTraining SignalData and Beam MaintenanceMulti-beamestablishmentReference SignalBeam Training (a) User mobility w.r.t.gNB(b) User mobility w.r.t.virtual gNBMobile UEgNBstatic ùúë1ùúë2ùë°=ùë°0ùë°=0Mobile UEgNBstatic Virtual gNBùúë1ùúë2ùë°=ùë°0ùë°=0051015RelativeToF(ns)10-610-410-2100MSEofpowerestimatew/o super-resolutionw/ super-resolution(a)020406080100Time (ns)(b)-60-50-40-30-20CIR(dB)MeasuredRecovered Sinc1Recovered Sinc2Towards Reliable and High Throughput mmWave Links

SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

Figure 12: Demonstrating beam misalignment for a multi-beam UE.
where ùêµ is the bandwidth, ùëáùë† is the sampling rate of the receiver,
and ùõºùëò is total signal attenuation along path ùëò.

We can re-write the above formulation as an optimization prob-
lem where our objective is to find ùõºùëò such that it fits the channel
best. Let say the collected CIR is represented by column vector hCIR.
We solve the following optimization to extract ùõº = [ùõº1ùõº2 . . . ùõºùêæ ]ùëá ,
which amplitude per beam.
ùõºùëíùë†ùë° = arg minùõº

‚à•hCIR ‚àí Sùõº ‚à•2 + ùúÜ‚à•ùõº ‚à•2

(23)

where the matrix S consists of all the ToF. We are essentially solving
a super-resolution problem by fitting a sinc model over the entire
CIR response. The optimization is a convex formulation, with L2
norm regularization. We use standard techniques [50, 51] to solve
this problem in 100ùúás. Here, we make a key observation that, after
training, the absolute ToF may have changed, but the relative ToF
changes slowly. Our key idea is that we shift the hCIR first so that
the strongest path is shifted to zero delays and since we know
relative to the first path, the delay of the second and third path.
We can populate the S matrix with only a few columns, thereby
achieving accurate and reliable solutions to ùõºùëò . We account for
small variations in relative-ToF by trying few values around the
initial value that best fits our model. In summary, we have built
an accurate super-resolution algorithm by leveraging the initial
relative-ToF information between the multi-beams.
‚ñ† Efficiency of super-resolution algorithm: In Fig. 11(a), we
show that our super-resolution algorithm can indeed achieve high
resolution in estimating per-beam amplitude even when the relative
ToF is lower than what corresponds to the resolution (2.5 ns for 400
MHz bandwidth). We also measure the channel impulse response
through our testbed (6m link with a reflector placed at 30o) in Fig.
11(b) and show that our super-resolution can efficiently extract the
two sinc which are superimposed in the received CIR.

4.4 Generalization to Multi-beam UE
So far we developed mmReliable for a quasi-omni beam pattern
at the user equipment (UE). Directional beams may be required
at the UE side when the SNR is low, e.g., for longer outdoor links.
mmReliable extends naturally to the scenarios where the UEs also
have directional beams. In order to do so, mmReliable utilizes the
design concepts discussed before, like super-resolution, proactive
tracking to mitigate the multi beam link against outages due to
mobility, thus addressing the new system level challenges posed by
directional UEs.

The main challenge posed by a directional UE is misalignments
on both the UE and gNB side due to UE mobility. Consider the
scenario in Fig. 12 (a), in which because of UE moving from t=0 to
t=ùë°0, the two beams at the gNB are misaligned by ùúë1, ùúë2 angle differ-
ences respectively. We see a similar misalignment at the UE side as
well. If the UE and gNB were able to estimate these misalignment
angles, they could compensate for the UE mobility by realigning

the beams ùëé1, ùëè1 and moving them ùúë1, ‚àíùúë1 respectively, and ùëé2, ùëè2
will be realigned by ‚àíùúë2, ùúë2 respectively. Along with estimation of
ùúë1, ùúë2, this step also requires association of beams ùëé1, ùëè1 and ùëé2, ùëè2,
since there could be fallacious solutions by associating ùëé1, ùëè2 or
ùëé2, ùëè1 together. Hence, handling UE mobility involves solving the
two step problem, by first correctly associating one multi beam to
the other, and then estimating the misalignment angles. The first
problem follows as a corollary of our super-resolution algorithm,
which allows to resolve the per path CIR, and by utilizing the unic-
ity of ToF, we can associate two per path CIRs and hence associate
the two beams which are along these respective paths.

In order to mitigate against the misalignments due to user mo-
bility, mmReliable needs to repeatedly estimate and compensate
for the misalignment angles. For estimation of the misalignment
angles, we develop individual models for tracking translation and
rotation similar to our approach in Eq. (19). The rotation of UE
beam causes changes in UE antenna gain from which we can esti-
mate the angle of rotation using a inverse function (Fig. 12). The
translation case causes changes in both the gNB‚Äôs and UE‚Äôs antenna
gain. The received power in this case will be the sum of the two
antenna gains. To estimate the angle in this case, we leverage our
observation that the beams at gNB and the UE gets misaligned by
the same angle (Fig. 12). We estimate this angle by inverting the
sum of the beam pattern at gNB and UE. In this way, we track the
user motion and proactively refine the beams.

5 Implementation
We use a custom 28 GHz mmWave testbed to evaluate the per-
formance of mmReliable. Our testbed consists of two major com-
ponents as shown in Fig. 13(a): (i) an 8√ó8 mmWave phased array
(PA) with real-time beamforming, and (ii) a baseband module that
generates and processes standard-compliant OFDM waveforms. For
more details on the architectural choices and performance of our
testbed, we refer the reader to [31]. In this section, we describe
components relevant to this work in greater detail.

5.1 Phased Array and beamforming
Our 8√ó8 Phased Array has only one RF chain and is designed in-
house [31, 52, 53]. It features an integrated up-down converter that
operates with an IF frequency of 3.5 GHz. The array is capable
of 2 GHz bandwidth centered at 28 GHz and includes amplifiers,
image-reject filters in both transmit and receive directions. We use
only the azimuth for beamforming and set all the weights along
the elevation to the same value. We use a Cinetics Axis-360 [54]
gantry system to precisely move the array for our evaluations.
‚ñ† Beamforming Control: Inspired by state-of-the-art design [55],
we use an Artix-7 FPGA [56] with custom Verilog modules to pro-
gram the phased array with high speed (100 us per beam) and ac-
curate timing over an SPI bus. In practical systems, beam-weights
that span a limited set of angular directions (typically numbering
64-1024) are programmed into the memory of the FPGA device [14].
Multi-beams require beam-specific amplitude and phase in addi-
tion to angular directions, and storing all possible combinations in
memory could be intractable. Since multi-beams are linear sums of
single-beam-weights, they can be generated using simple addition
and multiplication operations on the FPGA. It would allow the fast

gNB(staÔøΩc)VirtualgNBReÔ¨ÇectorUE (mobile)ùúë1ùúë2ùúë2ùúë1t=0t=ùë°0gNB(staÔøΩc)ReÔ¨ÇectorUE (rotaÔøΩng)ùúë2=ùúë1ùúë1(a) User TranslaÔøΩon(b) UserRotaÔøΩonùëé2ùëé1ùëé1ùëé2ùëè2ùëè1ùëè1ùëè2SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

IK Jain, R.Subbaraman, D.Bharadia

Figure 13: (a) Our experimental testbed with FPGA baseband and 64 element phased array [31], (b) indoor 5m and (c) outdoor 80m test scenarios.
Our phased array is mounted on a gantry system which provides precise translation and rotation measurements used as ground truth. (d)
Comparison of multi-beam patterns from theoretical analysis and our measurements.
creation of multi-beam weights while requiring storage of only
single-beam weights.
‚ñ† Beam Weight Quantization: Phase-coherent multi-beam pat-
terns can be generated using minimum 2-bit phase shifters and 1-bit
amplitude control (turning antenna on or off) [14, 57, 58] which
is available in commercial 802.11ad devices [49, 59, 60] as well as
28 GHz 5G NR [61, 62]. Having higher resolution in phase and am-
plitude control helps create accurate single-beam and multi-beam
patterns that reflect mathematical models. Our array provides 6
bits of phase control and 27 dB of gain control per antenna element
similar to commercial products [55, 61, 62]4. Fig. 13(d) shows that
our phased arrays generate accurate multi-beam patterns.

5.2 Baseband module and 5G-NR compliance
Fig. 13(d) Shown in Fig. 13(a), we use a 1 GSPs ADC/DAC in conjunc-
tion with a KCU-105 FPGA [65, 66] for creating 400 MHz baseband
OFDM waveforms. We use an off-the-shelf IF mixer [67] to up/down-
convert to the IF frequency of 3.5 GHz. For outdoor experiments
(Fig. 13(c)), we use a compact setup with a USRP X300 (100 MHz
bandwidth) [31]. A host PC running MATLAB controls waveform
generation, post-processing, and beamforming. We synchronize
the array‚Äôs clock with that of the baseband module to switch beams
at intervals with an accuracy of < 0.1ùúáùë†.
‚ñ† 5G-NR Compliance: To ensure that mmReliable is compatible
with 5G NR standards, we use OFDM waveforms with an effective
bandwidth of 400 MHz or 100 MHz and numerology that yields
120 kHz sub-carrier spacing [1, 68]. The beam-training phase in
5G-NR is performed using channel estimates from Synchroniza-
tion Signal Block (SSB), which repeats with a default period of 20
ms [69, TS 38.215]. mmReliable leverages channel estimates from
the Channel State Information Reference Signal (CSI-RS) [69, TS
38.215] for beam-maintenance. CSI-RS can be sent arbitrarily with
a spacing ranging from 0.5 ms to 80 ms. A CSI-RS occupies only
one symbol (8.93ùúás@120 kHz) in the slot and only a few frequency
subcarriers [69, TS 38.211], contributing much less overhead than
an SSB. For example, by using only one CSI-RS symbol every 20
ms for beam-maintenance, we incur an overhead of less than 0.04%.
While beam-training cannot be avoided altogether, the maintenance
scheme can reduce its periodicity. If the periodicity of a 5 ms long
SSB can be extended to 1 second, then the overhead of the entire
beam-maintenance process is 0.5% of channel air time. During post-
processing, we use channel estimates only at standard specified
intervals to evaluate all algorithms.

4Verizon, Ericsson, & other commercial vendors deploy high-resolution 28 GHz phased
arrays developed by Samsung, IBM & others [63, 64]

Figure 14: Sensitivity analysis (simulation): SNR gain (dB) of 2-beam
w.r.t. single-beam for varying 2nd beam‚Äôs phase ÀÜùúé and amplitude ÀÜùõø
in multi-beam. We show for a -3 dB weaker multipath channel, the
multi-beam‚Äôs highest SNR gain is 1.76 dB which is not very sensitive
even for a high phase error of ¬±75o. However, if the phase error is
highest (180o), the SNR drops significantly.
6 Evaluation
We evaluate the performance of mmReliable for various indoor
and outdoor settings: a 7ùëö √ó 10ùëö conference room occupied with
wooden furniture, whiteboard, and reflective glass walls (Fig. 13(b))
and an outdoor 30ùëö ‚àí 80ùëö link next to a large building with glass
walls (Fig. 13(c)). The Tx module of the testbed is used as a fixed
gNB, while the Rx module is movable as a mobile user placed on
a cart. The phased array antenna of the Tx is kept vertical, facing
the user, and parallel to the line of user translation. The precision
gantry setup allows 70 cm linear motion and 360-degree rotation
about its axis accurate to 1 cm and 0.1o, respectively, for controlled
experiments. The Rx phased array mounted on the gantry (see Fig.
13 (a)) moves as a mobile user with 24o/s rotation (typical speed
for VR headset motion [70]) and 1.5m/s translation speed in indoor
scenarios. For outdoor experiments, we manually move the cart to
a predefined trajectory for accurate ground truth information. We
also experiment with natural motion for end-end experiments.

We perform multiple experiments of 1-sec duration with mobil-
ity and blockage. At the beginning of each experiment, we perform
beam training to estimate the angle to the user and establish direc-
tional communication. We then run our constructive multi-beam
and user tracking algorithm to realign the beam patterns in real-
time as the user moves. Our testbed reports the complex channel per
sub-carrier, Signal to Noise Ratio (SNR), and throughput of the wire-
less link as performance metrics similar to others [9, 12, 62, 71, 72].

6.1 Micro Benchmarks
Here we present benchmarks for both constructive multi-beam and
proactive user tracking to characterize our system.
‚ñ† Sensitivity Analysis of Multi-Beam: Accurate estimation of
phase and amplitude provides the highest SNR; however, it is not
very sensitive to estimation errors in these parameters. To quantify
the sensitivity, we simulate a two-path channel and set the relative

-90-60-300306090-30-20-100-90-60-300306090-30-20-100TheoryMeasuredgNBUEUEgNBBaseband ProcessingControlBoardIF mixerPhasedarray(d) Multi-beam patterns(a) Experiment testbed(b) Indoor scenario(c) Outdoor scenario5m80m-160-120-80-4004080120160Phase (deg)-20-100Amplitude (dB)-4-202SNR gainTowards Reliable and High Throughput mmWave Links

SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

Figure 15: (a) SNR measurements with different phases of the 2nd beam in our 2-beam pattern, (b) SNR measurements with various amplitudes
of the 2nd beam through brute-force probing. We also show that our constructive multi-beam requires only two probes and provides accurate
phase and amplitude estimates without brute-force scanning. (c) The optimal phase is stable over a frequency range of 100 MHz. (d) SNR gain
of multi-beam against the single beam and oracle (knows the best channel-dependent beam) for a static unblocked link.

Figure 16: Multi-beam is more reliable and blockage resilient com-
pared to a single beam.

phase and attenuation to ‚àí40o and ‚àí3 dB, respectively. We vary
the relative phase and amplitude of the 2nd beam in a 2-beam
pattern (w.r.t. the first beam) and show the 2D plot of SNR gain
in Fig. 14. The highest SNR gain is 1.76 dB for perfect estimation,
which reduces gradually with an increasing mismatch between
channel parameters and their estimations. The multi-beam SNR
exceeds the single-beam SNR and can tolerate errors of ¬±75o in
phase estimation and amplitude errors of -20 dB.
‚ñ† Constructive combining accuracy: We first show the need for
constructive combining in a multi-beam system and then evaluate
the performance of mmReliable‚Äôs algorithm for estimating the phase
ùúé and amplitude ùõø needed for constructive combining. We establish
an indoor multi-beam link with two beams towards a static UE at
7 m along a LOS angle of 0‚ó¶ and NLOS angle of 30o, respectively.
We set the phase and amplitude of the first beam to be 0 radians, 0
dB, respectively. We then perform an exhaustive scan of the second
beam‚Äôs phase in the range [0, 2ùúã] and observe the SNR variations
in Fig. 15(a). We see that the SNR is a maximum of 27 dB with a
minor variation of around 1 dB in the range of ¬±70‚ó¶. Any estimate
in this range would give a high SNR. But, if the phase estimate
is off by 180‚ó¶, the SNR degradation could be as significant as 13
dB, which motivates the need for constructive multi-beam. It also
indicates that mmReliable‚Äôs two-probe method accurately estimates
the phase of 2.5 radians, which maximizes the SNR. Similarly, we
perform an exhaustive scan of the second beam‚Äôs relative amplitude
in the range of [‚àí10, 2] dB and show the SNR variations in Fig. 15(b).
It indicates that the SNR is highest for a range of amplitude around -
5 dB to -3 dB. Therefore our estimate of -3.8 dB using the two-probe
method is reasonably accurate. Finally, we show the per-beam
phase‚Äôs stability over the 100 MHz frequency range in Fig. 15(c).
We observe that phase variation is less than 1 rad, which doesn‚Äôt
impact the SNR gain of our multi-beam system.
‚ñ† SNR gain due to constructive multi-beam: We now verify
that constructive multi-beam leads to higher SNR than a single beam
system, even for a static unblocked link. We reuse our previous

set-up and measure that our two-beam multi-beam link provides
1.04 dB SNR improvement on average compared to a single beam
oriented towards the LOS path (Fig. 15(d)). The SNR gain is achieved
by constructively combining the signal along the two-channel paths.
To understand how many beams are required in a multi-beam, we
establish an oracle channel-dependent beam that uses the chan-
nel at each antenna element of the phased array. Obtaining this
oracle beam requires an extensive measurement process with a
high overhead [14]. This oracle beam provides an SNR gain of 2.5
dB w.r.t. single beam. We show that our multi-beam pattern with
only three beams (utilizing the three most strong channel paths)
provides a 2.27 dB gain w.r.t. single beam, which performs similarly
to the oracle beam. This analysis indicates that 3-beams are enough
to achieve within 92% of the optimal beam with significantly less
overhead.
‚ñ† Static link with blockages: To study the impact of blockage on
a multi-beam link, one of the authors walks across our established
link multiple times with a consistent walking speed. From Fig. 16,
we observe that our multi-beam link with two beams is blocked
twice as the blocker passes both the NLOS and LOS link. However,
even for the LOS link blockage, the SNR reduction is only 7 dB,
which does not cause a link outage. In comparison, a single beam
link SNR degrades by 26 dB, below the outage threshold of 6 dB
SNR (required for decoding 5G-NR OFDM signals). Therefore, a
multi-beam link is resilient to outages because it avoids a single point
of failure.
‚ñ† Accurate per-beam power estimation: We now test our
multi-beam link under mobility. We set up a multi-beam with two
beams at the transmitter and rotate the transmit phased array us-
ing our gantry. We then collect the channel estimates with our
Omni-directional receiver and estimate per-beam power using our
super-resolution algorithm. We plot the per-beam power of the
two beams in multi-beam with ground truth angle in Fig. 17(a). We
observe that per-beam power reduces with the angle of rotation and
follows the beam pattern. We observe perturbations in power values
due to measurement noise, which may affect tracking performance.
To improve tracking accuracy, mmReliable takes time average of
power values with a forgetting factor & fits a quadratic polyno-
mial to smooth the data. With proper scaling, the curve fitting
approximates the beam pattern within 1 dB mean error (Fig. 17(a)).
‚ñ† Accurate rotation angle estimation: We next evaluate the
performance of our tracking algorithm. We perform multiple ex-
periments with a uniform rotation of the transmitter array. The
frequency of rotation is varied over a range of 2o to 8o, and the

0/32/34/35/32Phase 2nd-beam (Deg)(a)1015202530SNR (dB)Estimate=2.5 radMeasurementsTwo probes-10-8-6-4-202Amplitude 2nd-beam (dB)(b)25.52626.52727.5SNR(dB)Estimate -3.8 dB020406080100Frequency (MHz)0246Optimal phase (Rad)(c)Oracle3-Beam2-Beam1-BeamBeamformingType24262830SNR(dB)(d)00.20.40.60.81Time (sec)-100102030SNR (dB)Outage threshold: 6 dBMulti-beamSingle-beamNLOS linkblockedLOS linkblockedSIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

IK Jain, R.Subbaraman, D.Bharadia

Figure 17: (a) Effect of noise and channel impairments on user tracking for UE rotation. We show that even NLOS paths with low signal
strength can be tracked effectively. (b) Tracking angle accuracy: mmReliable can estimate the angle within 1o error on average. (c) Tracking
time series showing the advantage of constructive combining (CC) & tracking; the shaded region shows standard deviation across multiple
experiments, and lines show mean throughput.

Figure 18: The end-to-end performance gain of mmReliable compared to baselines under different scenarios: (a) Static link with blockages
(*evaluates mmReliable without proactive user tracking) (b) Reliability for a mobile link (c) Overall Throughput-Reliability Trade-off; ellipses
represent standard deviation in two dimensions. (d) mmReliable (mmR.) has a low probing overhead than vanilla 5G NR.
average angle estimated by our algorithm is reported in Fig. 17(a).
The mean angle estimate is accurate to 1o for tracking both LOS &
the NLOS link when compared against ground truth.
‚ñ† Tracking accuracy time series: Accurate angle estimation
by mmReliable‚Äôs proactive tracking algorithm helps maintain a
high throughput link under user mobility. Figure 17(c) shows the
throughput of our multi-beam links for a uniform translation of 1
sec duration (at 1.5 m/s speed) under three situations. First, we show
that the link throughput degrades from 600 Mbps to ‚àº 100 Mbps
below our outage threshold if no tracking is performed. In contrast,
multi-beam tracking with constructive combining (CC) approach
maintains a consistently high throughput 1-sec of user mobility.
Finally, if we perform tracking alone, without doing constructive
combining optimization, the throughput improvements are lower
by an average of 100 Mbps compared to the case of tracking plus
CC. Thus, mmReliable provides consistently high throughput due to
its super-resolution, per-beam tracking, & constructive combining
algorithms.

(ii) Reactive baseline [11], which implements a fast beam training
in response to the blockage event. Both baselines are based on
a single beam, and they suffer from a single point of failure to
link blockage and act after an outage is detected. We see from Fig.
18(a) that mmReliable outperforms both baselines and provides a
high throughput mmWave link even under the impact of blockage.
mmReliable‚Äôs throughput drops only by 4% even when there are
two blockers near the beams because of the proactive utilization
of reflectors. Since BeamSpy [12] was designed for 60 GHz links,
we show that mmReliable beats BeamSpy even for 60GHz links in
Appendix B.
‚ñ† Improvement in Reliability for mobile links: We perform
user translation and rotation experiments in multiple indoor and
outdoor environments. As the user moves, a human blocker is in-
troduced midway between gNB and UE, blocking the link for a
duration chosen uniformly between 100 ms to 500 ms [5], over
1-sec experiments. We perform 100 such experiments and combine
the results to form one point, and various user mobility and block-
age patterns across two indoor environments are reported on the
throughput and reliability curve. Fig. 18(b) shows that mmReliable
achieves close to 100% reliability (median value 1). The reactive
baseline suffers from lower reliability of median value 0.65, while
the widebeam baseline is at 0.5. Thus, mmReliable achieves its goal
of high reliability.
‚ñ† Throughput-Reliability Trade-off: We introduce a new method
to evaluate mmWave systems by interpreting the data from the last
sub-section using both reliability and throughput metrics. Using
both metrics allows us to compare mmReliable with other baselines
to assess the throughput-reliability tradeoff in Fig. 18(c). Across all

6.2 End-to-end Results
We present end-to-end results for mmReliable and compare the
performance against other baselines [11, 12, 73].
‚ñ† Multi-beam performance for static link: We first show that
mmReliable with constructive multi-beam and proactive response
to blockages can beat other single-beam-based baselines for static
links. For this, we implement mmReliable without the user tracking
algorithm. We also implement two baselines; (i) BeamSpy [12]
which detects link blockage by exploiting spatial channel profiles
to find the alternate unblocked link without extensive training.

0246810User motion angle (Deg)(a)-24-22-20-18-16-14Normalized Gain (dB)NLOSLOS-12Measured dataCurve fitTheory pattern-10Measured dataCurve fitTheory pattern2345678Angle Ground Truth (Deg)0510Angle estimate (Deg)(b)LOSNLOSGround TruthLOSNLOSGround Truth00.20.40.60.81Time (s)20040060080010001200Throughput (Mbps)With Tracking and CCWith Tracking W/o CCW/o Tracking0(c)With Tracking and CCWith Tracking W/o CCW/o TrackingNo blocker1-blocker2-blockerNumber of Blockers700750800Throughput (Mbps)mmReliable*BeamSpyReactive(a)00.20.40.60.81Reliability00.20.40.60.81CDFmmReliableReactive baselineWidebeam baseline(b)00.20.40.60.81Reliability02004006008001000Avg. Throughput (Mbps)mmReliableReactive baselineWidebeam baseline(c)8163264Number of antennas02468Probing overhead (ms)Vanilla 5G NRmmR. 3-beammmR. 2-beam(d)Towards Reliable and High Throughput mmWave Links

SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

experiments, mmReliable is not significantly affected by throughput
loss, while the other benchmarks show degradation due to blockage
and user mobility. The results indicate that mmReliable delivers an
average throughput improvement of 50% over the reactive base-
line (200 Mbps improvement over 400 Mbps). More importantly,
mmReliable offers a consistent throughput with low variations
compared to the baselines, essential to many mission-critical ap-
plications. The evaluation reveals that mmReliable is advantageous
over throughput-based design on both throughput & reliability.
‚ñ† Beam probing overhead: mmReliable reduces the beam prob-
ing overhead by maintaining a multi-beam link through tracking
and beam refinements. The proposed beam refinement procedure
requires three CSI-RS probes for two-beam case: two for estimating
ùõø, ùúé and one probe for detecting the direction of motion. For the
3-beam case, it only increases to 5 probes. On the other hand, an
entire beam scan using SSB in traditional 5G NR requires a large
number of SSB probes proportional to the number of spatial di-
rections. One CSI-RS occupies one slot, which is 0.125 ms at 120
kHz sub-carrier spacing, and one SSB takes four slots (0.5 ms). Let‚Äôs
consider the best scanning method, which requires the number of
probes proportional to only a logarithmic number of antennas [11].
We show in Fig. 18(d) that traditional 5G NR suffers from higher
probing overhead compared to mmReliable. The 5G NR probing
overhead for eight antennas base station is 3 ms, which increases
to 6 ms for 64 antennas (because of the high directionality of beam
patterns). In contrast, the overhead of mmReliable remains as low
as 0.4 ms for 2-beam & 0.6 ms for 3-beam cases independent of
the number of antennas. Thus, mmReliable is an efficient solution
for beam management, which improves mmWave link reliability &
throughput while maintaining low system overhead.

7 Related Work
mmReliable is closely related to extensive work in mmWave com-
munication literature, therefore we have grouped the past work
into following categories.
‚ñ† Channel-dependent or multi-beamforming: Multi-beam
patterns belong to the family of channel-dependent beamform-
ing [14, 41] where the beamforming weights are obtained to max-
imize the SNR for a given channel condition. For instance, [41]
showed through channel-sounding measurements that combining
multiple signals across four directions could achieve 28 dB improve-
ment in path-loss at 28 GHz; however, they require multiple phased
arrays. Traditionally these optimizations are proposed for a MIMO
system that uses channel measurements at each antenna [74‚Äì76]
for digital beamforming. In contrast, mmReliable focuses on analog
beamforming where the signal from each antenna element is con-
nected through a single RF chain. ACO [14] proposed a procedure
to estimate per-antenna CSI for analog array by designing a specific
beam scan procedure.

However, all work in this field incurs high overhead propor-
tional to the number of antennas and cannot be repeated often as
the channel changes. In contrast, we propose a multi-beam that ap-
proximates the optimal beam pattern and is easy to maintain with
low overhead. A similar system [34] proposes constructive multi-
beam for communication that focuses solely on beam-training and
multi-beam creation. Specifically, it does not describe any beam-
maintenance scheme and therefore would incur high overheads and

be unreliable in practice. mmReliable is the first system that enables
multi-beam constructive combining with low-complexity beam
training and continued beam maintenance, mitigating blockage
and mobility effects.
‚ñ† Blockage and mobility: BeamSpy [12] and Beam-forecast [13]
provide a model-driven approach to handle blockage and mobility,
respectively. However, they suffer from high run-time optimization
and table-lookup complexity. To recover from a complete outage,
UBig [77] performs efficient handovers, and mmChoir [78] proposes
joint transmission from multiple base stations. These approaches
may improve system reliability but add additional signaling over-
head. Location estimation using extensive beam training from single
or multiple gNBs are proposed in [73, 79‚Äì82]. In contrast, mmReli-
able performs tracking of the user without any training overhead.
[58] developed a mechanism to detect the direction of user move-
ment and adjust beam direction in small increments. Though they
use a 2-lobe pattern to detect mobility, they switch back to a single-
beam pattern for communication. The fundamental difference is
they use a single beam and are generally reactive.
‚ñ† Beam Training: A vast literature focus on reducing the ini-
tial beam training delay through single-beam [7‚Äì9, 19, 20, 20] or
multi-beams [10, 11, 34, 35, 83]. In contrast, mmReliable focuses on
link maintenance and reliability and therefore is complementary to
initial beam training approaches. High training overhead may be re-
duced by taking assistance from device positioning systems [24, 25]
or light sensors [23], out-of-band WiFi [21, 22], and multi-user co-
ordination techniques [84, 85]. However, in contrast to mmReliable,
they suffer from relatively lower accuracy with added complexity
while dependent on external devices. mmReliable high accuracy is
achieved based on the super-resolution algorithm combined with
the motion tracking algorithm.
‚ñ† Reflecting surfaces: Prior work on active mmWave relay [86,
87] requires additional active devices (antenna array) with beam-
forming capabilities to relay the signal towards the user. These
devices increase cost and power consumption. On the other hand,
mmReliable relies entirely on natural reflectors present in the en-
vironment. The authors of [17, 18, 71, 88‚Äì91] leverage reflective
surfaces to improve indoor mmWave connectivity & coverage. Their
model is suitable for one-time sensing for initial network deploy-
ment, which complements our goal of improving the link reliability
in real-time.

8 Discussion and Future Work

Since multi-beams are a new class of beamforming, designing a
robust networking system while multiplexing users is an open
challenge. We discuss some limitations of mmReliable and identify
possible future research directions.
Strong reflectors: The functioning of mmReliable depends on the
availability of strong reflectors in the environment, otherwise, the
multi-beam system falls back to a single-beam system. We envision
future deployments where intelligent reflecting surfaces [47, 86, 87,
92] are deployed in the environment to engineer strong reflections
that improve the throughput and reliability of mmWave links.
Tracking re-calibration: While we can track the angle of move-
ment of both direct and reflected paths using super-resolution and

SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

IK Jain, R.Subbaraman, D.Bharadia

tracking algorithms, the tracking of reflected paths would be af-
fected when the path is blocked, or the reflector vanishes. mmRe-
liable detects such cases by observing per-beam power and real-
locates the power along other unaffected beams. If the tracking
error accumulates over time, mmReliable needs to initiate a beam
training to refresh the system or perform a handover.
Hybrid beamforming and mmReliable: Using multiple mmWave
RF chains and phased arrays can provide degrees of freedom to
multiplex users or improve throughput. Prior work [28, 29] has pro-
posed interference-aware spatial multiplexing of beams in different
directions for multiple users. These techniques fit with mmReliable
in many ways. First, many multi-beams can be created, one from
each RF chain, allowing mmReliable‚Äôs improvements for multiple
users. Second, in addition to per-beam phase, amplitude, and angle,
multiple RF chains allow for control over group delay, enabling
arbitrarily wideband operation. Finally, we can jointly use some
spatial beams for enhancing reliability while others for improving
multi-user coexistence.

9 Acknowledgements
We are grateful to the anonymous reviewers and our shepherd, Prof.
Romit Roy Choudhury, for their insightful feedback. We thank Prof.
Gabriel Rebeiz, UCSD, and his group for the mmWave 5G phased
arrays and transceivers. The research is supported by NSF CCRI #
1925767.

References

[1] 3GPP. 5G NR (New Radio) Release 16. 3GPP. https://www.3gpp.org/release-16,

Oct 2019.

[2] Song Wang, Jingqi Huang, and Xinyu Zhang. Demystifying millimeter-wave
V2X: Towards robust and efficient directional connectivity under high mobility.
In Proceedings of the 26th Annual International Conference on Mobile Computing
and Networking, pages 1‚Äì14, 2020.

[3] Hyoungju Ji, Sunho Park, Jeongho Yeo, Younsun Kim, Juho Lee, and Byonghyo
Shim. Ultra-reliable and low-latency communications in 5G downlink: Physical
layer aspects. IEEE Wireless Communications, 25(3):124‚Äì130, 2018.

[4] Ish Kumar Jain, Rajeev Kumar, and Shivendra S Panwar. The impact of mobile
blockers on millimeter wave cellular systems. IEEE Journal on Selected Areas in
Communications, 37(4):854‚Äì868, 2019.

[5] T. S. Rappaport et al. Millimeter wave mobile communications for 5G cellular: It

will work! IEEE Access, 1:335‚Äì349, May 2013.

[6] Arvind Narayanan, Jason Carpenter, Eman Ramadan, Qingxu Liu, Yu Liu, Feng
Qian, and Zhi-Li Zhang. A first measurement study of commercial mmwave 5G
performance on smartphones. arXiv preprint arXiv:1909.07532, 2019.

[7] Cheol Jeong, Jeongho Park, and Hyunkyu Yu. Random access in millimeter-wave
beamforming cellular networks: issues and approaches. IEEE Communications
Magazine, 53(1):180‚Äì185, 2015.

[8] C Nicolas Barati, S Amir Hosseini, Marco Mezzavilla, Thanasis Korakis, Shiv-
endra S Panwar, Sundeep Rangan, and Michele Zorzi.
Initial access in mil-
limeter wave cellular systems. IEEE Transactions on Wireless Communications,
15(12):7926‚Äì7940, 2016.

[9] Sanjib Sur, Vignesh Venkateswaran, Xinyu Zhang, and Parmesh Ramanathan.
60 GHz indoor networking through flexible beams: A link-level profiling. In
ACM SIGMETRICS Performance Evaluation Review, volume 43, pages 71‚Äì84. ACM,
2015.

[10] Omid Abari, Haitham Hassanieh, Michael Rodriguez, and Dina Katabi. Millimeter
wave communications: From point-to-point links to agile network connections.
In HotNets, pages 169‚Äì175, 2016.

[11] Haitham Hassanieh, Omid Abari, Michael Rodriguez, Mohammed Abdelghany,
Dina Katabi, and Piotr Indyk. Fast millimeter wave beam alignment. In Proceedings
of the 2018 Conference of the ACM Special Interest Group on Data Communication,
pages 432‚Äì445. ACM, 2018.

[12] Sanjib Sur, Xinyu Zhang, Parmesh Ramanathan, and Ranveer Chandra. Beamspy:
enabling robust 60 GHz links under blockage. In 13th {USENIX} Symposium on
Networked Systems Design and Implementation ({NSDI} 16), pages 193‚Äì206, 2016.
[13] Anfu Zhou, Xinyu Zhang, and Huadong Ma. Beam-forecast: Facilitating mobile
60 GHz networks via model-driven beam steering. In IEEE INFOCOM 2017-IEEE
Conference on Computer Communications, pages 1‚Äì9. IEEE, 2017.

[14] Joan Palacios. Adaptive Codebook Optimization for Beam Training on Off-the-
In Proceedings of the 24rd Annual International

Shelf IEEE 802.11ad Devices.
Conference on Mobile Computing and Networking. ACM, 2018.

[15] Song Wang, Jingqi Huang, Xinyu Zhang, Hyoil Kim, and Sujit Dey. X-Array:
Approximating Omnidirectional Millimeter-Wave Coverage Using an Array of
Phased Arrays. Association for Computing Machinery, New York, NY, USA, 2020.
[16] Anfu Zhou, Shaoqing Xu, Song Wang, Jingqi Huang, Shaoyuan Yang, Teng
Wei, Xinyu Zhang, and Huadong Ma. Robot navigation in radio beam space:
Leveraging robotic intelligence for seamless mmwave network coverage.
In
Proceedings of the Twentieth ACM International Symposium on Mobile Ad Hoc
Networking and Computing, pages 161‚Äì170. ACM, 2019.

[17] Teng Wei, Anfu Zhou, and Xinyu Zhang. Facilitating robust 60 GHz network
deployment by sensing ambient reflectors. In 14th {USENIX} Symposium on
Networked Systems Design and Implementation ({NSDI} 17), pages 213‚Äì226, 2017.
[18] Yibo Zhu, Zengbin Zhang, Zhinus Marzi, Chris Nelson, Upamanyu Madhow,
Ben Y Zhao, and Haitao Zheng. Demystifying 60GHz outdoor picocells.
In
Proceedings of the 20th annual international conference on Mobile computing and
networking, pages 5‚Äì16. ACM, 2014.

[19] C Nicolas Barati, S Amir Hosseini, Marco Mezzavilla, Parisa Amiri-Eliasi, Sundeep
Rangan, Thanasis Korakis, Shivendra S Panwar, and Michele Zorzi. Directional
initial access for millimeter wave cellular systems.
In Signals, Systems and
Computers, 2015 49th Asilomar Conference on, pages 307‚Äì311. IEEE, 2015.
[20] Liang Zhou and Yoji Ohashi. Efficient codebook-based MIMO beamforming for
millimeter-wave WLANs. In Personal Indoor and Mobile Radio Communications
(PIMRC), 2012 IEEE 23rd International Symposium on, pages 1885‚Äì1889. IEEE,
2012.

[21] Sanjib Sur, Ioannis Pefkianakis, Xinyu Zhang, and Kyu-Han Kim. WiFi-assisted 60
GHz wireless networks. In Proceedings of the 23rd Annual International Conference
on Mobile Computing and Networking, pages 28‚Äì41. ACM, 2017.

[22] Thomas Nitsche, Adriana B Flores, Edward W Knightly, and Joerg Widmer.
Steering with eyes closed: mm-wave beam steering without in-band measurement.
In 2015 IEEE Conference on Computer Communications (INFOCOM), pages 2416‚Äì
2424. IEEE, 2015.

[23] Muhammad Kumail Haider, Yasaman Ghasempour, Dimitrios Koutsonikolas, and
Edward W Knightly. Listeer: Mmwave beam acquisition and steering by tracking

Towards Reliable and High Throughput mmWave Links

SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

indicator leds on wireless aps. In Proceedings of the 24th Annual International
Conference on Mobile Computing and Networking, pages 273‚Äì288. ACM, 2018.

[24] Teng Wei and Xinyu Zhang. Pose information assisted 60 GHz networks: Towards
seamless coverage and mobility support.
In Proceedings of the 23rd Annual
International Conference on Mobile Computing and Networking, pages 42‚Äì55.
ACM, 2017.

[25] Vutha Va, Xinchen Zhang, and Robert W Heath. Beam switching for millimeter
wave communication to support high speed trains. In 2015 IEEE 82nd Vehicular
Technology Conference (VTC2015-Fall), pages 1‚Äì5. IEEE, 2015.

[26] Timothy Woodford, Xinyu Zhang, Eugene Chai, Karthikeyan Sundaresan, and
Amir Khojastepour. Spacebeam: Lidar-driven one-shot mmwave beam man-
agement. In Proceedings of the 19th Annual International Conference on Mobile
Systems, Applications, and Services, MobiSys ‚Äô21, page 389‚Äì401, New York, NY,
USA, 2021. Association for Computing Machinery.

[27] FCC. Report and order and further notice of proposed rulemaking, 2016.
[28] Yasaman Ghasempour. Multi-Stream Beam-Training for mmWave MIMO Net-
In Proceedings of the 24rd Annual International Conference on Mobile

works.
Computing and Networking. ACM, 2018.

[29] Suraj Jog, Jiaming Wang, Junfeng Guan, Thomas Moon, Haitham Hassanieh,
and Romit Roy Choudhury. Many-to-many beam alignment in millimeter wave
In 16th {USENIX} Symposium on Networked Systems Design and
networks.
Implementation ({NSDI} 19), pages 783‚Äì800, 2019.

[30] Inc Telecom Infra Project. Analysis of 28GHz and 60GHz channel measurements
in an indoor environment. https://telecominfraproject.com/, August 2019.
[31] Ish Kumar Jain, Raghav Subbaraman, Tejas Harekrishna Sadarahalli, Xiangwei
Shao, Hou-Wei Lin, and Dinesh Bharadia. mmobile: Building a mmwave testbed
to evaluate and address mobility effects. In Proceedings of the 4th ACM Workshop
on Millimeter-Wave Networks and Sensing Systems, pages 1‚Äì6, 2020.

[32] IEEE 802.11ad: Enhancements for Very High Throughput in the 60 GHz Band.

IEEE, 2009.

[33] Marco Giordani, Michele Polese, Arnab Roy, Douglas Castor, and Michele Zorzi.
A tutorial on beam management for 3GPP NR at mmWave frequencies. IEEE
Communications Surveys & Tutorials, 21(1):173‚Äì196, 2018.

[34] Irmak Aykin, Berk Akgun, and Marwan Krunz. Multi-beam transmissions for
blockage resilience and reliability in millimeter-wave systems. IEEE Journal on
Selected Areas in Communications, 37(12):2772‚Äì2785, 2019.

[35] Irmak Aykin, Berk Akgun, and Marwan Krunz. Smartlink: Exploiting channel
clustering effects for reliable millimeter wave communications. In IEEE INFOCOM
2019-IEEE Conference on Computer Communications, pages 1117‚Äì1125. IEEE, 2019.
[36] Mingjie Feng, Shiwen Mao, and Tao Jiang. Dealing with link blockage in mmwave
networks: D2d relaying or multi-beam reflection? In 2017 IEEE 28th Annual
International Symposium on Personal, Indoor, and Mobile Radio Communications
(PIMRC), pages 1‚Äì5. IEEE, 2017.

[37] Venkata Siva Santosh Ganji, Tzu-Hsiang Lin, Francisco A Espinal, and PR Kumar.
Unblock: Low complexity transient blockage recovery for mobile mm-wave
devices. In 2021 International Conference on COMmunication Systems & NETworkS
(COMSNETS), pages 501‚Äì508. IEEE, 2021.

[38] Irmak Aykin, Berk Akgun, Mingjie Feng, and Marwan Krunz. Mamba: A multi-
armed bandit framework for beam tracking in millimeter-wave systems. In 2020
IEEE Conference on Computer Communications (INFOCOM). IEEE, 2020.

[39] Zhinus Marzi, Dinesh Ramasamy, and Upamanyu Madhow. Compressive channel
estimation and tracking for large arrays in mm-wave picocells. IEEE Journal of
Selected Topics in Signal Processing, 10(3):514‚Äì527, 2016.

[40] George R MacCartney, Theodore S Rappaport, and Sundeep Rangan. Rapid fading
due to human blockage in pedestrian crowds at 5G millimeter-wave frequencies.
In GLOBECOM 2017-2017 IEEE Global Communications Conference, pages 1‚Äì7.
IEEE, 2017.

[41] Shu Sun and Theodore S Rappaport. Multi-beam antenna combining for 28
In 2013 IEEE Global

GHz cellular link improvement in urban environments.
Communications Conference (GLOBECOM), pages 3754‚Äì3759. IEEE, 2013.
[42] David Tse and Pramod Viswanath. Fundamentals of wireless communication.

Cambridge university press, 2005.

[43] Anfu Zhou, Leilei Wu, Shaoqing Xu, Huadong Ma, Teng Wei, and Xinyu Zhang.
Following the shadow: Agile 3-D beam-steering for 60 GHz wireless networks.
In IEEE INFOCOM 2018-IEEE Conference on Computer Communications, pages
2375‚Äì2383. IEEE, 2018.

[44] Thomas Nitsche, Carlos Cordeiro, Adriana B Flores, Edward W Knightly, Eldad
Perahia, and Joerg C Widmer. Ieee 802.11 ad: directional 60 ghz communication
for multi-gigabit-per-second wi-fi. IEEE Communications Magazine, 52(12):132‚Äì
141, 2014.

[45] Hao Xu, Vikas Kukshya, and Theodore S Rappaport. Spatial and temporal
IEEE Journal on selected areas in

characteristics of 60-ghz indoor channels.
communications, 20(3):620‚Äì630, 2002.

[46] C Umit Bas, Rui Wang, Seun Sangodoyin, Thomas Choi, Sooyoung Hur, Kuyeon
Whang, Jeongho Park, Charlie Jianzhong Zhang, and Andreas F Molisch. Outdoor
to indoor propagation channel measurements at 28 ghz. IEEE Transactions on
Wireless Communications, 18(3):1477‚Äì1489, 2019.

[47] Manideep Dunna, Chi Zhang, Daniel Sievenpiper, and Dinesh Bharadia. Scat-
termimo: Enabling virtual mimo with smart surfaces. In Proceedings of the 26th

Annual International Conference on Mobile Computing and Networking, pages
1‚Äì14, 2020.

[48] Manikanta Kotaru, Kiran Joshi, Dinesh Bharadia, and Sachin Katti. Spotfi: Decime-
ter level localization using wifi. In Proceedings of the 2015 ACM Conference on
Special Interest Group on Data Communication, pages 269‚Äì282, 2015.

[49] Qualcomm. Linux wil6210 driver. https://github.com/torvalds/linux/tree/master/

drivers/net/wireless/ath/wil6210, August 2017.

[50] Stephen Boyd, Stephen P Boyd, and Lieven Vandenberghe. Convex optimization.

Cambridge university press, 2004.

[51] Michael Grant and Stephen Boyd. CVX: Matlab software for disciplined convex

programming, version 2.1. http://cvxr.com/cvx, March 2014.

[52] Kerim Kibaroglu, Mustafa Sayginer, Thomas Phelps, and Gabriel M Rebeiz. A
64-element 28-GHz phased-array transceiver with 52-dBm EIRP and 8‚Äì12-Gb/s
5G link at 300 meters without any calibration. IEEE Transactions on Microwave
Theory and Techniques, 66(12):5796‚Äì5811, 2018.

[53] Qian Ma, Hyunchul Chung, Yusheng Yin, Tumay Kanar, Samet Zihir, and
Gabriel M Rebeiz. A 5G 24-30 GHz 2x32 Element Dual-Polarized Dual-Beam
Phased Array Base-Station for 2x2 MIMO System. In 2019 IEEE Global Communi-
cations Conference (GLOBECOM), pages 1‚Äì5. IEEE, 2019.

[54] Cinetics axis-360 motion control system. https://cinetics.com/axis360-pro/, Sep

2019.

[55] Bodhisatwa Sadhu, Arun Paidimarri, Mark Ferriss, Mark Yeck, Xiaoxiong Gu, and
Alberto Valdes-Garcia. A 128-element dual-polarized software-defined phased
array radio for mm-wave 5G experimentation. In Proceedings of the 2nd ACM
Workshop on Millimeter Wave Networks and Sensing Systems, pages 21‚Äì25, 2018.
https://www.xilinx.com/products/boards-and-kits/

[56] Xilinx. Cmod A7-35T.
1-f3zdsm.html, Jul 2021.

[57] Sophocles J Orfanidis. Electromagnetic waves and antennas. 2002.
[58] Adrian Loch, Hany Assasa, Joan Palacios, Joerg Widmer, Hans Suys, and Bj√∂rn
Debaillie. Zero overhead device tracking in 60 GHz wireless networks using
multi-lobe beam patterns. In Proceedings of the 13th International Conference on
emerging Networking EXperiments and Technologies, pages 224‚Äì237, 2017.

[59] Talon AD7200 Multi-Band Wi-Fi Router.

https://www.tp-link.com/us/

home-networking/wifi-router/ad7200/, Sep 2019.

[60] Sohrab Madani, Suraj Jog, Jes√∫s Omar Lacruz, Joerg Widmer, and Haitham Has-
sanieh. Practical null steering in millimeter wave networks. In NSDI, pages
903‚Äì921, 2021.

[61] Samsung. Samsung 5G phased array. http://bit.ly/2oNSbnx, 2020.
[62] Dipankar Raychaudhuri, Ivan Seskar, Gil Zussman, Thanasis Korakis, Dan Kilper,
Tingjun Chen, Jakub Kolodziejski, Michael Sherman, Zoran Kostic, Xiaoxiong Gu,
et al. Challenge: COSMOS: A city-scale programmable testbed for experimen-
tation with advanced wireless. In Proceedings of the 26th Annual International
Conference on Mobile Computing and Networking, pages 1‚Äì13, 2020.

[63] IBM device paves the way for 5G to reach full potential. https://www.ibm.com/

blogs/research/2020/06/ibm-device-5g-full-potential/, Jun 2020.

[64] Verizon to test 5G at 28 GHz in Texas with Samsung. https://www.fiercewireless.

com/tech/verizon-to-test-5g-at-28-ghz-texas-samsung, Feb 2016.

[65] Analog Devices, KCU 105. https://www.xilinx.com/products/boards-and-kits/

kcu105.html, Sep 2019.

[66] Analog Devices, AD-FMCDAQ2-EBZ. https://wiki.analog.com/resources/eval/

user-guides/ad-fmcdaq2-ebz, September 2019.

[67] Qorvo, RFFC5071A: 85 - 4200 MHz Wideband Synthesizer / VCO with Integrated
6 GHz RF Mixer. https://www.qorvo.com/products/p/RFFC5071A, September
2019.

[68] 5G; Study on channel model for frequencies from 0.5 to 100 GHz. TR 138 901

V14.0.0, 3rd Generation Partnership Project (3GPP), 2017-05.

[69] 5G NR (New Radio) Release 16. 3GPP. https://www.3gpp.org/release-16, Jul

2020.

[70] Feng Qian, Bo Han, Qingyang Xiao, and Vijay Gopalakrishnan. Flare: Practical
viewport-adaptive 360-degree video streaming for mobile devices. In Proceedings
of the 24th Annual International Conference on Mobile Computing and Networking,
pages 99‚Äì114, 2018.

[71] Xia Zhou, Zengbin Zhang, Yibo Zhu, Yubo Li, Saipriya Kumar, Amin Vahdat,
Ben Y Zhao, and Haitao Zheng. Mirror mirror on the ceiling: Flexible wire-
less links for data centers. ACM SIGCOMM Computer Communication Review,
42(4):443‚Äì454, 2012.

[72] Renjie Zhao, Timothy Woodford, Teng Wei, Kun Qian, and Xinyu Zhang. M-
cube: A millimeter-wave massive mimo software radio. In Proceedings of the
26th Annual International Conference on Mobile Computing and Networking, pages
1‚Äì14, 2020.

[73] Muhammad Kumail Haider and Edward W Knightly. Mobility resilience and
overhead constrained adaptation in directional 60 ghz wlans: protocol design and
system implementation. In Proceedings of the 17th ACM International Symposium
on Mobile Ad Hoc Networking and Computing, pages 61‚Äì70, 2016.

[74] Omar El Ayach, Sridhar Rajagopal, Shadi Abu-Surra, Zhouyue Pi, and Robert W
Heath. Spatially sparse precoding in millimeter wave MIMO systems.
IEEE
transactions on wireless communications, 13(3):1499‚Äì1513, 2014.

SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

IK Jain, R.Subbaraman, D.Bharadia

[75] Robert W Heath, Nuria Gonzalez-Prelcic, Sundeep Rangan, Wonil Roh, and
Akbar M Sayeed. An overview of signal processing techniques for millimeter
wave MIMO systems. IEEE journal of selected topics in signal processing, 10(3):436‚Äì
453, 2016.

[76] Omar El Ayach, Robert W Heath, Shadi Abu-Surra, Sridhar Rajagopal, and
Zhouyue Pi. Low complexity precoding for large millimeter wave MIMO systems.
In 2012 IEEE international conference on communications (ICC), pages 3724‚Äì3729.
IEEE, 2012.

[77] Sanjib Sur, Ioannis Pefkianakis, Xinyu Zhang, and Kyu-Han Kim. Towards
scalable and ubiquitous millimeter-wave wireless networks. In Proceedings of
the 24th Annual International Conference on Mobile Computing and Networking,
pages 257‚Äì271. ACM, 2018.

[78] Ding Zhang, Mihir Garude, and Parth H Pathak. mmchoir: Exploiting joint
transmissions for reliable 60GHz mmwave wlans. In Proceedings of the Eighteenth
ACM International Symposium on Mobile Ad Hoc Networking and Computing,
pages 251‚Äì260. ACM, 2018.

[79] Maryam Eslami Rasekh, Zhinus Marzi, Yanzi Zhu, Upamanyu Madhow, and
Haitao Zheng. Noncoherent mmwave path tracking. In Proceedings of the 18th
International Workshop on Mobile Computing Systems and Applications, pages
13‚Äì18, 2017.

[80] Ioannis Pefkianakis and Kyu-Han Kim. Accurate 3d localization for 60 GHz
networks. In Proceedings of the 16th ACM Conference on Embedded Networked
Sensor Systems, pages 120‚Äì131, 2018.

[81] Dolores Garcia, Jesus Omar Lacruz, Pablo Jim√©nez Mateo, and Joerg Widmer.
Polar: Passive object localization with ieee 802.11 ad using phased antenna arrays.
In IEEE INFOCOM 2020-IEEE Conference on Computer Communications, pages
1838‚Äì1847. IEEE, 2020.

[82] Joan Palacios, Paolo Casari, Hany Assasa, and Joerg Widmer. Leap: Location
estimation and predictive handover with consumer-grade mmwave devices. In
IEEE INFOCOM 2019-IEEE Conference on Computer Communications, pages 2377‚Äì
2385. IEEE, 2019.

[83] Y Ming Tsang, Ada SY Poon, and Sateesh Addepalli. Coding the beams: Im-
proving beamforming training in mmwave communication system. In Global
Telecommunications Conference (GLOBECOM 2011), 2011 IEEE, pages 1‚Äì6. IEEE,
2011.

[84] Sihua Shao, Hanbin Zhang, Dimitrios Koutsonikolas, and Abdallah Khreishah.
Two-dimensional reduction of beam training overhead in crowded 802.11 ad based
networks. In IEEE INFOCOM 2018-IEEE Conference on Computer Communications
Workshops (INFOCOM WKSHPS), pages 680‚Äì685. IEEE, 2018.

[85] Jian Qiao, Xuemin Shen, Jon W Mark, and Yejun He. Mac-layer concurrent
beamforming protocol for indoor millimeter-wave networks. IEEE Transactions
on Vehicular Technology, 64(1):327‚Äì338, 2014.

[86] Omid Abari, Dinesh Bharadia, Austin Duffield, and Dina Katabi. Enabling high-
quality untethered virtual reality. In 14th {USENIX} Symposium on Networked
Systems Design and Implementation ({NSDI} 17), pages 531‚Äì544, 2017.

[87] Xin Tan, Zhi Sun, Dimitrios Koutsonikolas, and Josep M Jornet. Enabling indoor
mobile millimeter-wave networks based on smart reflect-arrays. In IEEE INFO-
COM 2018-IEEE Conference on Computer Communications, pages 270‚Äì278. IEEE,
2018.

[88] Zulkuf Genc, Umar H Rizvi, Ertan Onur, and Ignas Niemegeers. Robust 60 GHz
indoor connectivity: Is it possible with reflections? In 2010 IEEE 71st vehicular
technology conference, pages 1‚Äì5. IEEE, 2010.

[89] Man Zhao, Danpu Liu, and Feng Yu. Improving the robustness of 60 GHz indoor
connectivity by deployment of mirrors. In 2018 IEEE 29th Annual International
Symposium on Personal, Indoor and Mobile Radio Communications (PIMRC), pages
188‚Äì193. IEEE, 2018.

[90] Wahab Khawaja, Ozgur Ozdemir, Yavuz Yapici, Ismail Guvenc, and Yuichi Kak-
ishima. Coverage enhancement for mm wave communications using passive
reflectors. In 2018 11th Global Symposium on Millimeter Waves (GSMM), pages
1‚Äì6. IEEE, 2018.

[91] Anfu Zhou, Shaoyuan Yang, Yi Yang, Yuhang Fan, and Huadong Ma. Autonomous
environment mapping using commodity millimeter-wave network device. In IEEE
INFOCOM 2019-IEEE Conference on Computer Communications, pages 1126‚Äì1134.
IEEE, 2019.

[92] Peilan Wang, Jun Fang, Xiaojun Yuan, Zhi Chen, and Hongbin Li. Intelligent
reflecting surface-assisted millimeter wave communications: Joint active and pas-
sive precoding design. IEEE Transactions on Vehicular Technology, 69(12):14960‚Äì
14973, 2020.

[93] Ahmed Alkhateeb, Omar El Ayach, Geert Leus, and Robert W Heath. Channel
estimation and hybrid precoding for millimeter wave cellular systems.
IEEE
Journal of Selected Topics in Signal Processing, 8(5):831‚Äì846, 2014.

[94] Akbar M Sayeed and Vasanthan Raghavan. Maximizing MIMO capacity in sparse
multipath with reconfigurable antenna arrays. IEEE Journal of Selected Topics in
Signal Processing, 1(1):156‚Äì166, 2007.

[95] Remcom. Wireless Insite 3D Wireless Prediction Software. https://www.remcom.

com/wireless-insite-em-propagation-software, 2020.

A Constructive Multi-beam is optimal for SNR
and throughput for general k-path channel

Here we show that the multi-beam patterns with appropriate power
and phase control are optimal such that they maximize the SNR at
the receiver. To demonstrate the multi-beam optimality, we first
construct the maximum likelihood (ML) based solution and then
show that the multi-beam approaches the ML estimate. Recall the
optimal beamforming weights for a general multi-path channel h
is given by:

wopt =

h‚àó
||h||

,

(24)

| |h| |2ùëÉùë†
ùëÉùúÇ

. Note that the optimal
which provides the maximum SNR of
beamforming weights is dependent on the multi-path channel taps.
Our goal is to show how it compares against the SNR of a single
beam and our multi-beam system. We first write the channel in a
geometric model representation [93, 94]:

ùêø‚àí1
‚àëÔ∏Å

h(ùë°) =

a(ùúô‚Ñì )ùõæ‚Ñìùëí2ùúã ùëìùëêùúè‚Ñì ùõø (ùë° ‚àí ùúè‚Ñì ),

(25)

‚Ñì=0

where we assume the channel is bounded by ùêø paths and ùúô‚Ñì, ùõæ‚Ñì, ùúè‚Ñì
represents the AoD, attenuation, and ToF of the ‚Ñìùë°‚Ñé path, respec-
tively. The steering vector a(ùúô‚Ñì ) represents the relative phase shift
introduced by each path at every antenna element (out of ùëÅ ele-
ments) as

a(ùúô‚Ñì ) = [1, ùëí‚àíùëó2ùúã ùëë

ùúÜ sin(ùúô‚Ñì ), . . . , ùëí‚àíùëó2ùúã (ùëÅ ‚àí1) ùëë

ùúÜ sin(ùúô‚Ñì ) ]ùëá

In the frequency domain, the channel is written at subcarrier ùëò

as follow:

ùêø‚àí1
‚àëÔ∏Å

h(ùëò) =

a(ùúô‚Ñì )ùõæ‚Ñìùëí ùëó2ùúã (ùëìùëê +ùëòŒîùëì )ùúè‚Ñì

(26)

where ùëìùëê is center frequency and Œîùëì is the subcarrier spacing.

‚Ñì=0

The traditional single-beam pattern ignores the multi-path and
creates a directional pattern along the strongest path (LOS or one
of the reflectors). Assuming ùúô0 is the direction of the strongest path,
the single-beam antenna weights follows:

wsingle = a‚àó (ùúô0)/||a(ùúô0)||
1
‚àö
ùëÅ

[1, ùëí ùëó2ùúã ùëë

=

ùúÜ sin(ùúô0), . . . , ùëí ùëó2ùúã (ùëÅ ‚àí1) ùëë

ùúÜ ) sin(ùúô0) ]ùëá .

(27)

Assuming a directional single-beam pattern severely attenuates
other channel paths, the single-beam SNR consists only of the
strongest path as:

SNRsingle =

||ùõæ0||2ùëÉùë†
ùëÉùúÇ

.

(28)

Instead, we design phase-coherent multi-beam patterns which ex-
ploits ùêµ channel directions out of ùêø paths as follow:

wmulti =

(cid:205)ùêµ‚àí1
ùëè=0 a‚àó (ùúôùëè )ùõæùëèùëí ùëóùúéùëè
|| (cid:205)ùêµ‚àí1
ùëè=0 a‚àó (ùúôùëè )ùõæùëèùëí ùëóùúéùëè ||

,

(29)

where we orient all the ùêµ beams in the multi-beam along the ùêµ
strongest paths in the channel. Note that our multi-beam patterns
ensures that per-beam amplitude ùõæùëè and phase ùúéùëè (averaged over all
frequency subcarriers) is aligned with per-path channel attenuation
and phase respectively. We clearly see that when ùêµ = ùêø, i.e., the
multi-beam patterns are oriented along all the paths in a multi-
path channel. In this case, the multi-beam weights are same as the

Towards Reliable and High Throughput mmWave Links

SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA

optimal weights in (24):

wmulti = wopt, when ùêµ = ùêø.
(30)
Thus, a multi-beam pattern utilizes ùêµ out of ùêø channel paths to

improve the SNR as follows:

SNRmulti =

(cid:205)ùêµ‚àí1
ùëè=0

||ùõæùëè ||2ùëÉùë†
ùëÉùúÇ

,

(31)

which converges to optimal SNR for ùêµ = ùêø. We can write the
capacity of multibeam-link as

ùê∂ùëöùëè = log2 (1 + SNRmulti)
(32)
The optimal ML beamformer requires per-antenna channel esti-
mate which has a high complexity in terms of beam probing over-
head [14]. Since mmWave channel is sparse and there are only 1 or 2
strong reflected paths in addition to the direct path, the multi-beam
with 2-3 beams provides SNR gain comparable to the optimal beam
with significantly lower overhead.

B Comparing constructive multi-beam

performance for 28 GHz and 60 GHz links
mmReliable presents a general framework to improve mmWave
throughput and reliability that can also be applied to a 60 GHz link.
To compare the two systems, we perform a simulation study using
Wireless Insite [95], as shown in Figure 19. We establish a directional
link at 10m with a reflecting surface (made up of concrete material)
at 60ùëú (Figure 19(a)). We set other simulation parameters according
to a recent large-scale study of a 60 GHz system [2]. The results in
Fig. 19(b) show that mmReliable outperforms single-beam based
baseline [12] by 1.18√ó gain in throughput for static UE with 10%
blockages. Both 28 GHz and 60 GHz system performs similarly, and
the result is consistent across multiple UE locations. Nonetheless,
28 GHz throughput is 4.7√ó higher than 60 GHz (not shown) for
the same bandwidth since 60 GHz links suffer from higher path
loss and attenuation due to environmental absorption. Though 28
GHz performance is better for longer links (AOD ‚â• 15ùëú ) since
60 GHz links suffer from larger path loss and attenuation due to
atmospheric absorption.

(a)

(b)

Figure 19: (a) Wireless Insite simulation scenario, (b) Throughput
Gain comparing 28 GHz and 60 GHz system for static UE with 10%
blockages.

APUE locations0o5o10o15o20o25o30oUser location (AOD in Deg)11.051.11.151.21.25Throughput Gain28 GHz60 GHz