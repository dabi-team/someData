Optimal Streaming of 360 VR Videos with Perfect,
Imperfect and Unknown FoV Viewing Probabilities

Lingzhi Zhao, Ying Cui and Chengjun Guo
Shanghai Jiao Tong University, China

Zhi Liu
Shizuoka University, Japan

0
2
0
2

p
e
S
2

]
T
I
.
s
c
[

1
v
3
5
7
1
0
.
9
0
0
2
:
v
i
X
r
a

Abstract—In this paper, we investigate wireless streaming of
multi-quality tiled 360 virtual reality (VR) videos from a multi-
antenna server to multiple single-antenna users in a multi-
carrier system. To capture the impact of ﬁeld-of-view (FoV)
prediction, we consider three cases of FoV viewing probability
distributions, i.e., perfect, imperfect and unknown FoV viewing
probability distributions, and use the average total utility, worst
average total utility and worst total utility as the respective
performance metrics. We adopt rate splitting with successive
decoding for efﬁcient transmission of multiple sets of tiles of
different 360 VR videos to their requesting users. In each case,
we optimize the encoding rates of the tiles, minimum encoding
rates of the FoVs, rates of the common and private messages and
transmission beamforming vectors to maximize the total utility.
The problems in the three cases are all challenging nonconvex
optimization problems. We successfully transform the problem
in each case into a difference of convex (DC) programming
problem with a differentiable objective function, and obtain a
suboptimal solution using concave-convex procedure (CCCP).
Finally, numerical results demonstrate the proposed solutions
achieve notable gains over existing schemes in all three cases. To
the best of our knowledge, this is the ﬁrst work revealing the
impact of FoV prediction and its accuracy on the performance
of streaming of multi-quality tiled 360 VR videos.

I. INTRODUCTION

A 360 VR video is generated by capturing a scene of interest
in every direction at the same time using omnidirectional
cameras. A user wearing a VR headset or head mounted
in
display (HMD) can freely watch the scene of interest
any viewing direction at any time, hence enjoying immersive
viewing experience. VR has vast applications in entertainment,
education, medicine, etc. A 360 VR video is of a much
larger size than a traditional video. At any moment, a user
watching a 360 VR video is interested in only one viewpoint,
i.e., the center of one part of the 360 VR video, referred
to as FoV. To improve transmission efﬁciency for 360 VR
videos, tiling technique is widely adopted. Transmitting only
the set of tiles covering the predicted FoV or FoVs with higher
viewing probabilities can reduce the required communication
resources, while maintaining the quality of experience (QoE)
to certain extent. In addition, pre-encoding each tile into
multiple representations with different quality levels allows
quality adaptation according to user heterogeneity (e.g., in
cellular usage costs, display resolutions of devices, channel
conditions, etc.). In this paper, we focus on wireless streaming
of multi-quality tiled 360 VR videos to multiple users.

Based on viewpoint or FoV prediction, [1]–[5] study wire-
less streaming of one multi-quality tiled 360 VR video [1]–

[3] or multiple multi-quality tiled 360 VR videos [4], [5].
Speciﬁcally, it is assumed in [1]–[5] that the FoVs that may
be watched are known. Furthermore, in [3]–[5], the viewing
probability distributions over those FoVs are also available.
Given such FoV prediction results, in [1]–[5], the authors op-
timize the quality level selection and communication resource
allocation to maximize the total utility [1], [4], [5], minimize
the total distortion [3], or minimize the total transmission
power [2].

Note that most existing works [1]–[5] rely on the as-
sumption of perfect FoV prediction. It
is unknown how
FoV prediction errors inﬂuence the performance of wireless
streaming of multi-quality tiled 360 VR videos. Besides, note
that [1]–[5] all consider single-antenna servers, which cannot
exploit spatial degrees of freedom, and hence cannot provide
satisfactory performance for wireless streaming of 360 VR
videos. In practice, deploying multiple antennas at a server
can signiﬁcantly improve the performance of wireless systems
via designing efﬁcient beamformers, and linear precoders such
as zero forcing [6] are widely used. However, any linear
precoding scheme can be far from optimal, as the cost to
suppress interference can be high when the channels for
some of the users are spatially aligned. To circumvent such
limitation, the idea of rate splitting which partially decodes
interference and partially treats interference as noise [7] is
introduced to improve the overall performance for serving
multiple users.

In this paper, we investigate wireless streaming of multi-
quality tiled 360 VR videos from a multi-antenna server to
multiple single-antenna users in a multi-carrier system. We
consider three cases of FoV viewing probability distributions,
i.e., perfect, imperfect and unknown FoV viewing probability
distributions, and use the average total utility, worst average
total utility and worst total utility as the respective performance
metrics. We adopt rate splitting with successive decoding for
efﬁcient transmission of multiple sets of tiles from different
360 VR videos to their requesting users. In each case of FoV
viewing probability distributions, we optimize the encoding
rates of the tiles, minimum encoding rates of the FoVs, rates of
the common and private messages and beamforming vectors to
maximize the total utility. The problems in the three cases are
all nonconvex optimization problems. Moreover, the optimiza-
tion problem in the case of imperfect FoV viewing probability
distributions is a max-min problem, and the optimization
problem in the case of unknown FoV viewing probability

 
 
 
 
 
 
distributions has a non-differentiable objective function. We
successfully transform the problem in each case into a DC
programming problem with a differentiable objective function,
and obtain a suboptimal solution using CCCP [9]. Finally,
numerical results show substantial gains of the proposed
solutions over existing schemes in all three cases, and reveal
the impact of the FoV prediction and its accuracy on streaming
of multi-quality tiled 360 VR videos.

A. Multi-Quality Tiled 360 VR Videos

II. SYSTEM MODEL

We consider tiling to enable ﬂexible transmission of neces-
sary FoVs of a 360 VR video. Speciﬁcally, a 360 VR video
is divided into X × Y rectangular segments of the same size,
referred to as tiles, where X and Y represent the numbers of
segments in each column and each row, respectively. Deﬁne
X , {1, . . . , X} and Y , {1, . . . , Y }. The (x, y)-th tile refers
to the tile in the x-th row and the y-th column, for all x ∈ X
and y ∈ Y. For a 360 VR video, consider I viewpoints (i.e.,
I FoVs). Denote I , {1, . . . , I}. For all i ∈ I, let Fi denote
the set of tiles fully or partially included in the i-th FoV.
Considering user heterogeneity, we pre-encode each tile into L
representations corresponding to L quality levels using High
Efﬁciency Video Coding (HEVC), as in Dynamic Adaptive
Streaming over HTTP (DASH). Let L , {1, . . . , L} denote
the set of quality levels. For all l ∈ L, the l-th representation
of each tile corresponds to the l-th lowest quality. For ease
of exposition, assume that the encoding rates of the tiles with
the same quality level are identical. The encoding rate of the
l-th representation of a tile is denoted by Dl (in bits/s), where
D1 < . . . < DL.

As illustrated in Fig. 1, we consider wireless streaming
of K multi-quality tiled 360 VR videos from a server to K
users, respectively. Let K , {1, . . . , K} denote the set of user
indices (video indices). We study the duration of the playback
time of one group of picture (GOP), which is usually 0.5-1
seconds. A user can freely switch views, when watching a
360 VR video. Suppose the set of FoVs that may be watched
by user k and the corresponding FoV viewing probability
distribution have been predicted to certain extent. Let Ik
represent the sets of indices of the Ik FoVs of video k that may
be watched by user k. Note that for all k ∈ K, Fi, i ∈ Ik may
overlap and user k will watch one of the Ik FoVs. Suppose
Ik, k ∈ K are known to the server. For all k ∈ K and i ∈ Ik,
let pi,k denote the probability that the i-th FoV of video k
is viewed by user k. Here, pi,k ≥ 0, i ∈ Ik, k ∈ K and
pi,k = 1, k ∈ K. Denote pk , (pi,k)i∈Ik , k ∈ K.
In the following, we consider three cases of FoV viewing
P
probability distributions.
Perfect FoV viewing probability distributions: In this case,
FoV viewing probability distributions have been estimated
by some learning methods, and the estimation errors are
negligible. That is, the exact values of pk, k ∈ K are assumed
to be known to the server.
Imperfect FoV viewing probability distributions: In this
case, FoV viewing probability distributions have been es-
timated by some learning methods, with certain estimation

i∈Ik

Video Encoding,
Projection and Tiling

VR video capture 
system

…

…

4

8

12

16

4

8

12

16

1

5

9

13

1

5

9

13

2

6

10

14

3

7

11

15

video 1

2

6

10

14

3

7

11

15

video 2

Level 3

Level 2

Level 1

Server

Level 3

Level 2

Level 1

1

2

3

4

Y

6

7
Video

1

2

3

4

Y

6

11

1

2

3

4

X

1

2

3

4

X

user 1

user 2

1.

Y

4,

=

=

System model. X

4,
Fig.
I = 16, L = 3, K = 2. I1 = {6, 7}, F6 =
{(1, 1), (1, 2), (1, 3), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2), (3, 3)},
F7 = {(1, 2), (1, 3), (1, 4), (2, 2), (2, 3), (2, 4), (3, 2), (3, 3), (3, 4)},
r6,1 = D2, r7,1 = D1, Rx,y,1 = D2, (x, y) ∈ F6,
Rx,y,1 = D1, (x, y) ∈ F7\F6. I2 = {6, 11}, F6 =
{(1, 1), (1, 2), (1, 3), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2), (3, 3)},
F11 = {(2, 2), (2, 3), (2, 4), (3, 2), (3, 3), (3, 4), (4, 2), (4, 3), (4, 4)},
r6,2 = D2, r11,2 = D3, Rx,y,2 = D3, (x, y) ∈ F11,
Rx,y,2 = D2, (x, y) ∈ F6\F11.
errors. For all k ∈ K and i ∈ Ik, let ˆpi,k denote the estimated
probability that the i-th FoV of video k is viewed by user k,
and let ∆i,k , pi,k − ˆpi,k denote the corresponding estimation
∆i,k = 0 and |∆i,k| ≤ εi,k for some
error, where
known εi,k ∈ (0, 1). Assume that ˆpi,k, ∆i,k, i ∈ Ik, k ∈ K
are known to the server, and pk, k ∈ K are not known to
the server. Thus, the server knows that the exact FoV viewing
probability distributions satisfy pk ∈ Pk, where

i∈Ik

P

(cid:12)
(cid:12)
(cid:12)

)

Pk ,

(

pi,k = 1

, k ∈ K,

pk

i,k ≤ pi,k ≤ pi,k, i ∈ Ik,
p
, max{ˆpi,k −εi,k, 0} and pi,k

i∈Ik
X
, min{ˆpi,k +εi,k, 1},

with p
i,k
i ∈ Ik, k ∈ K.
Unknown FoV viewing probability distributions: In this
case, there is no prior information about the exact FoV viewing
probability distributions pk, k ∈ K.

For all k ∈ K,

the tiles in F k , ∪i∈Ik Fi may be
transmitted to user k. Let Rx,y,k (in bits/s) denote the encoding
rate of the (x, y)-th tile of video k, where

Rx,y,k ∈ {0, D1, . . . , DL}, (x, y) ∈ F k, k ∈ K.
(1)
Here, Rx,y,k = 0 indicates that the (x, y)-th tile of video k will
not be transmitted to user k, and Rx,y,k = Dl indicates that
the l-th representation of the (x, y)-th tile will be transmitted
to user k. To avoid degrading QoE, we consider a relative
smoothness requirement for quality variation in an FoV [2]:
ri,k ≤ Rx,y,k ≤ ri,k + δ, (x, y) ∈ Fi, i ∈ Ik, k ∈ K,

(2)

where

ri,k ∈ {0, D1, . . . , DL}, i ∈ Ik, k ∈ K.
(3)
Here, ri,k (in bits/s) represents the minimum of the encoding
rates of the tiles in the i-th FoV of video k, also referred to
as the minimum encoding rate of the i-th FoV of video k,
and indicates the quality level of the i-th FoV for user k; and
δ > 0 is a small number representing the tolerance for quality
variation in an FoV (note that the quality variation for tiles in
one FoV is not visible if δ is small enough). An illustration
example can be found in Fig. 1.

Let U (r) denote the utility for an FoV with the minimum
encoding rate r. Here, the utility function U (·) can be any
nonnegative, strictly increasing and strictly concave function,
and U (0) = 0. Let Q(t)(r), t = pp,
ip and up denote

the performance metrics in the three cases of FoV viewing
probability distributions. In the case of perfect FoV viewing
probability distributions (i.e., case-pp), we use the average
total utility as the performance metric. In the case of imperfect
FoV viewing probability distributions (i.e., case-ip), we use the
worst average total utility as the performance metric. In the
case of unknown FoV viewing probability distributions (i.e.,
case-up), we use the worst total utility as the performance
metric. Therefore, the performance metrics in the three cases
of FoV viewing probability distributions can be written as:

Q(t)(r) =




P
P
P



pi,kU (ri,k),

i∈Ik

k∈K
k∈K minpk∈Pk
i∈Ik
k∈K mini∈Ik U (ri,k),

P

P

pi,kU (ri,k),

t = pp,
t = ip,
t = up.
(4)

B. Physical Layer Model and Transmission Scheme

The server has M antennas, and each user has one an-
tenna. We consider a multi-carrier system. Let N and N ,
{1, . . . , N } denote the number of subcarriers and the set of
subcarrier indices, respectively. The bandwidth of each subcar-
rier is B (in Hz). We assume block fading, i.e., the channel
on each subcarrier remains constant over the considered time
k,n ∈ C1×M denote the downlink channel
duration. Let hH
vector on subcarrier n between user k and the server. We
assume that the channel state information is perfectly known
at the server and the users.

For all k ∈ K, encoded (source coding) bits of the tiles in
F k that will be transmitted to user k are “aggregated” into one
message. We consider a rate splitting scheme [7]. Speciﬁcally,
for all k ∈ K, the aggregated message for user k is further
split into a common part of rate dc,k and a private part of rate
dp,k. Thus, we have:

X

(x,y)∈F k

Rx,y,k = dc,k + dp,k, k ∈ K.

(5)
Further, the common parts of the messages of the K users
k∈K dc,k.
are combined into a common message of rate
The private part of user k’s message is also referred to as
user k’s private message. The common message and the K
users’ private messages are then encoded (channel coding)
into codewords that span over N subcarriers, respectively. Let
wc,n ∈ CM×1 and wk,n ∈ CM×1 denote the common beam-
forming vector and the private beamforming vector for user k
on subcarrier n, respectively. We have the total transmission
power constraint:

P

k∈K

n∈N

X

2 +

≤ P,

||wk,n||2
2

||wc,n||2
(cid:16)

(6)
where P is the total transmission power budget. Let sc,n and
X
sk,n denote a symbol of the common message and a symbol
of user k’s private message, which are transmitted on the n-th
subcarrier, respectively. For notation simplicity, deﬁne K ,
K ∪ {c}. Let sn , (sk,n)k∈K and assume that E[snsH
n ] = I,
n ∈ N . We consider linear precoding on each subcarrier. The
received signal at user k on subcarrier n is given by:

(cid:17)

yk,n = hH

k,nwc,nsc,n+hH

k,nwk,nsk,n +

hH

n,jwj,nsj,n

j∈K,j6=k
X

+ zk,n, k ∈ K, n ∈ N ,

(7)

where zk,n ∼ CN (0, σ2) represents the received Additive
White Gaussian Noise (AWGN) at user k on subcarrier n.

We consider successive decoding at each user. Speciﬁcally,
the decoding procedure for user k ∈ K is as follows. First, user
k decodes the common message by treating the interference
from the K users’ private messages on each subcarrier as
noise. After successfully decoding and removing the common
message, user k decodes his private message by treating the in-
terference from the remaining K−1 users’ private messages on
each subcarrier as noise. The Signal to Interference plus Noise
Ratios (SINRs) of the common message and user k’s private
message on subcarrier n are given by

k,nwc,n|
k,nwj,n|2+σ2
k,nwj,n|2+σ2 , respectively. Assuming Gaussian
and
signaling, to guarantee that each user can successfully receive
the common message and his private message, we have:

|hH
Pj∈K |hH

Pj∈K,j6=k |hH

k,nwk,n|

|hH

2

2

dc,k ≤

k∈K

X

n∈N

X

Blog2

1 +

|hH
j∈K |hH

k,nwc,n|2
k,nwj,n|2 + σ2
(8)

k ∈ K,

,

!

P

dp,k ≤

Blog2

1 +

n∈N

k,nwk,n|2

|hH
j∈K,j6=k |hH

k,nwj,n|2 + σ2

,

!
(9)

X

k ∈ K.
P
III. PROBLEM FORMULATION AND OPTIMALITY
PROPERTIES

We would like to optimize the encoding rates of the tiles
R , (Rx,y,k)(x,y)∈F k,k∈K, minimum encoding rates of the
FoVs r , (ri,k)i∈Ik,k∈K, rates of the common and private
messages d , (dc,k, dp,k)k∈K and beamforming vectors w ,
(wk,n)k∈K,n∈N to maximize the performance metrics in (4)
subject to the constraints in (1), (2), (3), (5), (6), (8), (9).
Note that R and r are discrete variables. For tractability, we
consider a relaxed version of the discrete optimization, as in
[8]. That is, we replace the discrete constraints in (1) and (3)
with the following continuous constraints:

0 ≤ Rx,y,k ≤ DL, (x, y) ∈ F k, k ∈ K,
0 ≤ ri,k ≤ DL, i ∈ Ik, k ∈ K.

(10)

(11)

Therefore, we formulate the following optimization problem.
Problem 1 (Total Utility Maximization): For t = pp, ip, up,

U (t)⋆ , max
R,r,d,w
s.t.

Q(t)(r)

(2), (5), (6), (8), (9), (10), (11).

Let (R(t)⋆, r(t)⋆, d(t)⋆, w(t)⋆) denote an optimal solution of
Problem 1.

Note that U (t)⋆ depends on DL and is not related to
D1, . . . , DL−1. The performance loss induced by the continu-
ous relaxation is acceptable when D2 − D1, . . . , DL − DL−1
are small. Thus, we focus on solving Problem 1. Problem 1 is a
nonconvex problem, due to the nonconvexity of the constraints
in (8) and (9). There are no effective methods for solving
a general nonconvex problem optimally. Besides, Problem 1

 
 
with t = ip and Problem 1 with t = up have non-differentiable
objective functions. Therefore, Problem 1 is very challenging.1
Although it is difﬁcult to obtain a globally optimal solution
of the nonconvex problem in Problem 1, we can characterize
its properties. For all i ∈ Ik, k ∈ K, deﬁne Ti,k , Fi\F k.
Note that Ti,k ∩ Tj,k = ∅, for all i, j ∈ Ik, i 6= j, k ∈ K.

x,y,k =

max
i∈Ik:(x,y)∈Fi

Theorem 1 (Optimality Properties of Problem 1): (i) For t
r(t)⋆
= pp, ip, up, R(t)⋆
i,k , (x, y) ∈ F k, k ∈ K.
(ii) For t = pp and for all i, j ∈ Ik, i 6= j, k ∈ K, if pi,k ≤ pj,k,
and |Ti,k| > |Tj,k| > 1, then r(pp)⋆
i,k ≤ r(pp)⋆
j,k . For t = ip and
for all i, j ∈ Ik, i 6= j, k ∈ K, if pi,k ≤ p
, and |Ti,k| >
j,k
|Tj,k| > 1, then r(ip)⋆
i,k ≤ r(ip)⋆
i,k , i ∈ Ik are
identical, k ∈ K. (iii) U (pp)⋆ ≥ U (ip)⋆ ≥ U (up)⋆.

j,k . For t = up, r(up)⋆

Statement (i) of Theorem 1 indicates that in each case,
for all (x, y) ∈ F k, k ∈ K, the ﬁrst inequality in (2) for
at least one FoV that covers the (x, y)-th tile is active at an
optimal solution. Statement (ii) of Theorem 1 indicates that
in the case of perfect and imperfect FoV viewing probability
distributions, an FoV with a higher viewing probability has a
higher minimum encoding rate; and in the case of unknown
FoV viewing probability distributions, the minimum encoding
rates are identical, as all FoVs in Ik are treated the same.
Statement (iii) shows the relationship among the optimal
values of Problem 1 for the three cases.

IV. SOLUTION

In this section, we obtain a suboptimal solution of Problem 1
in each case. First, we transform Problem 1 into an equivalent
DC programming problem with a differentiable objective
function in each case.

Perfect FoV viewing probability distributions: By in-
troducing auxiliary variables and extra constraints, we can
equivalently transform Problem 1 with t = pp into:

Problem 2 (Equivalent Problem of Problem 1 with t = pp):

Q(pp)(r)

max
R,r,d,e,u,w
s.t.

(2), (5), (6), (10), (11),

where e , (ek,n)k∈K,n∈N , u , (uk,n)k∈K,n∈N . Let
(R(pp)†, r(pp)†, d(pp)†, e(pp)†, u(pp)†, w(pp)†) denote an optimal
solution of Problem 2.

Theorem 2 (Equivalence between Problem 1 with t = pp
and Problem 2): (R(pp)†, r(pp)†, d(pp)†, w(pp)†) is an optimal
solution of Problem 1 with t = pp.

Imperfect FoV viewing probability distributions:
Q(ip)(r) is non-differentiable, and Problem 1 with t = ip is
a max-min problem w.r.t. (R, r, d, w, p). Note that max-min
problems are in general very challenging. First, we replace the
inner problem with its dual problem which has a differentiable
objective function. Next, we introduce the auxiliary variables
and extra constraints. Thus, we can equivalently convert Prob-
lem 1 with t = ip to:

Problem 3 (Equivalent Problem of Problem 1 with t = ip):

max
R,r,d,e,u,w,
λ(cid:23)0,τ (cid:23)0,γ X
s.t.

k∈K  

i∈Ik
X

(τi,kp

i,k − λi,kpi,k) − γk

!

(2), (5), (6), (10), (11), (12), (13), (14), (15), (16),
U (ri,k) + λi,k − τi,k + γk ≥ 0, i ∈ Ik, k ∈ K,
where λ , (λi,k)i∈Ik,k∈K, τ , (τi,k)i∈Ik,k∈K, γ , (γk)k∈K.
Let (R(ip)†, r(ip)†, d(ip)†, e(ip)†, u(ip)†, w(ip)†, λ(ip)†, τ (ip)†,
γ(ip)†) denote an optimal solution of Problem 3.

Note that λi,k, τi,k and γi,k are dual variables of the inner
and

problem, corresponding to pi,k ≤ pi,k, pi,k ≥ p

pi,k = 1, respectively.

i∈Ik
Theorem 3 (Equivalence between Problem 1 with t = ip and
P
Problem 3): (R(ip)†, r(ip)†, d(ip)†, w(ip)†) is an optimal solution
of Problem 1 with t = ip.

i,k

Unknown FoV viewing probability distributions: Qup(r)
is non-differentiable. First, we cast Problem 1 with t =
up in hypograph form which has a differentiable objective
function. Next, we introduce the auxiliary variables and extra
constraints. Thus, we can equivalently convert Problem 1 with
t = up to:

Problem 4 (Equivalent Problem of Problem 1 with t = up):

k∈K
X
dp,k ≤

dc,k ≤

n∈N

ec,n,

n∈N
X
ek,n, k ∈ K,

(12)

(13)

s.t.

max
R,r,d,e,u,y(cid:23)0,w

yk

k∈K
X

(2), (5), (6), (10), (11), (12), (13), (14), (15), (16),
yk ≤ U (ri,k), i ∈ Ik, k ∈ K,

X
|hH

j∈K

k,nwj,n|2 + σ2 −

X

k∈K |hH

k,nwk,n|2 + σ2
uc,n
k ∈ K, n ∈ N , (14)

≤ 0,

P

|hH

k,nwj,n|2 + σ2 −

j∈K,j6=k

X

j∈K |hH

k,nwj,n|2 + σ2
uk,n

≤ 0,

k ∈ K, n ∈ N , (15)

P

ek,n
B ≤ uk,n, k ∈ K, n ∈ N ,

2

(16)

1The proposed method in [7] for obtaining a suboptimal rate splitting design

cannot be used for solving Problem 1.

where y , (yk)k∈K. Let (R(up)†, r(up)†, d(up)†, e(up)†, u(up)†,
y(up)†, w(up)†) denote an optimal solution of Problem 4.

Theorem 4 (Equivalence between Problem 1 with t = up
and Problem 4): (R(up)†, r(up)†, d(up)†, w(up)†) is an optimal
solution of Problem 1 with t = up.

Note that in Problem 2, Problem 3 and Problem 4, u, e are
auxiliary variables, and (12), (13), (14), (15), (16) are extra
constraints. Furthermore, notice that the constraints in (12) and
(13) are convex with respect to (w.r.t) (d, e), the constraints
in (16) are convex w.r.t (e, u), and each constraint function in
(14) and (15) can be regarded as a difference of two convex
functions w.r.t. (u, w). Therefore, Problem 2, Problem 3 and

Problem 4 are DC programming problems with differentiable
objective functions, and their stationary points can be obtained
by CCCP [9]. The main idea is to solve a sequence of
successively reﬁned approximate convex problems, each of
which is obtained by linearizing the second convex part in
(14), (15) and preserving the remaining convexity. For each
problem, we can run CCCP multiple times with different
feasible initial points to obtain multiple stationary points, and
choose the stationary point with the best objective value as a
suboptimal solution.

V. NUMERICAL RESULTS

In the simulation, we consider the streaming of ﬁve 360
VR video sequences, i.e., Diving, Rollercoaster, Timelapse,
Venice, Paris, provided by [10]. They are indexed by 1, 2,
3, 4 and 5, respectively. As illustrated in Fig. 2, we divide
each 360 VR video into 8 × 8 tiles, i.e., X = 8, Y = 8,
and choose I = 64 FoVs, each of size 3 × 3 (in the number
of tiles). We use Kvazaar as the 360 VR video encoder, and
set Dl, l ∈ L according to Table I. For each video sequence,
based on the viewpoint data of 59 users provided by [10], we
obtain a viewpoint sequence for each user, with one viewpoint
for every 1/3 second. We view users 2, 8, 24, 32 and 40 as
the users who request videos 1, 2, 3, 4 and 5, i.e., users
1, 2, 3, 4 and 5, respectively. For video k, the viewpoint
sequences from the other users besides user k are used for
FoV prediction of user k. For user k, consider the prediction
of the 3-rd element in his viewpoint sequence given the 2-
nd element. Let ik denote the index of the FoV of user k
corresponding to the 2-nd element in his viewpoint sequence.
Set Ik = {ik − 8, ik − 1, ik, ik + 1, ik + 8}, which contains
ik and the indices of the neighbouring FoVs of FoV ik. Let
nik,i denote the number of users with the 2-nd element and
3-rd element in his viewpoint sequence for video k being ik
and i, respectively, where i ∈ Ik. Then, we calculate the FoV
viewing probabilities according to pi,k =
, i ∈
Ik, k ∈ K. The values of pi,k, i ∈ Ik, k ∈ K are given in Table
II. We set ˆpi,k = pi,k, εi,k = ε, i ∈ Ik, k ∈ K, B = 1MHz, N
= 128, P = 30 dBm and σ2 = 10−9 W. Besides, we choose
hk,n, k ∈ K, n ∈ N randomly and independently according
to CN (0, 1M×M ), and set the pass loss βk = 1, k ∈ K. We
evaluate the average performance metrics over 100 random
realizations of hk,n, k ∈ K, n ∈ N . We adopt the utility
function presented in [11], i.e., U (r) = 0.6 log(1000 r
). For
DL
ease of presentation, in the following, the performance metrics
in all three cases are referred to as total utility, unless otherwise
speciﬁed. In case-t, the proposed solution of Problem 1 is
referred to as Prop-t, and the feasible solution of the original
discrete problem, which is constructed based on Prop-t (as
illustrated in Section III), is referred to as Prop-Disc-t, where
t = pp, ip, up.

Pi∈Ik

nik ,i

nik ,i

We consider wireless streaming of the ﬁve 360 VR videos
given in Table II to the ﬁve users, respectively. First, we
investigate properties of the proposed solutions in the three
cases. Fig. 3 (a) illustrates the total utility versus the number of
quality levels L. Notice that the total utility of Prop-t does not

TABLE I. Encoding rates (in Mbit/s) for L = 3, 5, 7.

L
3
5
7 D1 = 14.46, D2 = 37.10, D3 = 46.20, D4 = 52.97, D5 = 59.45, D6 = 69.53, D7 = 87.75.

Dl, l ∈ L.
D1 = 14.46, D2 = 52.97, D3 = 87.75.
D1 = 14.46, D2 = 37.10, D3 = 52.97, D4 = 69.53, D5 = 87.75.

1

1

9

17

25

33

41

49

57

2

2

10

18

26

34

42

50

58

3

3

11

19

27

35

43

51

59

4

4

12

20

28

36

44

52

60

5

5

13

21

29

37

45

53

61

6

6

14

22

30

38

46

54

62

7

7

15

23

31

39

47

55

63

Y

8

8

16

24

32

40

48

56

64

1

2

3

4

5

6

7

8

X

Fig. 2. Illustration of tiles, viewpoints and FoVs in a 360 VR video.
The grey area represents FoV 29 which is centered at viewpoint 29.

change with L, for all t = pp, ip, up. From Fig. 3 (a), we can
see that in case-t, the gap between the total utilities of Prop-
t and Prop-Disc-t decreases with L. Furthermore, the gap is
small when L is large, implying that the performance loss due
to continuous relaxation is negligible at a large L. Fig. 3 (b)
shows the worst average total utility versus the estimation error
bound ε. Note that the worst average total utility of Prop-up
is irrelevant to ε. we can see that in the case of imperfect FoV
viewing probability distributions, the worst average total utility
of Prop-ip is greater than those of Prop-pp and Prop-up, which
reveals the importance of explicitly considering imperfectness
of the predicted FoV viewing probability distributions in this
case; and the worst-case average total utility of Prop-up is
greater than that of Prop-pp when ε is large, as Prop-up is
designed to maximize the worst-case total utility and does
not depend on any information of FoV viewing probability
distributions. Furthermore, the gain of Prop-ip over Prop-pp
increases with ε, as it is more important to take into account
of FoV prediction error when ε is large; and the gain of
Prop-ip over Prop-up decreases with ε, as the imperfect FoV
viewing probability distributions become less important when
ε is large. Fig. 4 illustrates the heatmap of the encoding rates of
all tiles for user 4 given by the proposed solutions in the three
cases. From Fig. 4 (a) and (b), we can see that the encoding
rates of the tiles in an FoV with a larger viewing probability
are higher. From Fig. 4 (c), we can tell that the encoding rates
of the tiles given by Prop-up are identical. Such observations
are in accordance with the optimality properties in Statement
(ii) of Theorem 1.

Next, we compare the total utilities of the proposed solution
and three baseline schemes, namely BL-SDMA-OPT, BL-
SDMA-ZF, BL-OFDMA-MRT, in each case. In BL-SDMA-
OPT and BL-SDMA-ZF, SDMA is adopted. In BL-SDMA-
OPT, beamforming optimization is considered on each sub-
carrier, and a suboptimal solution of Problem 1 with dc,k =
0, k ∈ K and wc,n = 0, n ∈ N (which is a DC programming)
is obtained using CCCP. In BL-SDMA-ZF, zero forcing beam-
forming is adopted on each subcarrier, and an optimal solution
of Problem 1 with the zero forcing beamformers (which is

TABLE II. Prediction parameters.

Video
sequence

User

Current
FoV

Predicted FoVs

FoV viewing probability distributions

Diving

2

Rollercoaster 8

Timelapse

Venice

Paris

24

32

40

28

21

24

29

18

I1 = {20, 27, 28, 29, 36}

I2 = {13, 20, 21, 22, 29}

I3 = {16, 23, 24, 17, 32}

I4 = {21, 28, 29, 30, 37}

I5 = {10, 17, 18, 19, 26}

(p20,1, p27,1, p28,1, p29,1, p36,1)
= (0.4138, 0.1724, 0.2414, 0.1667, 0.0417)
(p13,2, p20,2, p21,2, p22,2, p29,2)
= (0, 0.4615, 0.3077, 0.0769, 0.1538)
(p16,3, p23,3, p24,3, p17,3, p32,3)
= (0.1481, 0.037, 0.2963, 0.5185, 0)
(p21,4, p28,4, p29,4, p30,4, p37,4)
= (0.25, 0.375, 0.25, 0.0625, 0.0625)
(p10,5, p17,5, p18,5, p19,5, p26,5)
= (0.375, 0.5, 0.125, 0, 0)

19.8

19.6

19.4

19.2

19

18.8

18.6

18.4

18.2

18

y
t
i
l
i
t
u

l

a
t
o
t

e
g
a
r
e
v
a
t
s
r
o
W

17.8

0

Prop-pp
Prop-Disc-pp
Prop-ip
Prop-Disc-ip
Prop-up
Prop-Disc-up

3

5
Quality level (L)

7

Prop-pp
Prop-ip
Prop-up

0.2

0.4
Error bound (ǫ)

0.6

0.8

k

1

2

3

4

5

y
t
i
l
i
t
u

l

a
t
o
T

20

18

16

14

12

10

8

6

4

2

0

(b) Worst average total utility
versus ε.

(a) Total utility versus L at ε =
0.4
Fig. 3. Total utility comparision of the proposed solutions at M =
64.
convex) is obtained by standard convex optimization methods.
In BL-OFDMA-MRT, OFDMA is adopted,
the maximum
ratio transmission (MRT) is adopted for each user, and an
optimal solution of Problem 1 with the MRT beamformers is
obtained by continuous relaxation and the KKT conditions.
Fig. 5 illustrates the total utility versus the number of transmit
antennas M . From Fig. 5, we can see that in each case, the
proposed solution outperforms the baseline schemes, and the
total utility of each scheme increases with M . In each case, the
gain of the proposed solution over BL-SDMA-OPT arises from
the fact that the cost to suppress interference in BL-SDMA-
OPT can be high, while the rate splitting scheme partially
decodes interference and partially treats interference as noise;
the gain of the proposed solution over BL-SDMA-ZF arises
from the fact that the cost to suppress interference in BL-
SDMA-ZF can be high and the beamforming directions are
optimized; and the gain of the proposed solution over BL-
OFDMA-MRT is due to effective spatial multiplexing.

Finally, from Fig. 3 (a) and Fig. 5, we can see that U (pp)† >
U (ip)† > U (up)†, where U (t)† represents the total utility of
Prop-t, where t ∈ {pp, ip, up}. The relationship among the
total utilities of the suboptimal solutions of Problem 1 in the
three cases is the same as that of the optimal solutions in the
three cases (which is shown in Statement (iii) of Theorem 1).

VI. CONCLUSION

In this paper, we investigated optimal designs, based on
rate splitting with successive decoding, for streaming multi-
quality tiled 360 VR videos from a multi-antenna server to
multiple single-antenna users in a multi-carrier system. We
considered three cases of FoV viewing probability distribu-
tions and proposed three respective performance metrics for
total utility. In each case, we optimized the rate adaptation,
resource allocation and beamforming to maximize the total
utility. We successfully transformed the challenging nonconvex

2

4

Y

6

8

21

28 29 30

37

X

1

2

3

4

5

6

7

8

9

1

0.8

0.6

0.4

0.2

0

X

1

2

3

4

5

6

7

8

9

2

4

Y

6

8

21

28 29 30

37

1

0.8

0.6

0.4

0.2

0

X

1

2

3

4

5

6

7

8

9

2

4

Y

6

8

21

28 29 30

37

1

0.8

0.6

0.4

0.2

0

(a) Proposed-pp

(b) Proposed-ip
Fig. 4. Encoding rates of the tiles for user 4 given by Prop-pp, Prop-ip
and Prop-up at M = 64, ε = 0.4.

(c) Proposed-up

21

20

19

18

17

16

15

y
t
i
l
i
t

u

l

a

t

o
T

Prop-pp
BL-SDMA-OPT-pp
BL-SDMA-ZF-pp
BL-OFDMA-MRT-pp

Prop-ip
BL-SDMA-OPT-ip
BL-SDMA-ZF-ip
BL-OFDMA-MRT-ip
Prop-up
BL-SDMA-OPT-up
BL-SDMA-ZF-up
BL-OFDMA-MRT-up

14

8

28

48

68
Number of antennas (M)

88

108

128

Fig. 5. Total utility comparision between the proposed solutions and
baseline schemes at ε = 0.4.
problem in each case into a DC programming problem, and
obtained a suboptimal solution using CCCP. Finally, numerical
results demonstrated the proposed solutions achieve notable
gains over existing schemes in all three cases, and revealed
the impact of FoV prediction and its accuracy on streaming
of multi-quality tiled 360 VR videos.

REFERENCES

[1] K. Long, C. Ye, Y. Cui, and Z. Liu, “Optimal multi-quality multicast for
360 virtual reality video,” in Proc. of IEEE GLOBECOM, Dec. 2018,
pp. 1–6.

[2] K. Long, Y. Cui, C. Ye, and Z. Liu, “Optimal wireless streaming of
multi-quality 360 VR video by exploiting natural, relative smoothness-
enabled and transcoding-enabled multicast opportunities,” major revi-
sion, IEEE Trans. Multimedia.

[3] J. Zou, C. Li, C. Liu, Q. Yang, H. Xiong, and E. Steinbach, “Probabilistic
tile visibility-based server-side rate adaptation for adaptive 360-degree
video streaming,” IEEE JSTSP, vol. 14, no. 1, pp. 161–176, Jan. 2020.
[4] W. Huang, L. Ding, G. Zhai, X. Min, J.-N. Hwang, Y. Xu, and W. Zhang,
“Utility-oriented resource allocation for 360-degree video transmission
over heterogeneous networks,” Digit. Signal Process., vol. 84, pp. 1–14,
Oct. 2018.

[5] J. Yang, J. Luo, D. Meng, and J. Hwang, “QoE-driven resource allo-
cation optimized for delay-sensitive VR video uploading over cellular
network,” in Proc. of IEEE ISCC, Jun. 2019, pp. 1–6.

[6] A. Wiesel, Y. C. Eldar, and S. Shamai, “Zero-forcing precoding and
generalized inverses,” IEEE Trans. Signal Process., vol. 56, no. 9, pp.
4409–4418, Sep. 2008.

[7] H. Joudeh and B. Clerckx, “Sum-rate maximization for linearly precoded
downlink multiuser MISO systems with partial CSIT: a rate-splitting
approach,” IEEE Trans. Commun., vol. 64, no. 11, pp. 4847–4861, Nov.
2016.

[8] J. Chakareski, R. Aksu, X. Corbillon, G. Simon, and V. Swaminathan,
“Viewport-driven rate-distortion optimized 360 video streaming,” in
Proc. of IEEE ICC, May. 2018, pp. 1–7.

[9] Y. Sun, P. Babu, and D. P. Palomar, “Majorization-minimization algo-
rithms in signal processing, communications, and machine learning,”
IEEE Trans. Signal Process., vol. 65, no. 3, pp. 794–816, Feb. 2017.

[10] X. Corbillon, F. De Simone, and G. Simon, “360-degree video head
movement dataset,” in Proc. of ACM MMSys, June 2017, pp. 199–204.
[11] W. Zhang, Y. Wen, Z. Chen, and A. Khisti, “QoE-driven cache man-
agement for HTTP adaptive bit rate streaming over wireless networks,”
IEEE Trans. Multimedia, vol. 15, no. 6, pp. 1431–1445, Oct. 2013.

 
 
 
 
 
