A Semi-Markov Decision Process (SMDP)-based
Channel Allocation Model for Unreliable Terahertz
(THz) Reconﬁgurable Intelligent Surfaces (RIS)

Mounir Bensalem∗, Anna Engelmann+ and Admela Jukan∗
∗Technische Universität Braunschweig, Germany; {mounir.bensalem, a.jukan}@tu-bs.de
+CARIAD SE, Germany; anna.engelmann@cariad.technology

2
2
0
2

r
a

M
1

]
I

N
.
s
c
[

1
v
4
4
3
0
0
.
3
0
2
2
:
v
i
X
r
a

Abstract—Terahertz (THz) communications and reconﬁg-
urable intelligent surfaces (RISs) have been recently proposed
to enable various powerful indoor applications, such as wireless
virtual reality (VR). For an efﬁcient servicing of VR users, an
efﬁcient THz channel allocation solution becomes a necessity.
Assuming that RIS component is the most critical one in enabling
the service, we investigate the impact of RIS hardware failure
on channel allocation performance. To this end, we study a THz
network that employs THz operated RISs acting as base stations,
servicing VR users. We propose a Semi-Markov decision Process
(SMDP)-based channel allocation model to ensure the reliability
of THz connection, while maximizing the total long-term expected
system reward, considering the system gains, costs of channel
utilization, and the penalty of RIS failure. The SMDP-based
model of the RIS system is formulated by deﬁning the state
space, action space, reward model, and transition probability
distribution. We propose an optimal
iterative algorithm for
channel allocation that decides the next action at each system
state. The results show the average reward and VR service
blocking probability under different scenarios and with various
VR service arrivals and RIS failure rates, as ﬁrst step towards
feasible VR services over unreliable THz RIS.

Index Terms—SMDP, channel allocation, virtual reality , re-

conﬁgurable intelligent surfaces, reliability.

I. INTRODUCTION

Virtual Reality (VR) applications are envisioned as one of
the key technologies that will advance the human to machine
interactions where a user is present and acts in a virtual world
[1]. In order to satisfy the high demand of data rates that VR
applications require, the THz frequency band is currently one
of the most promising communications technology to provide
a high quality VR experience. As THz communication is
characterized by directional and sensitive to attenuation beams,
a new technology called Reconﬁgurable Intelligent Surfaces
(RIS) is used to enhance the performance of THz wireless
communications [2], [3]. In an indoor setting, the usage of RIS
in THz communications is rather critical, since by controlling
the reﬂective properties of the underlying channels, we can
mitigate various THz transmission impairments [4].

It is known that RIS array elements, so called meta-surfaces,
are vulnerable to failures, which can cause deterioration of the
antenna radiation pattern, and in severe cases, the RIS failures
can affect the functioning of RIS meta-surface elements [5].
In addition, THz links can also be blocked between the
user and RIS, due to various obstacles. In order to design

reliable RIS based networks in practical environments, it is
becoming essential to develop channel allocation schemes that
are aware of RIS meta-surface failures, as well as link failure
between RISs and users. The resource allocation problem in
RIS networks is indeed one of the key problems to solve for
any efﬁcient RIS design, where several sub-problems can be
investigated, including channel allocation, power allocation,
RIS-to-user assignment, and phase shifts design. Few works
studied resource allocation problems, but no work to date
considered the problem of channel allocation under faulty RIS
scenarios. To the best of our knowledge, channel allocation of
VR over THz RIS, considering the unreliability of RIS devices
has not yet been investigated.

In this paper, we consider channel resource allocation in the
VR applications over RIS network with controlled access of
VR users request by Semi-Markov decision Process (SMDP).
We introduce an optimal channel allocation scheme to ensure
the reliability and maximize the system reward in a set of
RISs, in which a RIS device and its meta-surface elements are
vulnerable to failures, as are the THz links between RISs and
users. We formulate the problem of RIS-unreliability-aware
channel allocation as an SMDP model considering multiple
RIS devices in an indoor environment used to allocate THz
meta-surfaces to VR users. Following the deﬁnition of SMDP
[6], the decision is taken at the event occurrence, while an
iterative algorithm proposed maximizes the total long-term
reward of the VR over RIS system, considering the factors of
user’s income of the accepted services, the costs for occupying
channels, and penalty of RIS and meta-surface failures. We
make realistic assumptions on the reference THz network
model, where a set of backup RIS devices are used to ensure
the reliability of the system, for cases where a RIS device or
a meta-surface in a RIS fails. When a RIS or a meta-surface
fails, the corresponding backup RIS is allocated to transfer the
existing services, which allows the RIS network to operate in
a reliable fashion.

Numerical results show the average reward and blocking
probability with various service arrival and RIS failure rates,
and under different network conﬁgurations. Our proposed
solution can compute corresponding policies to each service
request arrival rate to ensure the reliability and maximize long-
term rewards. The proposed scheme is generally applicable,
dynamic and provides an efﬁcient solution to the channel al-

 
 
 
 
 
 
location problem. We also show that our scheme improves the
QoS of THz communication with regard to the request arrival
rate, and RIS meta-surfaces availability. Moreover, when VR
users request arrival rate is high, the channels are allocated
with the minimum requirements for a VR service to operate,
which decreases the blocking probability, and allows more
users to join the RIS network overall. Since each RIS device
can be used to provide a connection to various VR users, we
show that a shared solution allows for more ﬂexibility to the
system. The results show that increasing the number of RISs
and meta-surfaces does not always improve the performance
in terms of long-term reward and service blocking for service
arrival rates below a certain threshold. Hence, our model can
help dimensioning RIS THz networks in terms of costs and
performance based on the expected service rate. We show
that future work can beneﬁt from a large-scale solution based
on reinforcement learning that could to solve value iteration
algorithm, which is known to grow exponentially.

The rest of this paper is organized as follows. Section II
discusses the related work. Section III presents the SMDP
based channel allocation model in indoor THz network, with
unreliable RIS. Section IV describes the proposed optimal
iterative-based solution. Section V evaluates the performance.
We conclude the paper in Section VI.

II. RELATED WORK

VR communication has been recently investigated in several
seminal works [7]–[9], focusing on studying the VR Quality
of Service (QoS). In [7], a VR model was studied that detect
the tracking and delay components of VR QoS. The work
in [8] analysed the spectrum resource allocation problem,
considering a brain-aware QoS constraint. In [9] the downlink
of VR requests over RISs network, operating over the terahertz
(THz) frequency bands, was considered, and a solution was
proposed to the problem of associating RISs to virtual reality
users.

Due to the importance of hardware failures, the baseband
complex received signal from a RIS element has been modeled
in [10], considering faulty reﬂecting elements of RIS. Thus,
in order to design reliable RIS based networks in practical
environments, it is essential to develop resource allocation
schemes aware of RIS array failures. The optimal number of
reﬂecting elements in a RIS has been studied theoretically
in [11] to maximize the transmission rate in a point-to-point
link, emphasizing the importance of RIS conﬁguration (e.g.,
channel allocation scheme), and the resulting overhead due to
channel estimation. Motivated by this work, which concluded
that new, sophisticated resource allocation schemes are needed,
we use a model of a VR over THz RIS network under
the similar failure assumptions to solving channel allocation
problem.

Recent works studied the resource allocation problem in
THz RIS networks speciﬁcally. Paper [12] studied different
types of active RISs (active and passive), considering their
hardware architectures, operation modes, and applications in
communications, and also highlighted the need of developing

efﬁcient resource allocation solutions, which is still an open
challenge. In [13] a downlink multi-user multi-input single-
output (MISO) system was studied, where a RIS is used to
support a base station to ensuring a reliable communication
when the signal is affected by obstacles. The resource allo-
cation problem is tackled by an iterative algorithm based on
alternating optimization, in order to solve the sum-rate maxi-
mization problem, addressed by optimizing the digital beam-
forming at the base station and the discrete phase shifts at the
RIS. The main focus of the work was the rate optimization
over a signal RIS component, under the assumption that RIS
devices are reliable, and a user is assigned to a single channel.
In [9], a virtual reality network was considered and a
solution was proposed to the problem of associating RISs
to virtual reality users operating over the terahertz frequency
bands. In particular, the paper formulates a risk-based frame-
work based on the entropic value-at-risk and optimize the
transmission rate and reliability. A single RIS device was
considered and the formulated problem aims at achieving
higher order statistics of the queue length, in order to guar-
anteeing continuous reliability. Lyapunov optimization, deep
reinforcement learning, and recurrent neural network were
adopted to solve the optimization problem. We adopt a similar
VR over RIS model as in [9], however our focus is not on
optimizing the transmission rate by adjusting the queue length.
Instead, we assume the existence of multiple RISs that can
provide the same set of VR users, as well as the possibility to
allocate multiple channels for the same VR user request, while
considering the failure possibility of RISs and meta-surfaces.
A few other related works are notable including [14], that
focused on energy-efﬁcient design for transmit power alloca-
tion and the phase shifts of the surface reﬂecting elements.
In [15], an optimal scheme was proposed that maximizes the
system sum-rate using a modulation scheme compatible with
RIS system and a resource allocation scheme that control the
transmission power and modulation. The studied system has
not considered channel allocation, considering the user arrival
rates, service rates, or the faulty RISs.

Paper [16] studied the resource allocation problem in RIS
systems focusing on power allocation and proposed a re-
source allocation framework in multi-cell downlink RIS-non-
orthogonal multiple access (NOMA) networks, where a joint
optimization problem was solved to maximize the achievable
sum-rate of user association, sub-channel assignment, power
allocation, phase shifts design, and decoding order determina-
tion; a single RIS was considered assuming that RIS devices
cannot fail. In [17], joint active and passive beamforming prob-
lem and the user-RIS association problem was investigated in
a multi-RIS assisted multi-user communications. The authors
mapped the problem of max-min signal-to-interference-plus-
noise ratio (SINR) into a user-RIS association problem, and
proposed greedy search algorithm as a solution, tuning the RIS
to serve a certain user.

It should be noted that channel allocation problem has been
well investigated in other contexts such as in vehicular net-
works. In [18], an SMDP-based channel allocation scheme was

proposed in vehicular ad-hoc networks to maximize the overall
system rewards, while servicing user requests through roadside
units. The paper concluded that due to the high mobility of
users, an SMDP policy for the channel allocation problem
can improve the QoS. Motivated by this work, we could see
the VR over RIS network as a cognitive-enabled vehicular
ad hoc networks, where VR users can be mapped to vehicle
users, RISs could replace the roadside units (RSUs), and the
allocation of meta-surfaces can be seen as channel allocation,
which is our approach in this paper. SMDP-model was also
proposed in [19] to solving channel allocation problem in order
to maximizing throughput in the context of vehicular networks.
The related work is primarily based on linear programming
which is known to be an NP hard problem, and that it works
for off-line processing, whereas our proposed model works for
online channel assignment to users using an iterative solution,
that assumes the knowledge about some system statistics,
such as the RIS failure, service arrival, and service departure.
Moreover, our approach assumes that the system statistics are
known, and that the RIS conﬁguration such as phase shift and
power control are managed by other algorithms independently.
Thus, our approach is focused on channel allocation only, as a
function of VR user’s THz channel request behavior. We also
do not consider the dependency between RIS failures, which
is a limitation, as is the intrinsic limitation of SMDP to scale
to larger systems.

III. SMDP BASED CHANNEL ALLOCATION OF VR OVER
THZ RIS

In this section, we model a RIS-based wireless indoor
reference THz network in an indoor area, provide the channel
model, analyze the channel states and actions, as well as
transmission probabilities, and rewards analysis.

A. The reference network and assumptions

The reference THz network is illustrated in Figure 1. The
reference network consists of a set of RISs, small base station
(SBS) operating over THz frequency, RIS controller, and
VR users. RISs are classiﬁed into two categories: main RIS,
used to servicing a set of mobile wireless VR users, and a
backup RIS used to servicing the users when a main RIS
fails. The SBS is responsible for receiving requests from VR
users and servicing them via RIS components. The uplink of
VR service requests is adopting an ultra reliable low latency
communications (URLLC) scheme, similar to [9]. In this
study, we consider the downlink of the RIS-based network
only, where each RIS is covering the indoor environment
and can provide THz communication channel to VR users.
The users are assumed to be mobile and can have different
locations in the environment, and requesting VR services.
The VR user end-devices can send several of service requests
through the RIS network.

Each RIS can reﬂect the beams received from a main THz
SBS, which generally uses a MIMO system. The information
sent from the SBS is encoded in the phase of the signal
reﬂected by the reconﬁgurable elements that compose the RIS.

A RIS contains of a very large number of passive reﬂective
elements called meta-surfaces, capable of reconﬁguring prop-
erties of electromagnetic (EM) waves impinging upon them.
We assume that all RISs are connected to the RIS Controller
responsible for channel tuning by changing the phase of the
reﬂected signal [14]. A RIS containing several meta-surfaces
connected to a THz SBS can be represented as a multi channel
system. The channels can be allocated based on the system
availability. In order to ensure the reliability of the system,
where RIS failure is considered, we pre-reserve a backup
RIS to each operating RIS. We assume that services can be
transferred from the operating RIS to the backup RIS when
operating RIS or a single meta-surface failure occurs. Figure
1, illustrates three failure scenarios. First, when a meta-surface
fails, we assume the failure of meta-surface will affect at most
one user, while all other channels remain unaffected. To insure
the reliability, we transfer one connection from the main RIS
to the backup RIS. On the other hand, when an entire RIS
fails, all connections will be affected, thus we transfer all of
them to the backup RIS. Finally, a THz link between RIS and
users can also fail.

For the generality of our model, we assume that the RIS
network can include heterogeneous RIS devices, of various
sizes and containing different number of meta-surfaces, and
thus servicing different number of channels. When a requested
VR services from VR users is detected, the RIS controller
accepts or rejects it based on the availability of the channel
resources.

In this paper, we assume that the THz link between the
VR user and the RIS can be blocked and fail with a certain
probability, and the link between RIS and the THz SBS is
reliable and cannot be disrupted by obstacles. A VR user-RIS
failure caused by an obstacle block will result in a failure of
the transmission channel and creates a delay, which affects
the QoS. We assume that a RIS and a meta-surface can face a
hardware failure, and for the downlink connection we propose
a novel channel allocation scheme.

B. Channel Model

This model focuses on the THz link between VR users and
the RIS, where the VR user is mobile. The user movements
can cause signal blocking due to self blocking, or due to
other mobile or ﬁxed obstacle in the indoor environment, as
described in [9]. We assume the time slots indexed by t have
a period duration τ0. We denote by Lr,n,u,t a binary random
variable, which is equal to 1 when the Line-of-Sight (LoS)
link between the meta-surface n of the RIS r and the user u
at time slot t is available and 0 otherwise. The corresponding
random channel gain is deﬁned as in [9] as:

(cid:40) (cid:16)

c
4πdr,u,t

(cid:17) (cid:0)e−k(f )dr,u,t (cid:1)2

,

hr,n,u,t=

0,

if P (Lr,n,u,t = 1),

if P (Lr,n,u,t = 0).

(1)
where c is the speed of light in the vacuum, db,u,t is the
time slot t,
distance between RIS r and the VR user at

Figure 1: The reference indoor THz RIS network.

f is the operating frequency, k(f ) is the overall molecular
absorption coefﬁcients of the medium at THz band, available
from HITRAN database [20].
The transmission rate between RIS r and the VR user u at
time slot t is given by:

all RIS has enough maximum capacity N (i) to satisfy its
the arrival and service
capacity requirements. We model
processes of VR service requests from a user as a Poisson
process with mean rates λs, and µs, respectively, where µs
can be concluded from eq. (3) for different services.

cr,u,t = W · log2

(cid:32)

1 +

PRIShr,n,u,t

(cid:80)N

n=1 |ej(φr,n,u,t−ψr,n,u,t)|2Lr,n,u,t
N (dr,u,t, p, f )

(cid:33)

(2)

where W is the total bandwidth, PRIS is the transmit power
related to each RIS, ψr,n,u,t is the phase shift of meta-surface
element n of RIS r with respect to user u at time slot t,
φr,n,u,t is the phase shift of the channel between meta-surface
element n of RIS r with respect to user u at time slot t,
N (dr,u,t, p, f ) = N0 + (cid:80)R
r=1 PRISA0d−2
r,u,t(1 − e−K(f )dr,u,t ),
T0 is the temperature in Kelvin, A0 = c2
16π2f 2 [21].
The obtained transmission rate can be used to calculate the
service rate of a speciﬁc VR service s, given by:

Cr,u,t,s =

cr,u,tτ0
Os

(3)

where Os is the size of the object related to the service s,
such as the size of a VR image.

C. Problem Formulation

To address reliability issue, we assume failures of RISs,
meta-surfaces and THz links between meta-surface and VR
user. We assume that
the THz link fails due to either a
permanent obstacle between meta-surface and VR user with
probability φi or a failure of the meta-surface. Any meta-
surface can fail with probability pi due to hardware or software
failure. We assume any operating RIS as not available, when
at least one operating meta-surface of this RIS fails. Moreover,
operating and backup RIS can fail due to hardware or software
failure with probability ηi and results in unavailability of all
meta-surfaces. In case of any disruption of operating THz
channel, a service migration to backup RIS is required, i.e., the
THz connection will be maintained by a backup RIS. Thus,
the probability of a maintaining a THz channel available to
ensure VR services can be expressed as follows

R = (1 − ηi)(1 − pi)k(1 − φi)k·

(cid:34)

·

1+ηi+(1−ηi)(cid:2) (cid:0)1−(1−pi)k(cid:1)+(1−pi)k (cid:0)1−(1−φi)k(cid:1) (cid:3)

(cid:21) (4)

We consider a RIS-based THz network including two sets
of RISs, i.e., a set of operating RISs R = {r1, ..., ri, ...rR}
and a set of backup RISs B = {b1, ..., bi, ...bR}, managed
by the RIS Controller. We study the channel allocation
problem regarding different RIS components, where VR
users are requesting service connections. The RIS ri
and bi contain N (i) meta-surfaces that can be allocated
as transmission channels. A service request can occupy
k ∈ {1, ..., K} channels/meta-surfaces based on the resource
availability, where K represents the maximum number of
channel a RIS can allocate to a single service, whereby
K ≤ min∀i:i∈[1,R]{N (i)}. In other words, for any service,

Our unreliability-aware resource allocation model assumes that
all RISs and all meta-surfaces are spatially separated from
each other. Thus, there is no failure dependency i.e. if a meta-
surface in a certain RIS fails, there is no direct effect on the
availability of other meta-surfaces that belong to the same or
other RISs.

Next, we provide an SMDP model described by the compo-
nents {S, A(s), p(s(cid:48)|s, a), r(s|a)}, where S is the state space,
A(s) is the set of feasible actions at the state s ∈ S, p(s(cid:48)|s, a)
is the transition probability from the state s to the state s(cid:48)
when an action a is chosen, and r(s|a) is the reward of the
system at the state s when choosing the action a.

                  RIS   RIS            RISPath 1Path 2RIS ControllerVR user requests services :eg.VR images failedsurface         RISTHz SBS    Tx/Rx...Path 4BackupBackupPath 3MainMainRIS   RIS   BackupMainfailed surfaceRIS   RIS   BackupMainfailed RISDownlinkfailedlinkD. System States

The system state s represents the number of VR service
requests with different number of allocated channels k in a
RIS ri, the availability of the RIS and the next event that can
happen in the system:

the return of a channel/meta-surface in the RIS ri to working
state after a failure.

The channel allocation scheme in RIS network has the

following capacity constraints:

∀i ∈ [1, R] :

K
(cid:88)

k=1

k · δk(ri) ≤ N (i),

(6)

S = {s|s =(∆M , ∆B, X, e)},

(5)

E. Actions

where a set ∆M = δr1, ..., δri, ..., δrR collects all subsets
δri, which describe a state s and indicate a number of VR
services requested δri = {δ1(ri), ..., δk(ri), ..., δK(ri)}. The
variable δk(ri) denotes the number of VR services allocated
with k channels in the main RIS ri. ∆B = δb1, ..., δbi , ..., δrR
collects all subsets δri, which describe a state s and indicate
a number of VR services transferred to backup RISs δbi =
{δ1(bi), ..., δk(bi), ..., δK(bi)}. The variable δk(bi) denotes the
number of VR services allocated with k channels in the backup
RIS bi.

A set X = {X r1, ..., X rR } describes the availability of RIS
devices and indicates the number of available meta-surfaces:
X ri = N (i) if all the elements of the RIS ri are available,
X ri = N (i) − j if j elements are failed and X ri = 0 if the
all elements are failed or the RIS hardware fails. The failure
of the backup RIS is not considered in our work.

e

the

that

The

and a

describes

such
a

1 , ..., Dri

any VR service

event
network,

an
THz RIS

variable
the VR over

set Dr = {Dr1, ..., Dri, ..., DrR },
k , ..., Dri

occurs
as
in
e = {Ar, Dr, Db, F ri, F m, Reri, Rem}, where
set
Ar denotes
request,
arrival of
a
subset
Dri = {Dri
K} collects the set of departure
events of a VR service from a main RIS ri, and Dri
k deﬁnes
the departure of a VR service allocated in k channel from
a RIS ri,a set Db = {Db1, ..., Dbi, ..., DbR }, and a subset
Dbi = {Dbi
K} collects the set of departure
events of a VR service from a backup RIS bi, and Dbi
k
deﬁnes the departure of a VR service allocated in k channel
from a backup RIS bi, an event F ri denotes the failure of the
controlled RIS (ri), a set F m = {F m
R } and
a variable F m
deﬁne the failure process of a meta-surface
i
in the RIS ri, an event Reri denotes the return process of
a RIS ri to the working state after a failure, similar, a set
Rem = {Rem
i deﬁne

R } and a variable Rem

1 , , ..., Rem

i , ..., Rem

k , ..., Dbi

1 , ..., Dbi

1 , ..., F m
i

, ..., F m

The system controller has several possibilities of actions a
to take when it receives a service request, whether to accept
or reject it. The action space A(s) is described as follows:

A(s) =





{0, (i, k)},

−1,
(−2, T ),

e ∈ Ar,
k ∈ {0, 1, 2, ..., K}, i ∈ {1, ..., R}
e ∈ {Dr, Db, Reri, Rem
i }
e ∈ F ri , F m

i

(7)
where a(s) = (i, k), ∀k ∈ {1, ..., K}∀i ∈ {1, ..., R} when a
VR service request is accepted and k channels are allocated
in RIS ri, a(s) = 0 denotes the action of rejecting a service
request. When a service completes and departs the RIS system,
a RIS node or channel/meta-surface returns into the system
after a failure, no action is required, and the controller needs
only to update the system state, we represent the action as
a(s) = −1. When a RIS fails, all the allocated channels
are transferred to the backup RIS, and when a meta-surface
(channel) fails, a corresponding channel will be allocated in
the backup RIS, we denote the information update and the
transfer action as a(s) = (−2, T ), where T is the transfer
vector from main RIS to backup RIS.
Deﬁnition 1. we deﬁne a mapping ψ(.) in N as follows:
(cid:40)

0,
1,

if x = 0
if x > 0

(8)

ψ(x) =

F. Transition Probabilities

We assume that the time period between two continuous
decision epoches follows an exponential distribution and
denoted as τ (s, a), given the current state s and action a.
Thus the mean rate of events for a speciﬁc state s and
action a denoted as γ(s, a), is the sum of the rates of all
events in the RIS system, which is expressed as follows:

∀i ∈ {1, ..., R}, ∀k ∈ {1, ..., K} : τ (s, a) = γ(s, a)−1 =





λs + Λr + Λm + Θr + Θm + Θ + kµs,
λs + Λr + Λm + Θr + Θm + Θ,
λs + (Λr − λr) + Λm + (Θr + µr) + Θm + Θ,
λs + Λr + (Λm − λm) + Θr + (Θm + µm) + Θ,
λs + Λr + Λm + Θr + Θm + Θ − kµs,
λs + Λr + (Λm + λm) + Θr + (Θm − µm) + Θ,
λs + (Λr + λr) + Λm + (Θr − µr) + Θm + Θ

e = Ar, a = (i, k),
e = Ar, a = 0,
e = Reri, a = −1,
e = Rem
i , a = −1,
e = Dri
k ||Dbi
k , a = −1,
e = F m
, a = (−2, T ),
e = F ri, a = (−2, T ),

i

(9)

where λs is the arrival rate of VR service requests. λr
and µr denotes the arrival rate (return of RIS to operating
after a failure) and the departure rate (failure) of a RIS,
Λr = λr (cid:80)R
i=1(1−ψ(X ri)) is the arrival rate of non available
RISs, Θr = µr (cid:80)R
i=1 ψ(X ri) is the failure rate of available
RISs, Λm = λm (cid:80)R
i=1(N (i) − X ri) is the arrival rate of non
available RIS meta-surfaces, and Θm = µm (cid:80)R
i=1 N (i) is the
failure rate of available RIS meta-surfaces.

i=1

i=1

(cid:80)K

(cid:80)K

When an arriving service request is rejected, or a RIS or
an meta-surface/channel returns to system, the total number
of existing services allocated in RISs is (cid:80)R
k=1 δk(ri),
so the departure rate of a VR service in RIS system is Θ =
(cid:80)R
k=1 kδk(ri)µs. When a service request is accepted
and k channels are allocated, one more service is added to
the system, thus the departure rate becomes Θ + kµs. When
a departure of a VR service from a RIS ri allocated in k
channels occurs, the departure rate becomes Θ − kµs. When a
RIS meta-surface/channel fails, the arrival rate and failure rate
of the RIS channels in the system are adjusted such that the
failed channel can return in the future and cannot fail again
while it is already failed. All services admitted in the case of
a failed RIS channel are transferred to the backup RIS, so it
should be accounted in the departure rate, which ensures the
system reliability, and thus the number of existing services
remains equal to Θ. When a RIS fails, the arrival rate and
failure rate of RIS in the system are also adjusted, and all
services are transferred to the backup RIS, thus the service
rate remains the same.

The transition probability in our markov decision model
from state s to state s(cid:48) when an action a is selected is denotes
as p(s(cid:48)|s, a), which can be determined under different events.
• State s = (∆M , ∆B, X, Ar), and a = 0. This state
describes the system in terms of number of channels
allocated in a RIS ri, RIS and RIS meta-surfaces avail-
ability, and the next event, which is in this case a
service arrival. The service arrival event can have two
actions accept or reject. The following equation shows the
transition probability when the service is blocked, where
the number of channels allocated in the RISs and in the
backup RISs, and RIS and RIS meta-surfaces availability
remain the same, and possible events can occur in the
future.

p(s(cid:48)|s, a) =






λs
τ (s,a)
kδk(ri)µs
τ (s,a)
kδk(bi)µs
τ (s,a)
λr
τ (s,a)
λm
τ (s,a)
µr
τ (s,a)
µm
τ (s,a)

s(cid:48) = (∆M , ∆B, X, Ar)
s(cid:48) = (∆R, ∆B, X, Dri
k )
s(cid:48) = (∆R, ∆B, X, Dbi
k )
s(cid:48) = (∆M , ∆B, X, Reri)
s(cid:48) = (∆M , ∆B, X, Rem
i )
s(cid:48) = (∆M , ∆B, X, F ri)
s(cid:48) = (∆M , ∆B, X, F m
i )

• State s = (∆M , ∆B, X, Ar), a = (i, k), and k ≥ 1.
this state describes the

Similar to the previous case,

system in terms of number of channels allocated in all
RISs, RIS and RIS meta-surfaces availability, and an
event of service arrival, when the service is accepted and
k channels are allocated in RIS ri.

p(s(cid:48)|s, a) =






λs
β(s)τ (s,a)
k(δk(ri)+1)µs
β(s)τ (s,a)
k(cid:48)δk(cid:48) (ri(cid:48) )µs
β(s)τ (s,a)

k(cid:48)δk(cid:48) (bi(cid:48) )µs
β(s)τ (s,a)
λr
β(s)τ (s,a)
λm
β(s)τ (s,a)
µr
β(s)τ (s,a)
µm
β(s)τ (s,a)

s(cid:48) = ((cid:100)∆M , ∆B, X, Ar)
s(cid:48) = ((cid:100)∆M , ∆B, X, Dri
k )
s(cid:48) = ((cid:100)∆M , ∆B, X, Dri(cid:48)
k(cid:48) )
k(cid:48) (cid:54)= k, i(cid:48) = i||k(cid:48) = k, i(cid:48) (cid:54)= i
s(cid:48) = ((cid:100)∆M , ∆B, X, Dbi(cid:48)
k(cid:48) )
s(cid:48) = ((cid:100)∆M , ∆B, X, Reri(cid:48) )
s(cid:48) = ((cid:100)∆M , ∆B, X, Rem
i(cid:48) )
s(cid:48) = ((cid:100)∆M , ∆B, X, F ri(cid:48) )
s(cid:48) = ((cid:100)∆M , ∆B, X, F m
i(cid:48) )

(11)

where β(s) = (cid:80)R

i=1 ψ(X ri ) denotes the number of RISs
that are available at the state s, and (cid:100)∆M = δr1 , ..., δri +
Ik, ..., δrR , Ik denotes a vector having K elements, with k-
th element equal to 1 and 0 for the others.

• State s = (∆M , ∆B, X, Dri

k ), a = −1. This state
describes the system in terms of number of channels
allocated in all RISs, RIS and RIS meta-surfaces avail-
ability, and an event of service departure with k allocated
channels from the main RIS ri.

p(s(cid:48)|s, a) =






λs
τ (s,a)
k(δk(ri)−1)µs
τ (s,a)
k(cid:48)δk(cid:48) (ri(cid:48) )µs
τ (s,a)

k(cid:48)δk(cid:48) (bi(cid:48) )µs
τ (s,a)

λr
τ (s,a)
λm
τ (s,a)
µr
τ (s,a)
µm
τ (s,a)

s(cid:48) = ((cid:100)∆M , ∆B, X, Ar)
s(cid:48) = ((cid:100)∆M , ∆B, X, Dri
k )
s(cid:48) = ((cid:100)∆M , ∆B, X, Dri(cid:48)
k(cid:48) )
k(cid:48) (cid:54)= k, i(cid:48) = i||k(cid:48) = k, i(cid:48) (cid:54)= i
s(cid:48) = ((cid:100)∆M , ∆B, X, Dbi(cid:48)
k(cid:48) )
s(cid:48) = ((cid:100)∆M , ∆B, X, Reri(cid:48) )
s(cid:48) = ((cid:100)∆M , ∆B, X, Rem
i(cid:48) )
s(cid:48) = ((cid:100)∆M , ∆B, X, F ri(cid:48) )
s(cid:48) = ((cid:100)∆M , ∆B, X, F m
i(cid:48) )

(12)

(10)

where (cid:100)∆M = δr1, ..., δri − Ik, ..., δrR .

• State s = (∆M , ∆B, X, Dbi

k ), a = −1. This state
describes the system in terms of number of channels
allocated in all RISs, RIS and RIS meta-surfaces avail-
ability, and an event of service departure with k allocated
channels from the backup RIS bi.

p(s(cid:48)|s, a) =






λs
τ (s,a)
k(cid:48)δk(cid:48) (ri(cid:48) )µs
τ (s,a)

k(δk(bi)−1)µs
τ (s,a)
k(cid:48)δk(cid:48) (bi(cid:48) )µs
τ (s,a)

λr
τ (s,a)
λm
τ (s,a)
µr
τ (s,a)
µm
τ (s,a)

s(cid:48) = (∆M , (cid:100)∆B, X, Ar)
s(cid:48) = ((cid:100)∆M , ∆B, X, Dri(cid:48)
k(cid:48) )
s(cid:48) = (∆M , (cid:100)∆B, X, Dbi
k )
s(cid:48) = (∆M , (cid:100)∆B, X, Dbi(cid:48)
k(cid:48) )
k(cid:48) (cid:54)= k, i(cid:48) = i||k(cid:48) = k, i(cid:48) (cid:54)= i
s(cid:48) = (∆M , (cid:100)∆B, X, Reri(cid:48) )
s(cid:48) = (∆M , (cid:100)∆B, X, Rem
i(cid:48) )
s(cid:48) = (∆M , (cid:100)∆B, X, F ri(cid:48) )
s(cid:48) = (∆M , (cid:100)∆B, X, F m
i(cid:48) )

where (cid:100)∆B = δb1, ..., δbi − Ik, ..., δbR .

• State s = (∆M , ∆B, X, Reri), a = −1. This state
describes the system in terms of number of channels
allocated in all RISs, RIS and RIS meta-surfaces avail-
ability, and the next event, which is a return of a RIS ri
to working state after a failure, where X ri = 0.

p(s(cid:48)|s, a) =






λs
τ (s,a)
kδk(ri(cid:48) )µs
τ (s,a)

kδk(bi(cid:48) )µs
τ (s,a)
λr
τ (s,a)
λm
τ (s,a)
µr
τ (s,a)
µm
τ (s,a)

s(cid:48) = (∆M , ∆B, (cid:98)X, Ar)
s(cid:48) = (∆R, ∆B, (cid:98)X, Dri(cid:48)
k )
i(cid:48) (cid:54)= i
s(cid:48) = (∆R, ∆B, (cid:98)X, Dbi(cid:48)
k )
s(cid:48) = (∆M , ∆B, (cid:98)X, Reri)
s(cid:48) = (∆M , ∆B, (cid:98)X, Rem
i )
s(cid:48) = (∆M , ∆B, (cid:98)X, F ri)
s(cid:48) = (∆M , ∆B, (cid:98)X, F m
i )

(14)

where (cid:98)X ri = N (i)
• State s = (∆M , ∆B, X, Rem

i ), a = −1. This state
describes the system in terms of number of channels
allocated in all RISs, RIS and RIS meta-surfaces avail-
ability, and the next event, which is a return of a meta-
surface in RIS ri to the working state after a failure,
where X ri = N (i) − j, and j is the number of failed
meta-surfaces.

p(s(cid:48)|s, a) =






λs
τ (s,a)
kδk(ri(cid:48) )µs
τ (s,a)

kδk(bi(cid:48) )µs
τ (s,a)
λr
τ (s,a)
λm
τ (s,a)
µr
τ (s,a)
µm
τ (s,a)

s(cid:48) = (∆M , ∆B, (cid:98)X, Ar)
s(cid:48) = (∆R, ∆B, (cid:98)X, Dri(cid:48)
k )
i(cid:48) (cid:54)= i
s(cid:48) = (∆R, ∆B, (cid:98)X, Dbi(cid:48)
k )
s(cid:48) = (∆M , ∆B, (cid:98)X, Reri)
s(cid:48) = (∆M , ∆B, (cid:98)X, Rem
i )
s(cid:48) = (∆M , ∆B, (cid:98)X, F ri)
s(cid:48) = (∆M , ∆B, (cid:98)X, F m
i )

where (cid:98)X ri = N (i) − j + 1

• State s = (∆M , ∆B, X, F ri), a = (−2, T ). This state
describes the system in terms of number of channels allo-
cated in all RISs, RIS and RIS meta-surfaces availability,
and the next event, which is the failure process of a RIS
ri, where X ri = N (i) − j ≥ 1. The vector T transfers
the allocated channels in ri to bi.

λs
τ (s,a)
kδk(ri(cid:48) )µs
τ (s,a)

kδk(bi(cid:48) )µs
τ (s,a)
λr
τ (s,a)
λm
τ (s,a)
µr
τ (s,a)

µm
τ (s,a)






s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, Ar)
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, Dri(cid:48)
k )
i(cid:48) (cid:54)= i
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, Dbi(cid:48)
k )
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, Reri)
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, Rem
i )
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, F ri(cid:48) )
i(cid:48) (cid:54)= i
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, F m
i(cid:48) )
i(cid:48) (cid:54)= i

(16)

(13)

p(s(cid:48)|s, a) =

• State s = (∆M , ∆B, X, F m

where (cid:98)X ri = 0, (cid:100)∆M = ∆M − T , (cid:100)∆B = ∆B + T , T =
0, ..., 0, δri, 0, ..., 0, i.e. (cid:100)∆M = δr1, ..., δri−1, 0, δri+1, ..., δrR .
i ), a = (−2, T ). This state
describes the system in terms of number of channels allo-
cated in all RISs, RIS and RIS meta-surfaces availability,
and the next event, which is the failure process of a RIS
meta-surface in the RIS ri, where X ri = N (i) − j ≥ 1.
The vector T transfers one or more allocated channels
from ri to the backup RIS bi.

p(s(cid:48)|s, a) =

λs
τ (s,a)
kδk(ri(cid:48) )µs
τ (s,a)

kδk(bi(cid:48) )µs
τ (s,a)
λr
τ (s,a)
λm
τ (s,a)
µr
τ (s,a)

µm
τ (s,a)






s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, Ar)
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, Dri(cid:48)
k )
if X ri ≤ k then: i(cid:48) (cid:54)= i
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, Dbi(cid:48)
k )
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, Reri)
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, Rem
i )
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, F ri(cid:48) )
i(cid:48) (cid:54)= i
s(cid:48) = ((cid:100)∆M , (cid:100)∆B, (cid:98)X, F m
i(cid:48) )
if X ri = 1 then: i(cid:48) (cid:54)= i

(17)

where (cid:98)X ri = N (i)−j −1, (cid:100)∆M = ∆M −T , (cid:100)∆B = ∆B +T ,

T is determined using Algorithm. 1.

(15)

G. Rewards

Given the system state s and the corresponding action a,
the system reward of the VR over THz RIS system is denoted
by

r(s, a) = w(s, a) − g(s, a)

(18)

Algorithm 1 Finding Service Transfer Vector

IV. SMDP-BASED CHANNEL ALLOCATION MODEL

1, .., T i

k, .., T i

K},

1: Input: s = (∆M , ∆B, X, F m
i )
2: Initialization: T = T 1, ..., T R, T i = {T i
3: T i
k = 0, ∀i ∈ {1, ..., R}, ∀k ∈ {1, ..., K}.
4: k = 1
5: while δk(ri) = 0 do
6:
7:
8: end while
9: T i
k = 1
10: Return T

T i
k = 0
k = k + 1

In this section, we develop an SMDP-based channel al-
location model to study the performance of a RIS system
considering the unreliability of RIS devices. We aim to take
optimal decisions at every decision epochs; arrival of new
service request, departure of a service, failure of a RIS, failure
of a meta-surface, return of a RIS, or return of a failed
meta-surface, where our goal is to maximize the long-term
expected system rewards. The expected discounted reward is
given based on the model in [6] as follows:
(cid:90) τ

r(s, a) =w(s, a) − c(s, a) · Ea
s {

e−αtdt}

0
1 − e−ατ
α

}

(22)

where w(s, a) is the net lump sum incomes of VR users at
the state s when action a is taken and an event e occurs, and
g(s, a) is the expected system costs.

=w(s, a) − c(s, a) · Ea
s {

=w(s, a) −

c(s, a)
α + τ (s, a)

w(s, a) =






Rk
0
0
0
−εN (i)
−ε (cid:80)K

k=1 kT i
k

e = Ar, a = (i, k)
e = Ark, a = 0
e = Reri or Rem
e = Dri
k orDbi
e = F ri, a = (−2, T )
, e = F m
i a = (−2, T )

k , a = −1

i , a = −1

where α is a continuous-time discount factor.

Using the deﬁned transition probabilities eq. (10), (11),
(12), (13),(14), (15),(16),(17), we can obtain the maximum
long-term discounted reward using a discounted reward model
deﬁned in [6] as

(19)

ν(s) = max
a∈A(s)

r(s, a) + λ

(cid:40)

(cid:41)

p(s(cid:48)|s, a)ν(s(cid:48))

(23)

(cid:88)

s(cid:48)∈S

where the variable Rk = Q − Z
k denotes the reward of
the RIS system for accepting of the requested service and
allocating k channels. Q denotes the income reward from
VR user satisfaction, Z
k denotes the transmission cost of
occupying k channels. The constant ε denotes the penalty
of a meta-surface failure. We penalize the failure of a RIS
as a summation of the penalties of all meta-surfaces as
−εN (i). When a meta-surface fails, a number of services
are transferred to the backup RIS, and thus we consider a
penalty proportional to the number of re-allocated channels
as −ε (cid:80)K
k. In our work, we don’t penalize rejected
services, neither reward accomplished services or returned
RISs or returned meta-surfaces.

k=1 kT i

The expected system cost g(s, a) is deﬁned as:

g(s, a) = c(s, a) · τ (s, a)

(20)

where τ (s, a) is the expected service time deﬁned by eq. (9)
from the state s to the next state in case that action a is
chosen and c(s, a) is the service holding cost rate when the
RIS system is in state s in case that action a is selected.
Furthermore, c(s, a) can be described by the number of
occupied channels in the RIS system, as follows:

c(s, a) =

R
(cid:88)

K
(cid:88)

i=1

k=1

c · k · (δri

k + δbi
k )

(21)

where c represents the utilization cost of a channel unit.

where λ = τ (s, a)/(α + τ (s, a)). In the SMDP model, the
value of ν(s) in a strategy ψ is computed based on the value
ν(s(cid:48)) obtained in the strategy ψ −1, and as an initial value, the
discounted reward can be set to zero for all states to initialize
the computation, which will converge afterwards to the optimal
solution.
To simplify the computation of the reward, let ρ be a ﬁnite
constant, where ρ = λs + λrR + λm (cid:81)R
i=1 N (i) + µrR +
µm (cid:81)R
(cid:80)R
i=1 N (i) < ∞. We deﬁne p(s(cid:48)|s, a),
ν(s), and r(s, a) as the uniformed transition probability, long-
term reward, and reward function, respectively, and given by:

i=1 N (i) + µs

r(s, a) = r(s, a)

(cid:40)

p(s(cid:48)|s, a) =

, λ =

τ (s, a) + α
ρ + α
1 − [1−p(s(cid:48)|s,a)]τ (s,a)
ρ
p(s(cid:48)|s,a)τ (s,a)
ρ

ρ
ρ + α

s(cid:48) = s
s(cid:48) (cid:54)= s

(24)

(25)

After uniformization, the optimal reward is given by:
(cid:41)

(cid:40)

ν(s) = max
a∈A(s)

r(s, a) + λ

p(s(cid:48)|s, a)ν(s(cid:48))

(26)

(cid:88)

s(cid:48)∈S

In order to solve our SMDP-based Channel Allocation (CA)
model, we consider an iterative algorithm described as follows:

After obtaining the optimal policy from Algorithm 2, the
steady states probabilities are computed using the following
system of equations:

π(P − J) = 0,

π(s) = 1

(cid:88)

s∈S

(27)

Algorithm 2 Iterative SMDP-CA Algorithm
1: Step 1 (Initialization): ν0(s) = 0, for all s ∈ S. Set the

value of (cid:15) > 0, and iteration t = 0.

2: Step 2: Using eq. 26, compute the discounted reward for

each state s:

(cid:40)

νt+1(s) = max
a∈A(s)

r(s, a) + λ

(cid:41)

p(s(cid:48)|s, a)νt(s(cid:48))

(cid:88)

s(cid:48)∈S

3: Step 3:
4: if (cid:107)νt+1 − νt(cid:107) > (cid:15) then t ←− t + 1, go to Step 2
5: else go to Step 4
6: end if
7: Step 4: Compute the optimal policy for all s ∈ S

(cid:40)

d∗
(cid:15) (s) ∈ arg max
a∈A(s)

r(s, a) + λ

(cid:41)

p(s(cid:48)|s, a)νt+1(s(cid:48))

(cid:88)

s(cid:48)∈S

where π(s) represents the steady state probability at state s, P
is the transition probabilities matrix, considering the optimal
policy d∗

(cid:15) , and J denotes the all-ones matrix.

V. NUMERICAL RESULTS

In this section, we validate and evaluate the proposed
SMDP-based unreliability-aware channel allocation for VR
over THz RIS system using a Python simulator to implement
the model and the algorithms proposed. The parameters used
for simulation are summarized in Table I. To investigate the
performance of the RIS system under different system settings,
the simulation results present a function of the service arrival
rate, service departure rate, RIS failure rate, RIS return rate.
We deﬁne 4 scenarios with following settings: scenario 1) the
RIS network is operating using a single main RIS with a single
backup RIS (R = 1) containing 5 meta-surfaces (N (1) = 5),
and allowing users to allocate only one channel for each VR
service (K = 1); scenario 2) the RIS network is operating
using a two main RIS with two backup RISs (R = 2), similar
to scenario 1, K = 1; scenario 3) the RIS network is operating
with three main RISs and three backup RISs (R = 3), the
system allows the allocation of two channels at maximum for
a single VR user request (K = 2), where each RIS contains
5 meta-surfaces (N (ri) = 5, ∀i ∈ [1, 2, 3]); and scenario
4) the RIS network is operating with three main RISs and
three backup RISs (R = 3), the system allows the allocation
of two channels at maximum for a single VR user request
(K = 2), whereby the amount of meta-surfaces in RISs was
set to N (r1) = 4, N (r2) = 3, N (r3) = 2.
The setting of service arrival rate, average departure rate, RIS
failure rate, rewards are shown in Table I. Similar to [18],
the discount factor α is 0.1. We set various values for service
arrival rates (λs) lower, equal, and greater than the service
rate, in order to evaluate the behavior of the channel allocation
solution under different setups.

Fig. Fig. 2 shows the acceptance probability as a function
of the RIS failure rate under different scenarios deﬁned above.

Table I: Simulation Parameters in RIS System.
Value
Parameter
R
100
150
K
100
c
λs
5
λr
0.01
α

Parameter
(cid:15)
Q
Z
µs
µr

Value
1-3
1-2
1
1-10
1
0.1

Figure 2: Action probabilities with different RIS failure rates for each
deﬁned scenario (λs = 1).

Here, we set λs = 1. As expected, the acceptance probability
of a service decreases with increasing failure rate of RISs. The
decrease of the acceptance probability can be explained with
the increasing request blocking due to the channels capacity of
the RIS system reduced by failed RISs. The highest acceptance
probability of around 68% could be reached in scenario 3 with
3 RISs and low RIS failure rate. This can be explained by
the fact that the high RIS channel availability with 4 RISs
and 4 backup RISs, where hardware failure is managed by the
backup RISs. The RIS system conﬁgured based on the scenario
1 and 2 show the highest acceptance probability for the higher
RIS failure rate starting from µr = 0.1 and decreases from 45
% to 30%. The RIS system in scenario 4 shows the lowest
service acceptance probability up to 37 %, as the RIS system
can not always satisfy the amount of VR user requests with
the limited amount of RISs and additional RIS failures.

Next we investigate the average system reward as a function
of different arrival rates of service requests and different
RIS failure rates. Fig. 3 illustrates that the highest and the
lowest average reward could be provided in scenario 1, and
in scenarios 4 and 3 with λs > 9, respectively. In general,
the average reward decreases with increasing arrival rate of
service requests, which is a result of the limited channel
capacity of RIS system. Additionally, in scenarios 3 and 4,
the service requests can be blocked, when available RIS do
not provide enough meta-surfaces/channels for the requested
service. When the service arrival rate increases, the overall
capacity needed to provide all service requests is higher than
the RIS capacity. As a result, the system rejects any new
incoming service requests, which decreases the average reward

0.00.10.20.30.40.5RIS failure rate (r)0.200.250.300.350.400.450.500.550.60Acceptance probabilityScenario 1Scenario 2Scenario 3Scenario 4Figure 3: Average system reward with different arrival rates of services for
each deﬁned scenario.

Figure 5: Blocking probabilities with different arrival rates of services for
each deﬁned scenario.

Figure 4: Average system reward with different RIS failure rates for each
deﬁned scenario (λs = 1).

Figure 6: Blocking probabilities with different RIS failure rates for each
deﬁned scenario (λs = 1).

value. The average reward is a good metric for future work to
compare an optimal channel allocation policy with heuristic
or machine learning based allocation algorithms.

Fig. 4 shows an average reward as a function of the RIS
failure rate. In our settings we highly penalize the RIS failure,
which explains the drastic decrease of the average reward,
since the probability of accepting services becomes lower, and
where we increased the number of RIS. In Fig. 4 the average
reward follows a convex decreasing function in terms of RIS
failure rates, with service arrival rate λs equal to 1. The ﬁgure
shows that with low failure rate the reward is the same under
all scenarios, and then it becomes the worst with scenarios
that have more RIS. The minimum reward for scenario 1 is 0,
which means that the single RIS has failed and no service is
accepted, while for scenario 3, the system can have failed RIS
and still accepts service which will have a high probability to
be lost in the case of failure, causing a negative reward value.
Finally we illustrate in Fig. 5-6 the blocking probabilities
with different arrival rates of services and with different RIS
failure rates under different scenarios. We maintain the same
conﬁguration deﬁned in table I, where µr = 0.01 when

varying the service arrival rate and λs = 1 when varying the
RIS failure rate. The blocking probability is very low with low
arrival rates, less than 0.001. It increases sharply after reaching
the value λs = 5, in scenario 1, due to the lack of channels
to allocate of a single RIS system and reaches the value 0.31
when λs = 10. For high service arrival rate, the more we
increase the number of RISs the more stable our system gets.
However, for low and medium arrival rates, scenario 1 with
less RISs performs better than scenario 4 with 3 RISs, thus
increasing the number of RISs and meta-surfaces does not
always improve the performance in terms of service blocking
and long-term reward. In Fig. 6, we ﬁx the service arrival rate
to 1 and we vary the RIS failure rate, we remark that the
blocking probability is equal to 0 all values under µr = 0.1
which shows the stability of our channel allocation algorithm.
For µr = 0.5, the blocking increases then to reach a maximum
of 0.14, 0.03 and 0.01 for scenarios 1, 2 and 3, respectively.
We see that increasing the number of RISs and meta-surfaces
highly improves the performance of RIS network in terms of
service blocking.

246810Service request arrival rate (s)10080604020020Average rewardScenario 1Scenario 2Scenario 3Scenario 40.00.10.20.30.40.5RIS failure rate (r)151050510152025Average rewardScenario 1Scenario 2Scenario 3Scenario 4246810Service request arrival rate (s)0.000.050.100.150.200.250.300.35Blocking probabilityScenario 1Scenario 2Scenario 3Scenario 40.00.10.20.30.40.5RIS failure rate (r)0.000.050.100.150.200.250.30Blocking probabilityScenario 1Scenario 2Scenario 3Scenario 4VI. CONCLUSION

We considered channel resource allocation in the virtual
reality (VR) applications over RIS network with controlled
access of VR users request by Semi-Markov decision Process
(SMDP). We introduced an optimal channel allocation scheme
to ensure the reliability and maximize the system reward
in which a RIS device and its meta-
in a set of RISs,
surface elements are vulnerable to failures. We formulated
the problem of RIS-unreliability-aware channel allocation as
an SMDP model considering multiple RIS devices in an
indoor environment used to provide services to VR users.
Numerical results showed the average reward and blocking
probability with various service arrival and RIS failure rates,
and under different network conﬁgurations. The system com-
puted corresponding policies to each service arrival rate to
ensure the reliability and maximize long-term rewards. We
showed that the proposed scheme was generally applicable,
dynamic and provided an efﬁcient solution to the channel
allocation problem. Our proposed model works for online
channel assignment to users using an iterative solution, that
assumes the knowledge about some system statistics, such
as the RIS failure, service arrival, and service departure.
We also showed that our scheme improved the QoS of VR
users with regard to their arrival rate and RIS meta-surfaces
availability. Moreover, when VR user arrival rate were high,
the channels were allocated with the minimum requirements
for a VR service to operate, which decreased the blocking
probability. We showed that increasing the number of RISs
and meta-surfaces does not always improve the performance
in terms of service blocking and long-term reward, for low and
medium service arrival rate. Such ﬁnding allows us to better
dimensioning RIS networks based on the expected service
rate, in order to improve costs and performance at the same
time. In our future work, a large-scale solution based on
reinforcement learning can be proposed to solve value iteration
algorithm, which is known by its exponential growth. Also,
the RIS system can consider VR users location to prioritize
RIS associations before allocating channels. Finally, failure
dependency between RIS devices can be considered in future
system design.

ACKNOWLEDGMENT

This work was partially supported by the DFG Project
Nr. JU2757/12-1, "Meteracom: Metrology for parallel THz
communication channels."

REFERENCES

[1] W. Saad, M. Bennis, and M. Chen, “A vision of 6g wireless systems:
Applications, trends, technologies, and open research problems,” IEEE
network, vol. 34, no. 3, pp. 134–142, 2019.

[2] C. Pan, H. Ren, K. Wang, W. Xu, M. Elkashlan, A. Nallanathan,
and L. Hanzo, “Multicell mimo communications relying on intelligent
reﬂecting surfaces,” IEEE Transactions on Wireless Communications,
vol. 19, no. 8, pp. 5218–5233, 2020.

[3] M. Bensalem and A. Jukan, “Benchmarking machine learning techniques
for thz channel estimation problems,” arXiv preprint arXiv:2104.08122,
2021.

[4] Q. Wu, S. Zhang, B. Zheng, C. You, and R. Zhang, “Intelligent reﬂecting
surface-aided wireless communications: A tutorial,” IEEE Transactions
on Communications, vol. 69, no. 5, pp. 3313–3351, 2021.

[5] X. Y. Li and M. S. Tong, “Array failure diagnosis and active compen-
sation for intelligent reﬂecting surfaces,” in 2021 IEEE International
Symposium on Antennas and Propagation and USNC-URSI Radio
Science Meeting (APS/URSI).

IEEE, 2021, pp. 1769–1770.

[6] M. L. Puterman, Markov decision processes: discrete stochastic dynamic

programming.

John Wiley & Sons, 2014.

[7] M. Chen, W. Saad, and C. Yin, “Virtual reality over wireless networks:
Quality-of-service model and learning-based resource management,”
IEEE Transactions on Communications, vol. 66, no. 11, pp. 5621–5635,
2018.

[8] A. T. Z. Kasgari, W. Saad, and M. Debbah, “Human-in-the-loop wireless
communications: Machine learning and brain-aware resource manage-
ment,” IEEE Transactions on Communications, vol. 67, no. 11, pp.
7727–7743, 2019.

[9] C. Chaccour, M. N. Soorki, W. Saad, M. Bennis, and P. Popovski,
“Risk-based optimization of virtual reality over terahertz reconﬁgurable
intelligent surfaces,” in ICC 2020-2020 IEEE International Conference
on Communications (ICC).

IEEE, 2020, pp. 1–6.

[10] K. Wang, C.-T. Lam, and B. K. Ng, “Doppler effect mitigation using
reconﬁgurable intelligent surfaces with hardware impairments,” in 2021
IEEE Globecom Workshops (GC Wkshps).

IEEE, 2021, pp. 1–6.

[11] A. Zappone, M. Di Renzo, X. Xi, and M. Debbah, “On the optimal
number of reﬂecting elements for reconﬁgurable intelligent surfaces,”
IEEE Wireless Communications Letters, vol. 10, no. 3, pp. 464–468,
2020.

[12] C. Huang, S. Hu, G. C. Alexandropoulos, A. Zappone, C. Yuen,
R. Zhang, M. Di Renzo, and M. Debbah, “Holographic mimo surfaces
for 6g wireless networks: Opportunities, challenges, and trends,” IEEE
Wireless Communications, vol. 27, no. 5, pp. 118–125, 2020.

[13] B. Di, H. Zhang, L. Song, Y. Li, Z. Han, and H. V. Poor, “Hybrid
beamforming for reconﬁgurable intelligent surface based multi-user
communications: Achievable rates with limited discrete phase shifts,”
IEEE Journal on Selected Areas in Communications, vol. 38, no. 8, pp.
1809–1822, 2020.

[14] C. Huang, A. Zappone, G. C. Alexandropoulos, M. Debbah, and
C. Yuen, “Reconﬁgurable intelligent surfaces for energy efﬁciency in
wireless communication,” IEEE Transactions on Wireless Communica-
tions, vol. 18, no. 8, pp. 4157–4170, 2019.

[15] M. Jung, W. Saad, M. Debbah, and C. S. Hong, “On the optimal-
ity of reconﬁgurable intelligent surfaces (riss): Passive beamforming,
modulation, and resource allocation,” IEEE Transactions on Wireless
Communications, vol. 20, no. 7, pp. 4347–4363, 2021.

[16] J. Zuo, Y. Liu, Z. Qin, and N. Al-Dhahir, “Resource allocation in
intelligent reﬂecting surface assisted noma systems,” IEEE Transactions
on Communications, vol. 68, no. 11, pp. 7170–7183, 2020.

[17] X. Li, J. Fang, F. Gao, and H. Li, “Joint active and passive beamforming
for intelligent reﬂecting surface-assisted massive mimo systems,” arXiv
preprint arXiv:1912.00728, 2019.

[18] M. Li, L. Zhao, and H. Liang, “An smdp-based prioritized channel
allocation scheme in cognitive enabled vehicular ad hoc networks,” IEEE
Transactions on Vehicular Technology, vol. 66, no. 9, pp. 7925–7933,
2017.

[19] R. Li and P. Zhu, “Spectrum allocation strategies based on qos in
cognitive vehicle networks,” IEEE Access, vol. 8, pp. 99 922–99 933,
2020.

[20] L. S. Rothman, I. E. Gordon, A. Barbe, D. C. Benner, P. F. Bernath,
M. Birk, V. Boudon, L. R. Brown, A. Campargue, J.-P. Champion
et al., “The hitran 2008 molecular spectroscopic database,” Journal of
Quantitative Spectroscopy and Radiative Transfer, vol. 110, no. 9-10,
pp. 533–572, 2009.

[21] J. M. Jornet and I. F. Akyildiz, “Channel modeling and capacity analysis
for electromagnetic wireless nanonetworks in the terahertz band,” IEEE
Transactions on Wireless Communications, vol. 10, no. 10, pp. 3211–
3221, 2011.

